tcpManager={},tcpManager.websocket={init:function(){wxGame.webSocketInit||(wxGame.webSocketInit=!0,tywx.NotificationCenter.ignoreScope(this),tywx.NotificationCenter.listen(tywx.EventType.SDK_LOGIN_SUCCESS,tcpManager.websocket.sdkLoginSuccess,this),tywx.UserInfo.userId&&tcpManager.websocket.sdkLoginSuccess(),tywx.NotificationCenter.listen(tywx.EventType.TCP_OPENED,tcpManager.websocket.tcpConnect,this),tywx.NotificationCenter.listen(tywx.EventType.SEND_HEART_BEAT,tcpManager.websocket.heartbeat,this),tywx.NotificationCenter.listen(tywx.EventType.TCP_RECEIVE,tcpManager.websocket.receiveData,this))},sdkLoginSuccess:function(){console.log("SDK_LOGIN_SUCCESS ..."),tywx.TCPClient.connectStatus=tywx.TCPClient.CONNECT_STATUS_FAIL,tywx.TCPClient.timerSchedule()},tcpConnect:function(e,t){tcpManager.websocket.bindUser(),tcpManager.websocket.heartbeat(null,null)},heartbeat:function(e,t){var n={cmd:tcpManager.cmdType.HEART_BEAT,params:{deviceId:tywx.SystemInfo.deviceId}};tywx.TCPClient.sendMsg(n)},bindUser:function(e,t){var n={cmd:tcpManager.cmdType.CMD_BIND_USER,params:{authorCode:tywx.UserInfo.authorCode}};tywx.TCPClient.sendMsg(n)},sendData:function(e){e&&tywx.TCPClient.sendMsg(e)},receiveData:function(e){tywx.LOGD("receiveData: ",JSON.stringify(e)),e.cmd==tcpManager.cmdType.user_info5?tywx.NotificationCenter.trigger(tcpManager.gameEvent.BIND_USER_SUCCESS):tcpManager.receiveCmd.process(e)}};