wxGame.GlobalFuncs={},wxGame.GlobalFuncs.randomForArray=function(e){return e&&0!=e.length?e[Math.floor(Math.random()*e.length)]:0},wxGame.GlobalFuncs.checkBSGS=function(e){if(!e)return!0;var a;for(var n in wxGame.Global.bsgsCitys)if(a=wxGame.Global.bsgsCitys[n],-1<e.indexOf(a))return!0;return!1},wxGame.GlobalFuncs.getOpenData=function(e){try{if(!wx.hasOwnProperty("getOpenDataContext"))return null;var a=wx.getOpenDataContext();if(a)return a}catch(e){}return null},wxGame.GlobalFuncs.upDateRankData=function(e){if(tywx.UserInfo.userId){var a=wxGame.GlobalFuncs.getOpenData(!0);a&&a.postMessage({method:"updateRank",sumScore:e,userId:tywx.UserInfo.userId})}},wxGame.GlobalFuncs.upDateRankDataWeek=function(e){var a=wxGame.GlobalFuncs.getOpenData(!0);a&&a.postMessage({method:"updateRankWeek",week:e})},wxGame.GlobalFuncs.getCurWeek=function(){var e=(new Date).getTime()/1e3,a=parseInt((e-1523203200)/604800);return wxGame.GlobalFuncs.upDateRankDataWeek(a+""),a},wxGame.GlobalFuncs.getFriendRank=function(){try{var e=wxGame.GlobalFuncs.getOpenData();if(!e)return;var a=wxGame.GlobalFuncs.getCurWeek();e.postMessage({method:"showFriendRank",userId:tywx.UserInfo.userId,rankType:"sumScore",week:a})}catch(e){}},wxGame.GlobalFuncs.getGroupRank=function(e){try{var a=wxGame.GlobalFuncs.getOpenData();if(!a)return;var n=wxGame.GlobalFuncs.getCurWeek();a.postMessage({method:"showGroupRank",shareTicket:e,userId:tywx.UserInfo.userId,rankType:"sumScore",week:n})}catch(e){}},wxGame.GlobalFuncs.getThirdRankInfo=function(){try{var e=wxGame.GlobalFuncs.getOpenData(!0);if(!e)return;var a=wxGame.GlobalFuncs.getCurWeek();e.postMessage({method:"getResultRank",week:a,userId:tywx.UserInfo.userId,sumScore:wxGame.Global.gameInfo.score})}catch(e){}},wxGame.GlobalFuncs.getFriendRankInfo=function(e,a,n,t){try{var o=wxGame.GlobalFuncs.getOpenData(!0);if(!o)return;var c=wxGame.GlobalFuncs.getCurWeek();o.postMessage({method:"getFriendGameRank",week:c,userId:tywx.UserInfo.userId,sumScore:wxGame.Global.gameInfo.score,lastSCore:n,beganScore:e,endScore:a,isNoUpdate:t})}catch(e){}},wxGame.GlobalFuncs.showOrigin=function(){var e=wxGame.GlobalFuncs.getOpenData();e&&e.postMessage({method:"showOrigin"})},wxGame.GlobalFuncs.vibrateShort=function(){if(wxGame.Global.isVibrateShort)try{wx.vibrateShort({success:function(){},fail:function(){},complete:function(){}})}catch(e){wxGame.LOGE("振动失效"+JSON.stringify(e))}},wxGame.GlobalFuncs.getCurDay=function(){var e=(new Date).getTime()/1e3,a=new Date(1e3*e),n=a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate();return wxGame.LOGD("今天是:"+n),n},wxGame.GlobalFuncs.setInLocalStorage=function(e,a){try{cc.sys.localStorage.setItem(e,a+"")}catch(e){}},wxGame.GlobalFuncs.ReadStringFromLocalStorage=function(e,a){if(!cc.sys.localStorage.getItem)return a;var n=cc.sys.localStorage.getItem(e);return n?String(n):a},wxGame.GlobalFuncs.isEmptyObject=function(e){for(var a in e)return!1;return!0},wxGame.GlobalFuncs.showToast=function(t){wxGame.msgBoxNode&&(wxGame.msgBoxNode.closeAction(),wxGame.msgBoxNode=null);cc.loader.loadRes("prefab/seq_toast_tips",function(e,a){var n=cc.instantiate(a);cc.director.getScene().addChild(n),wxGame.GlobalFuncs.setToCenter(n),wxGame.msgBoxNode=n.getComponent("seq_toast_tips"),wxGame.msgBoxNode.setTitleWithString(t)})},wxGame.GlobalFuncs.formatGold=function(e){if(!e)return 0;if(e<1e3)return e;var a=e;return 1e3<=e&&e<1e6?a=(e/1e3).toFixed(2)+"K":1e6<=e&&(a=(e/1e6).toFixed(2)+"M"),a},wxGame.GlobalFuncs.playGame=function(){var e="seq_game";if(cc.director.getScene().name==e)return wxGame.NotificationCenter.trigger(wxGame.EventType.GAME_OVER_RESET),void cc.director.getScene().runAction(cc.sequence(cc.delayTime(1.2),cc.callFunc(function(){wxGame.NotificationCenter.trigger(wxGame.EventType.BEGIN_GAME)})));cc.director.loadScene(e)},wxGame.GlobalFuncs.goToBeginScene=function(){var e="seq_begin";if(cc.director.getScene().name!=e){cc.director.loadScene(e,function(){})}},wxGame.GlobalFuncs.proGressAni=function(e,a,n){e.stopAllActions();var t;t=e.getPosition(),0<a-t.x?e.runAction(cc.sequence(cc.moveTo(n,cc.p(a,t.y)),cc.callFunc(function(){}))):e.setPosition(cc.p(a,t.y))},wxGame.GlobalFuncs.btnScaleEffect=function(e,a,n){e.stopAllActions();var t=1;n&&(t=n);var o=cc.scaleTo(.2,a,a),c=cc.scaleTo(.2,t,t),r=cc.delayTime(1.3),s=cc.sequence(o,c,o,c,r);e.runAction(s.repeatForever())},wxGame.GlobalFuncs.setToCenter=function(e){var a=cc.director.getWinSize();e.x=a.width/2,e.y=a.height/2},wxGame.GlobalFuncs.showResurgenceUI=function(){cc.loader.loadRes("prefab/resurgenceUI",function(e,a){var n=cc.instantiate(a);cc.director.getScene().addChild(n),wxGame.GlobalFuncs.setToCenter(n);n.getComponent("resurgenceUI")})},wxGame.GlobalFuncs.showGameResultUI=function(){wxGame.gameResult&&wxGame.gameResult.onClose(),cc.loader.loadRes("prefab/gameResultUI",function(e,a){var n=cc.instantiate(a);cc.director.getScene().addChild(n),wxGame.GlobalFuncs.setToCenter(n),wxGame.gameResult=n.getComponent("gameResultUI")})},wxGame.GlobalFuncs.showPauseUI=function(){cc.loader.loadRes("prefab/pauseUI",function(e,a){var n=cc.instantiate(a);cc.director.getScene().addChild(n),wxGame.GlobalFuncs.setToCenter(n);n.getComponent("pauseUI")})},wxGame.GlobalFuncs.showRankUI=function(c){wxGame.rankUI?wxGame.rankUI.changeButtonToRank(c):cc.loader.loadRes("prefab/rankUI",function(e,a){var n=cc.instantiate(a),t=cc.director.getScene();if(t){t.addChild(n),wxGame.GlobalFuncs.setToCenter(n);var o=n.getComponent("rankUI");(wxGame.rankUI=o).changeButtonToRank(c)}}.bind(this))},wxGame.GlobalFuncs.popBoxUI=function(o){wxGame.boxUI||cc.loader.loadRes("animation/baoxiang/seq_getBox",function(e,a){var n=cc.instantiate(a),t=cc.director.getScene();t&&(t.addChild(n),wxGame.GlobalFuncs.setToCenter(n),wxGame.boxUI=n.getComponent("seq_getBox"),wxGame.boxUI.setBoxCardScore(o))})},wxGame.GlobalFuncs.getCardProp=function(o){cc.loader.loadRes("animation/huode/seq_huode_card",function(e,a){var n=cc.instantiate(a),t=cc.director.getScene();t&&(t.addChild(n),wxGame.GlobalFuncs.setToCenter(n),n.getComponent("seq_huode_card").setPropCard(o))})},wxGame.GlobalFuncs.getPropWindow=function(o){cc.loader.loadRes("prefab/getPropNode",function(e,a){var n=cc.instantiate(a),t=cc.director.getScene();t&&(t.addChild(n),wxGame.GlobalFuncs.setToCenter(n),n.getComponent("getPropNode").setPropData(o))})},wxGame.GlobalFuncs.recordUI=function(){cc.loader.loadRes("prefab/recordUI",function(e,a){var n=cc.instantiate(a),t=cc.director.getScene();t&&(t.addChild(n),wxGame.GlobalFuncs.setToCenter(n))})},wxGame.GlobalFuncs.greenHandUI=function(){cc.loader.loadRes("prefab/seq_guide",function(e,a){var n=cc.instantiate(a),t=cc.director.getScene();t&&(t.addChild(n),wxGame.GlobalFuncs.setToCenter(n))})};