{"version":3,"sources":["getPropNode.js"],"names":["cc","Class","extends","Component","properties","propSprite","Sprite","propSpriteFrame","SpriteFrame","shareBtn","Node","videoBtn","onLoad","wxGame","NotificationCenter","listen","EventType","UPDATE_SHARE_STATE","updateShareState","setPropData","propIndex","spriteFrame","shareConfig","getProp","useMethod","active","onClickShareBtn","tywx","BiLog","clickStat","biManager","shareManager","sharePoint","Global","LOGW","resultType","GlobalFuncs","showToast","tcpManager","sendCmd","shareToGetreward","getChangeCard","getCardProp","getBombCard","getPowerfulCard","onClose","onClickVideoBtn","wxAdManager","showRewardVideo","onAdSuccess","bind","onAdFail","isEnd","wxBannerAd","createBannerAd","isBringVersion","node","destroy","onDestroy","ignoreScope"],"mappings":"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","file":"getPropNode.js","sourceRoot":"../../../../../assets/Scripts/ui","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        propSprite:cc.Sprite,\n        propSpriteFrame:[cc.SpriteFrame],\n        shareBtn:cc.Node,\n        videoBtn:cc.Node,\n    },\n\n    onLoad:function(){\n        wxGame.NotificationCenter.listen(wxGame.EventType.UPDATE_SHARE_STATE,this.updateShareState,this);\n    },\n\n    setPropData:function(propIndex){\n        this.propIndex = propIndex; // 0:炸弹   1:万能  2:交换\n        if (this.propSpriteFrame[this.propIndex]){\n            this.propSprite.spriteFrame = this.propSpriteFrame[this.propIndex]\n        }\n        if (wxGame.shareConfig.getProp && wxGame.shareConfig.getProp.useMethod == \"share\") {\n            this.shareBtn.active = true;\n            this.videoBtn.active = false;\n        }else {\n            this.shareBtn.active = false;\n            this.videoBtn.active = true;\n        }\n    },\n\n    onClickShareBtn:function(){\n        tywx.BiLog.clickStat(wxGame.biManager.getProp, [\"share\"]);\n        wxGame.shareManager.sharePoint(\"577\");\n\n    },\n\n    updateShareState:function(){\n        if (wxGame.Global.sharePoint == \"577\") {\n            wxGame.LOGW(\"file = [getPropNode] fun = [updateShareState] \");\n            var resultType = wxGame.shareManager.resultType;\n            switch (resultType) {\n                case 1:\n                    wxGame.GlobalFuncs.showToast(\"分享到群才有效哦~\");\n                    break;\n                case 2:\n                    wxGame.GlobalFuncs.showToast(\"这个群今天已经打扰过了哦~\");\n                    break;\n                case 3:\n                    if (this.propIndex == 2) {\n                        tcpManager.sendCmd.shareToGetreward(10700001);\n                        tywx.BiLog.clickStat(wxGame.biManager.getChangeCard, [\"share\",\"cardBag\"]);\n                    }else {\n                        wxGame.GlobalFuncs.getCardProp(this.propIndex);\n                        if (this.propIndex == 0){   //炸弹\n                            tywx.BiLog.clickStat(wxGame.biManager.getBombCard, [\"share\",\"cardBag\"]);\n                        }else if (this.propIndex == 1){   //万能\n                            tywx.BiLog.clickStat(wxGame.biManager.getPowerfulCard, [\"share\",\"cardBag\"]);\n                        }\n                    }\n                    this.onClose();\n                    break;\n                case 6:\n                    wxGame.GlobalFuncs.showToast(\"分享失败!\");\n                    break;\n                default:\n                    wxGame.GlobalFuncs.showToast(\"分享失败!\");\n                    break;\n            }\n            wxGame.shareManager.resultType = 0;\n        }\n    },\n\n    onClickVideoBtn:function(){\n        tywx.BiLog.clickStat(wxGame.biManager.getProp, [\"video\"]);\n        wxGame.wxAdManager.showRewardVideo(this.onAdSuccess.bind(this),this.onAdFail.bind(this));\n    },\n\n    onAdSuccess:function(isEnd){\n        if (isEnd){\n            if (this.propIndex == 2) {\n                tcpManager.sendCmd.shareToGetreward(10700001);\n                tywx.BiLog.clickStat(wxGame.biManager.getChangeCard, [\"video\",\"cardBag\"]);\n            }else {\n                wxGame.GlobalFuncs.getCardProp(this.propIndex);\n                if (this.propIndex == 0){   //炸弹\n                    tywx.BiLog.clickStat(wxGame.biManager.getBombCard, [\"video\",\"cardBag\"]);\n                }else if (this.propIndex == 1){   //万能\n                    tywx.BiLog.clickStat(wxGame.biManager.getPowerfulCard, [\"video\",\"cardBag\"]);\n                }\n            }\n            this.onClose();\n        }else {\n            wxGame.GlobalFuncs.showToast(\"观看完整视频,才可获得奖励\");\n        }\n        wxGame.wxBannerAd.createBannerAd();\n    },\n\n    onAdFail:function(){\n        wxGame.GlobalFuncs.showToast(\"激励视频已达上限!\");\n        wxGame.wxBannerAd.createBannerAd();\n        if (wxGame.Global.isBringVersion) {\n            return\n        }\n        wxGame.shareManager.sharePoint(\"577\");\n    },\n\n    onClose:function(){\n        this.node.destroy();\n    },\n    onDestroy:function () {\n        wxGame.NotificationCenter.ignoreScope(this);\n    }\n    // update (dt) {},\n});\n"]}