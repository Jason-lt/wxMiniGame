{"version":3,"sources":["Avatar.js"],"names":["cc","Class","extends","Component","ctor","_TAG","properties","avatarWidth","avatarHeight","avatar","Sprite","avatarShadow","defaultSpriteFramte","SpriteFrame","lblName","Label","onLoad","setPlayerName","val","isValid","string","setAvatarUrl","url","spriteFrame","hideNameDisplay","ty","SystemInfo","getImageWithURL","showNameDisplay","node","setContentSize","resetAvatar","visible","active"],"mappings":";;;;;;AAAA;;;AAGAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;AAELC,UAAO,gBAAY;AACf,aAAKC,IAAL,GAAY,QAAZ;AACH,KAJI;;AAMLC,gBAAY;AACRC,qBAAc,GADN;AAERC,sBAAe,GAFP;AAGRC,gBAAST,GAAGU,MAHJ;AAIRC,sBAAeX,GAAGU,MAJV;AAKRE,6BAAsBZ,GAAGa,WALjB;AAMRC,iBAAUd,GAAGe;AANL,KANP;;AAgBLC,YAAQ,kBAAW;AACf;AACA;AACA;AACH,KApBI;;AAsBL;;;;AAIAC,mBAAgB,uBAAUC,GAAV,EAAe;AAC3B,YAAIlB,GAAGmB,OAAH,CAAW,KAAKL,OAAhB,CAAJ,EAA6B;AACzB,iBAAKA,OAAL,CAAaM,MAAb,GAAsBF,MAAMA,GAAN,GAAY,GAAlC;AACH;AACJ,KA9BI;;AAgCL;;;;AAIAG,kBAAe,sBAAUC,GAAV,EAAe;AAC1B,YAAI,CAACA,GAAL,EAAS;AACL,iBAAKb,MAAL,CAAYc,WAAZ,GAA0B,KAAKX,mBAA/B;AACA,iBAAKY,eAAL;AACH,SAHD,MAII;AACAC,eAAGC,UAAH,CAAcC,eAAd,CAA8BL,GAA9B,EAAkC,KAAKb,MAAvC;AACA,iBAAKmB,eAAL;AACH;;AAED,aAAKnB,MAAL,CAAYoB,IAAZ,CAAiBC,cAAjB,CAAgC,KAAKvB,WAArC,EAAkD,KAAKC,YAAvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACH,KA1DI;;AA4DL;;;AAGAuB,iBAAc,uBAAY;AACtB,aAAKV,YAAL;AACH,KAjEI;;AAmEL;;;;AAIAG,qBAAkB,2BAAY;AAC1B,aAAKV,OAAL,CAAakB,OAAb,GAAuB,KAAvB;AACA;AACA,aAAKrB,YAAL,CAAkBkB,IAAlB,CAAuBI,MAAvB,GAAgC,KAAhC;AACH,KA3EI;;AA6EL;;;AAGAL,qBAAkB,2BAAY;AAC1B,aAAKd,OAAL,CAAakB,OAAb,GAAuB,IAAvB;AACA;AACA,aAAKrB,YAAL,CAAkBkB,IAAlB,CAAuBI,MAAvB,GAAgC,KAAhC;AACH;;AAED;AACA;AACA;;AAEA;AA1FK,CAAT","file":"Avatar.js","sourceRoot":"../../../../../assets/Scripts/component","sourcesContent":["/**\n * 公共头像类\n */\ncc.Class({\n    extends: cc.Component,\n    ctor : function () {\n        this._TAG = \"Avatar\";\n    },\n\n    properties: {\n        avatarWidth : 102,\n        avatarHeight : 102,\n        avatar : cc.Sprite,\n        avatarShadow : cc.Sprite,\n        defaultSpriteFramte : cc.SpriteFrame,\n        lblName : cc.Label\n    },\n\n\n    onLoad :function() {\n        // this.setAvatarUrl(\"http://wxGame.image.tuyoo.com/avatar/head_female_2.png\");\n        // this.setPlayerName(\"我是一只小小鸟\");\n        // this.hideNameDisplay();\n    },\n\n    /**\n     * 设置玩家名称\n     * @param val\n     */\n    setPlayerName : function (val) {\n        if (cc.isValid(this.lblName)){\n            this.lblName.string = val ? val : \" \";\n        }\n    },\n\n    /**\n     * 设置头像url\n     * @param url\n     */\n    setAvatarUrl : function (url) {\n        if (!url){\n            this.avatar.spriteFrame = this.defaultSpriteFramte;\n            this.hideNameDisplay();\n        }\n        else{\n            ty.SystemInfo.getImageWithURL(url,this.avatar);\n            this.showNameDisplay();\n        }\n\n        this.avatar.node.setContentSize(this.avatarWidth, this.avatarHeight);\n        //http://ddz.image.tuyoo.com/avatar/head_female_2.png\n        // cc.loader.load(url, function (err, texture) {\n        //     if (!err){\n        //         //这里要加缓存机制\n        //         this.avatar.spriteFrame = new cc.SpriteFrame(texture);\n        //         this.avatar.node.setContentSize(this.avatarWidth, this.avatarHeight);\n        //     }\n        //     else{\n        //         //加载失败\n        //     }\n        // }.bind(this));\n    },\n\n    /**\n     * 重置头像\n     */\n    resetAvatar : function () {\n        this.setAvatarUrl();\n    },\n\n    /**\n     *\n     * 隐藏名称与阴影\n     */\n    hideNameDisplay : function () {\n        this.lblName.visible = false;\n        // this.avatarShadow.visible = false;\n        this.avatarShadow.node.active = false;\n    },\n\n    /**\n     * 显示名称与阴影\n     */\n    showNameDisplay : function () {\n        this.lblName.visible = true;\n        // this.avatarShadow.visible = true;\n        this.avatarShadow.node.active = false;\n    }\n\n    // start () {\n    //\n    // },\n\n    // update (dt) {},\n});\n"]}