{"version":3,"sources":["SeqNotificationCenter.js"],"names":["wxGame","NotificationCenter","events","listen","eName","handler","scope","push","ignore","fns","filter","fn","ignoreScope","msg","obs","trigger","eventName","params","i","length","call"],"mappings":";;;;;;AAAA;;;AAGAA,OAAOC,kBAAP,GAA4B;AACxBC,YAAS,EADe;AAExBC,YAAS,gBAASC,KAAT,EAAgBC,OAAhB,EAAyBC,KAAzB,EAA+B;AACpC,aAAKJ,MAAL,CAAYE,KAAZ,IAAqB,KAAKF,MAAL,CAAYE,KAAZ,KAAsB,EAA3C;AACA,aAAKF,MAAL,CAAYE,KAAZ,EAAmBG,IAAnB,CAAwB;AACpBD,mBAAOA,SAAS,IADI;AAEpBD,qBAASA;AAFW,SAAxB;AAIH,KARuB;;AAUxBG,YAAS,gBAASJ,KAAT,EAAgBC,OAAhB,EAAyBC,KAAzB,EAA+B;AACpCA,gBAAQA,SAAS,IAAjB;AACA,YAAIG,MAAM,KAAKP,MAAL,CAAYE,KAAZ,CAAV;;AAEA,YAAG,CAACK,GAAJ,EACI;;AAEJ,aAAKP,MAAL,CAAYE,KAAZ,IAAqBK,IAAIC,MAAJ,CAAW,UAASC,EAAT,EAAY;AACxC,mBAAOA,GAAGL,KAAH,IAAUA,KAAV,IAAmBK,GAAGN,OAAH,IAAYA,OAAtC;AACH,SAFoB,CAArB;AAGH,KApBuB;AAqBxBO,iBAAc,qBAAUN,KAAV,EAAiB;AAC3B,aAAI,IAAIO,GAAR,IAAe,KAAKX,MAApB,EAA2B;AACvB,gBAAIY,MAAM,KAAKZ,MAAL,CAAYW,GAAZ,CAAV;AACA,gBAAGC,GAAH,EAAO;AACH,qBAAKZ,MAAL,CAAYW,GAAZ,IAAmBC,IAAIJ,MAAJ,CAAW,UAASC,EAAT,EAAY;AACtC,wBAAGA,GAAGL,KAAH,IAAYA,KAAf,EAAqB;AACjB,+BAAO,IAAP;AACH,qBAFD,MAEM;AACF,+BAAO,KAAP;AACH;AACJ,iBANkB,CAAnB;AAOH;AACJ;AACJ,KAlCuB;AAmCxB;AACAS,aAAU,iBAASC,SAAT,EAAoBC,MAApB,EAA2B;AACjC,YAAIR,MAAM,KAAKP,MAAL,CAAYc,SAAZ,CAAV;;AAEA,YAAG,CAACP,GAAJ,EAAQ;AACJ;AACH;;AAED,YAAIE,EAAJ;;AAEA,aAAI,IAAIO,IAAI,CAAZ,EAAeA,IAAIT,IAAIU,MAAvB,EAA+BD,GAA/B,EAAmC;;AAE/BP,iBAAKF,IAAIS,CAAJ,CAAL;AACA;AACA;AACAP,eAAGN,OAAH,CAAWe,IAAX,CAAgBT,GAAGL,KAAnB,EAA0BW,MAA1B;AACH;AACJ;AApDuB,CAA5B","file":"SeqNotificationCenter.js","sourceRoot":"../../../../assets/Scripts","sourcesContent":["/**\n * Created by tuyoo on 2018/8/7.\n */\nwxGame.NotificationCenter = {\n    events : {},\n    listen : function(eName, handler, scope){\n        this.events[eName] = this.events[eName] || [];\n        this.events[eName].push({\n            scope: scope || this,\n            handler: handler\n        });\n    },\n\n    ignore : function(eName, handler, scope){\n        scope = scope || this;\n        var fns = this.events[eName];\n\n        if(!fns)\n            return;\n\n        this.events[eName] = fns.filter(function(fn){\n            return fn.scope!=scope || fn.handler!=handler\n        });\n    },\n    ignoreScope : function (scope) {\n        for(var msg in this.events){\n            var obs = this.events[msg];\n            if(obs){\n                this.events[msg] = obs.filter(function(fn){\n                    if(fn.scope != scope){\n                        return true;\n                    } else{\n                        return false;\n                    }\n                })\n            }\n        }\n    },\n    //\n    trigger : function(eventName, params){\n        var fns = this.events[eventName];\n\n        if(!fns){\n            return;\n        }\n\n        var fn;\n\n        for(var i = 0; i < fns.length; i++){\n\n            fn = fns[i];\n            // fn.handler.apply(fns.scope, params||[]);\n            // 用call直接把各个参数回调出去\n            fn.handler.call(fn.scope, params)\n        }\n    }\n};"]}