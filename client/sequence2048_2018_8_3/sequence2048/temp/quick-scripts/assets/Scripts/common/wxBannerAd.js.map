{"version":3,"sources":["wxBannerAd.js"],"names":["wxGame","wxBannerAd","bannerAd","bannerAdTimer","isScale","myUtil","require","getSysInfo","sysInfo","wx","getSystemInfoSync","canShowBanner","hasOwnProperty","createBannerAd","LOGD","screenWidth","screenHeight","winSize","cc","director","getWinSize","destroyBannerAd","adUnitId","style","left","top","width","isFitIphoneX","isIphoneX","inter","onResize","res","height","LOGW","show","error","console","log","hideBannerAd","hide","showBannerAd"],"mappings":";;;;;;AAAA;;AAEAA,OAAOC,UAAP,GAAoB;AAChBC,cAAU,IADM;AAEhBC,mBAAe,IAFC;;AAIhBC,aAAS,KAJO;AAKhBC,YAASC,QAAQ,QAAR,CALO;;AAOhBC,gBAAW,sBAAU;AACjB,YAAI,CAAC,KAAKC,OAAV,EAAmB;AACf,iBAAKA,OAAL,GAAeC,GAAGC,iBAAH,EAAf;AACH;AACD,eAAO,KAAKF,OAAZ;AACH,KAZe;;AAchBG,mBAAc,yBAAU;AACpB,eAAOF,GAAGG,cAAH,CAAkB,gBAAlB,CAAP;AACH,KAhBe;AAiBhBC,oBAAgB,0BAAY;AACxB,YAAI,CAAC,KAAKF,aAAL,EAAL,EAA0B;AACtBX,mBAAOc,IAAP,CAAY,gBAAZ;AACA;AACH;;AAED,YAAIN,UAAU,KAAKD,UAAL,EAAd;AACA,YAAIQ,cAAcP,QAAQO,WAA1B;AACA,YAAIC,eAAeR,QAAQQ,YAA3B;AACA,YAAIC,UAAUC,GAAGC,QAAH,CAAYC,UAAZ,EAAd;;AAEA,aAAKC,eAAL;;AAEA,YAAI;AACA,gBAAI,CAACrB,OAAOC,UAAP,CAAkBC,QAAvB,EAAiC;AAC7BF,uBAAOC,UAAP,CAAkBC,QAAlB,GAA6BO,GAAGI,cAAH,CAAkB;AAC3CS,8BAAS,yBADkC;AAE3CC,2BAAO;AACHC,8BAAK,CADF;AAEHC,6BAAI,CAFD;AAGHC,+BAAMX;AAHH;AAFoC,iBAAlB,CAA7B;AAQH;;AAED;AACA,gBAAIY,eAAe,KAAKtB,MAAL,CAAYuB,SAAZ,EAAnB;AACA,gBAAIC,QAAQ,CAAZ;AACA,gBAAIF,YAAJ,EAAiB;AACbE,wBAAQ,EAAR;AACH;AACD7B,mBAAOC,UAAP,CAAkBC,QAAlB,CAA2B4B,QAA3B,CAAoC,UAASC,GAAT,EAAa;AAC7C,oBAAI/B,OAAOC,UAAP,CAAkBC,QAAtB,EAAgC;AAC5B,wBAAI6B,IAAIL,KAAJ,GAAY,GAAZ,IAAmBK,IAAIC,MAAJ,GAAa,GAApC,EAAyC;AACrC;AACH;AACDhC,2BAAOC,UAAP,CAAkBC,QAAlB,CAA2BqB,KAA3B,CAAiCC,IAAjC,GAAwC,CAACT,cAAcgB,IAAIL,KAAnB,IAA0B,CAAlE;AACA1B,2BAAOC,UAAP,CAAkBC,QAAlB,CAA2BqB,KAA3B,CAAiCE,GAAjC,GAAuCT,eAAae,IAAIC,MAAjB,GAAwBH,KAA/D;AACA7B,2BAAOiC,IAAP,CAAY,yDAAyDF,IAAIC,MAAzE;AACAhC,2BAAOiC,IAAP,CAAY,+DAA+DjB,YAA3E;AACH;AACJ,aAVD;AAWAhB,mBAAOC,UAAP,CAAkBC,QAAlB,CAA2BgC,IAA3B;AACH,SA9BD,CA8BE,OAAOC,KAAP,EAAc;AACZC,oBAAQC,GAAR,CAAYF,KAAZ;AACH;AACJ,KA/De;;AAiEhBG,kBAAc,wBAAY;AACtBF,gBAAQC,GAAR,CAAY,mBAAZ;;AAEA,YAAI,KAAKnC,QAAT,EAAmB;AACf,iBAAKA,QAAL,CAAcqC,IAAd;AACH;AACJ,KAvEe;;AAyEhBC,kBAAc,wBAAY;AACtBJ,gBAAQC,GAAR,CAAY,mBAAZ;;AAEA,YAAI,KAAKnC,QAAT,EAAmB;AACf,iBAAKA,QAAL,CAAcgC,IAAd;AACH;AACJ,KA/Ee;;AAiFhB;AACAb,qBAAiB,2BAAY;AACzBe,gBAAQC,GAAR,CAAY,sBAAZ;;AAEA,YAAIrC,OAAOC,UAAP,CAAkBC,QAAtB,EAAgC;AAC5B,gBAAI;AACAF,uBAAOC,UAAP,CAAkBC,QAAlB,CAA2BqC,IAA3B;AACH,aAFD,CAEE,OAAOJ,KAAP,EAAc,CAEf;AACJ;AACJ;AA5Fe,CAApB","file":"wxBannerAd.js","sourceRoot":"../../../../../assets/Scripts/common","sourcesContent":["// banner广告接入\n\nwxGame.wxBannerAd = {\n    bannerAd: null,\n    bannerAdTimer: null,\n\n    isScale: false,\n    myUtil : require('myUtil'),\n\n    getSysInfo:function(){\n        if (!this.sysInfo) {\n            this.sysInfo = wx.getSystemInfoSync();\n        }\n        return this.sysInfo;\n    },\n\n    canShowBanner:function(){\n        return wx.hasOwnProperty('createBannerAd');\n    },\n    createBannerAd: function () {\n        if (!this.canShowBanner()){\n            wxGame.LOGD(\"玩家基础库不支持banner\");\n            return;\n        }\n\n        var sysInfo = this.getSysInfo();\n        var screenWidth = sysInfo.screenWidth;\n        var screenHeight = sysInfo.screenHeight;\n        var winSize = cc.director.getWinSize();\n\n        this.destroyBannerAd();\n\n        try {\n            if (!wxGame.wxBannerAd.bannerAd) {\n                wxGame.wxBannerAd.bannerAd = wx.createBannerAd({\n                    adUnitId:\"adunit-bff01a2ea318d456\",\n                    style: {\n                        left:0,\n                        top:0,\n                        width:screenWidth\n                    }\n                });\n            }\n\n            // 适配iphoneX\n            var isFitIphoneX = this.myUtil.isIphoneX();\n            var inter = 0;\n            if (isFitIphoneX){\n                inter = 15;\n            }\n            wxGame.wxBannerAd.bannerAd.onResize(function(res){\n                if (wxGame.wxBannerAd.bannerAd) {\n                    if (res.width > 300 && res.height > 100) {\n                        // wxGame.wxBannerAd.bannerAd.style.width = 300;\n                    }\n                    wxGame.wxBannerAd.bannerAd.style.left = (screenWidth - res.width)/2;\n                    wxGame.wxBannerAd.bannerAd.style.top = screenHeight-res.height-inter;\n                    wxGame.LOGW(\"file = [wxBannerAd] fun = [createBannerAd] height = \" + res.height)\n                    wxGame.LOGW(\"file = [wxBannerAd] fun = [createBannerAd] screenHeight = \" + screenHeight)\n                }\n            });\n            wxGame.wxBannerAd.bannerAd.show();\n        } catch (error) {\n            console.log(error);\n        }\n    },\n\n    hideBannerAd: function () {\n        console.log('call hideBannerAd');\n\n        if (this.bannerAd) {\n            this.bannerAd.hide();\n        }\n    },\n\n    showBannerAd: function () {\n        console.log('call showBannerAd');\n\n        if (this.bannerAd) {\n            this.bannerAd.show();\n        }\n    },\n\n    //销毁广告\n    destroyBannerAd: function () {\n        console.log('call destroyBannerAd');\n\n        if (wxGame.wxBannerAd.bannerAd) {\n            try {\n                wxGame.wxBannerAd.bannerAd.hide();\n            } catch (error) {\n\n            }\n        }\n    },\n}"]}