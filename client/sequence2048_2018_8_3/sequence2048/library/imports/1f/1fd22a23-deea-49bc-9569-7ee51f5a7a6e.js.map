{"version":3,"sources":["../../../../../assets/Scripts/component/assets/Scripts/component/bottom.js"],"names":["cc","Class","extends","Component","properties","gird_1","Node","gird_2","gridPrefab","Prefab","itemPrefab","grideNode","changePropLabel","Label","revocationLabel","castOffNode","cardBag","powerfulPropLabel","bombPropLabel","changeBtn","recoverBtn","onLoad","girdView_1","getComponent","hideColtSprite","girdView_2","wxGame","NotificationCenter","listen","EventType","SELECT_GRID","_selectGrid","SELECT_LAST_GRID","_selectLastGrid","UPDATE_CHANGE_PROP","updateChangeProp","UPDATE_REVOCATION_PROP","updateRevocationProp","CHECK_OVER_RESULT","_checkOverResult","BEGIN_GAME","beginGame","CREATE_ITEM","createItem","RECOVER_LAST_OPERATION","recoverLastOperation","SELECT_WASTE","_selectWaste","REMOVE_GAME_ANI","removeGameAni","UPDATE_GET_PROP","_updateGetProp","GAME_OVER_RESET","reSetGame","RESURGENCE_SUCCESS","resurgenceSuccess","SAVE_DATA","onSaveGame","POP_RESULTUI","popResurtUI","USE_PROP","useChangeProp","PUT_CARD_POOL","putCardPool","UPDATE_SHARE_STATE","updateShareState","GET_PROP_CARD_ANI","getPropCard","PROP_CARD_BAG_ANI","propCardBagAni","setLocalZOrder","cardPool","NodePool","i","put","instantiate","wxAdManager","checkVideoAd","operationItem","isOverList","allGridsNode","_initUI","createAllGridNode","util","require","isFitIphoneX","isIphoneX","_widget","node","Widget","bottom","Global","isXInter","winSize","width","height","director","getWinSize","sizeScale","LOGW","gridInfo","hIndex","colNum","gridNode","addChild","gridNodeCom","createAllGrid","inter_c","interval","initX","posX","pos","getPosition","x","setPosition","createCard","isLastOperation","gameInfo","score","saveGameInfo","allScore","nowCrossBet","nowCardNumber","boxNumer","trigger","UPDATE_SCORE_LABEL","revocation","powerfulProp","bombProp","lastMainData","updatePowerfulProp","updateBombProp","com","wasteNumer","setWasteState","that","nextCallBack","itemScores","length","allGrids","j","data","grid","propType","wxBannerAd","createBannerAd","requestAnimationFrame","containerRect","rect","on","TOUCH_START","event","convertToNodeSpace","touch","getLocation","isTouchOnCard","rectContainsPoint","_onTouchBegan","TOUCH_MOVE","touchCardsMoved","TOUCH_END","touchCardsEnd","TOUCH_CANCEL","isOver","y","setItemPosition","UPDATE_TOUCH_BEGAN","HIDE_GRID_KUANG","selectGrid","callFunc","item","UPDATE_TOUCH_MOVE","evnetIndex","recoverCard","UPDATE_TOUCH_END","saveLastData","grid_pos","getRootNode","convertToWorldSpace","p","getProp","powerfulCard","SELECT_POWERFUL","bombCard","SELECT_BOMBCARD","selectAni","MERGE_ITEM_SCORE","selectWaste","onMergeRemoveItem","index","string","changeProp","propType_1","itme_1","getScore","propType_2","itme_2","push","STOP_UPDATE_RANK","destroyBannerAd","runAction","sequence","delayTime","resurgenceConfig","isResurgence","GlobalFuncs","showResurgenceUI","showGameResultUI","cardRect_2","cardRect_1","scoreConfig","GameConfig","createCardConfig","randomForArray","ProplimitScore","showPropCardInterval","showPropCardProbabilityList","_random","Math","random","key","porpData","probability","moveToPos","setItemZOrder","size","get","LOGD","moveLeftToPos","setScore","CHECK_OVER","card","setPropType","resetHandCard","gameOverRemove","tcpManager","sendCmd","saveRecord","kapaiAni","onClose","removeFromParent","daojubao","ani","Animation","anim","getAnimationState","stop","isEmptyObject","showToast","isHavaData","gridScore","hideCardBag","stopAllActions","getScaleY","scale1","scaleTo","showCardBag","onClickCardBag","tywx","BiLog","clickStat","biManager","clickPropCardBag","onClickChangeBtn","consumeAssets","shareConfig","isUse","getPropWindow","onClickBombCard","useBombCard","onClickPowerfulCard","usePowerfulCard","result","success","itemId","useChangeCard","onClickRevocationBtn","undo","useMethod","shareManager","sharePoint","clickUndo","showRewardVideo","onUndoAdSuccess","bind","onUndoAdFail","isEnd","isBringVersion","resultType","onClickBgBtn","moveToTarget","loader","loadRes","err","prefab","once","active","play","onDestroy","ignoreScope"],"mappings":"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","file":"bottom.js","sourceRoot":"../../../../../assets/Scripts/component","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        gird_1:cc.Node,\n        gird_2:cc.Node,\n        gridPrefab:cc.Prefab,\n        itemPrefab:cc.Prefab,\n        grideNode:cc.Prefab,\n        changePropLabel:cc.Label,\n        revocationLabel:cc.Label,\n        castOffNode:cc.Node,\n        cardBag:cc.Node,\n        powerfulPropLabel:cc.Label,\n        bombPropLabel:cc.Label,\n        changeBtn:cc.Node,\n        recoverBtn:cc.Node,\n    },\n\n    onLoad:function(){\n        this.girdView_1 = this.gird_1.getComponent(\"gridView\");\n        this.girdView_1.hideColtSprite(false);\n        this.girdView_2 = this.gird_2.getComponent(\"gridView\");\n        this.girdView_2.hideColtSprite(false);\n\n        wxGame.NotificationCenter.listen(wxGame.EventType.SELECT_GRID,this._selectGrid,this);\n        wxGame.NotificationCenter.listen(wxGame.EventType.SELECT_LAST_GRID,this._selectLastGrid,this);\n        wxGame.NotificationCenter.listen(wxGame.EventType.UPDATE_CHANGE_PROP,this.updateChangeProp,this);\n        wxGame.NotificationCenter.listen(wxGame.EventType.UPDATE_REVOCATION_PROP,this.updateRevocationProp,this);\n\n\n        wxGame.NotificationCenter.listen(wxGame.EventType.CHECK_OVER_RESULT,this._checkOverResult,this);\n        wxGame.NotificationCenter.listen(wxGame.EventType.BEGIN_GAME,this.beginGame,this);\n        wxGame.NotificationCenter.listen(wxGame.EventType.CREATE_ITEM,this.createItem,this);\n        wxGame.NotificationCenter.listen(wxGame.EventType.RECOVER_LAST_OPERATION,this.recoverLastOperation,this);\n        wxGame.NotificationCenter.listen(wxGame.EventType.SELECT_WASTE,this._selectWaste,this);\n\n        wxGame.NotificationCenter.listen(wxGame.EventType.REMOVE_GAME_ANI,this.removeGameAni,this);\n        \n        wxGame.NotificationCenter.listen(wxGame.EventType.UPDATE_GET_PROP,this._updateGetProp,this);\n\n        wxGame.NotificationCenter.listen(wxGame.EventType.GAME_OVER_RESET,this.reSetGame,this);\n\n        wxGame.NotificationCenter.listen(wxGame.EventType.RESURGENCE_SUCCESS,this.resurgenceSuccess,this);\n        \n        wxGame.NotificationCenter.listen(wxGame.EventType.SAVE_DATA,this.onSaveGame,this);\n\n        wxGame.NotificationCenter.listen(wxGame.EventType.POP_RESULTUI,this.popResurtUI,this);\n        \n        wxGame.NotificationCenter.listen(wxGame.EventType.USE_PROP,this.useChangeProp,this);\n        wxGame.NotificationCenter.listen(wxGame.EventType.PUT_CARD_POOL,this.putCardPool,this);\n\n        wxGame.NotificationCenter.listen(wxGame.EventType.UPDATE_SHARE_STATE,this.updateShareState,this);\n        \n        wxGame.NotificationCenter.listen(wxGame.EventType.GET_PROP_CARD_ANI,this.getPropCard,this);\n        \n        wxGame.NotificationCenter.listen(wxGame.EventType.PROP_CARD_BAG_ANI,this.propCardBagAni,this);\n\n        this.cardBag.setLocalZOrder(1001);\n        this.changeBtn.setLocalZOrder(1002);\n        this.recoverBtn.setLocalZOrder(1002);\n        //初始化对象池,添加34张手牌\n        this.cardPool = new cc.NodePool();\n\n        var i;\n        for (i = 0; i < 34; i++){\n            this.cardPool.put(cc.instantiate(this.itemPrefab));\n        }\n        wxGame.wxAdManager.checkVideoAd();\n        this.operationItem = null;\n        this.isOverList = [];\n        // this.repertoprCard = [];\n        this.allGridsNode = [];\n\n        this._initUI();\n        \n        this.createAllGridNode();\n        this.beginGame();\n\n        var util = require('myUtil');\n        // 适配iphoneX\n        var isFitIphoneX =util.isIphoneX();\n        if (isFitIphoneX){\n            var _widget = this.node.getComponent(cc.Widget);\n            _widget.bottom = 30;\n            wxGame.Global.isXInter = 30;\n        }else if (cc.winSize.width / cc.winSize.height <= 0.53){\n            var _widget = this.node.getComponent(cc.Widget);\n            _widget.bottom = 30;\n            wxGame.Global.isXInter = 30;\n        }\n        var winSize = cc.director.getWinSize();\n        var sizeScale = winSize.width / winSize.height;\n        wxGame.LOGW(\"file = [bottom] fun = [onLoad] sizeScale = \" + sizeScale);\n        wxGame.LOGW(\"file = [bottom] fun = [onLoad] winSize.width = \" + winSize.width);\n        wxGame.LOGW(\"file = [bottom] fun = [onLoad] winSize.height = \" + winSize.height);\n    },\n\n    //创建格子:\n    createAllGridNode:function(){\n        var gridInfo = wxGame.Global.gridInfo;\n        for (var hIndex = 0; hIndex < gridInfo.colNum; hIndex++) {\n            var gridNode = cc.instantiate(this.grideNode);\n            this.node.addChild(gridNode);\n            var gridNodeCom = gridNode.getComponent(\"gridNode\");\n            gridNodeCom.createAllGrid(hIndex);\n            var inter_c = gridInfo.interval;\n            var initX = 0 - ((gridInfo.colNum-1) * inter_c + gridInfo.colNum * gridInfo.width)/2;\n            var posX = initX + hIndex*(gridInfo.width + inter_c) + gridInfo.width/2;\n            var pos = gridNode.getPosition();\n            pos.x = posX;\n            this.allGridsNode[hIndex] = gridNodeCom;\n            gridNode.setPosition(pos);\n        }\n    },\n\n    //开始游戏\n    beginGame:function(){\n        this.createCard();\n        this.createCard();\n\n        // if (wxGame.GlobalFuncs.isEmptyObject(wxGame.saveGameInfo)) {\n        //     //开始游戏分数重置\n        //     wxGame.Global.gameInfo.score = 0;\n        //     wxGame.Global.gameInfo.boxNumer = 0;\n        //\n        //     wxGame.NotificationCenter.trigger(wxGame.EventType.UPDATE_SCORE_LABEL);\n        //\n        //     this.lastMainData = {};\n        //\n        //     this.updateChangeProp();\n        //     this.updateRevocationProp();\n        // }else {\n        //\n        // }\n        wxGame.Global.isLastOperation = false;\n        wxGame.Global.gameInfo.score = wxGame.saveGameInfo.allScore || 0;\n        wxGame.Global.gameInfo.nowCrossBet = wxGame.saveGameInfo.nowCrossBet || 1;\n        wxGame.Global.gameInfo.nowCardNumber = wxGame.saveGameInfo.nowCardNumber || 0;\n        wxGame.Global.gameInfo.boxNumer = 0;\n        wxGame.NotificationCenter.trigger(wxGame.EventType.UPDATE_SCORE_LABEL);\n        wxGame.Global.gameInfo.revocation = 0;\n        if (wxGame.saveGameInfo.revocation) {\n            wxGame.Global.gameInfo.revocation = wxGame.saveGameInfo.revocation;\n        }\n\n        wxGame.Global.gameInfo.powerfulProp = 0;\n        if (wxGame.saveGameInfo.powerfulProp) {\n            wxGame.Global.gameInfo.powerfulProp = wxGame.saveGameInfo.powerfulProp;\n        }\n\n        wxGame.Global.gameInfo.bombProp = 0;\n        if (wxGame.saveGameInfo.bombProp) {\n            wxGame.Global.gameInfo.bombProp = wxGame.saveGameInfo.bombProp;\n        }\n\n        this.lastMainData = {};\n\n        this.updateChangeProp();\n        this.updateRevocationProp();\n        this.updatePowerfulProp();\n        this.updateBombProp();\n        var com = this.castOffNode.getComponent(\"castOffNode\");\n        if ( wxGame.saveGameInfo.wasteNumer) {\n            com.wasteNumer = wxGame.saveGameInfo.wasteNumer;\n            com.setWasteState();\n        }\n\n        var that = this;\n        var nextCallBack = function(){\n            if (wxGame.saveGameInfo.itemScores && wxGame.saveGameInfo.itemScores.length > 0) {\n                var itemScores = wxGame.saveGameInfo.itemScores;\n                for (var i = 0; i < itemScores.length; i++){\n                    if (that.allGridsNode[i] && itemScores[i].length > 0 && that.allGridsNode[i].allGrids.length > 0) {\n                        for (var j = 0; j < itemScores[i].length; j++) {\n                            var data = {};\n                            data.grid = that.allGridsNode[i].allGrids[j];\n                            data.score = itemScores[i][j].score;\n                            data.propType = itemScores[i][j].propType;\n                            that.createItem(data)\n                        }\n                    }\n                }\n            }\n            wxGame.saveGameInfo = {};\n\n            wxGame.wxBannerAd.createBannerAd();\n        };\n\n        requestAnimationFrame(nextCallBack);\n    },\n    \n    _initUI:function(){\n        var that = this;\n        var containerRect = cc.rect(0, 0, this.node.width, this.node.height);\n\n        this.node.on(cc.Node.EventType.TOUCH_START, function(event){\n            var pos = that.node.convertToNodeSpace(event.touch.getLocation());\n\n            if(!that.operationItem) {\n                that.operationItem = that.isTouchOnCard(pos);\n            }\n            if (cc.rectContainsPoint(containerRect, pos) && that.operationItem) {\n                that._onTouchBegan(pos);\n            }\n        }, that, true);\n\n        this.node.on(cc.Node.EventType.TOUCH_MOVE, function(event){\n            var pos = that.node.convertToNodeSpace(event.touch.getLocation());\n            if (cc.rectContainsPoint(containerRect, pos)) {\n                // var item = that.isTouchOnCard(pos);\n                if (that.operationItem) {\n                    that.touchCardsMoved(pos);\n                }\n            }\n        }, that, true);\n        this.node.on(cc.Node.EventType.TOUCH_END, function(){\n            that.touchCardsEnd();\n        }, that, true);\n        this.node.on(cc.Node.EventType.TOUCH_CANCEL, function(){\n            that.touchCardsEnd();\n        }, that, true);\n\n        // cc.eventManager.addListener({\n        //     event: cc.EventListener.TOUCH_ONE_BY_ONE,\n        //     swallowTouches: false,\n        //     onTouchBegan: function(touch, event) {\n        //         var pos = that.node.convertToNodeSpace(touch.getLocation());\n        //         that.operationItem = that.isTouchOnCard(pos);\n        //         if (cc.rectContainsPoint(containerRect, pos) && that.operationItem) {\n        //             return that._onTouchBegan(pos);\n        //         }\n        //         return false;\n        //     },\n        //     onTouchEnded: function(touch, event) {\n        //         that.touchCardsEnd();\n        //\n        //     },\n        //     onTouchMoved: function(touch, event) {\n        //         var pos = that.node.convertToNodeSpace(touch.getLocation());\n        //         if (cc.rectContainsPoint(containerRect, pos)) {\n        //             // var item = that.isTouchOnCard(pos);\n        //             if (that.operationItem) {\n        //                 that.touchCardsMoved(pos);\n        //             }\n        //         }\n        //     },\n        // }, this.node);\n    },\n\n    _onTouchBegan: function(pos) {\n        if (this.isOver) {\n            return false;\n        }\n        // this.hideCardBag();\n        if(this.operationItem){\n            pos.x = pos.x - this.node.width/2;\n            pos.y = pos.y + this.operationItem.node.height/2;\n            this.operationItem.setItemPosition(pos);\n            wxGame.NotificationCenter.trigger(wxGame.EventType.UPDATE_TOUCH_BEGAN,this.operationItem);\n        }\n        return true;\n    },\n\n    touchCardsMoved:function(pos){\n        // wxGame.LOGD(\"file = [bottom] fun = [touchCardsMoved] pos = \" +pos);\n        wxGame.NotificationCenter.trigger(wxGame.EventType.HIDE_GRID_KUANG,false);\n        if(this.operationItem){\n            // wxGame.LOGD(\"file = [bottom] fun = [touchCardsMoved] this.operationItem = \");\n            pos.x = pos.x - this.node.width/2;\n            pos.y = pos.y + this.operationItem.node.height/2;\n            this.operationItem.setItemPosition(pos);\n            this.selectGrid = null;\n            //将手牌放入格子中\n\n            var callFunc = function(){\n\n            };\n            var data = {};\n            data.pos = pos;\n            data.item = this.operationItem;\n            data.callFunc = callFunc;\n            wxGame.NotificationCenter.trigger(wxGame.EventType.UPDATE_TOUCH_MOVE,data);\n        }\n\n    },\n\n    touchCardsEnd:function(){\n        this.evnetIndex = 0;\n        this.recoverCard = false;\n        wxGame.Global.isLastOperation = false;\n        if(this.operationItem){\n            wxGame.NotificationCenter.trigger(wxGame.EventType.UPDATE_TOUCH_END);\n            this.operationItem = null;\n        }\n    },\n\n    _selectGrid:function(data){\n        this.evnetIndex ++;\n        var gridInfo = wxGame.Global.gridInfo;\n        var selectGrid = data.selectGrid;\n        if (this.operationItem) {\n            if (selectGrid) {\n\n                //保存上次操作数据\n                this.saveLastData();\n\n                var grid_pos = this.node.convertToNodeSpace(selectGrid.getRootNode().convertToWorldSpace(cc.p(0,0)));\n                grid_pos.x = grid_pos.x = grid_pos.x - this.node.width/2 + this.operationItem.node.width/2;\n                grid_pos.y = grid_pos.y + this.operationItem.node.height/2;\n                this.operationItem.setItemPosition(grid_pos);\n                selectGrid.item = this.operationItem;\n\n                //万能卡牌\n                if (selectGrid.item.getProp() == wxGame.Global.gameInfo.powerfulCard){\n                    wxGame.NotificationCenter.trigger(wxGame.EventType.SELECT_POWERFUL,selectGrid);\n                }\n\n                //炸弹卡牌\n                if (selectGrid.item.getProp() == wxGame.Global.gameInfo.bombCard){\n                    wxGame.NotificationCenter.trigger(wxGame.EventType.SELECT_BOMBCARD,selectGrid);\n                }\n\n                if (data.callFunc && !data.callFunc()) {\n                    this.operationItem.selectAni();\n                }else {\n                    wxGame.NotificationCenter.trigger(wxGame.EventType.MERGE_ITEM_SCORE);\n                }\n                this.girdView_2.item = null;\n                // this.operationItem = null;\n                this.recoverCard = true;    //卡牌选中格子\n                \n                // this.isOverList = [];\n                this.createCard();\n\n                this.onSaveGame();\n            }\n\n            if ((this.evnetIndex == gridInfo.colNum) && !this.recoverCard) {\n                if (this.girdView_2.item){\n                    this.operationItem.setItemPosition(this.gird_2.getPosition());\n                }\n                else if (this.girdView_1.item) {\n                    this.operationItem.setItemPosition(this.gird_1.getPosition());\n                }\n\n            }\n        }\n        wxGame.NotificationCenter.trigger(wxGame.EventType.HIDE_GRID_KUANG,false);\n    },\n\n    _selectLastGrid:function(){\n        //保存上次操作数据\n        this.saveLastData();\n        \n        this.girdView_2.item = null;\n        // this.operationItem = null;\n        this.recoverCard = true;\n\n        wxGame.NotificationCenter.trigger(wxGame.EventType.MERGE_ITEM_SCORE);\n\n        this.createCard();\n        this.onSaveGame();\n    },\n\n    _selectWaste:function(selectWaste){\n        if (selectWaste && this.operationItem) {\n            this.saveLastData();\n\n            this.operationItem.onMergeRemoveItem();\n            this.operationItem = null;\n            this.girdView_2.item = null;\n            this.recoverCard = true;\n\n            this.createCard();\n        }\n    },\n\n    _updateGetProp:function(index){\n        if (!this.girdView_1.item) {\n            return\n        }\n        if (index == 0){    //炸弹\n            // this.girdView_1.item.setPropType(wxGame.Global.gameInfo.bombCard);\n            wxGame.Global.gameInfo.bombProp++;\n            this.updateBombProp();\n        }else if (index == 1) { //万能\n            wxGame.Global.gameInfo.powerfulProp++;\n            this.updatePowerfulProp();\n            // this.girdView_1.item.setPropType(wxGame.Global.gameInfo.powerfulCard);\n        }\n    },\n\n    updateBombProp:function(){\n        this.bombPropLabel.string = \"x\" + wxGame.Global.gameInfo.bombProp;\n    },\n\n    updatePowerfulProp:function(){\n        this.powerfulPropLabel.string = \"x\" + wxGame.Global.gameInfo.powerfulProp;\n    },\n\n    saveLastData:function(){\n        //保存上次操作数据\n        this.lastMainData.score = wxGame.Global.gameInfo.score;\n        this.lastMainData.nowCrossBet = wxGame.Global.gameInfo.nowCrossBet;\n        this.lastMainData.nowCardNumber = wxGame.Global.gameInfo.nowCardNumber;\n        this.lastMainData.changeProp = wxGame.Global.gameInfo.changeProp;\n        // this.lastMainData.revocation = wxGame.Global.gameInfo.revocation;\n        this.lastMainData.powerfulProp = wxGame.Global.gameInfo.powerfulProp;\n        this.lastMainData.bombProp = wxGame.Global.gameInfo.bombProp;\n        this.lastMainData.propType_1 = this.girdView_1.item.getProp();\n        this.lastMainData.itme_1 = this.girdView_1.item.getScore();\n        this.lastMainData.propType_2 = this.girdView_2.item.getProp();\n        this.lastMainData.itme_2 = this.girdView_2.item.getScore();\n        wxGame.Global.isLastOperation = true;\n    },\n\n    _checkOverResult:function(isOver){\n        this.isOverList.push(isOver);\n        var gridInfo = wxGame.Global.gridInfo;\n        if (this.isOverList.length == gridInfo.colNum){\n            var isOver = true;\n            for (var i = 0; i < this.isOverList.length; i++){\n                if (!this.isOverList[i]) {\n                    isOver = false;\n                    break;\n                }\n            }\n\n            var that = this;\n            this.isOver = isOver;\n            if (isOver) {\n                wxGame.NotificationCenter.trigger(wxGame.EventType.STOP_UPDATE_RANK);\n                wxGame.wxBannerAd.destroyBannerAd();\n                this.node.runAction(cc.sequence(cc.delayTime(0.5),cc.callFunc(function(){\n                    // wxGame.GlobalFuncs.showGameResultUI();\n                    if (wxGame.resurgenceConfig.isResurgence){\n                        wxGame.GlobalFuncs.showResurgenceUI();\n                    }else {\n                        wxGame.NotificationCenter.trigger(wxGame.EventType.GAME_OVER_RESET);\n                        that.popResurtUI();\n                    }\n                })));\n            }\n            this.isOverList = [];\n        }\n    },\n\n    //弹出结算\n    popResurtUI:function(){\n        this.node.runAction(cc.sequence(cc.delayTime(1.6),cc.callFunc(function() {\n            wxGame.GlobalFuncs.showGameResultUI();\n        })));\n    },\n\n    resurgenceSuccess:function(){\n        this.isOver = false;\n        this.onSaveGame();\n        this.lastMainData = {};\n        wxGame.Global.isLastOperation = false;\n    },\n\n    // 触摸区域是否在出牌区\n    isTouchOnCard:function(pos){\n        // var len = this.repertoprCard.length;\n        // if (len <= 0) {\n        //     return null;\n        // }\n\n        if (this.girdView_2.item && this.girdView_2.item.getRootNode()){\n            var cardRect_2 = cc.rect(this.girdView_2.item.getRootNode().x+this.node.width/2 - this.girdView_2.item.node.width/2,\n                this.girdView_2.item.getRootNode().y - this.girdView_2.item.getRootNode().height/2,\n                this.girdView_2.item.getRootNode().width, this.girdView_2.item.getRootNode().height);\n            if (cc.rectContainsPoint(cardRect_2, pos)) {\n                return this.girdView_2.item;\n            }\n            return null\n        }\n\n        if (this.girdView_1.item && this.girdView_1.item.getRootNode()){\n            var cardRect_1 = cc.rect(this.girdView_1.item.getRootNode().x+this.node.width/2,\n                this.girdView_1.item.getRootNode().y - this.girdView_1.item.getRootNode().height/2,\n                this.girdView_1.item.getRootNode().width, this.girdView_1.item.getRootNode().height);\n            if (cc.rectContainsPoint(cardRect_1, pos)) {\n                return this.girdView_1.item;\n            }\n            return null\n        }\n\n        return null;\n    },\n\n    //添加新牌\n    createCard:function(){\n\n        var scoreConfig = wxGame.GameConfig.createCardConfig;\n        var score = wxGame.GlobalFuncs.randomForArray(scoreConfig);\n\n        if (wxGame.Global.gameInfo.score > wxGame.GameConfig.ProplimitScore) {\n            \n            if (wxGame.GameConfig.showPropCardInterval && (wxGame.Global.gameInfo.nowCardNumber%wxGame.GameConfig.showPropCardInterval == 0)) {\n                if (wxGame.GameConfig.showPropCardProbabilityList){\n                    var _random = Math.random();\n                    for (var key in wxGame.GameConfig.showPropCardProbabilityList) {\n                        var porpData = wxGame.GameConfig.showPropCardProbabilityList[key];\n                        if (_random >= porpData.probability[0] && _random < porpData.probability[1]){\n                            if (porpData.score) {\n                                score = porpData.score;\n                            }\n                        }\n                    }\n                }\n            }\n\n            // if (wxGame.GameConfig.showPropCardProbabilityList){\n            //     var _random = Math.random();\n            //     for (var key in wxGame.GameConfig.showPropCardProbabilityList) {\n            //         var porpData = wxGame.GameConfig.showPropCardProbabilityList[key];\n            //         if (_random >= porpData.probability[0] && _random < porpData.probability[1]){\n            //             if (porpData.score) {\n            //                 score = porpData.score;\n            //             }\n            //         }\n            //     }\n            // }\n            \n        }\n\n        if (this.girdView_1.item) {\n            if (!this.girdView_2.item){\n                this.girdView_1.item.moveToPos(this.gird_2.getPosition());\n                this.girdView_2.item = this.girdView_1.item;\n                this.girdView_1.item = null;\n                this.girdView_2.item.setItemZOrder(3);\n                // this.girdView_2.item.setScore(score);\n                // this.repertoprCard[1] = this.girdView_2.item;\n                this.createCard();\n            }\n        }else {\n\n            //创建一张新手牌\n            var itemPrefab\n            if (this.cardPool.size() > 0){\n                itemPrefab = this.cardPool.get();\n            }else{\n                wxGame.LOGD(\"file = [bottom] fun = [createCard] 非牌池\");\n                itemPrefab = cc.instantiate(this.itemPrefab);\n            }\n            // var itemPrefab = cc.instantiate(this.itemPrefab);\n            itemPrefab.setPosition(this.gird_1.getPosition());\n            this.node.addChild(itemPrefab);\n            this.girdView_1.item = itemPrefab.getComponent(\"itemView\");\n            // this.repertoprCard[0] = this.girdView_1.item;\n            this.girdView_1.item.moveLeftToPos(this.gird_1.getPosition());\n            this.girdView_1.item.setItemZOrder(1);\n            this.girdView_1.item.setScore(score);\n            wxGame.Global.gameInfo.nowCardNumber++;\n            this.isOver = false;\n            wxGame.NotificationCenter.trigger(wxGame.EventType.CHECK_OVER,this.girdView_2.item);\n        }\n    },\n\n    //手牌不用了,归还牌池\n    putCardPool:function(card){\n        this.cardPool.put(card);\n    },\n\n    createItem:function(data){\n        // grid,score,propType\n        var grid = data.grid;\n        var score = data.score;\n        var propType = data.propType;\n        var itemPrefab = cc.instantiate(this.itemPrefab);\n\n        var grid_pos = this.node.convertToNodeSpace(grid.getRootNode().convertToWorldSpace(cc.p(0,0)));\n        grid_pos.x = grid_pos.x = grid_pos.x - this.node.width/2 + itemPrefab.width/2;\n        grid_pos.y = grid_pos.y + itemPrefab.height/2;\n        itemPrefab.setPosition(grid_pos);\n        this.node.addChild(itemPrefab);\n        var item = itemPrefab.getComponent(\"itemView\");\n        // this.repertoprCard[0] = this.girdView_1.item;\n        item.setItemZOrder(2);\n        item.setScore(score);\n        item.setPropType(propType);\n        grid.item = item;\n    },\n\n    //清除手牌区\n    resetHandCard:function(){\n        if (this.girdView_1.item) {\n            this.girdView_1.item.gameOverRemove();\n            this.girdView_1.item = null;\n        }\n        if (this.girdView_2.item) {\n            this.girdView_2.item.gameOverRemove();\n            this.girdView_2.item = null;\n        }\n    },\n\n    reSetGame:function(){\n        this.resetHandCard();\n        this.isOverList = [];\n        this.operationItem = null;\n        this.recoverCard = true;\n        this.isOver = false;\n        this.evnetIndex = 0;\n        wxGame.saveGameInfo = {};\n        tcpManager.sendCmd.saveRecord({});\n        wxGame.Global.isLastOperation = false;\n    },\n\n    removeGameAni:function(){\n        this.resetHandCard();\n        this.isOverList = [];\n        this.operationItem = null;\n        this.recoverCard = true;\n        this.isOver = false;\n        this.evnetIndex = 0;\n\n        if (this.kapaiAni) {\n            var com = this.kapaiAni.getComponent(\"kapai\");\n            com.onClose();\n            this.kapaiAni.removeFromParent();\n            this.kapaiAni = null;\n        }\n        if (this.daojubao) {\n            var ani = this.daojubao.getComponent(cc.Animation);\n            var anim = ani.getAnimationState(\"daojubao\");\n            anim.stop();\n            this.daojubao.removeFromParent();\n            this.daojubao = null;\n        }\n    },\n\n    recoverLastOperation:function(){\n        if (this.isOver) {\n            return false;\n        }\n        wxGame.Global.isLastOperation = false;\n        if (wxGame.GlobalFuncs.isEmptyObject(this.lastMainData)) {\n            //上次操作为空\n            wxGame.GlobalFuncs.showToast(\"当前无操作~\");\n            return\n        }\n        wxGame.Global.gameInfo.score = this.lastMainData.score;\n\n        wxGame.Global.gameInfo.nowCrossBet = this.lastMainData.nowCrossBet;\n        wxGame.Global.gameInfo.nowCardNumber = this.lastMainData.nowCardNumber;\n\n        wxGame.NotificationCenter.trigger(wxGame.EventType.UPDATE_SCORE_LABEL);\n\n        // wxGame.Global.gameInfo.changeProp = this.lastMainData.changeProp;\n        this.updateChangeProp();\n        // wxGame.Global.gameInfo.revocation = this.lastMainData.revocation;\n        this.updateRevocationProp();\n\n        wxGame.Global.gameInfo.powerfulProp = this.lastMainData.powerfulProp;\n        this.updatePowerfulProp();\n\n        wxGame.Global.gameInfo.bombProp = this.lastMainData.bombProp;\n        this.updateBombProp();\n\n        this.girdView_1.item.setScore(this.lastMainData.itme_1);\n        this.girdView_1.item.setPropType(this.lastMainData.propType_1);\n\n        this.girdView_2.item.setScore(this.lastMainData.itme_2);\n        this.girdView_2.item.setPropType(this.lastMainData.propType_2);\n        this.girdView_2.item.setItemZOrder(3);\n\n        this.lastMainData = {};\n    },\n\n    //刷新互换牌道具\n    updateChangeProp:function(){\n        this.changePropLabel.string = \"x\" + wxGame.Global.gameInfo.changeProp;\n    },\n\n    //刷新撤销道具数量\n    updateRevocationProp:function(){\n        // this.revocationLabel.string = \"撤销(\" + wxGame.Global.gameInfo.revocation + \")\";\n        this.revocationLabel.string = \"撤销\";\n    },\n\n    onSaveGame:function(){\n        if (this.allGridsNode.length > 0) {\n            wxGame.LOGD(\"file = [bottom] fun = [onSaveGame]\");\n            var gameInfo = {};\n            gameInfo.itemScores = [];\n            var isHavaData = false;\n            for (var i = 0; i < this.allGridsNode.length; i++){\n                if (this.allGridsNode[i].allGrids && this.allGridsNode[i].allGrids.length > 0) {\n\n                    var gridScore = [];\n                    var allGrids = this.allGridsNode[i].allGrids;\n                    for (var j = 0; j < allGrids.length; j++){\n                        if (allGrids[j].item) {\n                            isHavaData = true;\n                            var data = {};\n                            data.score = allGrids[j].item.getScore();\n                            data.propType = allGrids[j].item.getProp();\n                            gridScore.push(data);\n                        }\n                    }\n                    gameInfo.itemScores.push(gridScore)\n                }\n            }\n\n            if (!isHavaData) {\n                tcpManager.sendCmd.saveRecord({});\n                return\n            }\n            if (wxGame.Global.gameInfo.score) {\n                gameInfo.allScore = wxGame.Global.gameInfo.score;\n            }\n\n            if (wxGame.Global.gameInfo.nowCrossBet) {\n                gameInfo.nowCrossBet = wxGame.Global.gameInfo.nowCrossBet;\n            }\n\n            if (wxGame.Global.gameInfo.nowCardNumber) {\n                gameInfo.nowCardNumber = wxGame.Global.gameInfo.nowCardNumber;\n            }\n\n            var com = this.castOffNode.getComponent(\"castOffNode\");\n            if (com.wasteNumer) {\n                gameInfo.wasteNumer = com.wasteNumer;\n            }\n\n            if (wxGame.Global.gameInfo.revocation) {\n                gameInfo.revocation = wxGame.Global.gameInfo.revocation;\n            }\n\n            if (wxGame.Global.gameInfo.powerfulProp) {\n                gameInfo.powerfulProp = wxGame.Global.gameInfo.powerfulProp;\n            }\n\n            if (wxGame.Global.gameInfo.bombProp) {\n                gameInfo.bombProp = wxGame.Global.gameInfo.bombProp;\n            }\n\n            tcpManager.sendCmd.saveRecord(gameInfo);\n        }\n    },\n\n    hideCardBag:function(){\n        this.cardBag.stopAllActions();\n        if (this.cardBag.getScaleY() == 1) {\n            var scale1 = cc.scaleTo(0.1, 1, 0);\n            this.cardBag.runAction(scale1);\n        }\n    },\n\n    showCardBag:function(){\n        this.cardBag.stopAllActions();\n        if (this.cardBag.getScaleY() == 0) {\n            var scale1 = cc.scaleTo(0.1, 1, 1);\n            this.cardBag.runAction(scale1);\n        }else {\n            var scale1 = cc.scaleTo(0.1, 1, 0);\n            this.cardBag.runAction(scale1);\n        }\n    },\n\n    onClickCardBag:function(){\n        tywx.BiLog.clickStat(wxGame.biManager.clickPropCardBag, [\"onClickCardBag\"]);\n        if (this.isOver) {\n            return;\n        }\n        this.showCardBag();\n    },\n\n    //交换道具\n    onClickChangeBtn:function(){\n        if (this.isOver) {\n            return;\n        }\n        this.hideCardBag();\n        if (wxGame.Global.gameInfo.changeProp > 0) {\n            tcpManager.sendCmd.consumeAssets(1,\"item:1415\");\n        }else {\n            if (wxGame.shareConfig.getProp && wxGame.shareConfig.getProp.isUse) {\n                wxGame.GlobalFuncs.getPropWindow(2);\n            }else {\n                wxGame.GlobalFuncs.showToast(\"使用道具失败~\");\n            }\n        }\n    },\n\n    //炸弹卡牌\n    onClickBombCard:function(){\n        this.hideCardBag();\n        if (wxGame.Global.gameInfo.bombProp > 0) {\n            wxGame.Global.gameInfo.bombProp--;\n            this.updateBombProp();\n            this.girdView_2.item.setPropType(wxGame.Global.gameInfo.bombCard);\n            tywx.BiLog.clickStat(wxGame.biManager.useBombCard, [\"useBombCard\"]);\n        }else {\n            if (wxGame.shareConfig.getProp && wxGame.shareConfig.getProp.isUse) {\n                wxGame.GlobalFuncs.getPropWindow(0);\n            }else {\n                wxGame.GlobalFuncs.showToast(\"道具数量不足~\");\n            }\n        }\n    },\n\n    //万能卡牌\n    onClickPowerfulCard:function(){\n        this.hideCardBag();\n        if (wxGame.Global.gameInfo.powerfulProp > 0) {\n            wxGame.Global.gameInfo.powerfulProp--;\n            this.updatePowerfulProp();\n            this.girdView_2.item.setPropType(wxGame.Global.gameInfo.powerfulCard);\n            tywx.BiLog.clickStat(wxGame.biManager.usePowerfulCard, [\"usePowerfulCard\"]);\n        }else {\n\n            if (wxGame.shareConfig.getProp && wxGame.shareConfig.getProp.isUse) {\n                wxGame.GlobalFuncs.getPropWindow(1);\n            }else {\n                wxGame.GlobalFuncs.showToast(\"道具数量不足~\");\n            }\n        }\n    },\n\n    //使用交换道具\n    useChangeProp:function(result){\n        if(result.success == 1){\n            if (this.girdView_1.item && this.girdView_2.item && result.itemId == \"item:1415\") {\n                if (wxGame.Global.gameInfo.changeProp > 0) {\n                    [this.girdView_1.item,this.girdView_2.item] = [this.girdView_2.item,this.girdView_1.item];\n                    this.girdView_1.item.moveToPos(this.gird_1.getPosition());\n                    this.girdView_1.item.setItemZOrder(1);\n                    this.girdView_2.item.moveToPos(this.gird_2.getPosition());\n                    this.girdView_2.item.setItemZOrder(3);\n                    wxGame.NotificationCenter.trigger(wxGame.EventType.UPDATE_CHANGE_PROP);\n                }\n            }\n            tywx.BiLog.clickStat(wxGame.biManager.useChangeCard, [\"useChangeProp\"]);\n        }else {\n            if (wxGame.shareConfig.getProp && wxGame.shareConfig.getProp.isUse) {\n                wxGame.GlobalFuncs.getPropWindow(2);\n            }else {\n                wxGame.GlobalFuncs.showToast(\"使用道具失败~\");\n            }\n        }\n    },\n\n    onClickRevocationBtn:function(){\n        // if (wxGame.Global.gameInfo.revocation > 0) {\n        //     // if (wxGame.Global.isLastOperation) {\n        //         wxGame.NotificationCenter.trigger(wxGame.EventType.RECOVER_LAST_OPERATION);\n        //         wxGame.Global.gameInfo.revocation--;\n        //         wxGame.NotificationCenter.trigger(wxGame.EventType.UPDATE_REVOCATION_PROP);\n        //\n        //     // }else {\n        //     //     wxGame.GlobalFuncs.showToast(\"使用道具失败~\");\n        //     // }\n        //\n        // }else {\n        //     wxGame.GlobalFuncs.showToast(\"使用道具失败~\");\n        // }\n\n        if (wxGame.shareConfig.undo.useMethod == \"share\") {\n            wxGame.shareManager.sharePoint(\"967\");\n            tywx.BiLog.clickStat(wxGame.biManager.clickUndo, [\"share\"]);\n        }else {\n            wxGame.wxAdManager.showRewardVideo(this.onUndoAdSuccess.bind(this),this.onUndoAdFail.bind(this));\n            tywx.BiLog.clickStat(wxGame.biManager.clickUndo, [\"video\"]);\n        }\n    },\n\n    onUndoAdSuccess:function(isEnd){\n        if (isEnd){\n            wxGame.NotificationCenter.trigger(wxGame.EventType.RECOVER_LAST_OPERATION);\n            wxGame.NotificationCenter.trigger(wxGame.EventType.UPDATE_REVOCATION_PROP);\n        }else {\n            wxGame.GlobalFuncs.showToast(\"观看完整视频,才可获得奖励\");\n        }\n        wxGame.wxBannerAd.createBannerAd();\n    },\n\n    onUndoAdFail:function(){\n        wxGame.GlobalFuncs.showToast(\"激励视频已达上限!\");\n        wxGame.wxBannerAd.createBannerAd();\n        if (wxGame.Global.isBringVersion) {\n            return\n        }\n        wxGame.shareManager.sharePoint(\"967\");\n    },\n\n    updateShareState:function(){\n        if (wxGame.Global.sharePoint == \"967\") {\n            wxGame.LOGW(\"file = [bottom] fun = [updateShareState] \");\n            var resultType = wxGame.shareManager.resultType;\n            switch (resultType) {\n                case 1:\n                    wxGame.GlobalFuncs.showToast(\"分享到群才有效哦~\");\n                    break;\n                case 2:\n                    wxGame.GlobalFuncs.showToast(\"这个群今天已经打扰过了哦~\");\n                    break;\n                case 3:\n                    wxGame.NotificationCenter.trigger(wxGame.EventType.RECOVER_LAST_OPERATION);\n                    wxGame.NotificationCenter.trigger(wxGame.EventType.UPDATE_REVOCATION_PROP);\n                    break;\n                case 6:\n                    wxGame.GlobalFuncs.showToast(\"分享失败!\");\n                    break;\n                default:\n                    wxGame.GlobalFuncs.showToast(\"分享失败!\");\n                    break;\n            }\n            wxGame.shareManager.resultType = 0;\n        }\n    },\n\n    onClickBgBtn:function(){\n        this.hideCardBag();\n    },\n\n    //获得道具卡\n    getPropCard:function(index){\n        var that = this;\n        if (this.kapaiAni) {\n            this.kapaiAni.x = 0;\n            this.kapaiAni.y = this.node.height/1.8;\n            var com = this.kapaiAni.getComponent(\"kapai\");\n            com.moveToTarget(index,that.changeBtn.x,that.changeBtn.y,0,that.kapaiAni.y);\n        }else {\n            cc.loader.loadRes('prefab/kapaiAni', function (err, prefab) {\n                if (prefab) {\n                    that.kapaiAni = cc.instantiate(prefab);\n                    that.kapaiAni.x = 0;\n                    that.kapaiAni.y = that.node.height/1.8;\n                    that.node.addChild(that.kapaiAni,1003);\n                    var com = that.kapaiAni.getComponent(\"kapai\");\n                    com.moveToTarget(index,that.changeBtn.x,that.changeBtn.y,0,that.kapaiAni.y);\n                }\n            });\n        }\n    },\n\n    //道具卡包动画\n    propCardBagAni:function(){\n        var that = this;\n        if (!that.daojubao) {\n            cc.loader.loadRes('animation/daojubao', function (err, prefab) {\n                that.daojubao = cc.instantiate(prefab);\n                that.daojubao.x = that.changeBtn.x;\n                that.daojubao.y = that.changeBtn.y;\n                that.node.addChild(that.daojubao,1003);\n                var ani = that.daojubao.getComponent(cc.Animation);\n                var anim = ani.getAnimationState(\"daojubao\");\n                anim.once(\"finished\",function(){\n                    that.daojubao.active = false;\n                })\n                anim.play();\n            });\n        }else {\n            that.daojubao.active = true;\n            var ani = that.daojubao.getComponent(cc.Animation);\n            var anim = ani.getAnimationState(\"daojubao\");\n            anim.once(\"finished\",function(){\n                that.daojubao.active = false;\n            })\n            anim.play();\n        }\n    },\n\n    onDestroy:function () {\n        wxGame.NotificationCenter.ignoreScope(this);\n        wxGame.wxBannerAd.destroyBannerAd();\n    }\n\n    // update (dt) {},\n});\n"]}