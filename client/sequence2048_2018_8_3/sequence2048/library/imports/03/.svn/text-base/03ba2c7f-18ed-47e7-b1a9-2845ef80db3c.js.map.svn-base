{"version":3,"sources":["../../../../../assets/Scripts/ui/assets/Scripts/ui/kapai.js"],"names":["cc","Class","extends","Component","properties","cardSprite","Sprite","cardSpriteFrame","SpriteFrame","onLoad","moveToTarget","index","posx","posy","nodex","nodey","spriteFrame","node","active","ani","getComponent","Animation","anim","getAnimationState","play","interx","intery","oncePos","p","twoPos","toPos","controlPoints1","bezierToDst1","bezierTo","runAction","sequence","callFunc","onAniEnd","bind","wxGame","NotificationCenter","trigger","EventType","PROP_CARD_BAG_ANI","onClose","stopAllActions","stop"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,oBAAWL,GAAGM,MADN;AAERC,yBAAgB,CAACP,GAAGQ,WAAJ;AAFR,KAHP;;AAQLC,YAAO,kBAAU,CAEhB,CAVI;;AAYLC,kBAAa,sBAASC,KAAT,EAAeC,IAAf,EAAoBC,IAApB,EAAyBC,KAAzB,EAA+BC,KAA/B,EAAqC;AAC9C,YAAI,KAAKR,eAAL,CAAqBI,KAArB,CAAJ,EAAiC;AAC7B,iBAAKN,UAAL,CAAgBW,WAAhB,GAA8B,KAAKT,eAAL,CAAqBI,KAArB,CAA9B;AACH;AACD,aAAKM,IAAL,CAAUC,MAAV,GAAmB,IAAnB;AACA,YAAIC,MAAM,KAAKF,IAAL,CAAUG,YAAV,CAAuBpB,GAAGqB,SAA1B,CAAV;AACA,YAAIC,OAAOH,IAAII,iBAAJ,CAAsB,OAAtB,CAAX;AACAD,aAAKE,IAAL;;AAEA,YAAIC,SAASb,OAAOE,KAApB;AACA,YAAIY,SAASb,OAAOE,KAApB;AACA,YAAIY,UAAU3B,GAAG4B,CAAH,CAAKd,QAAOW,SAAO,GAAd,GAAqBA,SAAO,CAAjC,EAAmCV,KAAnC,CAAd;AACA,YAAIc,SAAS7B,GAAG4B,CAAH,CAAKhB,IAAL,EAAUG,QAAMW,SAAO,CAAvB,CAAb;AACA,YAAII,QAAQ9B,GAAG4B,CAAH,CAAKhB,IAAL,EAAUC,IAAV,CAAZ;AACA,YAAIkB,iBAAiB,CACzBJ,OADyB,EAEzBE,MAFyB,EAGzBC,KAHyB,CAArB;;AAMA,YAAIE,eAAehC,GAAGiC,QAAH,CAAY,CAAZ,EAAeF,cAAf,CAAnB;;AAEA,aAAKd,IAAL,CAAUiB,SAAV,CAAoBlC,GAAGmC,QAAH,CAAYH,YAAZ,EAAyBhC,GAAGoC,QAAH,CAAY,KAAKC,QAAL,CAAcC,IAAd,CAAmB,IAAnB,CAAZ,CAAzB,CAApB;AACH,KAnCI;;AAqCLD,cAAS,oBAAU;AACfE,eAAOC,kBAAP,CAA0BC,OAA1B,CAAkCF,OAAOG,SAAP,CAAiBC,iBAAnD;AACA,aAAKC,OAAL;AACA,aAAK3B,IAAL,CAAUC,MAAV,GAAmB,KAAnB;AACH,KAzCI;;AA2CL0B,aAAQ,mBAAU;AACd,aAAK3B,IAAL,CAAU4B,cAAV;AACA,YAAI1B,MAAM,KAAKF,IAAL,CAAUG,YAAV,CAAuBpB,GAAGqB,SAA1B,CAAV;AACA,YAAIC,OAAOH,IAAII,iBAAJ,CAAsB,OAAtB,CAAX;AACAD,aAAKwB,IAAL;AACH;;AAED;AAlDK,CAAT","file":"kapai.js","sourceRoot":"../../../../../assets/Scripts/ui","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        cardSprite:cc.Sprite,\n        cardSpriteFrame:[cc.SpriteFrame],\n    },\n\n    onLoad:function(){\n\n    },\n\n    moveToTarget:function(index,posx,posy,nodex,nodey){\n        if (this.cardSpriteFrame[index]) {\n            this.cardSprite.spriteFrame = this.cardSpriteFrame[index];\n        }\n        this.node.active = true;\n        var ani = this.node.getComponent(cc.Animation);\n        var anim = ani.getAnimationState('kapai');\n        anim.play();\n\n        var interx = posx - nodex;\n        var intery = posy - nodey;\n        var oncePos = cc.p(nodex+(interx/1.5) - interx/2,nodey);\n        var twoPos = cc.p(posx,nodey+intery/4);\n        var toPos = cc.p(posx,posy);\n        var controlPoints1 = [     oncePos,     twoPos,     toPos   ];\n\n        var bezierToDst1 = cc.bezierTo(1, controlPoints1);\n\n        this.node.runAction(cc.sequence(bezierToDst1,cc.callFunc(this.onAniEnd.bind(this))));\n    },\n\n    onAniEnd:function(){\n        wxGame.NotificationCenter.trigger(wxGame.EventType.PROP_CARD_BAG_ANI);\n        this.onClose();\n        this.node.active = false;\n    },\n\n    onClose:function(){\n        this.node.stopAllActions();\n        var ani = this.node.getComponent(cc.Animation);\n        var anim = ani.getAnimationState('kapai');\n        anim.stop();\n    },\n\n    // update (dt) {},\n});\n"]}