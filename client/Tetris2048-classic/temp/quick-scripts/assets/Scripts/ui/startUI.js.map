{"version":3,"sources":["startUI.js"],"names":["ThirdAPI","require","cc","Class","extends","Component","properties","score","default","type","Label","icon","Sprite","bg","gemStone","Prefab","friendBtn","Node","goldNode","spriteMoreGame","videoNode","backgroundAudio","url","AudioClip","currentBGM","reddot","reviveCoinUI","labelReviveCoin","start","init","initAudio","showGameClub","updateBestScore","spriteFrame","getTexture","setAliasTexParameters","active","string","Global","gameinfo","reviveCoinNum","time","Date","getTime","shareTime","console","log","shareTotalTimes","dailyTotalTimes","updateGold","videoRunAction","videoData","Num","updateReviveCoin","moreGameRunAction","node","runAction","repeatForever","sequence","rotateBy","delayTime","showRedDot","ret","num","goldLabel","getChildByName","getComponent","wxGold","parseInt","wx","data","loadLocalScore","maxscore","gold","loadScore","saveScore","wxScore","FBInstant","fbScore","onShareGame","game","playSound","shareGame","getImgBase64","onShareSuccess","bind","onShareFail","showDialogText","x","y","openGId","cdnGameConfig","totalSwith","shareData1","arrOpenGId","indexOf","push","saveFriendGenStoneInfo","shareDate","toDateString","d","now","shareTimes","shareData2","shareData3","loadFriendGenStoneInfo","getForTotalTimes","createGemstone","onShareGame1","onShareSuccess1","onShareFail1","myUtil","randomNum","randomForArray","randomGemStone","i","instance","instantiate","posX","randomForMinAndMax","screenHeight","posY","screenWidth","setPosition","p","action","moveTo","easing","easeElasticOut","addChild","play","enterScene","showGroupRankUI","toRankPoint","showRank","showFriendRankUI","onShowStore","showStore","onReviveCoinUI","onCloseReviveCoinUI","onGiveReviveCoin","onGiveReviveCoinSuccess","onGiveReviveCoinFail","showDialogTextAlawys","onChallenge","shareUI","onMoreGame","LinkImages","linkImages","length","httpStr","index","Math","floor","random0To1","indexStr","previewImage","onGiveGold","onGiveGoldSuccess","onGiveGoldFail","playGetGoldEffect","times","clearInterval","addInterval","setInterval","pos","startUI","getPosition","toPosition","switchBGM","audioManager","isBGMPlaying","pauseBGM","resumeBGM","playBGM","audioEngine","resume","pause","onVideo","wxRewardVideoAd","initCreateReward","videoCloseCallback","isEnded"],"mappings":"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","file":"startUI.js","sourceRoot":"../../../../../assets/Scripts/ui","sourcesContent":["let ThirdAPI = require('../common/ThirdAPI')\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        score: {\n            default: null,\n            type: cc.Label,\n        },\n        icon: {\n            default: null,\n            type: cc.Sprite,\n        },\n        bg: {\n            default: null,\n            type: cc.Sprite,\n        },\n        //随机钻石预设\n        gemStone: {\n            default: null,\n            type: cc.Prefab\n        },\n        friendBtn: {\n            default: null,\n            type: cc.Node\n        },\n        //金币节点\n        goldNode: {\n            default: null,\n            type: cc.Node\n        },\n        spriteMoreGame: {\n            default: null,\n            type: cc.Sprite,\n        },\n        videoNode: {\n            default: null,\n            type: cc.Node,\n        },\n        //背景音乐\n        backgroundAudio: {\n            url: cc.AudioClip,\n            default: null\n        },\n        currentBGM: -1,\n\n\n        // 红点\n        reddot: {\n            default: null,\n            type: cc.Node\n        },\n\n        //复活币界面\n        reviveCoinUI: {\n            default: null,\n            type: cc.Node\n        },\n        labelReviveCoin: {\n            default: null,\n            type: cc.Label\n        },\n    },\n\n    start: function () {\n        this.init();\n        this.initAudio();\n        //this.reddot.active = false;\n    },\n\n    init: function () {\n        ThirdAPI.showGameClub(true);\n        this.updateBestScore();\n        this.icon.spriteFrame.getTexture().setAliasTexParameters();\n        this.bg.spriteFrame.getTexture().setAliasTexParameters();\n\n        // 复活币界面\n        this.reviveCoinUI.active = false;\n        this.labelReviveCoin.string = 'X' + Global.gameinfo.reviveCoinNum;\n\n        //显示星星\n        var time = (new Date()).getTime() - Global.gameinfo.shareTime;\n        console.log(\"索取次数判断：\", Global.gameinfo.shareTotalTimes, Global.dailyTotalTimes, time);\n\n        //cdn判断\n        //总开关判断\n        /*\n        if (Global.cdnGameConfig.totalSwith) {\n            this.friendBtn.active = false;\n        } else {\n            //分数开关判断\n            if (Global.cdnGameConfig.startScoreSwith) {\n                //判断分数\n                console.log('判断分数：', Global.cdnGameConfig.startScoreLimit, Global.wxScore);\n                var canShow = Global.wxScore > Global.cdnGameConfig.startScoreLimit ? true : false;\n                console.log('首页索取按钮判断--canShow:', canShow, Global.gameinfo.shareTotalTimes, time);\n                this.friendBtn.active = (canShow && Global.gameinfo.shareTotalTimes < Global.dailyTotalTimes && time > Global.intervalTime) ? true : false;\n            } else {\n                console.log('设置好友索取按钮状态');\n                this.friendBtn.active = (Global.gameinfo.shareTotalTimes < Global.dailyTotalTimes && time > Global.intervalTime) ? true : false;\n            }\n        }\n        */\n\n        //this.friendBtn.active = (!Global.Gameversion && Global.gameinfo.shareTotalTimes < Global.dailyTotalTimes && time > Global.intervalTime) ? true : false;\n        this.updateGold(0);\n        //this.moreGameRunAction();\n        this.videoRunAction();\n\n        this.videoNode.active = Global.gameinfo.videoData.Num < 3;\n    },\n\n    updateReviveCoin: function () {\n        this.labelReviveCoin.string = 'X' + Global.gameinfo.reviveCoinNum;\n    },\n\n    moreGameRunAction: function () {\n        this.spriteMoreGame.node.runAction(\n            cc.repeatForever(\n                cc.sequence(cc.rotateBy(0.1, 10), cc.rotateBy(0.2, -20), cc.rotateBy(0.2, 20), cc.rotateBy(0.2, -20), cc.rotateBy(0.1, 10), cc.delayTime(2)))\n        );\n    },\n\n    videoRunAction: function () {\n        this.videoNode.runAction(\n            cc.repeatForever(\n                cc.sequence(cc.rotateBy(0.1, 10), cc.rotateBy(0.2, -20), cc.rotateBy(0.2, 20), cc.rotateBy(0.2, -20), cc.rotateBy(0.1, 10), cc.delayTime(2)))\n        );\n    },\n\n    //初始化音乐\n    initAudio: function () {\n        /*\n        this.currentBGM = cc.audioEngine.play(this.backgroundAudio, false, 0.2);\n        cc.audioEngine.setLoop(this.currentBGM, true);\n        cc.audioEngine.setVolume(this.currentBGM, 0.2);\n        var volume = cc.audioEngine.getVolume(this.currentBGM);\n        console.log('currentBGM volume is ' + volume);\n        Global.isBGMPlaying = true;\n        */\n    },\n\n    // 显示提示红点\n    showRedDot: function (ret) {\n        //this.reddot.active = ret;\n    },\n\n    //更新星星的数量\n    updateGold: function (num) {\n        var goldLabel = this.goldNode.getChildByName('label');\n        goldLabel.getComponent(cc.Label).string = Global.wxGold;\n\n        Global.wxGold += parseInt(num);\n        console.log('1 :' + num, Global.wxGold);\n        //更新并存储\n        if (typeof wx !== 'undefined') {\n            let data = ThirdAPI.loadLocalScore();\n            var score = parseInt(data.maxscore);\n            var gold = parseInt(data.gold);\n            ThirdAPI.loadScore((maxscore, gold) => {\n                score = parseInt(maxscore);\n                gold = parseInt(gold);\n                console.log('gridController on ThirdAPI loadScore', score, parseInt(gold), Global.wxGold);\n            });\n            ThirdAPI.saveScore(score, Global.wxGold);\n        }\n\n        var goldLabel = this.goldNode.getChildByName('label');\n        goldLabel.getComponent(cc.Label).string = Global.wxGold;\n    },\n\n    //更新分数\n    updateBestScore: function () {\n        if (typeof wx !== 'undefined') {\n            let data = ThirdAPI.loadLocalScore();\n            Global.wxScore = parseInt(data.maxscore);\n            Global.wxGold = parseInt(data.gold);\n            ThirdAPI.loadScore((maxscore, gold) => {\n                Global.wxScore = parseInt(maxscore);\n                Global.wxGold = parseInt(gold);\n                console.log('on ThirdAPI loadScore', Global.wxScore + \" :: \" + Global.wxGold);\n            });\n            this.score.string = \"最高分:\" + Global.wxScore;\n        } else if (typeof FBInstant !== 'undefined') {\n            this.score.string = \"High score:\" + Global.fbScore;\n        }\n    },\n\n    // 分享功能  intent(\"INVITE\" | \"REQUEST\" | \"CHALLENGE\" | \"SHARE\") 表示分享的意图\n    onShareGame: function () {\n        Global.game.playSound('btn', 0.1);\n        if (typeof FBInstant !== 'undefined') {\n            ThirdAPI.shareGame(this.getImgBase64(), this.onShareSuccess.bind(this));\n        } else if (typeof wx !== 'undefined') {\n            ThirdAPI.shareGame('randomImg', this.onShareSuccess.bind(this), this.onShareFail.bind(this), '003');\n        } else {\n            Global.game.showDialogText('索取失败，必须分享到不同微信群', {\n                x: 0,\n                y: 20\n            });\n            this.onShareSuccess();\n        }\n    },\n\n    onShareSuccess: function (openGId) {\n        //return;\n\n        if (Global.cdnGameConfig.totalSwith) {\n            return;\n        }\n\n        if (typeof wx !== 'undefined') {\n            if (!openGId) {\n                Global.game.showDialogText('索取失败，必须分享到不同微信群', {\n                    x: 0,\n                    y: 20\n                });\n                console.log('索取失败，必须分享到不同微信群');\n                return;\n            }\n        }\n\n        if (Global.gameinfo.shareData1.arrOpenGId.indexOf(openGId) != -1) {\n            console.log('该群今日已经分享过', openGId);\n            Global.game.showDialogText('该群今日已经分享过无法获得奖励');\n            return;\n        } else {\n            console.log('该群未分享过', openGId);\n            Global.gameinfo.shareData1.arrOpenGId.push(openGId);\n            ThirdAPI.saveFriendGenStoneInfo(Global.gameinfo);\n        }\n\n        //判断是否是当日(向朋友索取),防止凌晨状态\n        console.log('startUI onshareSuccess:', Global.gameinfo.shareDate, (new Date()).toDateString())\n        if (Global.gameinfo.shareDate != (new Date()).toDateString()) {\n            var d = new Date(Date.now());\n            Global.gameinfo.shareTimes = 0;\n            Global.gameinfo.shareTotalTimes = 0;\n            Global.gameinfo.shareTime = 0;\n            Global.gameinfo.shareDate = d.toDateString();\n\n            Global.gameinfo.shareData1 = {\n                shareDate: d.toDateString(),\n                arrOpenGId: [],\n            };\n            Global.gameinfo.shareData2 = {\n                shareDate: d.toDateString(),\n                arrOpenGId: [],\n            };\n            Global.gameinfo.shareData3 = {\n                shareDate: d.toDateString(),\n                arrOpenGId: [],\n            };\n            ThirdAPI.loadFriendGenStoneInfo(Global.gameinfo);\n        }\n        Global.gameinfo.shareTimes++;\n\n        //先判断5次机会，再判断每日总次数3次\n        if (Global.gameinfo.shareTimes >= Global.getForTotalTimes) {\n            console.log('次数已满', Global.gameinfo.shareTimes);\n            //5次已满\n            Global.gameinfo.shareTimes = 0;\n            Global.gameinfo.shareTotalTimes++;\n            Global.gameinfo.shareTime = (new Date()).getTime();\n        }\n        ThirdAPI.saveFriendGenStoneInfo(Global.gameinfo);\n        var time = (new Date()).getTime() - Global.gameinfo.shareTime;\n        console.log('分享成功的时间：', new Date().getTime(), Global.gameinfo.shareTime, time);\n        //this.friendBtn.active = (Global.gameinfo.shareTotalTimes < Global.dailyTotalTimes && time > Global.intervalTime) ? true : false;\n        //钻石\n        this.createGemstone();\n    },\n\n    //分享到群失败\n    onShareFail: function () {\n        return;\n        console.log('向好友索取失败');\n        //Global.game.showDialogText('索取失败，必须分享到不同微信群');\n    },\n\n    // 分享功能  intent(\"INVITE\" | \"REQUEST\" | \"CHALLENGE\" | \"SHARE\") 表示分享的意图\n    onShareGame1: function () {\n        Global.game.playSound('btn', 0.1);\n        if (typeof FBInstant !== 'undefined') {\n            ThirdAPI.shareGame(this.getImgBase64(), this.onShareSuccess1.bind(this));\n        } else if (typeof wx !== 'undefined') {\n            ThirdAPI.shareGame('randomImg', this.onShareSuccess1.bind(this), this.onShareFail1.bind(this), '003');\n        } else {\n            Global.game.showDialogText('索取失败，必须分享到不同微信群', {\n                x: 0,\n                y: 20\n            });\n            this.onShareSuccess1();\n        }\n    },\n\n    onShareSuccess1: function (openGId) {\n\n    },\n\n    //分享到群失败\n    onShareFail1: function () {\n        return;\n    },\n\n    //创建随机掉落的钻石\n    createGemstone: function () {\n        var myUtil = require('myUtil');\n        var randomNum = myUtil.randomForArray(Global.randomGemStone);\n        for (let i = 0; i < randomNum; i++) {\n            var instance = cc.instantiate(this.gemStone);\n            var posX = myUtil.randomForMinAndMax(-Global.screenHeight / 2 + 100, Global.screenHeight / 2 - 100);\n            var posY = myUtil.randomForMinAndMax(-Global.screenWidth / 2 + 100, Global.screenWidth / 2 - 100);\n            console.log('gemStone pos:', posX, posY);\n            instance.setPosition(cc.p(0, Global.screenHeight / 2 + 50));\n            var action = cc.moveTo(2, cc.p(posX, posY)).easing(cc.easeElasticOut(1));\n            this.node.addChild(instance);\n            instance.runAction(action);\n        }\n    },\n\n    //进入游戏\n    play: function () {\n        Global.game.playSound('btn', 0.1);\n        ThirdAPI.showGameClub(false);\n        Global.game.enterScene();\n    },\n\n    //进入排行榜\n    showGroupRankUI: function () {\n        Global.game.playSound('btn', 0.1);\n        ThirdAPI.showGameClub(false);\n        Global.toRankPoint = 1;\n        Global.game.showRank(true);\n    },\n\n    //进入排行榜\n    showFriendRankUI: function () {\n        Global.game.playSound('btn', 0.1);\n        ThirdAPI.showGameClub(false);\n        Global.toRankPoint = 1;\n        Global.game.showRank(false);\n    },\n\n    //皮肤商城\n    onShowStore: function () {\n        Global.game.playSound('btn', 0.1);\n        /*\n        if (typeof FBInstant !== 'undefined') {\n            ThirdAPI.shareGame(this.getImgBase64());\n        } else {\n            ThirdAPI.shareGame();\n        }*/\n        //Global.game.showStore();\n        //Global.game.showTitle();\n        ThirdAPI.showGameClub(false);\n        Global.game.showStore();\n    },\n\n    //复活币界面\n    onReviveCoinUI: function () {\n        Global.game.playSound('btn', 0.1);\n\n        this.reviveCoinUI.active = true;\n        ThirdAPI.showGameClub(false);\n    },\n\n    //关闭复活币界面\n    onCloseReviveCoinUI: function () {\n        Global.game.playSound('btn', 0.1);\n\n        this.reviveCoinUI.active = false;\n        ThirdAPI.showGameClub(true);\n    },\n\n    // 按钮回调：赠送复活币\n    onGiveReviveCoin: function () {\n        Global.game.playSound('btn', 0.1);\n\n        if (typeof FBInstant !== 'undefined') {\n            ThirdAPI.shareGame(this.getImgBase64(), this.onGiveReviveCoinSuccess.bind(this));\n        } else if (typeof wx !== 'undefined') {\n            ThirdAPI.shareGame('randomImg', this.onGiveReviveCoinSuccess.bind(this), this.onGiveReviveCoinFail.bind(this), '006');\n        } else {\n            Global.game.showDialogText('索取失败，必须分享到不同微信群', {\n                x: 0,\n                y: 20\n            });\n            this.onShareSuccess();\n        }\n    },\n\n    onGiveReviveCoinSuccess: function (openGId) {\n        console.log('赠送一个复活币！');\n        //this.playGetGoldEffect();\n        Global.game.showDialogTextAlawys(\"赠人玫瑰，手有余香!\");\n    },\n    onGiveReviveCoinFail: function () {\n\n    },\n\n    //pk竞技\n    onChallenge: function () {\n        Global.game.playSound('btn', 0.1);\n        Global.shareUI.onChallenge();\n    },\n\n    // 按钮回调：更多游戏\n    onMoreGame: function () {\n        Global.game.playSound('btn', 0.1);\n        var LinkImages = require('LinkImages');\n\n        if (Global.linkImages && Global.linkImages.length > 0) {\n            console.log('link image : ', Global.linkImages, Global.linkImages.length);\n\n            var httpStr;\n            while (1) {\n                let index = Math.floor(cc.random0To1() * Global.linkImages.length);\n                console.log('link image index : ', index);\n                httpStr = Global.linkImages[index];\n                var indexStr = httpStr.indexOf('2048');\n                if (indexStr == -1) {\n                    break;\n                }\n            }\n            console.log('httpStr:', httpStr);\n            LinkImages.previewImage(httpStr);\n        }\n    },\n\n    // 按钮回调：赠送钻石\n    onGiveGold: function () {\n        Global.game.playSound('btn', 0.1);\n\n        if (typeof FBInstant !== 'undefined') {\n            ThirdAPI.shareGame(this.getImgBase64(), this.onGiveGoldSuccess.bind(this));\n        } else if (typeof wx !== 'undefined') {\n            ThirdAPI.shareGame('randomImg', this.onGiveGoldSuccess.bind(this), this.onGiveGoldSuccess.bind(this), '005');\n        } else {\n            Global.game.showDialogText('索取失败，必须分享到不同微信群', {\n                x: 0,\n                y: 20\n            });\n            this.onShareSuccess();\n        }\n    },\n\n    onGiveGoldSuccess: function (openGId) {\n        console.log('赠送一个宝箱！');\n        //this.playGetGoldEffect();\n    },\n    onGiveGoldFail: function () {\n\n    },\n\n    playGetGoldEffect: function () {\n        //console.log('===========>得钻石特效！');\n        var times = 30;\n        clearInterval(this.addInterval);\n        this.addInterval = setInterval(() => {\n            times -= 5;\n            if (times >= 0) {\n                //console.log('===========>得钻石特效i！');\n                var instance = cc.instantiate(this.gemStone);\n                instance.setPosition(cc.p(0, 0));\n                this.node.addChild(instance);\n                var pos = Global.startUI.goldNode.getPosition();\n                instance.getComponent('getGemStone').toPosition([pos.x, pos.y], 5, 1);\n            } else {\n                clearInterval(this.addInterval);\n            }\n        }, 150);\n    },\n\n    switchBGM: function () {\n        Global.game.playSound('btn', 0.1);\n        let audioManager = require('audioManager');\n        if (Global.isBGMPlaying) {\n            //this.pauseBGM();\n            audioManager.pauseBGM();\n        } else {\n            //this.playBGM();\n            audioManager.resumeBGM();\n        }\n        Global.isBGMPlaying = !Global.isBGMPlaying;\n    },\n\n    playBGM: function () {\n        if (this.currentBGM > -1) {\n            cc.audioEngine.resume(this.currentBGM);\n        }\n    },\n\n    pauseBGM: function () {\n        if (this.currentBGM > -1) {\n            cc.audioEngine.pause(this.currentBGM);\n        }\n    },\n\n    onVideo: function () {\n        let wxRewardVideoAd = require('wxRewardVideoAd');\n        wxRewardVideoAd.initCreateReward(this.videoCloseCallback.bind(this));\n    },\n\n    videoCloseCallback: function (isEnded) {\n        console.log('===========>广告是否看完：', isEnded);\n        if (isEnded) {\n            if (Global.gameinfo.videoData.Num < 3) {\n                Global.gameinfo.videoData.Num++;\n                ThirdAPI.saveFriendGenStoneInfo(Global.gameinfo);\n\n                this.playGetGoldEffect();\n\n                if (Global.gameinfo.videoData.Num >= 3) {\n                    this.videoNode.active = false;\n                }\n            } else {\n                Global.game.showDialogTextAlawys('领取钻石次数已达上限!');\n            }\n        }\n    },\n});"]}