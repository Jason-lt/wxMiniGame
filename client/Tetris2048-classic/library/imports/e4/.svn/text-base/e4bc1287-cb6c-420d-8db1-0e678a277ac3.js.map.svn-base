{"version":3,"sources":["../../../../../assets/Scripts/CommonFrame/assets/Scripts/CommonFrame/TuyooSDK.js"],"names":["console","log","tywx","TuyooSDK","SESSION_KEY","login","IsWechatPlatform","getSystemInfo","wechatLogin","wx","success","params","LOGD","JSON","stringify","code","loginTuyooWithCode","NotificationCenter","trigger","EventType","WEIXIN_LOGIN_SUCCESS","fail","WEIXIN_LOGIN_FAIL","complete","loginTuyooWith3rdSession","getStorage","key","data","request","url","SystemInfo","loginUrl","snsId","deviceName","clientId","appId","userInfo","showShareMenu","withShareTicket","gender","local_uuid","Util","getLocalUUID","sdkPath","dataObj","wxAppId","uuid","scene_id","UserInfo","scene_param","invite_id","nickName","nikeName","avatarUrl","header","method","checkData","error","result","userId","userName","userPic","purl","authorCode","wxgame_session_key","token","setStorage","initWebSocketUrl","SDK_LOGIN_SUCCESS","SDK_LOGIN_FAIL","loginResult","tcpsrv","ip","port","wsport","webSocketUrl","indexOf","toString","model","isiPhone","windowHeight","resultType","systemType","wechatType","version","system","createOrder","id","prodPrice","name","prodCount","prodId","chargeType","gameId","prodName","appInfo","rechargeOrder","orderCallFunc","platformOrderId","chargeCoin","_chargeCoin","imei","results","tips","LOGE","mustcharge","chargeInfo","chargeData","notifyUrl","requestMidasPayment","mode","env","offerId","buyQuantity","chargeTotal","platform","currencyType","zoneId","WechatInterfaceInit","onShow","scene","query","from","inviteCode","StateInfo","isOnForeground","GAME_SHOW","sourceCode","BiLog","clickStat","clickStatEventType","clickStatEventTypeUserFrom","imageType","onHide","date","Date","getTime","GAME_HIDE","TCPClient","close","getNetSuccess","res","hasOwnProperty","networkConnected","isConnected","errMsg","networkType","getNetworkType","onNetworkStatusChange","onError","d","toDateString","toTimeString","message","uploadLogTimely"],"mappings":"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","file":"TuyooSDK.js","sourceRoot":"../../../../../assets/Scripts/CommonFrame","sourcesContent":["/**\n * @author zhaoliang\n * @date 1.28\n * \n * 全局对象\n * 系统信息\n * 包括clientId，loginUrl等\n */\nconsole.log(\"TuyooSDK loaded\");\ntywx.TuyooSDK = {\n    SESSION_KEY: 'TU_SESSION_STORAGE',\n\n    /***************************以下为登录相关接口*********************************/\n    login: function() {\n        if(tywx.IsWechatPlatform()) {\n            tywx.TuyooSDK.getSystemInfo();\n            tywx.TuyooSDK.wechatLogin();\n        }\n        else {\n            //其他平台,待添加\n        }\n    },\n\n    // 微信登录\n    wechatLogin: function() {\n        if(!tywx.IsWechatPlatform()) {\n            return;\n        }\n        //tywx.BiLog.clickStat(tywx.UserInfo.clickStatEventType.clickStatEventTypeWxLoginStart, []);\n        wx.login({\n            success: function(params) {\n                tywx.LOGD(null, 'wx login success, params:' + JSON.stringify(params));\n                //tywx.BiLog.clickStat(tywx.UserInfo.clickStatEventType.clickStatEventTypeWxLoginSuccess, [code]);\n                if (params.code) {\n                    var code = params.code;\n                    tywx.TuyooSDK.loginTuyooWithCode(code, {});\n                    tywx.NotificationCenter.trigger(tywx.EventType.WEIXIN_LOGIN_SUCCESS);\n                }\n            },\n\n            fail: function(params) {\n                //tywx.BiLog.clickStat(tywx.UserInfo.clickStatEventType.clickStatEventTypeWxLoginFailed, []);\n                tywx.LOGD(null, 'wx login fail, params:' + JSON.stringify(params));\n                tywx.NotificationCenter.trigger(tywx.EventType.WEIXIN_LOGIN_FAIL);\n            },\n\n            complete: function(params) {\n\n            }\n        });\n    },\n\n    // 微信不需要重新授权，使用\n    loginTuyooWith3rdSession: function() {\n        if(!tywx.IsWechatPlatform()) {\n            return;\n        }\n        wx.getStorage({\n            key: tywx.TuyooSDK.SESSION_KEY,\n            success: function(params) {\n                if (!params.data) {\n                    tywx.TuyooSDK.wechatLogin();\n                    return;\n                }\n                // 微信授权成功后使用code登录途游服务器\n                wx.request({\n                    url: tywx.SystemInfo.loginUrl + 'open/v3/user/processSnsIdNew',\n                    data: {\n                        snsId: params.data,\n                        deviceName: 'wechatGame',\n                        clientId: tywx.SystemInfo.clientId,\n                        appId: tywx.SystemInfo.appId\n                    },\n\n                    success: function(params) {\n                        tywx.LOGD(null, 'tuyoo login success, params:' + JSON.stringify(params));\n                    },\n\n                    fail: function(params) {\n                        tywx.LOGD(null, 'tuyoo login fail, params:' + JSON.stringify(params));\n                    },\n\n                    complete: function(params) {\n\n                    }\n                });\n            },\n            fail: function(params) {\n                tywx.TuyooSDK.wechatLogin();\n            },\n            complete:function(params) {\n\n            }\n        });\n    },\n\n    // 微信授权成功后，使用\n    /* {\n        \"data\": {\n            \"result\": {\n                \"code\": 0,\n                \"userId\": 10116,\n                \"exception_report\": 0,\n                \"userType\": 4,\n                \"authInfo\": \"{\\\"authcode\\\": \\\"eyJ1aWQiOiAxMDExNiwgInVuYW1lIjogIlx1Njc2NVx1NWJiZTAwNzRBaWJzVCIsICJ1dG9rZW4iOiAiMjAxOC0wMS0yOSAxNDoxMzoxMi40NzEzMzgiLCAiY29pbiI6IDAsICJlbWFpbCI6ICIiLCAidXRpbWUiOiAiMjAxOC0wMS0yOSAxNDoxMzoxMi40NzA0NzEifQ==\\\", \\\"account\\\": \\\"\\\", \\\"uid\\\": 10116, \\\"usercode\\\": \\\"\\\"}\",\n                \"tcpsrv\": {\n                    \"ip\": \"192.168.10.88\",\n                    \"port\": 8041\n                },\n                \"isCreate\": 1,\n                \"changePwdCount\": 0,\n                \"360.vip\": 0,\n                \"logclient\": {\n                    \"loguploadurl\": \"\",\n                    \"logreporturl\": \"\"\n                },\n                \"userPwd\": \"ty817142\",\n                \"purl\": \"http://ddz.image.tuyoo.com/avatar/head_female_0.png\",\n                \"snsId\": \"wxapp:071Nehqt0Z4XEe1jN6qt007Cqt0Nehqz\",\n                \"userEmail\": \"\",\n                \"connectTimeOut\": 35,\n                \"appId\": 9999,\n                \"heartBeat\": 6,\n                \"userName\": \"来宾0074AibsT\",\n                \"mobile\": \"\",\n                \"token\": \"cce362d6-68a8-485e-b137-86ae6828e07a\",\n                \"authorCode\": \"eyJ1aWQiOiAxMDExNiwgInVuYW1lIjogIlx1Njc2NVx1NWJiZTAwNzRBaWJzVCIsICJ1dG9rZW4iOiAiMjAxOC0wMS0yOSAxNDoxMzoxMi40NzEzMzgiLCAiY29pbiI6IDAsICJlbWFpbCI6ICIiLCAidXRpbWUiOiAiMjAxOC0wMS0yOSAxNDoxMzoxMi40NzA0NzEifQ==\",\n                \"log_report\": 0,\n                \"showAd\": 1\n            }\n        },\n        \"header\": {\n            \"Server\": \"nginx/1.4.1\",\n            \"Date\": \"Mon, 29 Jan 2018 06:13:12 GMT\",\n            \"Content-Type\": \"application/json;charset=UTF-8\",\n            \"Transfer-Encoding\": \"chunked\",\n            \"Connection\": \"keep-alive\",\n            \"Content-Encoding\": \"gzip\"\n        },\n        \"statusCode\": 200,\n        \"errMsg\": \"request:ok\"\n    }\n    */\n    loginTuyooWithCode: function(code, userInfo) {\n        if(!tywx.IsWechatPlatform()) {\n            return;\n        }\n        // 微信授权成功后使用code登录途游服务器\n        wx.showShareMenu({\n            withShareTicket: true\n        });\n\n\n        //咱们后端 0 是男 1 是女,要转换\n        var gender = userInfo.gender || 0;\n\n        var local_uuid = tywx.Util.getLocalUUID();\n        tywx.LOGD(\"local_uuid:\",local_uuid);\n        var sdkPath = tywx.SystemInfo.loginUrl;\n        var dataObj = {\n            appId: tywx.SystemInfo.appId,\n            wxAppId: tywx.SystemInfo.wxAppId,\n            clientId: tywx.SystemInfo.clientId,\n            snsId: 'wxapp:' + code,\n            uuid : local_uuid,\n            //以下为上传玩家的微信用户信息\n            //nickName: userInfo.nickName,\n            //avatarUrl: userInfo.avatarUrl,\n            gender: gender,\n            scene_id : tywx.UserInfo.scene_id || \"\",\n            scene_param : tywx.UserInfo.scene_param || \"\",\n            invite_id : tywx.UserInfo.invite_id || 0\n        };\n        if(userInfo && userInfo.nickName) {\n            dataObj.nikeName = userInfo.nickName;\n        }\n\n        if(userInfo && userInfo.avatarUrl) {\n            dataObj.avatarUrl = userInfo.avatarUrl;\n        }\n        //tywx.BiLog.clickStat(tywx.UserInfo.clickStatEventType.clickStatEventTypeLoginSDKStart, [code, local_uuid, userInfo.nickName]);\n        wx.request({\n            url: sdkPath + 'open/v6/user/LoginBySnsIdNoVerify',\n            header: {\n                'content-type': 'application/x-www-form-urlencoded'\n            },\n            data: dataObj,\n            method:'POST',\n\n            success: function(params) {\n                console.log(\"success 11\");\n                tywx.LOGD(null, 'tuyoo login success, params:' + JSON.stringify(params));\n                var checkData = params.data;\n                console.log('tuyoo login success...', checkData);\n                if (checkData.error && checkData.error.code == 1){\n                    console.log('tuyoo login fail...');\n                    return;\n                }\n                // 保存用户名/用户ID/用户头像\n                var result = checkData.result;\n                tywx.UserInfo.userId = result.userId;\n                tywx.UserInfo.userName = result.userName;\n                tywx.UserInfo.userPic = result.purl;\n                tywx.UserInfo.authorCode = result.authorCode;\n                tywx.UserInfo.wxgame_session_key = result.wxgame_session_key;\n                tywx.LOGD(null, 'userId:' + tywx.UserInfo.userId + ' userName:' + tywx.UserInfo.userName + ' userPic:' + tywx.UserInfo.userPic);\n\n                var token = result.token;\n                tywx.LOGD(null, 'token:' + token);\n                wx.setStorage({\n                    key: tywx.TuyooSDK.SESSION_KEY,\n                    data: token\n                });\n\n                //tywx.BiLog.clickStat(tywx.UserInfo.clickStatEventType.clickStatEventTypeLoginSDKSuccess, [code, local_uuid, userInfo.nickName, result.userId]);\n                tywx.TuyooSDK.initWebSocketUrl(result);\n\n                // 发送登录成功事件\n                tywx.NotificationCenter.trigger(tywx.EventType.SDK_LOGIN_SUCCESS);\n            },\n\n            fail: function(params) {\n                console.log(\"fail 11\");\n                //tywx.BiLog.clickStat(tywx.UserInfo.clickStatEventType.clickStatEventTypeLoginSDKFailed, [code, local_uuid, userInfo.nickName]);\n                tywx.LOGD(null, 'tuyoo login fail, params:' + JSON.stringify(params));\n                tywx.NotificationCenter.trigger(tywx.EventType.SDK_LOGIN_FAIL);\n            },\n\n            complete: function(params) {\n\n            }\n        });\n    },\n\n    /**\n     * 使用sdk登陆返回信息解析得到服务器连接地址,对于单机游戏来说无效\n     * @param loginResult\n     */\n    initWebSocketUrl: function(loginResult) {\n        if(loginResult && loginResult.tcpsrv) {\n            var ip = loginResult.tcpsrv.ip;\n            var port = loginResult.tcpsrv.wsport || loginResult.tcpsrv.port; //优先使用wsport\n            var webSocketUrl;\n            if (tywx.SystemInfo.loginUrl.indexOf(\"170\") > -1 || tywx.SystemInfo.loginUrl.indexOf(\"https://\") > -1){\n                webSocketUrl = 'wss://' + ip + '/';\n            }\n            else{\n                webSocketUrl = 'ws://' + ip + ':' + port.toString() + '/';\n            }\n            tywx.LOGD(null, 'webSocketUrl:' + webSocketUrl);\n            tywx.SystemInfo.webSocketUrl = webSocketUrl;\n        }\n    },\n\n\n    getSystemInfo : function () {\n        // {\n        // \t\"0\":{\n        // \t\"errMsg\":\"getSystemInfo:ok\",\n        // \t\t\"model\":\"iPhone X\",\n        // \t\t\"pixelRatio\":3,\n        // \t\t\"windowWidth\":375,\n        // \t\t\"windowHeight\":812,\n        // \t\t\"system\":\"iOS 10.0.1\",\n        // \t\t\"language\":\"zh_CN\",\n        // \t\t\"version\":\"6.6.3\",\n        // \t\t\"batteryLevel\":100,\n        // \t\t\"screenWidth\":375,\n        // \t\t\"screenHeight\":812,\n        // \t\t\"SDKVersion\":\"1.8.0\",\n        // \t\t\"brand\":\"devtools\",\n        // \t\t\"fontSizeSetting\":16,\n        // \t\t\"statusbarHeight\":44,\n        // \t\t\"platform\":\"devtools\"\n        // }\n        // }\n        if(!tywx.IsWechatPlatform()) {\n            return;\n        }\n        wx.getSystemInfo({\n            success : function (result) {\n                var model = result.model;\n                var isiPhone = model.indexOf(\"iPhone\") >= 0;\n                var windowHeight = result.windowHeight;\n                var resultType = 0;\n                if (isiPhone){\n                    if(windowHeight == 812){   //iPhoneX\n                        resultType = 2;\n                    }else if (windowHeight == 736){ // 7p 8p\n                        resultType = 4;\n                    }else {  //其他iPhone\n                        resultType = 1;\n                    }\n                }else { //cc.sys.OS_ANDROID\n                    resultType = 3;\n                }\n                tywx.UserInfo.systemType = resultType;\n                tywx.UserInfo.wechatType = result.version;\n                tywx.UserInfo.model = result.model;\n                tywx.UserInfo.system = result.system;\n            },\n            fail : function () {\n            },\n            complete : function () {\n            }\n        });\n    },\n\n    /***************************以下为支付相关接口*********************************/\n\n    createOrder:function(id, prodPrice, name, prodCount){\n        /*\n         params  id:商品ID,prodPrice:价格  单位元, name:商品名称\n         prodCount:购买数量,默认为1\n\n         prodId:商品ID, prodName:商品名称, prodCount:购买数量\n         prodPrice:价格  单位元,\n         chargeType:支付方式 wxapp.iap,\n         gameId:子游戏id,\n         appInfo:透传参数,\n         mustcharge:是否支付 默认填 1\n         */\n        var data = {};\n        data.prodId = id;\n        data.prodPrice = prodPrice;\n        data.chargeType = \"wxapp.iap\";\n        data.gameId = tywx.SystemInfo.gameId;\n        data.prodName = name;\n        data.prodCount = prodCount;\n        data.appInfo = {};\n        tywx.TuyooSDK.rechargeOrder(data);\n    },\n\n    orderCallFunc:function(url, platformOrderId, chargeCoin){\n        if(!tywx.IsWechatPlatform()) {\n            return;\n        }\n        var local_uuid = tywx.Util.getLocalUUID();\n        var _chargeCoin = chargeCoin;\n        wx.request({\n            url: url,\n            header: {\n                'content-type': 'application/x-www-form-urlencoded'\n            },\n            data: {\n                userId:tywx.UserInfo.userId,\n                appId: tywx.SystemInfo.appId,\n                wxAppId: tywx.SystemInfo.wxAppId,\n                clientId: tywx.SystemInfo.clientId,\n                imei: 'null',\n                uuid : local_uuid,\n                platformOrderId: platformOrderId,\n            },\n\n            method:'POST',\n\n            success: function(results) {\n                var tips = \"购买成功\";\n            },\n            fail: function(params) {\n                tywx.LOGE(null, 'file = [Recharge] fun = [OrderCallFun] 充值失败 params = ' + JSON.stringify(params));\n            },\n            complete: function(params) {\n\n            }\n        });\n    },\n\n    /*\n     params prodId:商品ID, prodName:商品名称, prodCount:购买数量\n     prodPrice:价格  单位元,\n     chargeType:支付方式 wxapp.iap,\n     gameId:子游戏id,\n     appInfo:透传参数,\n     mustcharge:是否支付 默认填 1\n     */\n    rechargeOrder: function (params){\n        if(!tywx.IsWechatPlatform()) {\n            return;\n        }\n        var local_uuid = tywx.Util.getLocalUUID();\n        var sdkPath = tywx.SystemInfo.loginUrl;\n        wx.request({\n            url: sdkPath + 'open/v4/pay/order',\n            header: {\n                'content-type': 'application/x-www-form-urlencoded'\n            },\n            data: {\n                userId:tywx.UserInfo.userId,\n                appId: tywx.SystemInfo.appId,\n                wxAppId: tywx.SystemInfo.wxAppId,\n                clientId: tywx.SystemInfo.clientId,\n                imei: 'null',\n                uuid : local_uuid,\n                //商品信息\n                prodId: params.prodId,\n                prodName: params.prodName,\n                prodCount: params.prodCount || 1,\n                prodPrice: params.prodPrice,\n                chargeType: params.chargeType,\n                gameId : params.gameId,\n                appInfo : params.appInfo,\n                mustcharge : params.mustcharge || 1\n            },\n\n            method:'POST',\n\n            success: function(params) {\n                tywx.LOGE(null, 'tuyoo rechargeOrder success, params:' + JSON.stringify(params));\n                var results = params.data.result;\n                if (results.code == 0) {\n                    var chargeInfo = results.chargeInfo;\n                    var chargeData = chargeInfo.chargeData;\n                    var notifyUrl = chargeData.notifyUrl;\n                    var platformOrderId = chargeData.platformOrderId;\n                    tywx.LOGE(null, 'tuyoo rechargeOrder success 创建订单成功, chargeData.mustcharge =' + chargeData.mustcharge);\n                    if (chargeData && chargeData.mustcharge == 1) {\n                        // wx.requestMidasPayment  购买微信币\n                        wx.requestMidasPayment({\n                            mode: chargeData.mode,\n                            env: chargeData.env,\n                            offerId: chargeData.offerId,\n                            buyQuantity: 10 * chargeInfo.chargeTotal,\n                            platform:chargeData.platform,\n                            currencyType:\"CNY\",\n                            zoneId: chargeData.zoneId,\n                            success:function(params) {\n                                // 支付成功\n                                tywx.TuyooSDK.orderCallFunc(notifyUrl,platformOrderId,chargeInfo.chargeCoin);\n                            },\n                            fail:function(params) {\n                                tywx.LOGE(null, '米大师支付 fail params = ' + JSON.stringify(params));\n                            }\n                        });\n                    }else if (chargeData && chargeData.mustcharge == 0){\n                        tywx.TuyooSDK.orderCallFunc(notifyUrl,platformOrderId,chargeInfo.chargeCoin);\n                    }\n                }else if (results.code == 1) {\n                    //hall.MsgBoxManager.showToast({title : results.info});\n                }else if (results.code == 3) {\n                    //hall.MsgBoxManager.showToast({title : '微信小程序登陆验证失败!'});\n                }\n            },\n            fail: function(params) {\n                //hall.MsgBoxManager.showToast({title : '购买失败!'});\n            },\n            complete: function(params) {\n            }\n        });\n    },\n};\n\n\ntywx.WechatInterfaceInit = function() {\n    if(tywx.IsWechatPlatform()) {\n        /**\n         * 小程序回到前台,具体逻辑自己实现\n         */\n        console.log('wx.onShow');\n        wx.onShow(function (result) {\n            // {\"0\":{\"scene\":1044,\"shareTicket\":\"beecdf9e-e881-492c-8a3f-a7d8c54dfcdb\",\"query\":{}}}  (从后台切到前台才有shareTicket,启动时没有)\n            //取相关参数\n            var scene = result.scene;\n            var query = result.query;\n            console.log(result);\n            //来源处理\n            tywx.UserInfo.scene_id = scene;\n            tywx.UserInfo.scene_param = query.from || \"\";\n            tywx.UserInfo.invite_id = query.inviteCode || 0;\n            tywx.LOGE('', \"+++++++++++++++++onShow+++++++++++++++++\"+JSON.stringify(result));\n            tywx.StateInfo.isOnForeground = true;\n            tywx.NotificationCenter.trigger(tywx.EventType.GAME_SHOW);\n            console.log('start tywx.WechatInterfaceInit');\n\n            if(query && query.sourceCode) {\n                console.log('start tywx.WechatInterfaceInit 1');\n                //从小程序消息卡片中点入,该场景为\"点击用户分享卡片进入游戏注册时，分享用户的user_id直接当做场景参数放在param02，param03和param04分别代表分享点id和分享图文id\"\n                //var query = \"inviteCode=\"+ty.UserInfo.userId+\"&sourceCode=\"+type +\"&imageType=\"+imageMap.imageType+\"&inviteName=\"+ty.UserInfo.userName;\n                tywx.BiLog.clickStat(tywx.clickStatEventType.clickStatEventTypeUserFrom,[scene, query.inviteCode, query.sourceCode, query.imageType]);\n            } else {\n                console.log('start tywx.WechatInterfaceInit 2');\n                //场景值和场景参数分别记录到可选参数param01和param02当中，如param01=1058，param02=tuyouqipai\n                //场景参数由项目组接入推广渠道时配置，如公众号dacihua、tuyouqipai，二维码填写企业或个人标识\n                tywx.BiLog.clickStat(tywx.clickStatEventType.clickStatEventTypeUserFrom,[scene, query.from]);\n            }\n            tywx.TuyooSDK.login();\n        });\n\n        /**\n         * 小程序进入后台\n         */\n        wx.onHide(function () {\n            tywx.UserInfo.scene_id = 0;\n            tywx.StateInfo.isOnForeground = false;\n            var date = new Date().getTime();\n            tywx.NotificationCenter.trigger(tywx.EventType.GAME_HIDE);\n            tywx.LOGE('',\"+++++++++++++++++onHide+++++++++++++++++\");\n            tywx.TCPClient.close();\n        });\n\n        var getNetSuccess = function (res) {\n            if (res.hasOwnProperty('isConnected')){\n                tywx.StateInfo.networkConnected = res.isConnected;\n            }\n            else if (res.hasOwnProperty('errMsg')){\n                tywx.StateInfo.networkConnected = res.errMsg == 'getNetworkType:ok'\n            }\n            else{\n                tywx.StateInfo.networkConnected = res.networkType != 'none';\n            }\n\n            tywx.StateInfo.networkType = res.networkType;//wifi,2g,3g,4g,none,unknown\n        };\n\n        wx.getNetworkType({\n            success:getNetSuccess\n        });\n\n        wx.onNetworkStatusChange(getNetSuccess);\n\n        wx.onError(function (res) {\n            var d = new Date();\n            var errMsg = 'userId:' + tywx.UserInfo.userId + 'time:'+ d.toDateString() + ' ' + d.toTimeString() +';' + res.message;\n            tywx.BiLog.uploadLogTimely(errMsg);\n        });\n    };\n};\n\ntywx.WechatInterfaceInit();\n\n"]}