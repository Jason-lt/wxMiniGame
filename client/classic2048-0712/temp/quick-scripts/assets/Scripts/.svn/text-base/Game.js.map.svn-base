{"version":3,"sources":["Game.js"],"names":["ThirdAPI","require","cc","Class","extends","Component","properties","girdRoot","default","type","Prefab","bannerCloseBtn","Node","btnSound","tipsNode","bannerAdInstance","onLoad","console","log","Date","getTime","biManager","bilog","loadGame","Global","game","getComponent","active","myUtil","resetInitData","loginDateStr","toDateString","tcpManager","websocket","init","sendCmd","lisiner","startLoadRes","httpUtils","self","httpGets","data","jsonData","JSON","parse","cdnGameConfig","bannerAdConfig","reviveConfig","clearVNum","startConfig","listenUtil","eventCtrl","trigger","totalSwith","swith","error","linkImages","cdnShareImages","shareImages","cdnTexts","shareTexts","propShareImages","propShareTexts","loadLocalWeightConfig","weightConfig","loadLocalDailyConfig","dailyConfig","shareManager","LoadAtlas","loadAtlasRes","enterGame","startGame","getProp","setTest","initFriendRank","loader","loadRes","err","oneWeightRate","oneTotalWeight","retCode","isFromGroup","gameinfo","clearPropNum","clearPropLimit","showDialogPropText","saveFriendGenStoneInfo","superPropNum","superPropLimit","doublePropNum","doublePropLimit","wx","startUI","setTimeout","updateGold","addStone","stoneNum","msg","clearGameInfo","clearFriendGenStoneInfo","loadPrefab","uiRootPrefab","uiScript","instantiate","node","parent","removeChild","showStartUI","addListen","cdnchange","bind","addChild","initStoreData","initTitleData","initUIData","showShareUI","showRank","canShowGameClub","rankPrefab","rankui","initData","showGroupRank","initGetGroupRank","showStore","storePrefab","storeUI","skin","showRevive","revivePrefab","reviveUI","showTitle","titlePrefab","titleUI","onClose","showTitleInfo","titleInfoPrefab","titleInfoUI","showRewardUI","rewardPrefab","rewardUI","sendGetClickUserList","showPropDialog","isChest","showText","parmaIndex","propInfoPrefab","propInfoUI","showAddPropDialog","parma","addPropInfoPrefab","addPropInfoUI","storeData","loadInfo","skinIndex","loadCurrentSkin","titleData","titleDateData","titleUnlockData","shareData","loadShareData","d","now","d1","shareTimes","shareDate","saveShareData","saveScore","loadLocalScore","score","parseInt","maxscore","gold","loadScore","wxGold","text","setLocalZOrder","stopAllActions","label","getChildByName","Label","string","width","find","showDialogText","p","playSound","sname","volume","isSoundPlaying","AudioClip","clip","sound","audioSource","AudioSource","play","switchSound","restart","enterScene","list","gridController","initGridData"],"mappings":"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","file":"Game.js","sourceRoot":"../../../../assets/Scripts","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/class.html\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/class/index.html\n// Learn Attribute:\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/reference/attributes/index.html\n// Learn life-cycle callbacks:\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/life-cycle-callbacks/index.html\nlet ThirdAPI = require('./common/ThirdAPI')\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        girdRoot: {\n            default: null,\n            type: cc.Prefab,\n        },\n        bannerCloseBtn: {\n            default: null,\n            type: cc.Node,\n        },\n        //声音\n        btnSound: {\n            default: null,\n            type: cc.Prefab,\n        },\n        /*\n                //战斗\n                battleRootPrefab: {\n                    default: null,\n                    type: cc.Prefab,\n                },\n                //ui\n                uiRootPrefab: {\n                    default: null,\n                    type: cc.Prefab,\n                },\n                //排行\n                rankPrefab: {\n                    default: null,\n                    type: cc.Prefab,\n                },\n                //商店\n                storePrefab: {\n                    default: null,\n                    type: cc.Prefab,\n                },\n                //复活界面\n                revivePrefab: {\n                    default: null,\n                    type: cc.Prefab,\n                },\n                //成就\n                titlePrefab: {\n                    default: null,\n                    type: cc.Prefab,\n                },\n                //成就查看\n                titleInfoPrefab: {\n                    default: null,\n                    type: cc.Prefab,\n                },\n                //奖励预设\n                rewardPrefab: {\n                    default: null,\n                    type: cc.Prefab,\n                },\n                propInfoPrefab: {\n                    default: null,\n                    type: cc.Prefab,\n                },\n                addPropInfoPrefab: {\n                    default: null,\n                    type: cc.Prefab,\n                },*/\n        //提示文本\n        tipsNode: {\n            default: null,\n            type: cc.Node,\n        },\n\n        bannerAdInstance: null,\n    },\n\n    onLoad() {\n        console.log(\"***\", new Date().getTime());\n        //记载游戏打点\n        var biManager = require('biManager');\n        biManager.bilog(biManager.loadGame, null);\n\n        Global.game = this.getComponent('Game');\n        this.tipsNode.active = false;\n\n        var myUtil = require('myUtil');\n        myUtil.resetInitData();\n        //记录登录时的时间\n        Global.loginDateStr = (new Date()).toDateString();\n\n        tcpManager.websocket.init();\n        tcpManager.sendCmd.lisiner();\n\n        this.startLoadRes();\n\n        //请求cdn数据\n        var httpUtils = this.getComponent('httpUtils');\n        let self = this;\n        httpUtils.httpGets('https://sanxqn.nalrer.cn/tysanxiao/classics2048/classic2048config1.json', function (data) {\n            try {\n                if (data === -1) {\n                    //self.startLoadRes();\n                    console.log('请检查网络！');\n                } else {\n                    var jsonData = JSON.parse(data);\n                    console.log(\"jsonData:\", jsonData);\n                    if (jsonData) {\n                        //cdn开关配置\n                        if (jsonData.cdnGameConfig) {\n                            Global.cdnGameConfig = jsonData.cdnGameConfig;\n                        } else {\n                            console.log('读取cdn文件错误，取本地数据');\n                        }\n                        //banner广告配置\n                        if (jsonData.bannerAdConfig) {\n                            Global.bannerAdConfig = jsonData.bannerAdConfig;\n                        }\n                        //复活消除行数\n                        if (jsonData.reviveConfig) {\n                            if (jsonData.reviveConfig.clearVNum) {\n                                Global.clearVNum = jsonData.reviveConfig.clearVNum;\n                            }\n                        }\n                        //add添加钻石数量\n                        if (jsonData.startConfig) {\n                            Global.startConfig = jsonData.startConfig;\n                        }\n                    }\n                    listenUtil.eventCtrl.trigger('cdnchange', null);\n                    console.log('Global.cdnGameConfig.totalSwith:' + Global.cdnGameConfig.totalSwith, Global.bannerAdConfig.swith);\n                    //self.startLoadRes();\n                }\n            } catch (error) {\n                //self.startLoadRes();\n                console.log(error);\n            }\n        });\n        console.log('startgame', Global.cdnGameConfig);\n\n        //请求内链图\n        httpUtils.httpGets('https://sanxqn.nalrer.cn/tysanxiao/classics2048/linkImages/linkImages.json', function (data) {\n            if (data === -1) {\n                console.log('请检查网络！');\n            } else {\n                console.log('从CDN获取内敛图数据');\n                var jsonData = JSON.parse(data);\n                console.log(jsonData);\n                Global.linkImages = jsonData.linkImages;\n                console.log(Global.linkImages);\n            }\n        });\n\n        // 请求cdn分享图数据\n        httpUtils.httpGets('https://sanxqn.nalrer.cn/tysanxiao/classics2048/shareImages/shareInfo1.json', function (data) {\n            if (data === -1) {\n                console.log('请检查网络！');\n            } else {\n                console.log('从CDN获取分享图数据');\n                var jsonData = JSON.parse(data);\n                console.log(jsonData);\n                Global.cdnShareImages = jsonData.shareImages;\n                Global.cdnTexts = jsonData.shareTexts;\n\n                if (jsonData.propShareImages) {\n                    Global.propShareImages = jsonData.propShareImages;\n                }\n                if (jsonData.propShareTexts) {\n                    Global.propShareTexts = jsonData.propShareTexts;\n                }\n                console.log('道具分享图片配置文件：', Global.propShareImages);\n\n                console.log(Global.cdnShareImages);\n            }\n        });\n\n        //请求掉率配置文件\n        httpUtils.httpGets('https://sanxqn.nalrer.cn/tysanxiao/classics2048/weightConfig.json', function (data) {\n            try {\n                if (data === -1) {\n                    self.loadLocalWeightConfig();\n                    console.log('请检查网络！');\n                } else {\n                    var jsonData = JSON.parse(data);\n                    console.log(\"jsonData:\", jsonData);\n                    if (jsonData && jsonData.weightConfig) {\n                        Global.weightConfig = jsonData.weightConfig;\n                        console.log('从cdn读取掉率成功：', Global.weightConfig);\n                    } else {\n                        self.loadLocalWeightConfig();\n                    }\n                }\n            } catch (error) {\n                self.loadLocalWeightConfig();\n                console.log('aaaaa:', error);\n            }\n        });\n\n        //请求每日挑战json数据\n        httpUtils.httpGets('https://sanxqn.nalrer.cn/tysanxiao/classics2048/grids.json', function (data) {\n            try {\n                if (data === -1) {\n                    self.loadLocalDailyConfig();\n                    console.log('请检查网络！');\n                } else {\n                    var jsonData = JSON.parse(data);\n                    console.log(\"daily jsonData:\", jsonData);\n                    if (jsonData) {\n                        Global.dailyConfig = jsonData;\n                        console.log('从cdn读取每日挑战关卡成功：', Global.dailyConfig);\n                    } else {\n                        self.loadLocalDailyConfig();\n                    }\n                }\n            } catch (error) {\n                self.loadLocalDailyConfig();\n                console.log(error);\n            }\n        });\n    },\n\n    //开始加载资源并启动游戏\n    startLoadRes: function () {\n        console.log(\"***2\", new Date().getTime());\n        var self = this;\n        Global.shareManager = require('./common/shareManager');\n        Global.LoadAtlas = require(\"LoadAtlas\");\n        Global.LoadAtlas.loadAtlasRes(\"textures/gridItem/skins\", function () {});\n        Global.LoadAtlas.loadAtlasRes(\"textures/gridItem/items\", function () {\n            console.log(\"***3\", new Date().getTime());\n            //记录成功进入游戏打点\n            var biManager = require('biManager');\n            biManager.bilog(biManager.enterGame, null);\n            self.startGame();\n            self.getProp();\n            self.setTest();\n\n            //初始化好友排行\n            ThirdAPI.initFriendRank();\n        });\n    },\n\n    setTest: function () {\n       \n    },\n\n    //加载本地掉率配置文件\n    loadLocalWeightConfig: function () {\n        cc.loader.loadRes('weightConfig', function (err, data) {\n            Global.weightConfig = data.weightConfig;\n            console.log('读取本地掉率json文件', Global.weightConfig.oneWeightRate, Global.weightConfig.oneTotalWeight);\n        });\n    },\n\n    //加载本地每日挑战的关卡数据\n    loadLocalDailyConfig: function () {\n        cc.loader.loadRes('grids', function (err, data) {\n            Global.dailyConfig = data;\n            console.log(\"读取本地掉率json文件\", data);\n        });\n    },\n\n    //判断是否从群里面点击进入，有额外奖励道具\n    getProp: function () {\n        console.log('检测是否从微信群进入...');\n        var retCode = ThirdAPI.isFromGroup();\n        if (retCode != -1) {\n            console.log('是从微信群进入...');\n            //Global.uiScript.startUI.getComponent('startUI').playGetGoldEffect();\n            if (retCode == 1) {\n                //点击得清除道具\n                if (Global.gameinfo.clearPropNum >= Global.clearPropLimit) {\n                    Global.game.showDialogPropText('道具数量已达上限！');\n                } else {\n                    console.log('获得消除锤锤一个');\n                    Global.game.showDialogPropText('恭喜获得消除锤锤道具一个！回赠给好友一个吧！');\n                    Global.gameinfo.clearPropNum++;\n                    ThirdAPI.saveFriendGenStoneInfo(Global.gameinfo);\n                }\n            } else if (retCode == 2) {\n                //点击得万能道具\n                if (Global.gameinfo.superPropNum >= Global.superPropLimit) {\n                    Global.game.showDialogPropText('道具数量已达上限！');\n                } else {\n                    console.log('获得万能道具一个');\n                    Global.game.showDialogPropText('恭喜获得万能道具一个！回赠给好友一个吧！');\n                    Global.gameinfo.superPropNum++;\n                    ThirdAPI.saveFriendGenStoneInfo(Global.gameinfo);\n                }\n            } else if (retCode == 3) {\n                //点击得双倍道具\n                if (Global.gameinfo.doublePropNum >= Global.doublePropLimit) {\n                    Global.game.showDialogPropText('道具数量已达上限！');\n                } else {\n                    Global.game.showDialogPropText('恭喜获得双倍道具一个！回赠给好友一个吧！');\n                    Global.gameinfo.doublePropNum++;\n                    ThirdAPI.saveFriendGenStoneInfo(Global.gameinfo);\n                }\n            } else if (retCode == 4) {\n                Global.game.showDialogPropText('恭喜获得钻石！回赠给好友一个吧！');\n\n                if (typeof wx !== 'undefined') {\n                    /* let data = ThirdAPI.loadLocalScore();\n                     var score = parseInt(data.maxscore);\n                     var gold = parseInt(data.gold);\n                     ThirdAPI.loadScore((maxscore, gold) => {\n                         score = parseInt(maxscore);\n                         gold = parseInt(gold);\n                         console.log('game on ThirdAPI loadScore', score, parseInt(gold), Global.wxGold);\n                     });\n                     Global.wxGold += 30;\n                     ThirdAPI.saveScore(score, Global.wxGold);*/\n                    console.log(\"加钻石1\");\n                    if (Global.startUI) {\n                        console.log(\"加钻石2\");\n                        setTimeout(() => {\n                            Global.startUI.updateGold(30);\n                        }, 100);\n                    } else {\n                        console.log(\"加钻石3\");\n                        if (Global.startUI) {\n                            setTimeout(() => {\n                                Global.startUI.updateGold(30);\n                            }, 500);\n                        }\n                    }\n                }\n            }\n        } else {\n            console.log('不是从微信群进入...');\n        }\n    },\n\n    //加钻石存本地功能\n    addStone: function (stoneNum, msg) {\n        console.log(\"好友互助 加钻石1\");\n        if (Global.startUI) {\n            console.log(\"好友互助 加钻石2\");\n            Global.game.showDialogPropText(msg);\n            Global.startUI.updateGold(stoneNum);\n        } else {\n            console.log(\"好友互助 加钻石3\");\n            var self = this;\n            setTimeout(() => {\n                self.addStone(stoneNum);\n            }, 100);\n        }\n    },\n\n    // 清除游戏缓存数据\n    clearGameInfo: function () {\n        ThirdAPI.clearFriendGenStoneInfo();\n    },\n\n    //开始游戏\n    startGame: function () {\n        var self = this;\n        Global.LoadAtlas.loadPrefab('UIRoot', (uiRootPrefab) => {\n            if (!Global.uiScript) {\n                Global.uiScript = cc.instantiate(uiRootPrefab).getComponent(\"uiRoot\");\n            }\n            //如果有父节点则删除自身节点\n            if (Global.uiScript.node.parent) {\n                Global.uiScript.node.parent.removeChild(Global.uiScript.node);\n            }\n            Global.uiScript.showStartUI();\n\n            if (Global.startUI) {\n                console.log('监听开始界面的cdn数据变化');\n                listenUtil.eventCtrl.addListen('cdnchange', Global.startUI.cdnchange.bind(this));\n            }\n\n            self.node.addChild(Global.uiScript.node);\n\n            self.initStoreData();\n            self.initTitleData();\n\n            self.initUIData();\n        });\n    },\n\n    //显示分享界面\n    showShareUI: function () {\n        var self = this;\n        Global.LoadAtlas.loadPrefab('UIRoot', (uiRootPrefab) => {\n            if (!Global.uiScript) {\n                Global.uiScript = cc.instantiate(uiRootPrefab).getComponent(\"uiRoot\");\n            }\n            //如果有父节点则删除自身节点\n            if (Global.uiScript.node.parent) {\n                Global.uiScript.node.parent.removeChild(Global.uiScript.node);\n            }\n            self.node.addChild(Global.uiScript.node);\n            Global.uiScript.showShareUI();\n        });\n    },\n\n    //显示排行榜界面\n    showRank: function (canShowGameClub) {\n        var self = this;\n        Global.LoadAtlas.loadPrefab('rankUI', (rankPrefab) => {\n            if (!Global.rankui) {\n                Global.rankui = cc.instantiate(rankPrefab).getComponent(\"rankUI\");\n            }\n            if (Global.rankui.node.parent) {\n                Global.rankui.node.parent.removeChild(Global.rankui.node);\n            }\n            self.node.addChild(Global.rankui.node);\n            Global.rankui.initData(canShowGameClub);\n        });\n    },\n\n    showGroupRank: function (canShowGameClub) {\n        var self = this;\n        Global.LoadAtlas.loadPrefab('rankUI', (rankPrefab) => {\n            if (!Global.rankui) {\n                Global.rankui = cc.instantiate(rankPrefab).getComponent(\"rankUI\");\n            }\n            if (Global.rankui.node.parent) {\n                Global.rankui.node.parent.removeChild(Global.rankui.node);\n            }\n            self.node.addChild(Global.rankui.node);\n            Global.rankui.initGetGroupRank(canShowGameClub);\n        });\n    },\n\n    //显示商店界面\n    showStore: function () {\n        var self = this;\n        Global.LoadAtlas.loadPrefab('UIStore', (storePrefab) => {\n            if (!Global.storeUI) {\n                Global.storeUI = cc.instantiate(storePrefab).getComponent(\"UIStore\");\n            }\n            if (Global.storeUI.node.parent) {\n                Global.storeUI.node.parent.removeChild(Global.storeUI.node);\n            }\n            self.node.addChild(Global.storeUI.node);\n            Global.storeUI.initData();\n            //记载成功进入皮肤打点\n            var biManager = require('biManager');\n            biManager.bilog(biManager.skin, null);\n        });\n    },\n\n    //显示复活界面\n    showRevive: function () {\n        var self = this;\n        Global.LoadAtlas.loadPrefab('reviveUI', (revivePrefab) => {\n            if (!Global.reviveUI) {\n                Global.reviveUI = cc.instantiate(revivePrefab).getComponent(\"reviveUI\");\n            }\n            if (Global.reviveUI.node.parent) {\n                Global.reviveUI.node.parent.removeChild(Global.reviveUI.node);\n            }\n            self.node.addChild(Global.reviveUI.node);\n            Global.reviveUI.initData();\n        });\n    },\n\n    //显示成就界面\n    showTitle: function () {\n        var self = this;\n        Global.LoadAtlas.loadPrefab('UITitle', (titlePrefab) => {\n            if (!Global.titleUI) {\n                Global.titleUI = cc.instantiate(titlePrefab).getComponent(\"UITitle\");\n            }\n            if (Global.titleUI.node.parent) {\n                Global.titleUI.node.parent.removeChild(Global.titleUI.node);\n            }\n            self.node.addChild(Global.titleUI.node);\n            Global.titleUI.initData();\n            if (Global.titleUI) {\n                Global.titleUI.onClose();\n            }\n        });\n    },\n\n    //显示成就查看界面\n    showTitleInfo: function () {\n        var self = this;\n        Global.LoadAtlas.loadPrefab('UITitleInfo', (titleInfoPrefab) => {\n            if (!Global.titleInfoUI) {\n                Global.titleInfoUI = cc.instantiate(titleInfoPrefab).getComponent(\"UITitleInfo\");\n            }\n            if (Global.titleInfoUI.node.parent) {\n                Global.titleInfoUI.node.parent.removeChild(Global.titleInfoUI.node);\n            }\n            self.node.addChild(Global.titleInfoUI.node);\n            Global.titleInfoUI.initData();\n        });\n    },\n\n    //弹出好友互助奖励界面\n    showRewardUI: function () {\n        var self = this;\n        Global.LoadAtlas.loadPrefab('rewardInfo', (rewardPrefab) => {\n            if (!Global.rewardUI) {\n                Global.rewardUI = cc.instantiate(rewardPrefab).getComponent(\"rewardUI\");\n            }\n            if (Global.rewardUI.node.parent) {\n                Global.rewardUI.node.parent.removeChild(Global.rewardUI.node);\n            }\n            self.node.addChild(Global.rewardUI.node);\n            tcpManager.sendCmd.sendGetClickUserList();\n            Global.rewardUI.initData();\n        });\n    },\n\n    //显示道具分享弹框\n    showPropDialog: function (isChest, showText, parmaIndex) {\n        var self = this;\n        Global.LoadAtlas.loadPrefab('propInfo', (propInfoPrefab) => {\n            if (!Global.propInfoUI) {\n                Global.propInfoUI = cc.instantiate(propInfoPrefab).getComponent(\"UIPropInfo\");\n            }\n            if (Global.propInfoUI.node.parent) {\n                Global.propInfoUI.node.parent.removeChild(Global.propInfoUI.node);\n            }\n            self.node.addChild(Global.propInfoUI.node);\n            Global.propInfoUI.initData(isChest, showText, parmaIndex);\n        });\n    },\n\n    //显示道具数量不足，拉起分享界面\n    showAddPropDialog: function (parma) {\n        var self = this;\n        Global.LoadAtlas.loadPrefab('addPropInfo', (addPropInfoPrefab) => {\n            if (!Global.addPropInfoUI) {\n                Global.addPropInfoUI = cc.instantiate(addPropInfoPrefab).getComponent(\"addPropInfo\");\n            }\n            if (Global.addPropInfoUI.node.parent) {\n                Global.addPropInfoUI.node.parent.removeChild(Global.addPropInfoUI.node);\n            }\n            this.node.addChild(Global.addPropInfoUI.node);\n            Global.addPropInfoUI.initData(parma);\n        });\n    },\n\n    //初始化ui信息\n    initUIData: function () {\n        //初始化商城数据\n        var self = this;\n        Global.LoadAtlas.loadPrefab('UIStore', (storePrefab) => {\n            if (!Global.storeUI) {\n                Global.storeUI = cc.instantiate(storePrefab).getComponent(\"UIStore\");\n            }\n            if (Global.storeUI.node.parent) {\n                Global.storeUI.node.parent.removeChild(Global.storeUI.node);\n            }\n            self.node.addChild(Global.storeUI.node);\n            Global.storeUI.initData();\n\n            if (Global.storeUI) {\n                Global.storeUI.onClose();\n            }\n\n            self.showTitle();\n            if (Global.titleUI) {\n                Global.titleUI.onClose();\n            }\n\n            //Global.titleUI.updateItemsState(1);\n            //Global.titleUI.updateItemsState(2);\n            //Global.titleUI.updateItemsState(3);\n        });\n    },\n\n    //加载已购皮肤数据\n    initStoreData: function () {\n        //ThirdAPI.clearInfo('skinstore');\n        Global.storeData = ThirdAPI.loadInfo('skinstore');\n        if (Global.storeData == null) {\n            Global.storeData = [];\n        }\n\n        //ThirdAPI.saveScore(0, 0);\n\n        //ThirdAPI.clearCurrentSkin();\n        Global.skinIndex = ThirdAPI.loadCurrentSkin();\n        //console.log('current skin index : ', Global.skinIndex);\n    },\n\n    //加载成就数据\n    initTitleData: function () {\n        //ThirdAPI.clearInfo('title');\n        //Global.titleData = ThirdAPI.loadInfo('title');\n        if (Global.titleData == null) {\n            Global.titleData = [];\n        }\n\n        //ThirdAPI.clearInfo('title-date');\n        //Global.titleDateData = ThirdAPI.loadInfo('title-date');\n        if (Global.titleDateData == null) {\n            Global.titleDateData = [];\n        }\n\n        //ThirdAPI.clearInfo('title-unlock');\n        //Global.titleUnlockData = ThirdAPI.loadInfo('title-unlock');\n        if (Global.titleUnlockData == null) {\n            Global.titleUnlockData = [];\n        }\n\n        //ThirdAPI.clearInfo('title-unlock');\n        Global.shareData = ThirdAPI.loadShareData();\n        var d = new Date(Date.now());\n        if (!Global.shareData) {\n            //console.log('无分享限制数据，初始化');\n            var d1 = new Date(Date.now());\n            //console.log(d1.toDateString());\n            Global.shareData = {\n                shareTimes: 0,\n                shareDate: d1.toDateString()\n            }\n            ThirdAPI.saveShareData(Global.shareData.shareTimes, Global.shareData.shareDate);\n        } else if (Global.shareData.shareDate != d.toDateString()) {\n            //console.log('无今日分享限制数据，初始化');\n            Global.shareData = {\n                shareTimes: 0,\n                shareDate: d.toDateString()\n            }\n\n            ThirdAPI.saveShareData(Global.shareData.shareTimes, Global.shareData.shareDate);\n        }\n\n        //获取系统日期\n        //var d1 = new Date(Date.now());\n        //console.log(d1.toDateString());\n    },\n\n    // 存储分数到服务器\n    saveScore: function () {\n        //更新金币并存储\n        if (typeof wx !== 'undefined') {\n            let data = ThirdAPI.loadLocalScore();\n            var score = parseInt(data.maxscore);\n            var gold = parseInt(data.gold);\n            ThirdAPI.loadScore((maxscore, gold) => {\n                score = parseInt(maxscore);\n                gold = parseInt(gold);\n                //console.log('gridController on ThirdAPI loadScore', score, parseInt(gold), Global.wxGold);\n            });\n            ThirdAPI.saveScore(score, Global.wxGold);\n        }\n        if (Global.startUI) {\n            Global.startUI.updateGold(0);\n        }\n    },\n\n    //道具提示文本\n    showDialogPropText: function (text) {\n        this.tipsNode.active = true;\n        this.tipsNode.setLocalZOrder(10);\n        this.tipsNode.stopAllActions();\n        var label = this.tipsNode.getChildByName('label');\n        label.getComponent(cc.Label).string = text;\n        this.tipsNode.getChildByName(\"sprite\").width = cc.find('Canvas').width;\n\n        setTimeout(() => {\n            this.tipsNode.active = false;\n        }, 2000);\n    },\n\n    //分享完的提示文字\n    showDialogText: function (text, p) {\n        //总开关判断\n        if (!Global.cdnGameConfig.totalSwith) {\n            console.log('开关已打开，不显示文字提示');\n            return;\n        }\n        this.tipsNode.active = true;\n        this.tipsNode.setLocalZOrder(10);\n        this.tipsNode.stopAllActions();\n        // this.tipsNode.x = p.x;\n        // this.tipsNode.y = p.y;\n        var label = this.tipsNode.getChildByName('label');\n        label.getComponent(cc.Label).string = text;\n        this.tipsNode.getChildByName(\"sprite\").width = cc.find('Canvas').width;\n\n        setTimeout(() => {\n            this.tipsNode.active = false;\n        }, 2000);\n    },\n\n    //播放声音\n    playSound: function (sname, volume) {\n        if (!Global.isSoundPlaying) {\n            return;\n        }\n        var self = this;\n        cc.loader.loadRes(\"audio/\" + sname, cc.AudioClip, function (err, clip) {\n            var sound = cc.instantiate(self.btnSound);\n            self.node.addChild(sound);\n            var audioSource = sound.getComponent(cc.AudioSource);\n            audioSource.clip = clip;\n            audioSource.volume = volume;\n            audioSource.play();\n        });\n    },\n\n    switchSound: function () {\n        Global.isSoundPlaying = !Global.isSoundPlaying;\n    },\n\n    //重新开始\n    restart: function () {\n        this.enterScene();\n    },\n\n    //打开游戏战斗界面\n    enterScene: function (list) {\n        var self = this;\n        Global.LoadAtlas.loadPrefab('gridRoot', (girdRoot) => {\n            if (!Global.gridController) {\n                Global.gridController = cc.instantiate(girdRoot);\n            }\n            if (Global.gridController.parent) {\n                Global.gridController.parent.removeChild(Global.gridController);\n            }\n            self.node.addChild(Global.gridController);\n            Global.gridController.getComponent(\"gridController\").initGridData(list);\n        });\n    },\n\n    /*\n        creatBannerAdBtn: function () {\n            this.bannerAdInstance = cc.instantiate(this.bannerCloseBtn);\n            this.bannerAdInstance.setLocalZOrder(100);\n            this.node.addChild(this.bannerAdInstance);\n\n            this.bannerAdInstance.active = false;\n        },\n\n        //显示或者隐藏banner广告\n        showOrHideBannerAd: function (parma) {\n            if (!parma) {\n                return;\n            }\n            //var pos = parma.pos;\n\n            var spriteFrame = this.bannerAdInstance.getComponent(cc.Sprite).spriteFrame;\n            var width = spriteFrame.getRect().width;\n            var height = spriteFrame.getRect().height;\n\n            this.bannerAdInstance.setPosition(cc.p(parma.x - width, parma.y - height));\n            // this.bannerAdInstance.setPosition(cc.p(0, 0));\n            this.bannerAdInstance.setLocalZOrder(10000);\n            this.bannerAdInstance.active = true;\n            console.log('******');\n\n            this.showBannerAd();\n        },\n\n        showBannerAd: function () {\n            if (this.bannerAdInstance) {\n                this.bannerAdInstance.active = true;\n            }\n        },\n        hideBannerAd: function () {\n            if (this.bannerAdInstance) {\n                this.bannerAdInstance.active = false;\n            }\n            var wxBannerAd = require('wxBannerAd');\n            wxBannerAd.hideBannerAd();\n        },\n    */\n\n});"]}