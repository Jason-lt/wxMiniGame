{"version":3,"sources":["UIPropInfo.js"],"names":["ThirdAPI","require","cc","Class","extends","Component","properties","mainNode","default","type","Node","successNode","gainPropIcon","Sprite","gainPropName","Label","light","propSprite","propName","propNum","propInfo","chest","title","myParticleSystem1","ParticleSystem","myParticleSystem2","flySprite","isChest","showText","parmaIndex","gridControllerScript","randomIndex","closeTimer","start","initData","active","setVisible","Global","gridController","getComponent","onPauseGameForOther","callback","callFunc","string","showChest","randomProp","scale","finished","chestRunAction","spawnAction","sequence","scaleTo","runAction","setTimeout","node","repeatForever","rotateBy","delayTime","playScale","spawn","myUtil","randomForArray","randomPropCode","console","log","name","gameinfo","clearPropNum","superPropNum","doublePropNum","self","LoadAtlas","loadAtlasRes","spriteFrame","getSpriteFrameFromName","prop_parma","randomPropInfo","desc","color","Color","rect","getRect","width","height","onShargeGame","game","playSound","FBInstant","shareGame","getImgBase64","wx","sourceCode","img","onShareSuccess","bind","onShareFailed","openGId","biManager","bilog","chestShare","showDialogText","shareData1","arrOpenGId","indexOf","push","saveFriendGenStoneInfo","canvas","find","button","getChildByName","playLightAction","parseInt","gainAddPropNum","startUI","updateGold","showGold","addPropSprite","setPropSprite","onClose","msg","undefined","scaleToClose","propFly","layoutPos","propLayout","getPosition","propPos","p","clearUseNumNode","parent","toPos","superUseNumNode","setPosition","flyAction","moveTo","hideAction","fadeTo","clearTimeout","removeNode","removeChild","propInfoUI"],"mappings":"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","file":"UIPropInfo.js","sourceRoot":"../../../../../assets/Scripts/ui","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\n\nlet ThirdAPI = require('../common/ThirdAPI')\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        mainNode: {\n            default: null,\n            type: cc.Node,\n        },\n        successNode: {\n            default: null,\n            type: cc.Node,\n        },\n        gainPropIcon: {\n            default: null,\n            type: cc.Sprite,\n        },\n        gainPropName: {\n            default: null,\n            type: cc.Label,\n        },\n        light: {\n            default: null,\n            type: cc.Sprite,\n        },\n        propSprite: {\n            default: null,\n            type: cc.Sprite,\n        },\n        propName: {\n            default: null,\n            type: cc.Label,\n        },\n        propNum: {\n            default: null,\n            type: cc.Label,\n        },\n        propInfo: {\n            default: null,\n            type: cc.Label,\n        },\n        chest: {\n            default: null,\n            type: cc.Sprite,\n        },\n        title: {\n            default: null,\n            type: cc.Label,\n        },\n        myParticleSystem1: {\n            default: null,\n            type: cc.ParticleSystem,\n        },\n        myParticleSystem2: {\n            default: null,\n            type: cc.ParticleSystem,\n        },\n        flySprite: {\n            default: null,\n            type: cc.Sprite,\n        },\n        isChest: false, //是否是宝箱\n        showText: '', //显示分享文字\n        parmaIndex: -1, //传入的索引\n        gridControllerScript: null,\n        randomIndex: 0, //随机道具索引\n        closeTimer: null,\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    // onLoad () {},\n\n    start() {\n\n    },\n\n    initData: function (isChest, showText, parmaIndex) {\n        this.mainNode.active = true;\n        this.successNode.active = false;\n        this.flySprite.setVisible(false);\n\n        if (Global.gridController) {\n            this.gridControllerScript = Global.gridController.getComponent(\"gridController\");\n            this.gridControllerScript.onPauseGameForOther();\n        }\n\n        var callback = cc.callFunc(function () {\n            this.isChest = isChest;\n            this.showText = showText;\n            this.parmaIndex = parmaIndex;\n            this.title.string = this.isChest ? '获得免费宝箱' : \"道具\";\n            if (this.isChest) {\n                this.showChest();\n            } else {\n                this.randomProp();\n            }\n        }, this);\n\n        this.mainNode.scale = 0.5;\n        var finished = cc.callFunc(this.chestRunAction, this);\n        var spawnAction = cc.sequence(callback, cc.scaleTo(0.3, 1.08), cc.scaleTo(0.1, 1), finished);\n        this.mainNode.runAction(spawnAction);\n\n        // this.myParticleSystem1.resetSystem();\n        setTimeout(() => {\n            // this.myParticleSystem2.resetSystem();\n        }, 500);\n\n        /*var callback = cc.callFunc(function () {\n            if (Global.gridController) {\n                this.gridControllerScript = Global.gridController.getComponent(\"gridController\");\n                this.gridControllerScript.onPauseOrResume();\n            }\n            this.isChest = isChest;\n            this.showText = showText;\n            this.parmaIndex = parmaIndex;\n            this.title.string = this.isChest ? '藏宝箱' : \"道具\";\n            if (this.isChest) {\n                this.showChest();\n            } else {\n                this.randomProp();\n            }\n\n        }, this);*/\n        //var spawnAction = cc.spawn(cc.sequence(cc.scaleBy(2, 2), cc.scaleTo(2, 1)));\n        // var callback = cc.callFunc(function () {\n        //     cc.scaleTo(0.1, 0.8, 1.2),\n        // },this);\n\n        /* this.mainNode.scale = 0.5;\n         var spawnAction = cc.sequence(cc.scaleTo(0.5, 1.1), cc.scaleTo(0.25, 1));\n         this.mainNode.runAction(spawnAction);*/\n\n\n        /*if (Global.gridController) {\n            this.gridControllerScript = Global.gridController.getComponent(\"gridController\");\n            this.gridControllerScript.onPauseOrResume();\n        }\n        this.isChest = isChest;\n        this.showText = showText;\n        this.parmaIndex = parmaIndex;\n        this.title.string = this.isChest ? '藏宝箱' : \"道具\";\n        if (this.isChest) {\n            this.showChest();\n        } else {\n            this.randomProp();\n        }*/\n    },\n\n    chestRunAction: function () {\n        this.chest.node.runAction(\n            cc.repeatForever(\n                cc.sequence(cc.rotateBy(0.1, 10), cc.rotateBy(0.2, -20), cc.rotateBy(0.2, 20), cc.rotateBy(0.2, -20), cc.rotateBy(0.1, 10), cc.delayTime(2)))\n        );\n    },\n\n    //动画\n    playScale: function () {\n        var callback = cc.callFunc(function () {\n            if (Global.gridController) {\n                this.gridControllerScript = Global.gridController.getComponent(\"gridController\");\n                this.gridControllerScript.onPauseGameForOther();\n            }\n            this.isChest = isChest;\n            this.showText = showText;\n            this.parmaIndex = parmaIndex;\n            this.title.string = this.isChest ? '藏宝箱' : \"道具\";\n            if (this.isChest) {\n                this.showChest();\n            } else {\n                this.randomProp();\n            }\n\n        }, this);\n        var spawnAction = cc.spawn(cc.sequence(cc.scaleTo(0, 0.5), cc.scaleTo(0.5, 1)));\n        this.node.runAction(spawnAction, callback);\n    },\n\n    //随机道具显示\n    randomProp: function () {\n        this.propSprite.setVisible(true);\n        this.chest.setVisible(false);\n        var myUtil = require('myUtil');\n        this.randomIndex = myUtil.randomForArray(Global.randomPropCode);\n        if (this.parmaIndex != -1) {\n            console.log('传入的道具索引：' + this.parmaIndex);\n            this.randomIndex = this.parmaIndex;\n        }\n        console.log('randomIndex:' + this.randomIndex);\n\n        var name = 'clear_spr';\n        var propNum = 0;\n        if (this.randomIndex == 0) {\n            name = 'chest_clesr';\n            propNum = Global.gameinfo.clearPropNum;\n        } else if (this.randomIndex == 1) {\n            name = 'chest_super';\n            propNum = Global.gameinfo.superPropNum;\n        } else if (this.randomIndex == 2) {\n            name = 'chest_double';\n            propNum = Global.gameinfo.doublePropNum;\n        }\n\n        var self = this;\n        var LoadAtlas = require(\"LoadAtlas\");\n        LoadAtlas.loadAtlasRes(\"textures/gridItem/items\", function () {\n            var LoadAtlas = require(\"LoadAtlas\");\n            self.propSprite.spriteFrame = LoadAtlas.getSpriteFrameFromName(\"textures/gridItem/items\", name);\n        });\n\n        //文字显示\n        var prop_parma = Global.randomPropInfo[self.randomIndex];\n        if (prop_parma) {\n            this.propName.string = prop_parma.name;\n            this.propInfo.string = prop_parma.desc;\n\n            this.propNum.string = 'x' + propNum;\n            if (propNum > 0) {\n                this.propNum.node.color = new cc.Color(158, 107, 70);\n            } else {\n                this.propNum.node.color = new cc.Color(204, 33, 33);\n            }\n        }\n    },\n\n    //显示宝箱弹框    \n    showChest: function () {\n        var self = this;\n        self.propSprite.setVisible(false);\n        self.chest.setVisible(true);\n        var myUtil = require('myUtil');\n        self.randomIndex = myUtil.randomForArray(Global.randomPropCode);\n        self.randomIndex = myUtil.randomForArray([0, 1]);\n        console.log('randomIndex:' + self.randomIndex);\n\n        var LoadAtlas = require(\"LoadAtlas\");\n        LoadAtlas.loadAtlasRes(\"textures/gridItem/items\", function () {\n            var LoadAtlas = require(\"LoadAtlas\");\n            self.chest.spriteFrame = LoadAtlas.getSpriteFrameFromName(\"textures/gridItem/items\", 'chest');\n\n            var rect = self.chest.spriteFrame.getRect();\n            self.chest.node.width = rect.width;\n            self.chest.node.height = rect.height;\n            self.chest.node.scale = 1;\n        });\n\n        this.propName.string = \"\";\n        this.propNum.string = \"\";\n\n        //文字显示\n        // var prop_parma = Global.randomPropInfo[self.randomIndex];\n        // if (prop_parma) {\n        //     if (this.showText && this.showText != '') {\n        //         self.propInfo.string = this.showText;\n        //     } else {\n        //         self.propInfo.string = prop_parma.name + '宝箱藏，送给群友尝一尝'; //'恭喜获得' + prop_parma.name + '宝箱！可以免费送给朋友们！';\n        //     }\n        // }\n        self.propInfo.string = '恭喜获得免费宝箱\\n快来领取吧';\n    },\n\n    onShargeGame: function () {\n        Global.game.playSound('btn', 0.1);\n        var myUtil = require('myUtil');\n        if (typeof FBInstant !== 'undefined') {\n            ThirdAPI.shareGame(myUtil.getImgBase64(), null);\n        } else if (typeof wx !== 'undefined') {\n            var sourceCode = '028';\n            var img = 'randomImg';\n            if (this.randomIndex == 0) {\n                sourceCode = '231';\n                img = '01';\n            } else if (this.randomIndex == 1) {\n                sourceCode = '232';\n                img = '02';\n            } else if (this.randomIndex == 2) {\n                sourceCode = '300';\n                img = '03';\n            } else if (this.randomIndex == 4) {\n                sourceCode = '234';\n                img = 'randomImg';\n            }\n            ThirdAPI.shareGame(img, this.onShareSuccess.bind(this), this.onShareFailed.bind(this), sourceCode);\n        } else {\n            console.log('测试分享');\n            this.onShareSuccess();\n        }\n    },\n\n    onShareSuccess: function (openGId) {\n        //游戏过程中通过宝箱分享成功\n        var biManager = require('biManager');\n        biManager.bilog(biManager.chestShare, null);\n\n        if (typeof wx !== 'undefined') {\n            if (!openGId) {\n                Global.game.showDialogText('分享失败，分享到群才有效');\n                console.log('分享失败，分享到群才有效');\n                return;\n            }\n        }\n\n        if (Global.gameinfo.shareData1.arrOpenGId.indexOf(openGId) != -1) {\n            console.log('该群今日已经分享过', openGId);\n            Global.game.showDialogText('分享失败，请分享到不同群');\n            return;\n        } else {\n            console.log('该群未分享过', openGId);\n            Global.gameinfo.shareData1.arrOpenGId.push(openGId);\n            ThirdAPI.saveFriendGenStoneInfo(Global.gameinfo);\n        }\n\n        //设置全屏的按钮\n        let canvas = cc.find('Canvas');\n        var button = this.successNode.getChildByName('button');\n        if (button) {\n            button.width = canvas.width;\n            button.width = canvas.width;\n        }\n        this.playLightAction();\n\n        this.mainNode.active = false;\n        this.successNode.active = true;\n        var prop_parma = Global.randomPropInfo[this.randomIndex];\n        console.log('分享成功', prop_parma.name, parseInt(prop_parma.gainAddPropNum));\n        //增加道具\n        if (prop_parma) {\n            if (this.randomIndex == 0) {\n                Global.gameinfo.clearPropNum += parseInt(prop_parma.gainAddPropNum);\n            } else if (this.randomIndex == 1) {\n                Global.gameinfo.superPropNum += parseInt(prop_parma.gainAddPropNum);\n            } else if (this.randomIndex == 2) {\n                Global.gameinfo.doublePropNum += parseInt(prop_parma.gainAddPropNum);\n            } else if (this.randomIndex == 4) {\n                Global.startUI.updateGold(parseInt(prop_parma.gainAddPropNum));\n                var gridController = Global.gridController.getComponent('gridController');\n                gridController.showGold();\n            }\n        }\n\n        if (prop_parma) {\n            var self = this;\n            var LoadAtlas = require(\"LoadAtlas\");\n            LoadAtlas.loadAtlasRes(\"textures/gridItem/items\", function () {\n                var LoadAtlas = require(\"LoadAtlas\");\n                self.gainPropIcon.spriteFrame = LoadAtlas.getSpriteFrameFromName(\"textures/gridItem/items\", prop_parma.addPropSprite);\n            });\n            self.gainPropName.string = prop_parma.name + 'x' + prop_parma.gainAddPropNum;\n        }\n        //存储本地数据\n        ThirdAPI.saveFriendGenStoneInfo(Global.gameinfo);\n        if (this.gridControllerScript) {\n            this.gridControllerScript.setPropSprite();\n        }\n        this.closeTimer = setTimeout(() => {\n            this.onClose();\n        }, 2000);\n    },\n\n    onShareFailed: function (msg) {\n        if (msg === undefined) {\n            Global.game.showDialogText('分享失败！');\n        } else if (msg == 'fail') {\n            Global.game.showDialogText('分享失败，分享到群才有效');\n        } else if (msg == 'cancel') {\n            Global.game.showDialogText('分享失败！');\n        } else {\n            Global.game.showDialogText('分享失败！');\n        }\n    },\n\n    playLightAction: function () {\n        this.light.node.runAction(\n            cc.repeatForever(\n                cc.sequence(cc.rotateBy(0.3, -90), cc.rotateBy(0.3, -90), cc.rotateBy(0.3, -90), cc.rotateBy(0.3, -90)))\n        );\n    },\n\n    //缩放消失效果\n    scaleToClose: function () {\n        /*var scaleAction = cc.scaleTo(0.3, 0);\n        var callback = cc.callFunc(this.onClose, this);\n        this.node.runAction(cc.sequence(scaleAction,callback));*/\n        //this.propFly();\n    },\n\n    propFly: function () {\n        var prop_parma = Global.randomPropInfo[this.randomIndex];\n        if (prop_parma) {\n            var self = this;\n            var LoadAtlas = require(\"LoadAtlas\");\n            LoadAtlas.loadAtlasRes(\"textures/gridItem/items\", function () {\n                var LoadAtlas = require(\"LoadAtlas\");\n                self.flySprite.spriteFrame = LoadAtlas.getSpriteFrameFromName(\"textures/gridItem/items\", prop_parma.addPropSprite);\n            });\n        }\n\n        var gridControllerScript = Global.gridController.getComponent(\"gridController\");\n        //层级组件的位置\n        var layoutPos = gridControllerScript.propLayout.getPosition();\n        if (layoutPos) {\n            var propPos = cc.p(0, 0);\n            if (this.randomIndex == 0 && gridControllerScript.clearUseNumNode.parent) {\n                toPos = gridControllerScript.clearUseNumNode.parent.getPosition();\n            } else if (this.randomIndex == 1 && gridControllerScript.superUseNumNode.parent) {\n                toPos = gridControllerScript.superUseNumNode.parent.getPosition();\n            }\n        }\n\n\n        var toPos = cc.p(0, 200);\n        if (this.randomIndex == 0 && gridControllerScript.clearUseNumNode.parent) {\n            toPos = gridControllerScript.clearUseNumNode.parent.getPosition();\n        } else if (this.randomIndex == 1) {\n            toPos = gridControllerScript.superUseNumNode.getPosition();\n        }\n        this.flySprite.node.setPosition(cc.p(0, 0));\n\n        var flyAction = cc.moveTo(2, cc.p(-260, 432));\n        var hideAction = cc.fadeTo(0, 0);\n        // var callback = cc.callFunc(this.removeNode, this);\n\n        this.flySprite.node.runAction(cc.sequence(flyAction, hideAction));\n\n\n    },\n\n    // 按钮回调：关闭\n    onClose: function () {\n        Global.game.playSound('btn', 0.1);\n        // this.mainNode.stopAllActions();\n        // var callback = cc.callFunc(function () {\n        if (this.closeTimer !== null) {\n            clearTimeout(this.closeTimer);\n            this.closeTimer = null;\n        }\n        if (this.gridControllerScript) {\n            console.log('恢复游戏');\n            this.gridControllerScript.onPauseGameForOther();\n        }\n        this.removeNode();\n\n\n        //     }, this);\n\n        //     var spawnAction = cc.sequence(cc.scaleTo(0.2, 0.7), callback);\n        //     this.mainNode.runAction(spawnAction);\n    },\n    \n    removeNode: function () {\n        if (this.node.parent) {\n            this.node.parent.removeChild(this.node);\n        }\n        if (Global.propInfoUI && Global.propInfoUI.node && Global.propInfoUI.node.parent) {\n            Global.propInfoUI.node.parent.removeChild(Global.propInfoUI.node);\n        }\n        Global.propInfoUI = null;\n    },\n});"]}