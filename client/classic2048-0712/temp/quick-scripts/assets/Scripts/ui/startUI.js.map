{"version":3,"sources":["startUI.js"],"names":["ThirdAPI","require","wxRewardVideoAd","cc","Class","extends","Component","properties","score","default","type","Label","icon","Sprite","bg","soundOnBtn","Node","soundOffBtn","gemStone","Prefab","friendBtn","friendBtnLabel","adBtn","dailyLabel","goldNode","spriteMoreGame","backgroundAudio","url","AudioClip","rewardVideoAdBtn","addBtn","keepDataNode","dailyBtn","layoutNode","version","currentBGM","reddot","onLoad","console","log","listenUtil","eventCtrl","addListen","cdnchange","bind","start","init","initAudio","params","active","Global","cdnGameConfig","totalSwith","showGameClub","checkLogin","setShowRewardVideoAd","updateBestScore","spriteFrame","getTexture","setAliasTexParameters","isBGMPlaying","string","time","Date","getTime","gameinfo","shareTime","shareTotalTimes","dailyTotalTimes","updateGold","moreGameRunAction","d","now","showRewardVideoAdDate","toDateString","showRewardVideoAdTimes","saveFriendGenStoneInfo","showTotalTimes","loginDateStr","tcpManager","sendCmd","sendLoginData","node","rotation","stopAllActions","runAction","repeatForever","sequence","rotateBy","delayTime","audioEngine","play","setLoop","setVolume","volume","getVolume","isSoundPlaying","showChest","game","showPropDialog","showRedDot","ret","num","goldLabel","getChildByName","getComponent","wxGold","parseInt","wx","data","loadLocalScore","maxscore","gold","loadScore","saveScore","wxScore","dailyBattleTimes","battleTimes","historyMaxScore","FBInstant","fbScore","onShareGame","playSound","pauseInterval","myUtil","shareGame","getImgBase64","onShareSuccess","onShareFail","shareToWx","shareToWXSuccess","biManager","bilog","shareToWX","showGroupRank","onShowRewardUI","showRewardUI","testAd","initCreateReward","onAdSuccess","onclose","startContinueConutDown","times","getSecondString","clearInterval","countDownInterval","setInterval","createGemstone","openGId","shareDate","resetInitData","shareTimes","shareTimesAndRewardVideoAd","getForTotalTimes","msg","undefined","showDialogText","addShareGame","onAddShareSuccess","addShare","shareData1","arrOpenGId","indexOf","push","startConfig","addStone","showDialogPropText","randomNum","addInterval","instance","instantiate","setPosition","p","addChild","pos","startUI","getPosition","toPosition","x","y","dialogForPropInfo","weightConfig","self","loader","loadRes","err","onPlay","isDailyLimit","parma","loadGameProgress","list","length","enterScene","startGame","keepDataEnterGame","restartGame","clearGameProgressInfo","closekeepData","dailyPlay","dailyConfig","onPlayDaily","onDailyShareSuccess","onDailyShareFail","dailyShare","showRankUI","showRank","onShowStore","showStore","onChallenge","shareUI","switchBGM","pauseBGM","playBGM","resume","pause","onMoreGame","LinkImages","linkImages","index","Math","floor","random0To1","httpStr","previewImage"],"mappings":"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","file":"startUI.js","sourceRoot":"../../../../../assets/Scripts/ui","sourcesContent":["let ThirdAPI = require('../common/ThirdAPI')\nlet wxRewardVideoAd = require('../common/wxRewardVideoAd')\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        score: {\n            default: null,\n            type: cc.Label,\n        },\n        icon: {\n            default: null,\n            type: cc.Sprite,\n        },\n        bg: {\n            default: null,\n            type: cc.Sprite,\n        },\n        soundOnBtn: {\n            default: null,\n            type: cc.Node\n        },\n        soundOffBtn: {\n            default: null,\n            type: cc.Node\n        },\n        //随机钻石预设\n        gemStone: {\n            default: null,\n            type: cc.Prefab\n        },\n        friendBtn: {\n            default: null,\n            type: cc.Node\n        },\n        friendBtnLabel: {\n            default: null,\n            type: cc.Label\n        },\n        adBtn: {\n            default: null,\n            type: cc.Node\n        },\n        dailyLabel: {\n            default: null,\n            type: cc.Label,\n        },\n        //金币节点\n        goldNode: {\n            default: null,\n            type: cc.Node\n        },\n        spriteMoreGame: {\n            default: null,\n            type: cc.Sprite,\n        },\n        //背景音乐\n        backgroundAudio: {\n            url: cc.AudioClip,\n            default: null\n        },\n        //广告按钮\n        rewardVideoAdBtn: {\n            default: null,\n            type: cc.Node\n        },\n        addBtn: {\n            default: null,\n            type: cc.Node\n        },\n        //存档界面\n        keepDataNode: {\n            default: null,\n            type: cc.Node\n        },\n        //每日挑战按钮\n        dailyBtn: {\n            default: null,\n            type: cc.Node\n        },\n        layoutNode: {\n            default: null,\n            type: cc.Node,\n        },\n        version: {\n            default: null,\n            type: cc.Label,\n        },\n        currentBGM: -1,\n\n\n        // 红点\n        reddot: {\n            default: null,\n            type: cc.Node\n        },\n    },\n\n    onLoad: function () {\n        console.log(\"开始游戏界面的onLoad方法\");\n        listenUtil.eventCtrl.addListen('cdnchange', this.cdnchange.bind(this));\n    },\n\n    start: function () {\n        console.log('开始界面调用 start方法');\n        this.init();\n        this.initAudio();\n        //this.reddot.active = false;\n    },\n\n    cdnchange: function (params) {\n        console.log('cdn数据变化');\n        this.addBtn.active = Global.cdnGameConfig.totalSwith;\n        this.dailyBtn.active = Global.cdnGameConfig.totalSwith;\n    },\n\n    init: function () {\n        ThirdAPI.showGameClub(true);\n        this.checkLogin();\n        this.setShowRewardVideoAd();\n        this.updateBestScore();\n        this.icon.spriteFrame.getTexture().setAliasTexParameters();\n        this.bg.spriteFrame.getTexture().setAliasTexParameters();\n        this.soundOnBtn.active = Global.isBGMPlaying;\n        this.soundOffBtn.active = !Global.isBGMPlaying;\n        this.addBtn.active = Global.cdnGameConfig.totalSwith;\n        this.keepDataNode.active = false;\n        this.dailyBtn.active = Global.cdnGameConfig.totalSwith;\n\n        if (Global.cdnGameConfig && Global.cdnGameConfig.version) {\n            this.version.string = Global.cdnGameConfig.version;\n        }\n\n        // var baseScale = 640 / 1136;\n        //var scale = Math.floor(cc.winSize.width / cc.winSize.height / baseScale);\n\n        //this.layoutNode.scale = cc.winSize.width / cc.winSize.height / baseScale;\n\n\n        //显示星星\n        var time = (new Date()).getTime() - Global.gameinfo.shareTime;\n        console.log(\"索取次数判断：\", Global.gameinfo.shareTotalTimes, Global.dailyTotalTimes, time);\n\n        //cdn判断\n        //总开关判断\n        /*\n        if (Global.cdnGameConfig.totalSwith) {\n            this.friendBtn.active = false;\n        } else {\n            //分数开关判断\n            if (Global.cdnGameConfig.startScoreSwith) {\n                //判断分数\n                console.log('判断分数：', Global.cdnGameConfig.startScoreLimit, Global.wxScore);\n                var canShow = Global.wxScore > Global.cdnGameConfig.startScoreLimit ? true : false;\n                console.log('首页索取按钮判断--canShow:', canShow, Global.gameinfo.shareTotalTimes, time);\n                this.friendBtn.active = (canShow && Global.gameinfo.shareTotalTimes < Global.dailyTotalTimes && time > Global.intervalTime) ? true : false;\n            } else {\n                console.log('设置好友索取按钮状态');\n                this.friendBtn.active = (Global.gameinfo.shareTotalTimes < Global.dailyTotalTimes && time > Global.intervalTime) ? true : false;\n            }\n        }\n\n        //this.friendBtn.active = (!Global.Gameversion && Global.gameinfo.shareTotalTimes < Global.dailyTotalTimes && time > Global.intervalTime) ? true : false;\n\n        if (Global.gameinfo.shareTimes >= Global.getForTotalTimes) {\n            this.friendBtn.active = false;\n            this.adBtn.active = false;\n            console.log('每日的分享次数已经满了');\n        } else {\n            console.log('Global.gameinfo.shareTimesAndRewardVideoAd:', Global.gameinfo.shareTimesAndRewardVideoAd);\n            if (Global.gameinfo.shareTimesAndRewardVideoAd % 2 == 0) {\n                this.friendBtn.active = false;\n                this.adBtn.active = true;\n            } else {\n                this.friendBtn.active = true;\n                this.adBtn.active = false;\n            }\n        }*/\n\n        this.updateGold(0);\n        this.moreGameRunAction();\n    },\n\n    //显示广告\n    setShowRewardVideoAd: function () {\n        //判断看广告是否在当天\n        var d = new Date(Date.now());\n        if (Global.gameinfo.showRewardVideoAdDate != d.toDateString()) {\n            Global.gameinfo.showRewardVideoAdTimes = 0;\n            Global.gameinfo.showRewardVideoAdDate = d.toDateString();\n            ThirdAPI.saveFriendGenStoneInfo(Global.gameinfo);\n        }\n        console.log('setShowRewardVideoAd:', Global.gameinfo.showRewardVideoAdTimes, Global.showTotalTimes);\n        //判断次数限制\n        this.rewardVideoAdBtn.active = Global.gameinfo.showRewardVideoAdTimes < Global.showTotalTimes ? true : false;\n    },\n\n    //每次到开始界面都判断是否需要重新登录，拉去最新数据\n    checkLogin: function () {\n        console.log('开始界面判断日期', Global.loginDateStr != (new Date()).toDateString())\n        if (Global.loginDateStr != (new Date()).toDateString()) {\n            console.log('登录');\n            tcpManager.sendCmd.sendLoginData();\n        }\n    },\n\n    moreGameRunAction: function () {\n        this.spriteMoreGame.node.rotation = 0;\n        this.spriteMoreGame.node.stopAllActions();\n        this.spriteMoreGame.node.runAction(\n            cc.repeatForever(\n                cc.sequence(cc.rotateBy(0.1, 10), cc.rotateBy(0.2, -20), cc.rotateBy(0.2, 20), cc.rotateBy(0.2, -20), cc.rotateBy(0.1, 10), cc.delayTime(2)))\n        );\n    },\n\n    //初始化音乐\n    initAudio: function () {\n        this.currentBGM = cc.audioEngine.play(this.backgroundAudio, false, 0.2);\n        cc.audioEngine.setLoop(this.currentBGM, true);\n        cc.audioEngine.setVolume(this.currentBGM, 0.2);\n        var volume = cc.audioEngine.getVolume(this.currentBGM);\n        console.log('currentBGM volume is ' + volume);\n        Global.isBGMPlaying = true;\n        Global.isSoundPlaying = true;\n    },\n\n    //宝箱赠送\n    showChest: function () {\n        ThirdAPI.showGameClub(false);\n        Global.game.showPropDialog(true);\n    },\n\n    // 显示提示红点\n    showRedDot: function (ret) {\n        //this.reddot.active = ret;\n    },\n\n    //更新星星的数量\n    updateGold: function (num) {\n        var goldLabel = this.goldNode.getChildByName('label');\n        goldLabel.getComponent(cc.Label).string = Global.wxGold;\n\n        Global.wxGold += parseInt(num);\n        console.log('1 :' + num, Global.wxGold);\n        //更新并存储\n        if (typeof wx !== 'undefined') {\n            let data = ThirdAPI.loadLocalScore();\n            var score = parseInt(data.maxscore);\n            var gold = parseInt(data.gold);\n            ThirdAPI.loadScore((maxscore, gold) => {\n                score = parseInt(maxscore);\n                gold = parseInt(gold);\n                console.log('gridController on ThirdAPI loadScore', score, parseInt(gold), Global.wxGold);\n            });\n            ThirdAPI.saveScore(score, Global.wxGold);\n        }\n\n        var goldLabel = this.goldNode.getChildByName('label');\n        goldLabel.getComponent(cc.Label).string = Global.wxGold;\n    },\n\n    //更新分数\n    updateBestScore: function () {\n        if (typeof wx !== 'undefined') {\n            let data = ThirdAPI.loadLocalScore();\n            Global.wxScore = parseInt(data.maxscore);\n            Global.wxGold = parseInt(data.gold);\n            ThirdAPI.loadScore((maxscore, gold) => {\n                Global.wxScore = parseInt(maxscore);\n                Global.wxGold = parseInt(gold);\n                console.log('on ThirdAPI loadScore', Global.wxScore + \" :: \" + Global.wxGold);\n            });\n            this.dailyLabel.string = \"每日挑战 \" + (Global.dailyBattleTimes - Global.gameinfo.battleTimes) + \"/\" + Global.dailyBattleTimes;\n            this.score.string = \"最高分:\" + Global.wxScore;\n            Global.historyMaxScore = Global.wxScore;\n        } else if (typeof FBInstant !== 'undefined') {\n            this.score.string = \"High score:\" + Global.fbScore;\n        }\n    },\n\n    // 分享功能  intent(\"INVITE\" | \"REQUEST\" | \"CHALLENGE\" | \"SHARE\") 表示分享的意图\n    onShareGame: function () {\n        Global.game.playSound('btn', 0.1);\n\n        this.pauseInterval = true;\n        if (typeof FBInstant !== 'undefined') {\n            var myUtil = require('myUtil');\n            ThirdAPI.shareGame(myUtil.getImgBase64(), this.onShareSuccess.bind(this));\n        } else if (typeof wx !== 'undefined') {\n            ThirdAPI.shareGame('randomImg', this.onShareSuccess.bind(this), this.onShareFail.bind(this), '228');\n        }\n    },\n\n    shareToWx: function () {\n        Global.game.playSound('btn', 0.1);\n        if (typeof FBInstant !== 'undefined') {\n            var myUtil = require('myUtil');\n            ThirdAPI.shareGame(myUtil.getImgBase64(), this.onShareSuccess.bind(this));\n        } else if (typeof wx !== 'undefined') {\n            ThirdAPI.shareGame('randomImg', this.shareToWXSuccess.bind(this), null, '228');\n        }\n    },\n\n    shareToWXSuccess: function () {\n        //游戏首页点击分享到微信群并分享成功\n        var biManager = require('biManager');\n        biManager.bilog(biManager.shareToWX, null);\n    },\n\n    showGroupRank: function () {\n        ThirdAPI.showGameClub(false);\n        Global.game.playSound('btn', 0.1);\n        Global.game.showGroupRank(true);\n    },\n\n    //好友互助奖励\n    onShowRewardUI: function () {\n        ThirdAPI.showGameClub(false);\n        Global.game.playSound('btn', 0.1);\n        Global.game.showRewardUI();\n    },\n\n    //测试广告\n    testAd: function () {\n        var wxRewardVideoAd = require('wxRewardVideoAd');\n        wxRewardVideoAd.initCreateReward(this.onAdSuccess.bind(this));\n    },\n\n    onclose: function () {\n        console.log('关闭广告');\n\n    },\n\n    //设置倒计时\n    startContinueConutDown: function () {\n        let times = 300;\n        let myUtil = require(\"myUtil\");\n\n        this.friendBtnLabel.string = '邀请好友' + myUtil.getSecondString(times);\n        this.pauseInterval = false;\n\n\n        clearInterval(this.countDownInterval);\n        this.countDownInterval = setInterval(() => {\n            if (!this.pauseInterval) {\n                times--;\n                if (times >= 0) {\n                    this.friendBtnLabel.string = '邀请好友' + myUtil.getSecondString(times);\n                } else {\n                    this.friendBtn.active = false;\n                    this.adBtn.active = true;\n                    clearInterval(this.countDownInterval);\n                }\n            }\n        }, 1000);\n    },\n\n    onAdSuccess: function () {\n        Global.gameinfo.showRewardVideoAdTimes++;\n        console.log('保存看广告的次数', Global.gameinfo.showRewardVideoAdTimes);\n        ThirdAPI.saveFriendGenStoneInfo(Global.gameinfo);\n        if (Global.gameinfo.showRewardVideoAdTimes >= Global.showTotalTimes) {\n            this.rewardVideoAdBtn.active = false;\n        } else {\n            this.rewardVideoAdBtn.active = true;\n        }\n\n        /*\n                if (Global.gameinfo.shareTimes >= Global.getForTotalTimes) {\n                    this.friendBtn.active = false;\n                    this.adBtn.active = false;\n                    console.log('每日的分享次数已经满了');\n                } else {\n                    this.friendBtn.active = true;\n                    this.adBtn.active = false;\n                }\n                console.log('adBtn' + this.adBtn.active + 'friendBtn' + this.friendBtn.active);*/\n        //钻石\n        this.createGemstone();\n    },\n\n    onShareSuccess: function (openGId) {\n        //判断是否是当日(向朋友索取),防止凌晨状态\n        console.log('startUI onshareSuccess:', Global.gameinfo.shareDate, (new Date()).toDateString())\n        if (Global.gameinfo.shareDate != (new Date()).toDateString()) {\n            var myUtil = require('myUtil');\n            myUtil.resetInitData();\n        }\n        Global.gameinfo.shareTimes++;\n        Global.gameinfo.shareTimesAndRewardVideoAd++;\n\n        //先判断5次机会，再判断每日总次数3次\n        if (Global.gameinfo.shareTimes >= Global.getForTotalTimes) {\n            console.log('次数已满', Global.gameinfo.shareTimes);\n            //5次已满\n            // Global.gameinfo.shareTimes = 0;\n            // Global.gameinfo.shareTotalTimes++;\n            // Global.gameinfo.shareTime = (new Date()).getTime();\n        }\n        ThirdAPI.saveFriendGenStoneInfo(Global.gameinfo);\n        var time = (new Date()).getTime() - Global.gameinfo.shareTime;\n        console.log('分享成功的时间：', new Date().getTime(), Global.gameinfo.shareTime, time);\n\n        this.pauseInterval = false;\n        clearInterval(this.countDownInterval);\n\n        if (Global.gameinfo.shareTimes >= Global.getForTotalTimes) {\n            this.friendBtn.active = false;\n            this.adBtn.active = false;\n            console.log('每日的分享次数已经满了');\n        } else {\n            this.friendBtn.active = false;\n            this.adBtn.active = true;\n        }\n        console.log('adBtn' + this.adBtn.active + 'friendBtn' + this.friendBtn.active);\n        //钻石\n        //this.createGemstone();\n    },\n\n    //分享到群失败\n    onShareFail: function (msg) {\n        console.log('分享失败！');\n        if (msg === undefined) {\n            Global.game.showDialogText('分享失败！');\n        } else if (msg == 'fail') {\n            Global.game.showDialogText('分享失败，分享到群才有效');\n        } else if (msg == 'cancel') {\n            Global.game.showDialogText('分享失败！');\n        } else {\n            Global.game.showDialogText('分享失败！');\n        }\n        this.pauseInterval = false;\n    },\n\n    //加号分享得钻石\n    addShareGame: function () {\n        Global.game.playSound('btn', 0.1);\n        this.pauseInterval = true;\n\n        if (typeof FBInstant !== 'undefined') {\n            var myUtil = require('myUtil');\n            ThirdAPI.shareGame(myUtil.getImgBase64(), this.onShareSuccess.bind(this));\n        } else if (typeof wx !== 'undefined') {\n            ThirdAPI.shareGame('randomImg', this.onAddShareSuccess.bind(this), this.onShareFail.bind(this), '227');\n        }\n    },\n\n    //加号分享成功\n    onAddShareSuccess: function (openGId) {\n        //游戏首页点击+号并分享成功\n        var biManager = require('biManager');\n        biManager.bilog(biManager.addShare, null);\n\n        if (typeof wx !== 'undefined') {\n            if (!openGId) {\n                Global.game.showDialogText('分享失败，分享到群才有效');\n                console.log('分享失败，分享到群才有效');\n                return;\n            }\n        }\n        if (Global.gameinfo.shareData1.arrOpenGId.indexOf(openGId) != -1) {\n            console.log('该群今日已经分享过', openGId);\n            Global.game.showDialogText('分享失败，请分享到不同群');\n            return;\n        } else {\n            console.log('该群未分享过', openGId);\n            Global.gameinfo.shareData1.arrOpenGId.push(openGId);\n            ThirdAPI.saveFriendGenStoneInfo(Global.gameinfo);\n        }\n\n        //判断是否是当日(向朋友索取)\n        var d = new Date(Date.now());\n        if (Global.gameinfo.shareDate != d.toDateString()) {\n            Global.gameinfo.shareTimesAndRewardVideoAd = 0;\n            Global.gameinfo.shareTimes = 0;\n            Global.gameinfo.shareTotalTimes = 0;\n            Global.gameinfo.shareTime = 0;\n            Global.gameinfo.shareDate = d.toDateString();\n            ThirdAPI.saveFriendGenStoneInfo(Global.gameinfo);\n        }\n\n        //判断次数\n        Global.gameinfo.shareTimes++;\n        Global.gameinfo.shareDate = d.toDateString();\n\n        //先判断5次机会，再判断每日总次数3次\n        if (Global.gameinfo.shareTimes >= Global.getForTotalTimes) {\n            console.log('次数已满', Global.gameinfo.shareTimes);\n            return;\n        }\n        ThirdAPI.saveFriendGenStoneInfo(Global.gameinfo);\n        this.pauseInterval = false;\n        clearInterval(this.countDownInterval);\n\n        //兼容\n        if (!Global.startConfig) {\n            Global.startConfig = {\n                'addStone': 5\n            };\n        }\n        //加钻石\n        var msg = '恭喜获得' + Global.startConfig.addStone + '钻石';\n        Global.game.showDialogPropText(msg);\n        this.updateGold(Global.startConfig.addStone);\n    },\n\n    //创建随机掉落的钻石\n    createGemstone: function () {\n        var myUtil = require('myUtil');\n        var randomNum = 5; //myUtil.randomForArray(Global.randomGemStone);\n        /*  for (let i = 0; i < randomNum; i++) {\n              var instance = cc.instantiate(this.gemStone);\n              var posX = myUtil.randomForMinAndMax(-Global.screenHeight / 2 + 100, Global.screenHeight / 2 - 100);\n              var posY = myUtil.randomForMinAndMax(-Global.screenWidth / 2 + 100, Global.screenWidth / 2 - 100);\n              console.log('gemStone pos:', posX, posY);\n              instance.setPosition(cc.p(0, 0));\n              //instance.setPosition(cc.p(0, Global.screenHeight / 2 + 50));\n              //var action = cc.moveTo(2, cc.p(posX, posY)).easing(cc.easeElasticOut(1));\n              this.node.addChild(instance);\n              var pos = Global.startUI.goldNode.getPosition();\n              //var addNum = (i == randomNum - 1) ? 30 - randomNum : 1;\n              instance.getComponent('getGemStone').toRepeat([pos.x, pos.y], 1);\n              //instance.runAction(action);\n          }*/\n\n        var times = 30;\n        clearInterval(this.addInterval);\n        this.addInterval = setInterval(() => {\n            times -= 5;\n            if (times >= 0) {\n                var instance = cc.instantiate(this.gemStone);\n                instance.setPosition(cc.p(0, 0));\n                this.node.addChild(instance);\n                var pos = Global.startUI.goldNode.getPosition();\n                instance.getComponent('getGemStone').toPosition([pos.x, pos.y], 5);\n            } else {\n                clearInterval(this.addInterval);\n            }\n        }, 150);\n\n    },\n\n    //弹出道具详情\n    dialogForPropInfo: function () {\n        Global.game.showPropDialog(true);\n    },\n\n    //进入游戏\n    play: function () {\n        if (!Global.weightConfig) {\n            var self = this;\n            cc.loader.loadRes('weightConfig', function (err, data) {\n                Global.weightConfig = data.weightConfig;\n                self.onPlay();\n            });\n        } else {\n            this.onPlay();\n        }\n    },\n\n    onPlay: function () {\n        ThirdAPI.showGameClub(false);\n        Global.game.playSound('btn', 0.1);\n        Global.isDailyLimit = false;\n\n        //判断是否有存储\n        this.keepDataNode.active = false;\n        var parma = ThirdAPI.loadGameProgress();\n        if (!parma || (parma && parma.list.length <= 0)) {\n            Global.game.enterScene();\n            //记载点击开始游戏打点\n            var biManager = require('biManager');\n            biManager.bilog(biManager.startGame, null);\n        } else {\n            this.keepDataNode.active = true;\n        }\n    },\n\n    //存档进入游戏\n    keepDataEnterGame: function () {\n        var list = ThirdAPI.loadGameProgress();\n        console.log('keepDataEnterGame:', list);\n        Global.game.enterScene(list);\n        //记载点击开始游戏打点\n        var biManager = require('biManager');\n        biManager.bilog(biManager.startGame, null);\n    },\n\n    //重新开始\n    restartGame: function () {\n        ThirdAPI.clearGameProgressInfo();\n        Global.game.enterScene();\n        //记载点击开始游戏打点\n        var biManager = require('biManager');\n        biManager.bilog(biManager.startGame, null);\n    },\n\n    //存档关闭\n    closekeepData: function () {\n        this.keepDataNode.active = false;\n    },\n\n    //进入每日挑战\n    dailyPlay: function () {\n        ThirdAPI.showGameClub(false);\n        Global.game.playSound('btn', 0.1);\n        if (!Global.dailyConfig) {\n            var self = this;\n            cc.loader.loadRes('grids', function (err, data) {\n                Global.dailyConfig = data;\n                self.onPlayDaily();\n                console.log(\"start ui 读取本地掉率json文件\", data);\n            });\n        } else {\n            this.onPlayDaily();\n        }\n    },\n\n    onPlayDaily: function () {\n        //判断挑战次数\n        if (Global.gameinfo.battleTimes <= 0) {\n            // Global.game.showDialogPropText(\"每日挑战次数到达上限\");\n            // console.log('开始界面，挑战次数不足');\n            if (typeof FBInstant !== 'undefined') {\n                var myUtil = require('myUtil');\n                ThirdAPI.shareGame(myUtil.getImgBase64(), this.onShareSuccess.bind(this));\n            } else if (typeof wx !== 'undefined') {\n                ThirdAPI.shareGame('randomImg', this.onDailyShareSuccess.bind(this), this.onDailyShareFail.bind(this), '230');\n            }\n            return;\n        }\n        Global.gameinfo.battleTimes--;\n        ThirdAPI.saveFriendGenStoneInfo(Global.gameinfo);\n        Global.isDailyLimit = true;\n        Global.game.enterScene();\n    },\n\n    onDailyShareSuccess: function (openGId) {\n        //游戏首页点击每日挑战并分享成功\n        var biManager = require('biManager');\n        biManager.bilog(biManager.dailyShare, null);\n\n        if (typeof wx !== 'undefined') {\n            if (!openGId) {\n                Global.game.showDialogText('分享失败，分享到群才有效');\n                console.log('分享失败，分享到群才有效');\n                return;\n            }\n        }\n        if (Global.gameinfo.shareData1.arrOpenGId.indexOf(openGId) != -1) {\n            console.log('该群今日已经分享过', openGId);\n            Global.game.showDialogText('分享失败，请分享到不同群');\n            return;\n        } else {\n            console.log('该群未分享过', openGId);\n            Global.gameinfo.shareData1.arrOpenGId.push(openGId);\n            ThirdAPI.saveFriendGenStoneInfo(Global.gameinfo);\n        }\n\n        Global.gameinfo.battleTimes = Global.dailyBattleTimes;\n        Global.gameinfo.battleTimes--;\n        ThirdAPI.saveFriendGenStoneInfo(Global.gameinfo);\n        Global.isDailyLimit = true;\n        Global.game.enterScene();\n    },\n\n    onDailyShareFail: function (msg) {\n        if (msg === undefined) {\n            Global.game.showDialogText('分享失败！');\n        } else if (msg == 'fail') {\n            Global.game.showDialogText('分享失败，分享到群才有效');\n        } else if (msg == 'cancel') {\n            Global.game.showDialogText('分享失败！');\n        } else {\n            Global.game.showDialogText('分享失败！');\n        }\n    },\n\n    //进入排行榜\n    showRankUI: function () {\n        ThirdAPI.showGameClub(false);\n        Global.game.playSound('btn', 0.1);\n        Global.game.showRank(true);\n    },\n\n    //皮肤商城\n    onShowStore: function () {\n        ThirdAPI.showGameClub(false);\n        Global.game.playSound('btn', 0.1);\n        Global.game.showStore();\n    },\n\n    //pk竞技\n    onChallenge: function () {\n        ThirdAPI.showGameClub(false);\n        Global.game.playSound('btn', 0.1);\n        Global.shareUI.onChallenge();\n    },\n\n    switchBGM: function () {\n        Global.game.playSound('btn', 0.1);\n        if (Global.isBGMPlaying) {\n            this.pauseBGM();\n            this.soundOnBtn.active = false;\n            this.soundOffBtn.active = true;\n        } else {\n            this.playBGM();\n            this.soundOnBtn.active = true;\n            this.soundOffBtn.active = false;\n        }\n        Global.isBGMPlaying = !Global.isBGMPlaying;\n    },\n\n    playBGM: function () {\n        if (this.currentBGM > -1) {\n            cc.audioEngine.resume(this.currentBGM);\n        }\n    },\n\n    pauseBGM: function () {\n        if (this.currentBGM > -1) {\n            cc.audioEngine.pause(this.currentBGM);\n        }\n    },\n\n    // 按钮回调：更多游戏\n    onMoreGame: function () {\n        Global.game.playSound('btn', 0.1);\n        var LinkImages = require('LinkImages');\n\n        if (Global.linkImages && Global.linkImages.length > 0) {\n            console.log('link image : ', Global.linkImages, Global.linkImages.length);\n\n            let index = Math.floor(cc.random0To1() * Global.linkImages.length);\n            var httpStr = Global.linkImages[index];\n            console.log('httpStr:', httpStr);\n            LinkImages.previewImage(httpStr);\n        }\n    },\n});"]}