{"version":3,"sources":["BiStatLog.js"],"names":["tywx","BiStatLog","BiStatInfo","init","getStaticInfo","getTyInfo","getLocationInfo","getSystemInfo","IP","receiveTime","cloudId","SystemInfo","gameId","appId","clientId","intClientId","userId","UserInfo","uuid","Util","getLocalUUID","gameVersion","version","wxAppId","getUserId","getNetworkType","networkType","StateInfo","callback","self","wx","getLocation","type","success","res","latitude","longitude","speed","accuracy","complete","that","brand","model","pixelRatio","screenWidth","screenHeight","windowWidth","windowHeight","language","wxVersion","systemVersion","system","platform","wxSDKVersion","SDKVersion","fontSizeSetting","sendEvent","eventId","eventParams","eventTime","Date","now","valueOf","cb","eventStr","JSON","stringify","header","configObj","biLogServer","HttpUtil","httpPost"],"mappings":"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","file":"BiStatLog.js","sourceRoot":"../../../../../assets/Scripts/CommonFrame","sourcesContent":["/**\n * Created by xiaochuntian on 2018/6/4.\n */\n\n\n//新的json打点格式,暂未启用\ntywx.BiStatLog = {\n    BiStatInfo: null,\n    init: function() {\n        this.BiStatInfo = {};\n        this.getStaticInfo();\n        this.getTyInfo();\n        this.getLocationInfo();\n        this.getSystemInfo();\n    },\n\n    getStaticInfo: function() {\n        this.BiStatInfo.IP = \"#IP\";\n        this.BiStatInfo.receiveTime = \"#receiveTime\";\n    },\n\n    getTyInfo: function() {\n        this.BiStatInfo.cloudId = tywx.SystemInfo.cloudId;\n        this.BiStatInfo.gameId = tywx.SystemInfo.gameId;\n        this.BiStatInfo.appId = tywx.SystemInfo.appId;\n        this.BiStatInfo.clientId = tywx.SystemInfo.clientId;\n        this.BiStatInfo.intClientId = tywx.SystemInfo.intClientId;\n        this.BiStatInfo.userId = tywx.UserInfo.userId;\n        this.BiStatInfo.uuid = tywx.Util.getLocalUUID();\n        this.BiStatInfo.gameVersion = tywx.SystemInfo.version;\n        this.BiStatInfo.wxAppId = tywx.SystemInfo.wxAppId;\n    },\n\n    getUserId: function() {\n        this.BiStatInfo.userId = tywx.UserInfo.userId;\n    },\n\n    getNetworkType: function() {\n        this.BiStatInfo.networkType = tywx.StateInfo.networkType;\n    },\n\n    getLocationInfo: function(callback) {\n        var self = this;\n        wx.getLocation({\n            type: 'wgs84',\n            success: function(res) {\n                self.BiStatInfo.latitude = res.latitude;\n                self.BiStatInfo.longitude = res.longitude;\n                self.BiStatInfo.speed = res.speed;\n                self.BiStatInfo.accuracy = res.accuracy;\n            },\n            complete: function() {\n                callback();\n            }\n        })\n    },\n\n    getSystemInfo: function() {\n        var that = this;\n        wx.getSystemInfo({\n            success: function(res) {\n                that.BiStatInfo.brand = res.brand;\n                that.BiStatInfo.model = res.model;\n                that.BiStatInfo.pixelRatio = res.pixelRatio;\n                that.BiStatInfo.screenWidth = res.screenWidth;\n                that.BiStatInfo.screenHeight = res.screenHeight;\n                that.BiStatInfo.windowWidth = res.windowWidth;\n                that.BiStatInfo.windowHeight = res.windowHeight;\n                that.BiStatInfo.language = res.language;\n                that.BiStatInfo.wxVersion = res.version;\n                that.BiStatInfo.systemVersion = res.system;\n                that.BiStatInfo.platform = res.platform;\n                that.BiStatInfo.wxSDKVersion = res.SDKVersion;\n                that.BiStatInfo.fontSizeSetting = res.fontSizeSetting;\n\n            }\n        })\n    },\n\n    sendEvent: function(eventId, eventParams) {\n        if(typeof(eventParams) != 'object') {\n            eventParams = {};\n        }\n        this.getNetworkType();\n        this.getUserId();\n        this.BiStatInfo.eventId = eventId;\n        this.BiStatInfo.eventParams = eventParams;\n        this.BiStatInfo.eventTime = Date.now().valueOf();\n\n        var cb = function() {\n            var eventStr = JSON.stringify(tywx.BiStatLog.BiStatInfo);\n            var header = ['Content-Type:text/plain'];\n            var configObj = {\n                'url': tywx.SystemInfo.biLogServer,\n                'headers': header,\n                'postData': eventStr,\n            };\n            tywx.HttpUtil.httpPost(configObj);\n        };\n\n        this.getLocationInfo(cb);\n    },\n};\n\n//tywx.BiStatLog.init();"]}