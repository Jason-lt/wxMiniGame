{"version":3,"sources":["../../../../../assets/Scripts/view/assets/Scripts/view/flyNum.js"],"names":["cc","Class","extends","Component","properties","num","numlabel","default","type","Label","start","toPosition","score","self","curPos","node","getPosition","stopAllActions","setScale","action1","scaleTo","runAction","finished","callFunc","action2","moveTo","p","x","y","myAction","sequence","setLocalZOrder","toItemPosition","toPos","upAction","dist","pDistance","playTime","console","log","smallAction","flyScoreAction","addScoreAction","gridControllerScript","Global","gridController","getComponent","addScore","parseInt","cdnGameConfig","bombDoubleRate","scoreScript","scaleAction","flySpawn","spawn","setNum","_num","doubleTimes","extraStr","string","parent","removeChild","destroy"],"mappings":"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","file":"flyNum.js","sourceRoot":"../../../../../assets/Scripts/view","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        num: 0,\n        numlabel: {\n            default: null,\n            type: cc.Label,\n        },\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    // onLoad () {},\n\n    start() {\n\n    },\n\n    toPosition: function (score) {\n        var self = this;\n        var curPos = this.node.getPosition();\n        this.node.stopAllActions();\n        this.node.setScale(0.5, 0.5);\n        //先放大\n        var action1 = cc.scaleTo(0.3, 1, 1);\n        this.node.runAction(action1);\n\n        //再上移\n        var finished = cc.callFunc(this.finished, this);\n        var action2 = cc.moveTo(0.5, cc.p(this.node.getPosition().x, this.node.getPosition().y + 150));\n        var myAction = cc.sequence(action2, finished);\n        this.node.runAction(myAction);\n        this.node.setLocalZOrder(10000);\n    },\n\n    //数字飞入效果\n    toItemPosition: function (toPos) {\n        this.node.stopAllActions();\n\n        var upAction = cc.moveTo(0.5, cc.p(this.node.getPosition().x, this.node.getPosition().y + 150));\n\n        var dist = cc.pDistance(this.node.getPosition(), toPos);\n        var playTime = dist / 1000;\n        console.log('playTime:', playTime);\n\n        var smallAction = cc.scaleTo(playTime, 0.4);\n        var flyScoreAction = cc.moveTo(playTime, cc.p(toPos.x, toPos.y));\n\n        //var spawn = cc.spawn(bigAction, upAction);\n\n        var finished = cc.callFunc(this.finished, this);\n        var addScoreAction = cc.callFunc(function () {\n            var gridControllerScript = Global.gridController.getComponent(\"gridController\");\n            var addScore = this.num * parseInt(Global.cdnGameConfig.bombDoubleRate);\n            gridControllerScript.scoreScript.addScore(addScore);\n            gridControllerScript.scoreScript.scaleAction();\n        }, this);\n\n        var flySpawn = cc.spawn(smallAction, flyScoreAction);\n        var myAction = cc.sequence(upAction, flySpawn, addScoreAction, finished);\n        this.node.runAction(myAction);\n        this.node.setLocalZOrder(2000);\n\n\n        /*\n                var self = this;\n                var curPos = this.node.getPosition();\n                this.node.stopAllActions();\n                this.node.setScale(0.5, 0.5);\n                //先放大\n                var action1 = cc.scaleTo(0.3, 1, 1);\n                this.node.runAction(action1);\n\n                //再上移\n                var finished = cc.callFunc(this.finished, this);\n                var addScoreAction = cc.callFunc(function () {\n                    var gridControllerScript = Global.gridController.getComponent(\"gridController\");\n                    var addScore = this.num * 3;\n                    gridControllerScript.scoreScript.addScore(addScore);\n                }, this);\n                var action2 = cc.moveTo(0.5, cc.p(this.node.getPosition().x, this.node.getPosition().y + 150));\n                var myAction = cc.sequence(action2, addScoreAction, finished);\n                this.node.runAction(myAction);\n                this.node.setLocalZOrder(2000);*/\n    },\n\n\n    setNum: function (_num, doubleTimes) {\n        this.num = _num;\n        var extraStr = \"\";\n        if (doubleTimes > 1) {\n            extraStr = 'x' + parseInt(doubleTimes);\n        }\n        this.numlabel.string = _num + '' + extraStr;\n    },\n\n    finished: function () {\n        this.node.stopAllActions();\n        this.node.parent.removeChild(this.node);\n        this.node.destroy();\n    }\n\n    // update (dt) {},\n});"]}