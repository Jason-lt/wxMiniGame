tcpManager={},tcpManager.websocket={init:function(){tywx.NotificationCenter.listen(tywx.EventType.SDK_LOGIN_SUCCESS,tcpManager.websocket.sdkLoginSuccess,null),tywx.NotificationCenter.listen(tywx.EventType.TCP_OPENED,tcpManager.websocket.tcpConnect,null),tywx.NotificationCenter.listen(tywx.EventType.SEND_HEART_BEAT,tcpManager.websocket.heartbeat,null),tywx.NotificationCenter.listen(tywx.EventType.TCP_RECEIVE,tcpManager.websocket.receiveData,null)},sdkLoginSuccess:function(e,t){console.log("SDK_LOGIN_SUCCESS"),tywx.TCPClient.connectStatus=tywx.TCPClient.CONNECT_STATUS_FAIL,tywx.TCPClient.timerSchedule()},tcpConnect:function(e,t){console.log("tcpManager.websocket.tcpConnect"),tcpManager.websocket.bindUser(),tcpManager.websocket.heartbeat(null,null)},heartbeat:function(e,t){var n={apiVersion:"5.0",namespace:"hall5",cmd:tcpManager.cmdType.heartbeat,params:{userId:tywx.UserInfo.userId,gameId:9999,intClientId:tywx.SystemInfo.intClientId}};tywx.TCPClient.sendMsg(n)},bindUser:function(e,t){console.log("tcpManager.websocket.bindUser");var n={apiVersion:"5.0",namespace:"hall5",cmd:tcpManager.cmdType.bind_user5,params:{userId:tywx.UserInfo.userId,gameId:9999,intClientId:tywx.SystemInfo.intClientId,authorCode:tywx.UserInfo.authorCode}};tywx.TCPClient.sendMsg(n)},sendData:function(e){e&&tywx.TCPClient.sendMsg(e)},receiveData:function(e){console.log("receiveData",e,e.cmd),e.cmd==tcpManager.cmdType.user_info5?tywx.NotificationCenter.trigger(tcpManager.gameEvent.BIND_USER_SUCCESS):tcpManager.receiveCmd.process(e)}};