{"version":3,"sources":["../../../../../assets/Scripts/lib_dataStatistics/assets/Scripts/lib_dataStatistics/dataStatistics.js"],"names":["_interopRequireDefault","e","__esModule","default","_classCallCheck","t","TypeError","request","myLog","isOpenUserLog","a","wx","url","data","method","header","success","fail","n","retryTimes","getUserSaveDay","setStorageSync","Date","getTime","getStorageSync","toFixed","makeuid","now","Math","floor","random","getObject","appKey","_dataStatisticsConfig2","channelCode","channelId","createDateTime","path","query","retain","shareId","scene","type","userId","_getShareInfo","Promise","api","name","res","channel_code","o","_EChannelPrefix2","regular","http","HandleGoto","navigateToMiniProgram","goto","referrerInfo","extraData","then","is_open","appid","next_id","appId","envVersion","catch","getErrData","code","msg","getErrParamsData","login","showLoading","title","mask","wxLogin","r","CheckParams","console","log","isDebug","debug","openId","onLoginInfo","retryLogin","c","JSON","stringify","i","hideLoading","showModal","content","showCancel","confirm","userLog","dataRetry","dataStatistics","getKVUserData","setKVUserData","logStatus","defineProperty","exports","value","_createClass","length","enumerable","configurable","writable","Object","key","prototype","_dataStatisticsConfig","require","_EChannelPrefix","options","shareAppMessage","version","lastLoginIn","channelPrefix","user","getSystemInfoSync","SDKVersion","getUserInfo","encryptedData","iv","authorize","createUserInfoButton","text","image","style"],"mappings":"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","file":"dataStatistics.js","sourceRoot":"../../../../../assets/Scripts/lib_dataStatistics","sourcesContent":["\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function request(e){if(myLog(e),isOpenUserLog){var t=0;!function a(){wx.request({url:\"https://h5game-log.kuaiyugo.com/dataAnalysis/saveUserBehaviorLog\",data:e,method:\"POST\",header:{\"content-type\":\"application/json\"},success:function(e){},fail:function(n){t<2&&(t++,e.retryTimes=t,a())}})}()}}function getUserSaveDay(e){try{if(\"sign_in\"==e)return wx.setStorageSync(\"regtime\",(new Date).getTime()),0;var t=wx.getStorageSync(\"regtime\");return(((new Date).getTime()-t)/1e3/60/60/24).toFixed(0)}catch(e){myLog(e)}}function makeuid(){try{return\"\"+Date.now()+Math.floor(1e7*Math.random())}catch(e){myLog(e)}}function getObject(e){try{var t=getUserSaveDay(e);return{appKey:_dataStatisticsConfig2.default.appKey,channelCode:wx.getStorageSync(\"channelCode\")||\"\",channelId:wx.getStorageSync(\"channelId\")||\"\",createDateTime:(new Date).getTime(),path:\"\",query:{},retain:t,shareId:wx.getStorageSync(\"shareId\")||\"\",scene:\"\",type:e,userId:wx.getStorageSync(\"userId\")}}catch(e){myLog(e)}}function _getShareInfo(e){var t=\"\";try{t=wx.getStorageSync(\"userId\")}catch(e){}return new Promise(function(a,n){wx.request({url:_dataStatisticsConfig2.default.api+\"backendManager/getMaterialInfoByAppkey?channelPrefix=\"+e+\"&appKey=\"+_dataStatisticsConfig2.default.appKey+\"&userId=\"+t,method:\"GET\",header:{\"content-type\":\"application/json\"},success:function(t){myLog({name:\"服务器返回分享信息\",res:t});var n=\"\";try{n=wx.getStorageSync(\"channelId\")}catch(e){n=wx.getStorageSync(\"channelId\")}if(t.data.data.channel_code){var o=t.data.data.channel_code+\"-\"+n;if(e==_EChannelPrefix2.default.regular)try{wx.setStorageSync(\"passivechannelcode\",o)}catch(e){wx.setStorageSync(\"passivechannelcode\",o)}else wx.setStorageSync(\"channelCode\",o)}a(t)},fail:function(e){n(e)}})})}function http(e,t,a){try{return new Promise(function(n,o){wx.request({url:_dataStatisticsConfig2.default.api+a,data:e,method:t,header:{\"content-type\":\"application/json\"},success:function(e){n(e)},fail:function(e){o(e)}})})}catch(e){myLog(e)}}function HandleGoto(e){try{if(!wx.navigateToMiniProgram)return;if(e.query.goto||e.referrerInfo){http(\"\",\"GET\",\"game/getGotoConfig?id=\"+(e.query.goto||e.referrerInfo.extraData.goto)).then(function(e){myLog(e);var t=e.data.data,a=t.is_open;if(myLog(a),a){var n=t.appid,o=t.next_id;wx.navigateToMiniProgram({appId:n,envVersion:\"release\",extraData:{goto:o},success:function(e){myLog(e)}})}}).catch(function(e){myLog(e)})}}catch(e){myLog(e)}}function getErrData(e){return myLog(e),{code:-10110,data:e,msg:\"request fail\"}}function getErrParamsData(e){return myLog(e),{code:-10111,data:\"\",msg:e}}function login(e,t,a){try{wx.showLoading({title:\"登录中...\",mask:!0,success:function(){wxLogin(e,t,a)},fail:function(){login(e,t,a)}})}catch(e){myLog(e)}}function wxLogin(e,t,a){try{wx.login({success:function(n){var o=n.code,r={appId:_dataStatisticsConfig2.default.appId,code:o};if(1==CheckParams(r))http(r,\"POST\",\"user/standAloneLogin\").then(function(n){if(console.log(n,\"res\"),myLog({name:\"登录信息\",res:n}),0==n.data.code){isDebug=n.data.debug;try{var o=n.data.data.openId;myLog(\"获取\"+o),wx.setStorageSync(\"userId\",o),onLoginInfo(e,t,a)}catch(n){console.log(n),retryLogin(e,t,a,n,\"str\")}}else retryLogin(e,t,a,n,\"obj\")}).catch(function(n){retryLogin(e,t,a,n,\"obj\")});else{var c=\"前端检查参数不正确\"+JSON.stringify(r),i=getErrParamsData(c);a(i)}},fail:function(n){myLog(\"微信Login失败\"),retryLogin(e,t,a,n,\"obj\")}})}catch(e){myLog(e),wx.hideLoading()}}function retryLogin(e,t,a,n,o){try{var r=\"网络异常，是否重新登录\";\"str\"==o?r+=\" \"+n:\"obj\"==o&&(n.data?r+=\" \"+JSON.stringify(n.data.msg):r+=\" \"+JSON.stringify(n)),console.log(r),wx.hideLoading(),wx.showModal({title:\"提示\",content:r,showCancel:!1,success:function(n){if(n.confirm)try{wx.showLoading({title:\"登录中...\",mask:!1}),wxLogin(e,t,a)}catch(n){wx.showLoading({title:\"登录中...\",mask:!1}),wxLogin(e,t,a)}},fail:function(){wxLogin(e,t,a)}})}catch(e){myLog(e)}}function onLoginInfo(e,t,a){try{var n=getObject(\"login_in\");wx.setStorageSync(\"lastlogintime\",(new Date).getTime()),n.query=e.query,HandleGoto(e),e.query.channelId&&(n.channelId=e.query.channelId);try{wx.setStorageSync(\"channelId\",n.channelId)}catch(e){wx.setStorageSync(\"channelId\",n.channelId)}e.query.channelCode?n.channelCode=e.query.channelCode:e.referrerInfo&&e.referrerInfo.extraData&&e.referrerInfo.extraData.channelCode&&(n.channelCode=e.referrerInfo.extraData.channelCode);try{wx.setStorageSync(\"channelCode\",n.channelCode)}catch(e){wx.setStorageSync(\"channelCode\",n.channelCode)}e.query.shareId&&(n.shareId=e.query.shareId);try{wx.setStorageSync(\"shareId\",n.shareId)}catch(e){wx.setStorageSync(\"shareId\",n.shareId)}e.scene&&(n.scene=e.scene);t({data:\"success\"}),wx.hideLoading();request({userLog:JSON.stringify(n)})}catch(e){wx.hideLoading(),myLog(e)}}function dataRetry(e,t,a,n,o){try{var r=\"网络异常，请稍后重试\";isDebug&&(r+=JSON.stringify(o)),wx.showModal({title:\"提示\",content:r,showCancel:!1,success:function(o){\"get\"==e?dataStatistics.getKVUserData(a,n):\"set\"==e&&dataStatistics.setKVUserData(t,a,n)},fail:function(o){dataRetry(e,t,a,n,o)}})}catch(e){myLog(e)}}function CheckParams(e){myLog(e);for(var t in e)if(null==e[t]||\"\"==e[t]||\"undefined\"==e[t])return-1;return 1}function myLog(e){logStatus&&console.log(e)}Object.defineProperty(exports,\"__esModule\",{value:!0});var _createClass=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),_dataStatisticsConfig=require(\"./dataStatistics.config.js\"),_dataStatisticsConfig2=_interopRequireDefault(_dataStatisticsConfig),_EChannelPrefix=require(\"./EChannelPrefix\"),_EChannelPrefix2=_interopRequireDefault(_EChannelPrefix),logStatus=!0,isDebug=!1,isOpenUserLog=!0,dataStatistics=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:\"shareAppMsg\",value:function(e){try{var t=getObject(\"share\");t.shareId=t.userId,e.query&&\"\"!=e.query?e.query+=\"&shareId=\"+t.shareId+\"&channelCode=\"+t.channelCode:e.query=\"shareId=\"+t.shareId+\"&channelCode=\"+t.channelCode,myLog({name:\"options\",options:e}),wx.shareAppMessage(e);request({userLog:JSON.stringify(t)})}catch(e){myLog(e)}}},{key:\"onShareAppMsg\",value:function(e){try{var t=getObject(\"share\");t.query=e.query,t.shareId=t.userId,t.channelCode=wx.getStorageSync(\"passivechannelcode\"),e.query&&\"\"!=e.query?e.query+=\"&shareId=\"+t.shareId+\"&channelCode=\"+t.channelCode:e.query=\"shareId=\"+t.shareId+\"&channelCode=\"+t.channelCode;return request({userLog:JSON.stringify(t)}),myLog({name:\"options\",options:e}),e}catch(e){myLog(e)}}},{key:\"shareSuccess\",value:function(e){try{var t=getObject(\"sharesuccess\");if(\"initiative\"==e)try{t.channelCode=wx.getStorageSync(\"channelCode\")}catch(e){t.channelCode=wx.getStorageSync(\"channelCode\")}else try{t.channelCode=wx.getStorageSync(\"passivechannelcode\")}catch(e){t.channelCode=wx.getStorageSync(\"passivechannelcode\")}t.shareId=t.userId;request({userLog:JSON.stringify(t)})}catch(e){myLog(e)}}},{key:\"onShowInfo\",value:function(e,t,a){myLog(\"sdk_config.version\"+_dataStatisticsConfig2.default.version);var n=t||function(){},o=a||function(){};try{if(wx.navigateToMiniProgram){onLoginInfo(e,n,o);var r=makeuid();wx.setStorageSync(\"userId\",r)}else\"\"==wx.getStorageSync(\"userId\")||null==wx.getStorageSync(\"userId\")?login(e,n,o):onLoginInfo(e,n,o)}catch(e){myLog(e)}}},{key:\"onHideInfo\",value:function(){try{var e=getObject(\"login_out\");e.lastLoginIn=wx.getStorageSync(\"lastlogintime\");request({userLog:JSON.stringify(e)})}catch(e){myLog(e)}}},{key:\"getShareInfo\",value:function(e,t,a){console.log(\"in\");try{var n=t||function(){},o=a||function(){},r={channelPrefix:e,appKey:_dataStatisticsConfig2.default.appKey};if(1==CheckParams(r))_getShareInfo(e).then(function(e){\"function\"==typeof n&&n(e)}).catch(function(e){var t=getErrData(e);\"function\"==typeof o&&o(t)});else{var c=\"前端检查参数不正确\"+JSON.stringify(r),i=getErrParamsData(c);o(i)}}catch(e){myLog(e)}}},{key:\"setKVUserData\",value:function(e,t,a){try{var n={appKey:_dataStatisticsConfig2.default.appKey,user:wx.getStorageSync(\"userId\"),value:e},o=t||function(){},r=a||function(){};if(1==CheckParams(n))http(n,\"POST\",\"game/setKVUserData\").then(function(e){myLog(e),\"function\"==typeof o&&o(e)}).catch(function(t){myLog(t);var a=getErrData(t);\"function\"==typeof r&&r(a),dataRetry(\"set\",e,o,r,t)});else{var c=\"前端检查参数不正确\"+JSON.stringify(n),i=getErrParamsData(c);r(i)}}catch(e){myLog(e)}}},{key:\"getKVUserData\",value:function(e,t){try{var a=e||function(){},n=t||function(){},o=wx.getStorageSync(\"userId\"),r={appKey:_dataStatisticsConfig2.default.appKey,user:o};if(1==CheckParams(r))http(\"\",\"GET\",\"game/getKVUserData?appKey=\"+_dataStatisticsConfig2.default.appKey+\"&user=\"+o).then(function(e){myLog(e),\"function\"==typeof a&&a(e)}).catch(function(e){var t=getErrData(e);\"function\"==typeof n&&n(t),dataRetry(\"get\",\"\",a,n,e)});else{var c=\"前端检查参数不正确\"+JSON.stringify(r),i=getErrParamsData(c);n(i)}}catch(e){myLog(e)}}},{key:\"getServerTime\",value:function(e,t){try{http(\"\",\"GET\",\"user/getServerTime\").then(function(t){e(t)}).catch(function(e){t(e)})}catch(e){myLog(e)}}},{key:\"getGameConfigByAppkey\",value:function(e,t){try{var a=e||function(){},n=t||function(){};if(\"\"==_dataStatisticsConfig2.default.appKey||null==_dataStatisticsConfig2.default.appKey){var o=\"前端检查参数不正确appkey=\"+_dataStatisticsConfig2.default.appKey,r=getErrParamsData(o);n(r)}else http(\"\",\"GET\",\"game/getGameConfigByAppkey?appKey=\"+_dataStatisticsConfig2.default.appKey).then(function(e){myLog(e),\"function\"==typeof a&&a(e)}).catch(function(e){var t=getErrData(e);\"function\"==typeof n&&n(t)})}catch(e){myLog(e)}}},{key:\"createUserInfoBtn\",value:function(e,t,a,n,o,r){try{var c=this;if(wx.getSystemInfoSync().SDKVersion<\"2.0.6\")return void wx.getUserInfo({success:function(e){var t={encryptedData:e.encryptedData,iv:e.iv};c.authorize(t,o,r)},fail:function(e){r(e)}});var i=wx.createUserInfoButton({type:e,text:t,image:a,style:n});o({code:1,data:i,msg:\"success\"})}catch(e){r(e)}}}]),e}();exports.default=dataStatistics;"]}