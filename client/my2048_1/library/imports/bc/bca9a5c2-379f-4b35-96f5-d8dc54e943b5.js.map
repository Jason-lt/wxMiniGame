{"version":3,"sources":["../../../../../assets/Scripts/ui/assets/Scripts/ui/startUI.js"],"names":["ThirdAPI","require","wxRewardVideoAd","cc","Class","extends","Component","properties","score","default","type","Label","icon","Sprite","bg","soundOnBtn","Node","soundOffBtn","gemStone","Prefab","friendBtn","friendBtnLabel","adBtn","dailyLabel","goldNode","spriteMoreGame","backgroundAudio","url","AudioClip","rewardVideoAdBtn","keepDataNode","dailyBtn","layoutNode","version","currentBGM","reddot","onLoad","console","log","listenUtil","eventCtrl","addListen","cdnchange","bind","start","init","initAudio","params","active","Global","cdnGameConfig","totalSwith","showGameClub","checkLogin","setShowRewardVideoAd","updateBestScore","spriteFrame","getTexture","setAliasTexParameters","isBGMPlaying","string","time","Date","getTime","gameinfo","shareTime","shareTotalTimes","dailyTotalTimes","updateGold","moreGameRunAction","d","now","showRewardVideoAdDate","toDateString","showRewardVideoAdTimes","saveFriendGenStoneInfo","showTotalTimes","loginDateStr","node","rotation","stopAllActions","runAction","repeatForever","sequence","rotateBy","delayTime","audioEngine","play","setLoop","setVolume","volume","getVolume","isSoundPlaying","showChest","game","showPropDialog","showRedDot","ret","num","goldLabel","getChildByName","getComponent","wxGold","parseInt","wx","data","loadLocalScore","maxscore","gold","loadScore","saveScore","wxScore","dailyBattleTimes","battleTimes","historyMaxScore","FBInstant","fbScore","onShareGame","playSound","pauseInterval","myUtil","shareGame","getImgBase64","onShareSuccess","EChannelPrefix","sendChannelPrefix","invitation","onShareFail","shareToWx","shareToWXSuccess","biManager","bilog","shareToWX","showGroupRank","onShowRewardUI","showRewardUI","testAd","initCreateReward","onAdSuccess","onclose","startContinueConutDown","times","getSecondString","clearInterval","countDownInterval","setInterval","createGemstone","openGId","shareDate","resetInitData","shareTimes","shareTimesAndRewardVideoAd","getForTotalTimes","msg","undefined","showDialogText","addShareGame","onAddShareSuccess","addShare","shareData1","arrOpenGId","indexOf","push","startConfig","addStone","showDialogPropText","randomNum","addInterval","instance","instantiate","setPosition","p","addChild","pos","startUI","getPosition","toPosition","x","y","dialogForPropInfo","weightConfig","self","loader","loadRes","err","onPlay","isDailyLimit","parma","loadGameProgress","list","length","enterScene","startGame","keepDataEnterGame","restartGame","clearGameProgressInfo","closekeepData","dailyPlay","dailyConfig","onPlayDaily","onDailyShareSuccess","onDailyShareFail","dailyShare","showRankUI","showRank","onShowStore","showStore","onChallenge","shareUI","switchBGM","pauseBGM","playBGM","resume","pause","onMoreGame","LinkImages","linkImages","index","Math","floor","random0To1","httpStr","previewImage"],"mappings":"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","file":"startUI.js","sourceRoot":"../../../../../assets/Scripts/ui","sourcesContent":["let ThirdAPI = require('../common/ThirdAPI')\nlet wxRewardVideoAd = require('../common/wxRewardVideoAd')\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        score: {\n            default: null,\n            type: cc.Label,\n        },\n        icon: {\n            default: null,\n            type: cc.Sprite,\n        },\n        bg: {\n            default: null,\n            type: cc.Sprite,\n        },\n        soundOnBtn: {\n            default: null,\n            type: cc.Node\n        },\n        soundOffBtn: {\n            default: null,\n            type: cc.Node\n        },\n        //随机钻石预设\n        gemStone: {\n            default: null,\n            type: cc.Prefab\n        },\n        friendBtn: {\n            default: null,\n            type: cc.Node\n        },\n        friendBtnLabel: {\n            default: null,\n            type: cc.Label\n        },\n        adBtn: {\n            default: null,\n            type: cc.Node\n        },\n        dailyLabel: {\n            default: null,\n            type: cc.Label,\n        },\n        //金币节点\n        goldNode: {\n            default: null,\n            type: cc.Node\n        },\n        spriteMoreGame: {\n            default: null,\n            type: cc.Sprite,\n        },\n        //背景音乐\n        backgroundAudio: {\n            url: cc.AudioClip,\n            default: null\n        },\n        //广告按钮\n        rewardVideoAdBtn: {\n            default: null,\n            type: cc.Node\n        },\n        /*\n        addBtn: {\n            default: null,\n            type: cc.Node\n        },*/\n        //存档界面\n        keepDataNode: {\n            default: null,\n            type: cc.Node\n        },\n        //每日挑战按钮\n        dailyBtn: {\n            default: null,\n            type: cc.Node\n        },\n        layoutNode: {\n            default: null,\n            type: cc.Node,\n        },\n        version: {\n            default: null,\n            type: cc.Label,\n        },\n        currentBGM: -1,\n\n\n        // 红点\n        reddot: {\n            default: null,\n            type: cc.Node\n        },\n    },\n\n    onLoad: function () {\n        console.log(\"开始游戏界面的onLoad方法\");\n        listenUtil.eventCtrl.addListen('cdnchange', this.cdnchange.bind(this));\n    },\n\n    start: function () {\n        console.log('开始界面调用 start方法');\n        this.init();\n        this.initAudio();\n        //this.reddot.active = false;\n    },\n\n    cdnchange: function (params) {\n        console.log('cdn数据变化');\n        //this.addBtn.active = Global.cdnGameConfig.totalSwith;\n        this.dailyBtn.active = Global.cdnGameConfig.totalSwith;\n    },\n\n    init: function () {\n        ThirdAPI.showGameClub(true);\n        this.checkLogin();\n        this.setShowRewardVideoAd();\n        this.updateBestScore();\n        this.icon.spriteFrame.getTexture().setAliasTexParameters();\n        this.bg.spriteFrame.getTexture().setAliasTexParameters();\n        this.soundOnBtn.active = Global.isBGMPlaying;\n        this.soundOffBtn.active = !Global.isBGMPlaying;\n        //this.addBtn.active = Global.cdnGameConfig.totalSwith;\n        this.keepDataNode.active = false;\n        this.dailyBtn.active = Global.cdnGameConfig.totalSwith;\n\n        if (Global.cdnGameConfig && Global.cdnGameConfig.version) {\n            this.version.string = Global.cdnGameConfig.version;\n        }\n\n        // var baseScale = 640 / 1136;\n        //var scale = Math.floor(cc.winSize.width / cc.winSize.height / baseScale);\n\n        //this.layoutNode.scale = cc.winSize.width / cc.winSize.height / baseScale;\n\n\n        //显示星星\n        var time = (new Date()).getTime() - Global.gameinfo.shareTime;\n        console.log(\"索取次数判断：\", Global.gameinfo.shareTotalTimes, Global.dailyTotalTimes, time);\n\n        //cdn判断\n        //总开关判断\n        /*\n        if (Global.cdnGameConfig.totalSwith) {\n            this.friendBtn.active = false;\n        } else {\n            //分数开关判断\n            if (Global.cdnGameConfig.startScoreSwith) {\n                //判断分数\n                console.log('判断分数：', Global.cdnGameConfig.startScoreLimit, Global.wxScore);\n                var canShow = Global.wxScore > Global.cdnGameConfig.startScoreLimit ? true : false;\n                console.log('首页索取按钮判断--canShow:', canShow, Global.gameinfo.shareTotalTimes, time);\n                this.friendBtn.active = (canShow && Global.gameinfo.shareTotalTimes < Global.dailyTotalTimes && time > Global.intervalTime) ? true : false;\n            } else {\n                console.log('设置好友索取按钮状态');\n                this.friendBtn.active = (Global.gameinfo.shareTotalTimes < Global.dailyTotalTimes && time > Global.intervalTime) ? true : false;\n            }\n        }\n\n        //this.friendBtn.active = (!Global.Gameversion && Global.gameinfo.shareTotalTimes < Global.dailyTotalTimes && time > Global.intervalTime) ? true : false;\n\n        if (Global.gameinfo.shareTimes >= Global.getForTotalTimes) {\n            this.friendBtn.active = false;\n            this.adBtn.active = false;\n            console.log('每日的分享次数已经满了');\n        } else {\n            console.log('Global.gameinfo.shareTimesAndRewardVideoAd:', Global.gameinfo.shareTimesAndRewardVideoAd);\n            if (Global.gameinfo.shareTimesAndRewardVideoAd % 2 == 0) {\n                this.friendBtn.active = false;\n                this.adBtn.active = true;\n            } else {\n                this.friendBtn.active = true;\n                this.adBtn.active = false;\n            }\n        }*/\n\n        this.updateGold(0);\n        this.moreGameRunAction();\n    },\n\n    //显示广告\n    setShowRewardVideoAd: function () {\n        //判断看广告是否在当天\n        var d = new Date(Date.now());\n        if (Global.gameinfo.showRewardVideoAdDate != d.toDateString()) {\n            Global.gameinfo.showRewardVideoAdTimes = 0;\n            Global.gameinfo.showRewardVideoAdDate = d.toDateString();\n            ThirdAPI.saveFriendGenStoneInfo(Global.gameinfo);\n        }\n        console.log('setShowRewardVideoAd:', Global.gameinfo.showRewardVideoAdTimes, Global.showTotalTimes);\n        //判断次数限制\n        this.rewardVideoAdBtn.active = Global.gameinfo.showRewardVideoAdTimes < Global.showTotalTimes ? true : false;\n    },\n\n    //每次到开始界面都判断是否需要重新登录，拉去最新数据\n    checkLogin: function () {\n        console.log('开始界面判断日期', Global.loginDateStr != (new Date()).toDateString())\n        if (Global.loginDateStr != (new Date()).toDateString()) {\n            console.log('登录');\n            //tcpManager.sendCmd.sendLoginData();\n        }\n    },\n\n    moreGameRunAction: function () {\n        this.spriteMoreGame.node.rotation = 0;\n        this.spriteMoreGame.node.stopAllActions();\n        this.spriteMoreGame.node.runAction(\n            cc.repeatForever(\n                cc.sequence(cc.rotateBy(0.1, 10), cc.rotateBy(0.2, -20), cc.rotateBy(0.2, 20), cc.rotateBy(0.2, -20), cc.rotateBy(0.1, 10), cc.delayTime(2)))\n        );\n    },\n\n    //初始化音乐\n    initAudio: function () {\n        this.currentBGM = cc.audioEngine.play(this.backgroundAudio, false, 0.2);\n        cc.audioEngine.setLoop(this.currentBGM, true);\n        cc.audioEngine.setVolume(this.currentBGM, 0.2);\n        var volume = cc.audioEngine.getVolume(this.currentBGM);\n        console.log('currentBGM volume is ' + volume);\n        Global.isBGMPlaying = true;\n        Global.isSoundPlaying = true;\n    },\n\n    //宝箱赠送\n    showChest: function () {\n        ThirdAPI.showGameClub(false);\n        Global.game.showPropDialog(true);\n    },\n\n    // 显示提示红点\n    showRedDot: function (ret) {\n        //this.reddot.active = ret;\n    },\n\n    //更新星星的数量\n    updateGold: function (num) {\n        var goldLabel = this.goldNode.getChildByName('label');\n        goldLabel.getComponent(cc.Label).string = Global.wxGold;\n\n        Global.wxGold += parseInt(num);\n        console.log('1 :' + num, Global.wxGold);\n        //更新并存储\n        if (typeof wx !== 'undefined') {\n            let data = ThirdAPI.loadLocalScore();\n            var score = parseInt(data.maxscore);\n            var gold = parseInt(data.gold);\n            ThirdAPI.loadScore((maxscore, gold) => {\n                score = parseInt(maxscore);\n                gold = parseInt(gold);\n                console.log('gridController on ThirdAPI loadScore', score, parseInt(gold), Global.wxGold);\n            });\n            ThirdAPI.saveScore(score, Global.wxGold);\n        }\n\n        var goldLabel = this.goldNode.getChildByName('label');\n        goldLabel.getComponent(cc.Label).string = Global.wxGold;\n    },\n\n    //更新分数\n    updateBestScore: function () {\n        if (typeof wx !== 'undefined') {\n            let data = ThirdAPI.loadLocalScore();\n            Global.wxScore = parseInt(data.maxscore);\n            Global.wxGold = parseInt(data.gold);\n            ThirdAPI.loadScore((maxscore, gold) => {\n                Global.wxScore = parseInt(maxscore);\n                Global.wxGold = parseInt(gold);\n                console.log('on ThirdAPI loadScore', Global.wxScore + \" :: \" + Global.wxGold);\n            });\n            this.dailyLabel.string = \"每日挑战 \" + (Global.dailyBattleTimes - Global.gameinfo.battleTimes) + \"/\" + Global.dailyBattleTimes;\n            this.score.string = \"最高分:\" + Global.wxScore;\n            Global.historyMaxScore = Global.wxScore;\n        } else if (typeof FBInstant !== 'undefined') {\n            this.score.string = \"High score:\" + Global.fbScore;\n        }\n    },\n\n    // 分享功能  intent(\"INVITE\" | \"REQUEST\" | \"CHALLENGE\" | \"SHARE\") 表示分享的意图\n    onShareGame: function () {\n        Global.game.playSound('btn', 0.1);\n\n        this.pauseInterval = true;\n        if (typeof FBInstant !== 'undefined') {\n            var myUtil = require('myUtil');\n            ThirdAPI.shareGame(myUtil.getImgBase64(), this.onShareSuccess.bind(this));\n        } else if (typeof wx !== 'undefined') {\n            let EChannelPrefix = require(\"EChannelPrefix\");\n            ThirdAPI.sendChannelPrefix(EChannelPrefix.invitation);\n            ThirdAPI.shareGame('randomImg', this.onShareSuccess.bind(this), this.onShareFail.bind(this), '245');\n        }\n    },\n\n    shareToWx: function () {\n        Global.game.playSound('btn', 0.1);\n        if (typeof FBInstant !== 'undefined') {\n            var myUtil = require('myUtil');\n            ThirdAPI.shareGame(myUtil.getImgBase64(), this.onShareSuccess.bind(this));\n        } else if (typeof wx !== 'undefined') {\n            ThirdAPI.shareGame('randomImg', this.shareToWXSuccess.bind(this), null, '245');\n        }\n    },\n\n    shareToWXSuccess: function () {\n        //游戏首页点击分享到微信群并分享成功\n        var biManager = require('biManager');\n        biManager.bilog(biManager.shareToWX, null);\n    },\n\n    showGroupRank: function () {\n        ThirdAPI.showGameClub(false);\n        Global.game.playSound('btn', 0.1);\n        Global.game.showGroupRank(true);\n    },\n\n    //好友互助奖励\n    onShowRewardUI: function () {\n        ThirdAPI.showGameClub(false);\n        Global.game.playSound('btn', 0.1);\n        Global.game.showRewardUI();\n    },\n\n    //测试广告\n    testAd: function () {\n        var wxRewardVideoAd = require('wxRewardVideoAd');\n        wxRewardVideoAd.initCreateReward(this.onAdSuccess.bind(this));\n    },\n\n    onclose: function () {\n        console.log('关闭广告');\n\n    },\n\n    //设置倒计时\n    startContinueConutDown: function () {\n        let times = 300;\n        let myUtil = require(\"myUtil\");\n\n        this.friendBtnLabel.string = '邀请好友' + myUtil.getSecondString(times);\n        this.pauseInterval = false;\n\n\n        clearInterval(this.countDownInterval);\n        this.countDownInterval = setInterval(() => {\n            if (!this.pauseInterval) {\n                times--;\n                if (times >= 0) {\n                    this.friendBtnLabel.string = '邀请好友' + myUtil.getSecondString(times);\n                } else {\n                    this.friendBtn.active = false;\n                    this.adBtn.active = true;\n                    clearInterval(this.countDownInterval);\n                }\n            }\n        }, 1000);\n    },\n\n    onAdSuccess: function () {\n        Global.gameinfo.showRewardVideoAdTimes++;\n        console.log('保存看广告的次数', Global.gameinfo.showRewardVideoAdTimes);\n        ThirdAPI.saveFriendGenStoneInfo(Global.gameinfo);\n        if (Global.gameinfo.showRewardVideoAdTimes >= Global.showTotalTimes) {\n            this.rewardVideoAdBtn.active = false;\n        } else {\n            this.rewardVideoAdBtn.active = true;\n        }\n\n        /*\n                if (Global.gameinfo.shareTimes >= Global.getForTotalTimes) {\n                    this.friendBtn.active = false;\n                    this.adBtn.active = false;\n                    console.log('每日的分享次数已经满了');\n                } else {\n                    this.friendBtn.active = true;\n                    this.adBtn.active = false;\n                }\n                console.log('adBtn' + this.adBtn.active + 'friendBtn' + this.friendBtn.active);*/\n        //星星\n        this.createGemstone();\n    },\n\n    onShareSuccess: function (openGId) {\n        //判断是否是当日(向朋友索取),防止凌晨状态\n        console.log('startUI onshareSuccess:', Global.gameinfo.shareDate, (new Date()).toDateString())\n        if (Global.gameinfo.shareDate != (new Date()).toDateString()) {\n            var myUtil = require('myUtil');\n            myUtil.resetInitData();\n        }\n        Global.gameinfo.shareTimes++;\n        Global.gameinfo.shareTimesAndRewardVideoAd++;\n\n        //先判断5次机会，再判断每日总次数3次\n        if (Global.gameinfo.shareTimes >= Global.getForTotalTimes) {\n            console.log('次数已满', Global.gameinfo.shareTimes);\n            //5次已满\n            // Global.gameinfo.shareTimes = 0;\n            // Global.gameinfo.shareTotalTimes++;\n            // Global.gameinfo.shareTime = (new Date()).getTime();\n        }\n        ThirdAPI.saveFriendGenStoneInfo(Global.gameinfo);\n        var time = (new Date()).getTime() - Global.gameinfo.shareTime;\n        console.log('分享成功的时间：', new Date().getTime(), Global.gameinfo.shareTime, time);\n\n        this.pauseInterval = false;\n        clearInterval(this.countDownInterval);\n\n        if (Global.gameinfo.shareTimes >= Global.getForTotalTimes) {\n            this.friendBtn.active = false;\n            this.adBtn.active = false;\n            console.log('每日的分享次数已经满了');\n        } else {\n            this.friendBtn.active = false;\n            this.adBtn.active = true;\n        }\n        console.log('adBtn' + this.adBtn.active + 'friendBtn' + this.friendBtn.active);\n        //星星\n        //this.createGemstone();\n    },\n\n    //分享到群失败\n    onShareFail: function (msg) {\n        console.log('分享失败！');\n        if (msg === undefined) {\n            Global.game.showDialogText('分享失败！');\n        } else if (msg == 'fail') {\n            Global.game.showDialogText('分享失败，分享到群才有效');\n        } else if (msg == 'cancel') {\n            Global.game.showDialogText('分享失败！');\n        } else {\n            Global.game.showDialogText('分享失败！');\n        }\n        this.pauseInterval = false;\n    },\n\n    //加号分享得钻石\n    addShareGame: function () {\n        Global.game.playSound('btn', 0.1);\n        this.pauseInterval = true;\n\n        if (typeof FBInstant !== 'undefined') {\n            var myUtil = require('myUtil');\n            ThirdAPI.shareGame(myUtil.getImgBase64(), this.onShareSuccess.bind(this));\n        } else if (typeof wx !== 'undefined') {\n            ThirdAPI.shareGame('randomImg', this.onAddShareSuccess.bind(this), this.onShareFail.bind(this), '244');\n        }\n    },\n\n    //加号分享成功\n    onAddShareSuccess: function (openGId) {\n        //游戏首页点击+号并分享成功\n        var biManager = require('biManager');\n        biManager.bilog(biManager.addShare, null);\n\n        if (typeof wx !== 'undefined') {\n            if (!openGId) {\n                Global.game.showDialogText('分享失败，分享到群才有效');\n                console.log('分享失败，分享到群才有效');\n                return;\n            }\n        }\n        if (Global.gameinfo.shareData1.arrOpenGId.indexOf(openGId) != -1) {\n            console.log('该群今日已经分享过', openGId);\n            Global.game.showDialogText('分享失败，请分享到不同群');\n            return;\n        } else {\n            console.log('该群未分享过', openGId);\n            Global.gameinfo.shareData1.arrOpenGId.push(openGId);\n            ThirdAPI.saveFriendGenStoneInfo(Global.gameinfo);\n        }\n\n        //判断是否是当日(向朋友索取)\n        var d = new Date(Date.now());\n        if (Global.gameinfo.shareDate != d.toDateString()) {\n            Global.gameinfo.shareTimesAndRewardVideoAd = 0;\n            Global.gameinfo.shareTimes = 0;\n            Global.gameinfo.shareTotalTimes = 0;\n            Global.gameinfo.shareTime = 0;\n            Global.gameinfo.shareDate = d.toDateString();\n            ThirdAPI.saveFriendGenStoneInfo(Global.gameinfo);\n        }\n\n        //判断次数\n        Global.gameinfo.shareTimes++;\n        Global.gameinfo.shareDate = d.toDateString();\n\n        //先判断5次机会，再判断每日总次数3次\n        if (Global.gameinfo.shareTimes >= Global.getForTotalTimes) {\n            console.log('次数已满', Global.gameinfo.shareTimes);\n            return;\n        }\n        ThirdAPI.saveFriendGenStoneInfo(Global.gameinfo);\n        this.pauseInterval = false;\n        clearInterval(this.countDownInterval);\n\n        //兼容\n        if (!Global.startConfig) {\n            Global.startConfig = {\n                'addStone': 5\n            };\n        }\n        //加钻石\n        var msg = '恭喜获得' + Global.startConfig.addStone + '星星';\n        Global.game.showDialogPropText(msg);\n        this.updateGold(Global.startConfig.addStone);\n    },\n\n    //创建随机掉落的钻石\n    createGemstone: function () {\n        var myUtil = require('myUtil');\n        var randomNum = 5; //myUtil.randomForArray(Global.randomGemStone);\n        /*  for (let i = 0; i < randomNum; i++) {\n              var instance = cc.instantiate(this.gemStone);\n              var posX = myUtil.randomForMinAndMax(-Global.screenHeight / 2 + 100, Global.screenHeight / 2 - 100);\n              var posY = myUtil.randomForMinAndMax(-Global.screenWidth / 2 + 100, Global.screenWidth / 2 - 100);\n              console.log('gemStone pos:', posX, posY);\n              instance.setPosition(cc.p(0, 0));\n              //instance.setPosition(cc.p(0, Global.screenHeight / 2 + 50));\n              //var action = cc.moveTo(2, cc.p(posX, posY)).easing(cc.easeElasticOut(1));\n              this.node.addChild(instance);\n              var pos = Global.startUI.goldNode.getPosition();\n              //var addNum = (i == randomNum - 1) ? 30 - randomNum : 1;\n              instance.getComponent('getGemStone').toRepeat([pos.x, pos.y], 1);\n              //instance.runAction(action);\n          }*/\n\n        var times = 30;\n        clearInterval(this.addInterval);\n        this.addInterval = setInterval(() => {\n            times -= 5;\n            if (times >= 0) {\n                var instance = cc.instantiate(this.gemStone);\n                instance.setPosition(cc.p(0, 0));\n                this.node.addChild(instance);\n                var pos = Global.startUI.goldNode.getPosition();\n                instance.getComponent('getGemStone').toPosition([pos.x, pos.y], 5);\n            } else {\n                clearInterval(this.addInterval);\n            }\n        }, 150);\n\n    },\n\n    //弹出道具详情\n    dialogForPropInfo: function () {\n        Global.game.showPropDialog(true);\n    },\n\n    //进入游戏\n    play: function () {\n        if (!Global.weightConfig) {\n            var self = this;\n            cc.loader.loadRes('weightConfig', function (err, data) {\n                Global.weightConfig = data.weightConfig;\n                self.onPlay();\n            });\n        } else {\n            this.onPlay();\n        }\n    },\n\n    onPlay: function () {\n        ThirdAPI.showGameClub(false);\n        Global.game.playSound('btn', 0.1);\n        Global.isDailyLimit = false;\n\n        //判断是否有存储\n        this.keepDataNode.active = false;\n        var parma = ThirdAPI.loadGameProgress();\n        if (!parma || (parma && parma.list.length <= 0)) {\n            Global.game.enterScene();\n            //记载点击开始游戏打点\n            var biManager = require('biManager');\n            biManager.bilog(biManager.startGame, null);\n        } else {\n            this.keepDataNode.active = true;\n        }\n    },\n\n    //存档进入游戏\n    keepDataEnterGame: function () {\n        var list = ThirdAPI.loadGameProgress();\n        console.log('keepDataEnterGame:', list);\n        Global.game.enterScene(list);\n        //记载点击开始游戏打点\n        var biManager = require('biManager');\n        biManager.bilog(biManager.startGame, null);\n    },\n\n    //重新开始\n    restartGame: function () {\n        ThirdAPI.clearGameProgressInfo();\n        Global.game.enterScene();\n        //记载点击开始游戏打点\n        var biManager = require('biManager');\n        biManager.bilog(biManager.startGame, null);\n    },\n\n    //存档关闭\n    closekeepData: function () {\n        this.keepDataNode.active = false;\n    },\n\n    //进入每日挑战\n    dailyPlay: function () {\n        ThirdAPI.showGameClub(false);\n        Global.game.playSound('btn', 0.1);\n        if (!Global.dailyConfig) {\n            var self = this;\n            cc.loader.loadRes('grids', function (err, data) {\n                Global.dailyConfig = data;\n                self.onPlayDaily();\n                console.log(\"start ui 读取本地掉率json文件\", data);\n            });\n        } else {\n            this.onPlayDaily();\n        }\n    },\n\n    onPlayDaily: function () {\n        //判断挑战次数\n        if (Global.gameinfo.battleTimes <= 0) {\n            // Global.game.showDialogPropText(\"每日挑战次数到达上限\");\n            // console.log('开始界面，挑战次数不足');\n            if (typeof FBInstant !== 'undefined') {\n                var myUtil = require('myUtil');\n                ThirdAPI.shareGame(myUtil.getImgBase64(), this.onShareSuccess.bind(this));\n            } else if (typeof wx !== 'undefined') {\n                ThirdAPI.shareGame('randomImg', this.onDailyShareSuccess.bind(this), this.onDailyShareFail.bind(this), '247');\n            }\n            return;\n        }\n        Global.gameinfo.battleTimes--;\n        ThirdAPI.saveFriendGenStoneInfo(Global.gameinfo);\n        Global.isDailyLimit = true;\n        Global.game.enterScene();\n    },\n\n    onDailyShareSuccess: function (openGId) {\n        //游戏首页点击每日挑战并分享成功\n        var biManager = require('biManager');\n        biManager.bilog(biManager.dailyShare, null);\n\n        if (typeof wx !== 'undefined') {\n            if (!openGId) {\n                Global.game.showDialogText('分享失败，分享到群才有效');\n                console.log('分享失败，分享到群才有效');\n                return;\n            }\n        }\n        if (Global.gameinfo.shareData1.arrOpenGId.indexOf(openGId) != -1) {\n            console.log('该群今日已经分享过', openGId);\n            Global.game.showDialogText('分享失败，请分享到不同群');\n            return;\n        } else {\n            console.log('该群未分享过', openGId);\n            Global.gameinfo.shareData1.arrOpenGId.push(openGId);\n            ThirdAPI.saveFriendGenStoneInfo(Global.gameinfo);\n        }\n\n        Global.gameinfo.battleTimes = Global.dailyBattleTimes;\n        Global.gameinfo.battleTimes--;\n        ThirdAPI.saveFriendGenStoneInfo(Global.gameinfo);\n        Global.isDailyLimit = true;\n        Global.game.enterScene();\n    },\n\n    onDailyShareFail: function (msg) {\n        if (msg === undefined) {\n            Global.game.showDialogText('分享失败！');\n        } else if (msg == 'fail') {\n            Global.game.showDialogText('分享失败，分享到群才有效');\n        } else if (msg == 'cancel') {\n            Global.game.showDialogText('分享失败！');\n        } else {\n            Global.game.showDialogText('分享失败！');\n        }\n    },\n\n    //进入排行榜\n    showRankUI: function () {\n        ThirdAPI.showGameClub(false);\n        Global.game.playSound('btn', 0.1);\n        Global.game.showRank(true);\n    },\n\n    //皮肤商城\n    onShowStore: function () {\n        ThirdAPI.showGameClub(false);\n        Global.game.playSound('btn', 0.1);\n        Global.game.showStore();\n    },\n\n    //pk竞技\n    onChallenge: function () {\n        ThirdAPI.showGameClub(false);\n        Global.game.playSound('btn', 0.1);\n        Global.shareUI.onChallenge();\n    },\n\n    switchBGM: function () {\n        Global.game.playSound('btn', 0.1);\n        if (Global.isBGMPlaying) {\n            this.pauseBGM();\n            this.soundOnBtn.active = false;\n            this.soundOffBtn.active = true;\n        } else {\n            this.playBGM();\n            this.soundOnBtn.active = true;\n            this.soundOffBtn.active = false;\n        }\n        Global.isBGMPlaying = !Global.isBGMPlaying;\n    },\n\n    playBGM: function () {\n        if (this.currentBGM > -1) {\n            cc.audioEngine.resume(this.currentBGM);\n        }\n    },\n\n    pauseBGM: function () {\n        if (this.currentBGM > -1) {\n            cc.audioEngine.pause(this.currentBGM);\n        }\n    },\n\n    // 按钮回调：更多游戏\n    onMoreGame: function () {\n        Global.game.playSound('btn', 0.1);\n        var LinkImages = require('LinkImages');\n\n        if (Global.linkImages && Global.linkImages.length > 0) {\n            console.log('link image : ', Global.linkImages, Global.linkImages.length);\n\n            let index = Math.floor(cc.random0To1() * Global.linkImages.length);\n            var httpStr = Global.linkImages[index];\n            console.log('httpStr:', httpStr);\n            LinkImages.previewImage(httpStr);\n        }\n    },\n});"]}