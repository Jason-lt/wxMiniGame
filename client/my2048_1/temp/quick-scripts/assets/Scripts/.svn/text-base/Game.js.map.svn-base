{"version":3,"sources":["Game.js"],"names":["ThirdAPI","require","Tmp","TmpOne","cc","Class","extends","Component","properties","girdRoot","default","type","Prefab","loadingUI","Node","bannerCloseBtn","btnSound","tipsNode","bannerAdInstance","onLoad","console","log","Date","getTime","biManager","bilog","loadGame","Global","game","getComponent","active","myUtil","resetInitData","loginDateStr","toDateString","startLoadRes","httpUtils","self","httpGets","data","jsonData","JSON","parse","cdnGameConfig","bannerAdConfig","reviveConfig","clearVNum","startConfig","listenUtil","eventCtrl","trigger","totalSwith","swith","error","linkImages","cdnShareImages","shareImages","cdnTexts","shareTexts","propShareImages","propShareTexts","loadLocalWeightConfig","weightConfig","loadLocalDailyConfig","dailyConfig","loadingGame","opacity","runAction","sequence","fadeIn","delayTime","fadeOut","callFunc","enterGame","startGame","getProp","setTest","initFriendRank","shareManager","LoadAtlas","loadAtlasRes","loader","loadRes","err","oneWeightRate","oneTotalWeight","retCode","isFromGroup","gameinfo","clearPropNum","clearPropLimit","showDialogPropText","saveFriendGenStoneInfo","superPropNum","superPropLimit","doublePropNum","doublePropLimit","wx","startUI","setTimeout","updateGold","addStone","stoneNum","msg","clearGameInfo","clearFriendGenStoneInfo","loadPrefab","uiRootPrefab","uiScript","instantiate","node","parent","removeChild","showStartUI","addListen","cdnchange","bind","addChild","initStoreData","initTitleData","initUIData","showShareUI","showRank","canShowGameClub","rankPrefab","rankui","initData","showGroupRank","initGetGroupRank","showStore","storePrefab","storeUI","skin","showRevive","revivePrefab","reviveUI","showTitle","titlePrefab","titleUI","onClose","showTitleInfo","titleInfoPrefab","titleInfoUI","showRewardUI","rewardPrefab","rewardUI","showPropDialog","isChest","showText","parmaIndex","propInfoPrefab","propInfoUI","showAddPropDialog","parma","addPropInfoPrefab","addPropInfoUI","storeData","loadInfo","skinIndex","loadCurrentSkin","titleData","titleDateData","titleUnlockData","shareData","loadShareData","d","now","d1","shareTimes","shareDate","saveShareData","saveScore","loadLocalScore","score","parseInt","maxscore","gold","loadScore","wxGold","text","setLocalZOrder","stopAllActions","label","getChildByName","Label","string","width","find","showDialogText","p","playSound","sname","volume","isSoundPlaying","AudioClip","clip","sound","audioSource","AudioSource","play","switchSound","restart","enterScene","list","gridController","initGridData"],"mappings":"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","file":"Game.js","sourceRoot":"../../../../assets/Scripts","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/class.html\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/class/index.html\n// Learn Attribute:\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/reference/attributes/index.html\n// Learn life-cycle callbacks:\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/life-cycle-callbacks/index.html\nlet ThirdAPI = require('./common/ThirdAPI')\nlet Tmp = require('Tmp')\nlet TmpOne = require('TmpOne')\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        girdRoot: {\n            default: null,\n            type: cc.Prefab,\n        },\n        loadingUI: {\n            default: null,\n            type: cc.Node,\n        },\n        bannerCloseBtn: {\n            default: null,\n            type: cc.Node,\n        },\n        //声音\n        btnSound: {\n            default: null,\n            type: cc.Prefab,\n        },\n        /*\n                //战斗\n                battleRootPrefab: {\n                    default: null,\n                    type: cc.Prefab,\n                },\n                //ui\n                uiRootPrefab: {\n                    default: null,\n                    type: cc.Prefab,\n                },\n                //排行\n                rankPrefab: {\n                    default: null,\n                    type: cc.Prefab,\n                },\n                //商店\n                storePrefab: {\n                    default: null,\n                    type: cc.Prefab,\n                },\n                //复活界面\n                revivePrefab: {\n                    default: null,\n                    type: cc.Prefab,\n                },\n                //成就\n                titlePrefab: {\n                    default: null,\n                    type: cc.Prefab,\n                },\n                //成就查看\n                titleInfoPrefab: {\n                    default: null,\n                    type: cc.Prefab,\n                },\n                //奖励预设\n                rewardPrefab: {\n                    default: null,\n                    type: cc.Prefab,\n                },\n                propInfoPrefab: {\n                    default: null,\n                    type: cc.Prefab,\n                },\n                addPropInfoPrefab: {\n                    default: null,\n                    type: cc.Prefab,\n                },*/\n        //提示文本\n        tipsNode: {\n            default: null,\n            type: cc.Node,\n        },\n\n        bannerAdInstance: null,\n    },\n\n    onLoad() {\n        console.log(\"***\", new Date().getTime());\n        //记载游戏打点\n        var biManager = require('biManager');\n        biManager.bilog(biManager.loadGame, null);\n\n        Global.game = this.getComponent('Game');\n        this.tipsNode.active = false;\n\n        var myUtil = require('myUtil');\n        myUtil.resetInitData();\n        //记录登录时的时间\n        Global.loginDateStr = (new Date()).toDateString();\n\n        //tcpManager.websocket.init();\n        //tcpManager.sendCmd.lisiner();\n\n        this.startLoadRes();\n\n        //请求cdn数据\n        var httpUtils = this.getComponent('httpUtils');\n        let self = this;\n        httpUtils.httpGets('https://sanxqn.nalrer.cn/tysanxiao/my2048/my2048config1.json', function (data) {\n            try {\n                if (data === -1) {\n                    //self.startLoadRes();\n                    console.log('请检查网络！');\n                } else {\n                    var jsonData = JSON.parse(data);\n                    console.log(\"jsonData:\", jsonData);\n                    if (jsonData) {\n                        //cdn开关配置\n                        if (jsonData.cdnGameConfig) {\n                            Global.cdnGameConfig = jsonData.cdnGameConfig;\n                        } else {\n                            console.log('读取cdn文件错误，取本地数据');\n                        }\n                        //banner广告配置\n                        if (jsonData.bannerAdConfig) {\n                            Global.bannerAdConfig = jsonData.bannerAdConfig;\n                        }\n                        //复活消除行数\n                        if (jsonData.reviveConfig) {\n                            if (jsonData.reviveConfig.clearVNum) {\n                                Global.clearVNum = jsonData.reviveConfig.clearVNum;\n                            }\n                        }\n                        //add添加钻石数量\n                        if (jsonData.startConfig) {\n                            Global.startConfig = jsonData.startConfig;\n                        }\n                    }\n                    listenUtil.eventCtrl.trigger('cdnchange', null);\n                    console.log('Global.cdnGameConfig.totalSwith:' + Global.cdnGameConfig.totalSwith, Global.bannerAdConfig.swith);\n                    //self.startLoadRes();\n                }\n            } catch (error) {\n                //self.startLoadRes();\n                console.log(error);\n            }\n        });\n        console.log('startgame', Global.cdnGameConfig);\n\n        //请求内链图\n        httpUtils.httpGets('https://sanxqn.nalrer.cn/tysanxiao/my2048/linkImages/linkImages.json', function (data) {\n            if (data === -1) {\n                console.log('请检查网络！');\n            } else {\n                console.log('从CDN获取内敛图数据');\n                var jsonData = JSON.parse(data);\n                console.log(jsonData);\n                Global.linkImages = jsonData.linkImages;\n                console.log(Global.linkImages);\n            }\n        });\n\n        // 请求cdn分享图数据\n        httpUtils.httpGets('https://sanxqn.nalrer.cn/tysanxiao/my2048/shareInfo.json', function (data) {\n            if (data === -1) {\n                console.log('请检查网络！');\n            } else {\n                console.log('从CDN获取分享图数据');\n                var jsonData = JSON.parse(data);\n                console.log(jsonData);\n                Global.cdnShareImages = jsonData.shareImages;\n                Global.cdnTexts = jsonData.shareTexts;\n\n                if (jsonData.propShareImages) {\n                    Global.propShareImages = jsonData.propShareImages;\n                }\n                if (jsonData.propShareTexts) {\n                    Global.propShareTexts = jsonData.propShareTexts;\n                }\n                console.log('道具分享图片配置文件：', Global.propShareImages);\n\n                console.log(Global.cdnShareImages);\n            }\n        });\n\n        //请求掉率配置文件\n        httpUtils.httpGets('https://sanxqn.nalrer.cn/tysanxiao/my2048/weightConfig.json', function (data) {\n            try {\n                if (data === -1) {\n                    self.loadLocalWeightConfig();\n                    console.log('请检查网络！');\n                } else {\n                    var jsonData = JSON.parse(data);\n                    console.log(\"jsonData:\", jsonData);\n                    if (jsonData && jsonData.weightConfig) {\n                        Global.weightConfig = jsonData.weightConfig;\n                        console.log('从cdn读取掉率成功：', Global.weightConfig);\n                    } else {\n                        self.loadLocalWeightConfig();\n                    }\n                }\n            } catch (error) {\n                self.loadLocalWeightConfig();\n                console.log('aaaaa:', error);\n            }\n        });\n\n        //请求每日挑战json数据\n        httpUtils.httpGets('https://sanxqn.nalrer.cn/tysanxiao/my2048/grids.json', function (data) {\n            try {\n                if (data === -1) {\n                    self.loadLocalDailyConfig();\n                    console.log('请检查网络！');\n                } else {\n                    var jsonData = JSON.parse(data);\n                    console.log(\"daily jsonData:\", jsonData);\n                    if (jsonData) {\n                        Global.dailyConfig = jsonData;\n                        console.log('从cdn读取每日挑战关卡成功：', Global.dailyConfig);\n                    } else {\n                        self.loadLocalDailyConfig();\n                    }\n                }\n            } catch (error) {\n                self.loadLocalDailyConfig();\n                console.log(error);\n            }\n        });\n    },\n\n    loadingGame: function () {\n        // 加载界面/ReadyGo\n        this.loadingUI.opacity = 0;\n        this.loadingUI.active = true;\n        var self = this;\n        this.loadingUI.runAction(cc.sequence(\n            cc.fadeIn(1),\n            cc.delayTime(1),\n            cc.fadeOut(1),\n            cc.callFunc(function () {\n                self.loadingUI.active = false;\n\n                console.log(\"***3\", new Date().getTime());\n                //记录成功进入游戏打点\n                var biManager = require('biManager');\n                biManager.bilog(biManager.enterGame, null);\n                self.startGame();\n                self.getProp();\n                self.setTest();\n    \n                //初始化好友排行\n                ThirdAPI.initFriendRank();\n            })\n        ));\n    },\n\n    //开始加载资源并启动游戏\n    startLoadRes: function () {\n        console.log(\"***2\", new Date().getTime());\n        var self = this;\n        Global.shareManager = require('./common/shareManager');\n        Global.LoadAtlas = require(\"LoadAtlas\");\n        Global.LoadAtlas.loadAtlasRes(\"textures/gridItem/skins\", function () {});\n        Global.LoadAtlas.loadAtlasRes(\"textures/gridItem/items\", function () {\n            self.loadingGame();\n        });\n    },\n\n    setTest: function () {\n       \n    },\n\n    //加载本地掉率配置文件\n    loadLocalWeightConfig: function () {\n        cc.loader.loadRes('weightConfig', function (err, data) {\n            Global.weightConfig = data.weightConfig;\n            console.log('读取本地掉率json文件', Global.weightConfig.oneWeightRate, Global.weightConfig.oneTotalWeight);\n        });\n    },\n\n    //加载本地每日挑战的关卡数据\n    loadLocalDailyConfig: function () {\n        cc.loader.loadRes('grids', function (err, data) {\n            Global.dailyConfig = data;\n            console.log(\"读取本地掉率json文件\", data);\n        });\n    },\n\n    //判断是否从群里面点击进入，有额外奖励道具\n    getProp: function () {\n        console.log('检测是否从微信群进入...');\n        var retCode = ThirdAPI.isFromGroup();\n        if (retCode != -1) {\n            console.log('是从微信群进入...');\n            //Global.uiScript.startUI.getComponent('startUI').playGetGoldEffect();\n            if (retCode == 1) {\n                //点击得清除道具\n                if (Global.gameinfo.clearPropNum >= Global.clearPropLimit) {\n                    Global.game.showDialogPropText('道具数量已达上限！');\n                } else {\n                    console.log('获得消除锤锤一个');\n                    Global.game.showDialogPropText('恭喜获得消除锤锤道具一个！回赠给好友一个吧！');\n                    Global.gameinfo.clearPropNum++;\n                    ThirdAPI.saveFriendGenStoneInfo(Global.gameinfo);\n                }\n            } else if (retCode == 2) {\n                //点击得万能道具\n                if (Global.gameinfo.superPropNum >= Global.superPropLimit) {\n                    Global.game.showDialogPropText('道具数量已达上限！');\n                } else {\n                    console.log('获得万能道具一个');\n                    Global.game.showDialogPropText('恭喜获得万能道具一个！回赠给好友一个吧！');\n                    Global.gameinfo.superPropNum++;\n                    ThirdAPI.saveFriendGenStoneInfo(Global.gameinfo);\n                }\n            } else if (retCode == 3) {\n                //点击得双倍道具\n                if (Global.gameinfo.doublePropNum >= Global.doublePropLimit) {\n                    Global.game.showDialogPropText('道具数量已达上限！');\n                } else {\n                    Global.game.showDialogPropText('恭喜获得双倍道具一个！回赠给好友一个吧！');\n                    Global.gameinfo.doublePropNum++;\n                    ThirdAPI.saveFriendGenStoneInfo(Global.gameinfo);\n                }\n            } else if (retCode == 4) {\n                Global.game.showDialogPropText('恭喜获得钻石！回赠给好友一个吧！');\n\n                if (typeof wx !== 'undefined') {\n                    /* let data = ThirdAPI.loadLocalScore();\n                     var score = parseInt(data.maxscore);\n                     var gold = parseInt(data.gold);\n                     ThirdAPI.loadScore((maxscore, gold) => {\n                         score = parseInt(maxscore);\n                         gold = parseInt(gold);\n                         console.log('game on ThirdAPI loadScore', score, parseInt(gold), Global.wxGold);\n                     });\n                     Global.wxGold += 30;\n                     ThirdAPI.saveScore(score, Global.wxGold);*/\n                    console.log(\"加钻石1\");\n                    if (Global.startUI) {\n                        console.log(\"加钻石2\");\n                        setTimeout(() => {\n                            Global.startUI.updateGold(30);\n                        }, 100);\n                    } else {\n                        console.log(\"加钻石3\");\n                        if (Global.startUI) {\n                            setTimeout(() => {\n                                Global.startUI.updateGold(30);\n                            }, 500);\n                        }\n                    }\n                }\n            }\n        } else {\n            console.log('不是从微信群进入...');\n        }\n    },\n\n    //加钻石存本地功能\n    addStone: function (stoneNum, msg) {\n        console.log(\"好友互助 加钻石1\");\n        if (Global.startUI) {\n            console.log(\"好友互助 加钻石2\");\n            Global.game.showDialogPropText(msg);\n            Global.startUI.updateGold(stoneNum);\n        } else {\n            console.log(\"好友互助 加钻石3\");\n            var self = this;\n            setTimeout(() => {\n                self.addStone(stoneNum);\n            }, 100);\n        }\n    },\n\n    // 清除游戏缓存数据\n    clearGameInfo: function () {\n        ThirdAPI.clearFriendGenStoneInfo();\n    },\n\n    //开始游戏\n    startGame: function () {\n        var self = this;\n        Global.LoadAtlas.loadPrefab('UIRoot', (uiRootPrefab) => {\n            if (!Global.uiScript) {\n                Global.uiScript = cc.instantiate(uiRootPrefab).getComponent(\"uiRoot\");\n            }\n            //如果有父节点则删除自身节点\n            if (Global.uiScript.node.parent) {\n                Global.uiScript.node.parent.removeChild(Global.uiScript.node);\n            }\n            Global.uiScript.showStartUI();\n\n            if (Global.startUI) {\n                console.log('监听开始界面的cdn数据变化');\n                listenUtil.eventCtrl.addListen('cdnchange', Global.startUI.cdnchange.bind(this));\n            }\n\n            self.node.addChild(Global.uiScript.node);\n\n            self.initStoreData();\n            self.initTitleData();\n\n            self.initUIData();\n        });\n    },\n\n    //显示分享界面\n    showShareUI: function () {\n        var self = this;\n        Global.LoadAtlas.loadPrefab('UIRoot', (uiRootPrefab) => {\n            if (!Global.uiScript) {\n                Global.uiScript = cc.instantiate(uiRootPrefab).getComponent(\"uiRoot\");\n            }\n            //如果有父节点则删除自身节点\n            if (Global.uiScript.node.parent) {\n                Global.uiScript.node.parent.removeChild(Global.uiScript.node);\n            }\n            self.node.addChild(Global.uiScript.node);\n            Global.uiScript.showShareUI();\n        });\n    },\n\n    //显示排行榜界面\n    showRank: function (canShowGameClub) {\n        var self = this;\n        Global.LoadAtlas.loadPrefab('rankUI', (rankPrefab) => {\n            if (!Global.rankui) {\n                Global.rankui = cc.instantiate(rankPrefab).getComponent(\"rankUI\");\n            }\n            if (Global.rankui.node.parent) {\n                Global.rankui.node.parent.removeChild(Global.rankui.node);\n            }\n            self.node.addChild(Global.rankui.node);\n            Global.rankui.initData(canShowGameClub);\n        });\n    },\n\n    showGroupRank: function (canShowGameClub) {\n        var self = this;\n        Global.LoadAtlas.loadPrefab('rankUI', (rankPrefab) => {\n            if (!Global.rankui) {\n                Global.rankui = cc.instantiate(rankPrefab).getComponent(\"rankUI\");\n            }\n            if (Global.rankui.node.parent) {\n                Global.rankui.node.parent.removeChild(Global.rankui.node);\n            }\n            self.node.addChild(Global.rankui.node);\n            Global.rankui.initGetGroupRank(canShowGameClub);\n        });\n    },\n\n    //显示商店界面\n    showStore: function () {\n        var self = this;\n        Global.LoadAtlas.loadPrefab('UIStore', (storePrefab) => {\n            if (!Global.storeUI) {\n                Global.storeUI = cc.instantiate(storePrefab).getComponent(\"UIStore\");\n            }\n            if (Global.storeUI.node.parent) {\n                Global.storeUI.node.parent.removeChild(Global.storeUI.node);\n            }\n            self.node.addChild(Global.storeUI.node);\n            Global.storeUI.initData();\n            //记载成功进入皮肤打点\n            var biManager = require('biManager');\n            biManager.bilog(biManager.skin, null);\n        });\n    },\n\n    //显示复活界面\n    showRevive: function () {\n        var self = this;\n        Global.LoadAtlas.loadPrefab('reviveUI', (revivePrefab) => {\n            if (!Global.reviveUI) {\n                Global.reviveUI = cc.instantiate(revivePrefab).getComponent(\"reviveUI\");\n            }\n            if (Global.reviveUI.node.parent) {\n                Global.reviveUI.node.parent.removeChild(Global.reviveUI.node);\n            }\n            self.node.addChild(Global.reviveUI.node);\n            Global.reviveUI.initData();\n        });\n    },\n\n    //显示成就界面\n    showTitle: function () {\n        var self = this;\n        Global.LoadAtlas.loadPrefab('UITitle', (titlePrefab) => {\n            if (!Global.titleUI) {\n                Global.titleUI = cc.instantiate(titlePrefab).getComponent(\"UITitle\");\n            }\n            if (Global.titleUI.node.parent) {\n                Global.titleUI.node.parent.removeChild(Global.titleUI.node);\n            }\n            self.node.addChild(Global.titleUI.node);\n            Global.titleUI.initData();\n            if (Global.titleUI) {\n                Global.titleUI.onClose();\n            }\n        });\n    },\n\n    //显示成就查看界面\n    showTitleInfo: function () {\n        var self = this;\n        Global.LoadAtlas.loadPrefab('UITitleInfo', (titleInfoPrefab) => {\n            if (!Global.titleInfoUI) {\n                Global.titleInfoUI = cc.instantiate(titleInfoPrefab).getComponent(\"UITitleInfo\");\n            }\n            if (Global.titleInfoUI.node.parent) {\n                Global.titleInfoUI.node.parent.removeChild(Global.titleInfoUI.node);\n            }\n            self.node.addChild(Global.titleInfoUI.node);\n            Global.titleInfoUI.initData();\n        });\n    },\n\n    //弹出好友互助奖励界面\n    showRewardUI: function () {\n        var self = this;\n        Global.LoadAtlas.loadPrefab('rewardInfo', (rewardPrefab) => {\n            if (!Global.rewardUI) {\n                Global.rewardUI = cc.instantiate(rewardPrefab).getComponent(\"rewardUI\");\n            }\n            if (Global.rewardUI.node.parent) {\n                Global.rewardUI.node.parent.removeChild(Global.rewardUI.node);\n            }\n            self.node.addChild(Global.rewardUI.node);\n            //tcpManager.sendCmd.sendGetClickUserList();\n            Global.rewardUI.initData();\n        });\n    },\n\n    //显示道具分享弹框\n    showPropDialog: function (isChest, showText, parmaIndex) {\n        var self = this;\n        Global.LoadAtlas.loadPrefab('propInfo', (propInfoPrefab) => {\n            if (!Global.propInfoUI) {\n                Global.propInfoUI = cc.instantiate(propInfoPrefab).getComponent(\"UIPropInfo\");\n            }\n            if (Global.propInfoUI.node.parent) {\n                Global.propInfoUI.node.parent.removeChild(Global.propInfoUI.node);\n            }\n            self.node.addChild(Global.propInfoUI.node);\n            Global.propInfoUI.initData(isChest, showText, parmaIndex);\n        });\n    },\n\n    //显示道具数量不足，拉起分享界面\n    showAddPropDialog: function (parma) {\n        var self = this;\n        Global.LoadAtlas.loadPrefab('addPropInfo', (addPropInfoPrefab) => {\n            if (!Global.addPropInfoUI) {\n                Global.addPropInfoUI = cc.instantiate(addPropInfoPrefab).getComponent(\"addPropInfo\");\n            }\n            if (Global.addPropInfoUI.node.parent) {\n                Global.addPropInfoUI.node.parent.removeChild(Global.addPropInfoUI.node);\n            }\n            this.node.addChild(Global.addPropInfoUI.node);\n            Global.addPropInfoUI.initData(parma);\n        });\n    },\n\n    //初始化ui信息\n    initUIData: function () {\n        //初始化商城数据\n        var self = this;\n        Global.LoadAtlas.loadPrefab('UIStore', (storePrefab) => {\n            if (!Global.storeUI) {\n                Global.storeUI = cc.instantiate(storePrefab).getComponent(\"UIStore\");\n            }\n            if (Global.storeUI.node.parent) {\n                Global.storeUI.node.parent.removeChild(Global.storeUI.node);\n            }\n            self.node.addChild(Global.storeUI.node);\n            Global.storeUI.initData();\n\n            if (Global.storeUI) {\n                Global.storeUI.onClose();\n            }\n\n            self.showTitle();\n            if (Global.titleUI) {\n                Global.titleUI.onClose();\n            }\n\n            //Global.titleUI.updateItemsState(1);\n            //Global.titleUI.updateItemsState(2);\n            //Global.titleUI.updateItemsState(3);\n        });\n    },\n\n    //加载已购皮肤数据\n    initStoreData: function () {\n        //ThirdAPI.clearInfo('skinstore');\n        Global.storeData = ThirdAPI.loadInfo('skinstore');\n        if (Global.storeData == null) {\n            Global.storeData = [];\n        }\n\n        //ThirdAPI.saveScore(0, 0);\n\n        //ThirdAPI.clearCurrentSkin();\n        Global.skinIndex = ThirdAPI.loadCurrentSkin();\n        //console.log('current skin index : ', Global.skinIndex);\n    },\n\n    //加载成就数据\n    initTitleData: function () {\n        //ThirdAPI.clearInfo('title');\n        //Global.titleData = ThirdAPI.loadInfo('title');\n        if (Global.titleData == null) {\n            Global.titleData = [];\n        }\n\n        //ThirdAPI.clearInfo('title-date');\n        //Global.titleDateData = ThirdAPI.loadInfo('title-date');\n        if (Global.titleDateData == null) {\n            Global.titleDateData = [];\n        }\n\n        //ThirdAPI.clearInfo('title-unlock');\n        //Global.titleUnlockData = ThirdAPI.loadInfo('title-unlock');\n        if (Global.titleUnlockData == null) {\n            Global.titleUnlockData = [];\n        }\n\n        //ThirdAPI.clearInfo('title-unlock');\n        Global.shareData = ThirdAPI.loadShareData();\n        var d = new Date(Date.now());\n        if (!Global.shareData) {\n            //console.log('无分享限制数据，初始化');\n            var d1 = new Date(Date.now());\n            //console.log(d1.toDateString());\n            Global.shareData = {\n                shareTimes: 0,\n                shareDate: d1.toDateString()\n            }\n            ThirdAPI.saveShareData(Global.shareData.shareTimes, Global.shareData.shareDate);\n        } else if (Global.shareData.shareDate != d.toDateString()) {\n            //console.log('无今日分享限制数据，初始化');\n            Global.shareData = {\n                shareTimes: 0,\n                shareDate: d.toDateString()\n            }\n\n            ThirdAPI.saveShareData(Global.shareData.shareTimes, Global.shareData.shareDate);\n        }\n\n        //获取系统日期\n        //var d1 = new Date(Date.now());\n        //console.log(d1.toDateString());\n    },\n\n    // 存储分数到服务器\n    saveScore: function () {\n        //更新金币并存储\n        if (typeof wx !== 'undefined') {\n            let data = ThirdAPI.loadLocalScore();\n            var score = parseInt(data.maxscore);\n            var gold = parseInt(data.gold);\n            ThirdAPI.loadScore((maxscore, gold) => {\n                score = parseInt(maxscore);\n                gold = parseInt(gold);\n                //console.log('gridController on ThirdAPI loadScore', score, parseInt(gold), Global.wxGold);\n            });\n            ThirdAPI.saveScore(score, Global.wxGold);\n        }\n        if (Global.startUI) {\n            Global.startUI.updateGold(0);\n        }\n    },\n\n    //道具提示文本\n    showDialogPropText: function (text) {\n        this.tipsNode.active = true;\n        this.tipsNode.setLocalZOrder(10);\n        this.tipsNode.stopAllActions();\n        var label = this.tipsNode.getChildByName('label');\n        label.getComponent(cc.Label).string = text;\n        this.tipsNode.getChildByName(\"sprite\").width = cc.find('Canvas').width;\n\n        setTimeout(() => {\n            this.tipsNode.active = false;\n        }, 2000);\n    },\n\n    //分享完的提示文字\n    showDialogText: function (text, p) {\n        //总开关判断\n        if (!Global.cdnGameConfig.totalSwith) {\n            console.log('开关已打开，不显示文字提示');\n            return;\n        }\n        this.tipsNode.active = true;\n        this.tipsNode.setLocalZOrder(10);\n        this.tipsNode.stopAllActions();\n        // this.tipsNode.x = p.x;\n        // this.tipsNode.y = p.y;\n        var label = this.tipsNode.getChildByName('label');\n        label.getComponent(cc.Label).string = text;\n        this.tipsNode.getChildByName(\"sprite\").width = cc.find('Canvas').width;\n\n        setTimeout(() => {\n            this.tipsNode.active = false;\n        }, 2000);\n    },\n\n    //播放声音\n    playSound: function (sname, volume) {\n        if (!Global.isSoundPlaying) {\n            return;\n        }\n        var self = this;\n        cc.loader.loadRes(\"audio/\" + sname, cc.AudioClip, function (err, clip) {\n            var sound = cc.instantiate(self.btnSound);\n            self.node.addChild(sound);\n            var audioSource = sound.getComponent(cc.AudioSource);\n            audioSource.clip = clip;\n            audioSource.volume = volume;\n            audioSource.play();\n        });\n    },\n\n    switchSound: function () {\n        Global.isSoundPlaying = !Global.isSoundPlaying;\n    },\n\n    //重新开始\n    restart: function () {\n        this.enterScene();\n    },\n\n    //打开游戏战斗界面\n    enterScene: function (list) {\n        var self = this;\n        Global.LoadAtlas.loadPrefab('gridRoot', (girdRoot) => {\n            if (!Global.gridController) {\n                Global.gridController = cc.instantiate(girdRoot);\n            }\n            if (Global.gridController.parent) {\n                Global.gridController.parent.removeChild(Global.gridController);\n            }\n            self.node.addChild(Global.gridController);\n            Global.gridController.getComponent(\"gridController\").initGridData(list);\n        });\n    },\n\n    /*\n        creatBannerAdBtn: function () {\n            this.bannerAdInstance = cc.instantiate(this.bannerCloseBtn);\n            this.bannerAdInstance.setLocalZOrder(100);\n            this.node.addChild(this.bannerAdInstance);\n\n            this.bannerAdInstance.active = false;\n        },\n\n        //显示或者隐藏banner广告\n        showOrHideBannerAd: function (parma) {\n            if (!parma) {\n                return;\n            }\n            //var pos = parma.pos;\n\n            var spriteFrame = this.bannerAdInstance.getComponent(cc.Sprite).spriteFrame;\n            var width = spriteFrame.getRect().width;\n            var height = spriteFrame.getRect().height;\n\n            this.bannerAdInstance.setPosition(cc.p(parma.x - width, parma.y - height));\n            // this.bannerAdInstance.setPosition(cc.p(0, 0));\n            this.bannerAdInstance.setLocalZOrder(10000);\n            this.bannerAdInstance.active = true;\n            console.log('******');\n\n            this.showBannerAd();\n        },\n\n        showBannerAd: function () {\n            if (this.bannerAdInstance) {\n                this.bannerAdInstance.active = true;\n            }\n        },\n        hideBannerAd: function () {\n            if (this.bannerAdInstance) {\n                this.bannerAdInstance.active = false;\n            }\n            var wxBannerAd = require('wxBannerAd');\n            wxBannerAd.hideBannerAd();\n        },\n    */\n\n});"]}