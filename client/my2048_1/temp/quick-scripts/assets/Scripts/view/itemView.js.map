{"version":3,"sources":["itemView.js"],"names":["ThirdAPI","require","cc","Class","extends","Component","properties","itemSprite","default","type","Sprite","itemNum","Prefab","downAudio","url","AudioClip","num1","num2","num3","num4","num5","numPrefab","goldPrefab","explosionPrefab","mark","isSoonItem","bornNum","targetGrid","numInstance","goldInstance","curState","canMove","useDouble","useClear","isStone","isClearItem","isSuperItem","hasMark","initData","randomIndex","setSpriteFrame","updateColor","updateNum","updateNumForProp","Global","usePropStatus","changeStateToWaitDown","speed","log","startDownForBorn","gridController","getComponent","bornGrid","node","stopAllActions","forjoinaction","self","runAction","sequence","delayTime","waitToDown","callFunc","canDown","nodePos","getPosition","targetPos","cury","y","dist","pDistance","canDownNum","Math","floor","itemSize","hdx","hIndex","vdx","vIndex","firstCurH","allGrids","curH","element1","callback","callBackForJoin","actions","t","length","actiond","gridDownDelayTime","push","playTime","abs","action","moveTo","console","stopAction","myAction","startQuickDownForBorn","toRemove","parent","removeChild","targetOff","toRevive","finished","blink","getDuration","clearItemToRemove","time","flyAction","gridViewScript","playFlyNumToItem","spawnAction","spawn","rotateBy","scaleTo","propClear","scaleAction1","scaleAction2","setVisible","LoadAtlas","scaleX","scaleY","spriteFrame","getSpriteFrameFromName","skinIndex","tho","parseInt","hun","ten","uni","getSpriteNum","x","allWidth","width","getRect","height","spr","num","string","loadAtlasRes","soonItemSize","active","markScale","toPos","cdnGameConfig","markScoreEquals","indexOf","scale","setCascadeOpacityEnabled","setOpacity","action2","fadeTo","setLocalZOrder","dtime","forJoin","toJoin","pos","combineTime","action1","gridDownSpeed","gridControllerScript","idx","downGrids","splice","targetScript","checkGrid","buttonItem","item","buttonItemViewScript","deleteGridScript","deleteItem","shakeShort","gridNum","resetData","playDownAudio","setPosition","p","guideNode","on","itemClick","Node","EventType","TOUCH_START","touchStart","canDrop","candropProp","targetGridView","dropStone","evtObj","Event","EventCustom","setUserData","dispatchEvent","createProp","isSoundPlaying","combineID","audioEngine","play","setFinishCallback","playAudioEnd","playAudioStart","resume","uncache"],"mappings":"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","file":"itemView.js","sourceRoot":"../../../../../assets/Scripts/view","sourcesContent":["    /*\n                                                                                                                                                                    1. 从itemcontroller中产生\n                                                                                                                                                                    2. 出生点，出生数字\n                                                                                                                                                                    3. 受鼠标影响\n                                                                                                                                                                    4. 运动停止，回调\n\n                                                                                                                                                                */\n    let ThirdAPI = require('../common/ThirdAPI')\n    cc.Class({\n        extends: cc.Component,\n\n        properties: {\n            //出生item的精灵贴图\n            itemSprite: {\n                default: null,\n                type: cc.Sprite,\n            },\n            //出生的数字\n            itemNum: {\n                default: null,\n                type: cc.Prefab,\n            },\n            //下落声音\n            downAudio: {\n                url: cc.AudioClip,\n                default: null\n            },\n            num1: {\n                default: null,\n                type: cc.Sprite,\n            },\n            num2: {\n                default: null,\n                type: cc.Sprite,\n            },\n            num3: {\n                default: null,\n                type: cc.Sprite,\n            },\n            num4: {\n                default: null,\n                type: cc.Sprite,\n            },\n            num5: {\n                default: null,\n                type: cc.Sprite,\n            },\n            numPrefab: {\n                default: null,\n                type: cc.Prefab,\n            },\n            goldPrefab: {\n                default: null,\n                type: cc.Prefab,\n            },\n            explosionPrefab: {\n                default: null,\n                type: cc.Prefab,\n            },\n            //宝箱角标\n            mark: {\n                default: null,\n                type: cc.Sprite,\n            },\n\n            isSoonItem: false, //是即将出现的item？\n            bornNum: 0, //出生的随机数\n            targetGrid: null, //目标格子\n            numInstance: null, //飞入分数的实例\n            goldInstance: null, //飞入分数的实例\n            curState: 0, //  1 等待下落   2 下落  3  下落完毕等待合并   4 合并\n            canMove: true,\n\n            useDouble: false, //是否使用双倍道具\n            useClear: false, //是否使用锤子道具\n\n            isStone: false, //是否是星星\n            isClearItem: false, //是否是锤子道具\n            isSuperItem: false, //是否是万能道具\n\n            hasMark: false, //是否有缩放角标\n        },\n\n        initData: function (randomIndex, isSoonItem) {\n            this.isSoonItem = isSoonItem;\n            this.bornNum = randomIndex;\n            this.setSpriteFrame();\n        },\n\n        //根据生产的索引值来设置出生的精灵贴图\n        setSpriteFrame: function () {\n            this.updateColor();\n            this.updateNum(-1);\n        },\n\n        updateNumForProp: function () {\n            this.updateNum(Global.usePropStatus);\n        },\n\n        //等待下落\n        changeStateToWaitDown: function (speed) {\n            cc.log(this.curState);\n            if (this.curState == 1) {\n                return;\n            }\n            if (this.curState == 3) {\n                this.startDownForBorn(speed);\n                return;\n            }\n            if (this.curState > 3) {\n                return;\n            }\n            if (Global.gridController.getComponent('gridController').bornGrid == this.node) {\n                if (this.curState > 0) {\n                    this.curState = 1; //等待下落\n                    this.node.stopAllActions();\n                    this.forjoinaction = null;\n                    let self = this;\n                    this.node.runAction(cc.sequence(cc.delayTime(Global.waitToDown), cc.callFunc(function () {\n                        self.startDownForBorn(speed);\n                    })));\n                }\n            }\n        },\n\n        canDown: function () {\n            var nodePos = this.node.getPosition();\n            var targetPos = this.targetGrid.getPosition();\n\n            var cury = nodePos.y;\n            var dist = cc.pDistance(nodePos, targetPos);\n            var canDownNum = Math.floor(dist / Global.itemSize);\n            var hdx = this.targetGrid.getComponent('gridView').hIndex;\n            var vdx = this.targetGrid.getComponent('gridView').vIndex;\n            var firstCurH = canDownNum <= 1 ? 0 : canDownNum;\n            var gridController = Global.gridController.getComponent(\"gridController\");\n            var allGrids = gridController.allGrids;\n            for (let curH = vdx - firstCurH; curH <= vdx; curH++) {\n                var element1 = allGrids[hdx][curH];\n                if (cury > element1.getPosition().y) {\n                    return true;\n                }\n            }\n            return false;\n        },\n\n        //开始进行从出生点到最终位置的动作\n        startDownForBorn: function (speed) {\n            this.curState = 2; //下落\n\n            //this.node.stopAllActions();\n            var nodePos = this.node.getPosition();\n            var targetPos = this.targetGrid.getPosition();\n\n            var dist = cc.pDistance(nodePos, targetPos);\n            var canDownNum = Math.floor(dist / Global.itemSize);\n\n            var callback = cc.callFunc(this.callBackForJoin, this);\n\n            var hdx = this.targetGrid.getComponent('gridView').hIndex;\n            var vdx = this.targetGrid.getComponent('gridView').vIndex;\n\n            var cury = nodePos.y;\n            var actions = [];\n            var t = 0;\n            var firstCurH = canDownNum <= 1 ? 0 : canDownNum;\n            var gridController = Global.gridController.getComponent(\"gridController\");\n            var allGrids = gridController.allGrids;\n\n            for (let curH = vdx - firstCurH; curH <= vdx; curH++) {\n                if (curH == -1) {\n                    continue;\n                }\n                if (actions.length > 0) {\n                    var actiond = cc.delayTime(Global.gridDownDelayTime);\n                    actions.push(actiond);\n                    t += Global.gridDownDelayTime;\n                }\n\n                var element1 = allGrids[hdx][curH];\n                var playTime = Math.abs(cury - element1.getPosition().y) / speed;\n                if (playTime == 0) {\n                    continue;\n                }\n\n                cury += element1.getPosition().y - cury;\n                t += playTime;\n                var action = cc.moveTo(playTime, element1.getPosition());\n                actions.push(action);\n            }\n\n            actions.push(callback);\n\n            //异常处理，当前节点和目标节点相等\n            cc.log(this.curState);\n            if (actions.length <= 1) {\n                console.log('处理异常');\n                if (this.forjoinaction == null) {\n                    this.curState = 4;\n                    this.node.runAction(callback);\n                }\n                return 0;\n            } else {\n                console.log('actions.length = 0');\n                if (this.forjoinaction != null) {\n                    console.log('this.forjoinaction != null' + actions.length);\n                    this.node.stopAction(this.forjoinaction);\n                    this.forjoinaction = null;\n                }\n            }\n\n            //var action = cc.moveTo(playTime, targetPos);\n            var myAction = cc.sequence(actions);\n            this.node.runAction(myAction);\n            return t;\n        },\n\n        //快速下落动作\n        startQuickDownForBorn: function (speed) {\n            this.curState = 5;\n            this.node.stopAllActions();\n            var nodePos = this.node.getPosition();\n            var targetPos = this.targetGrid.getPosition();\n            var playTime = cc.pDistance(nodePos, targetPos) / speed;\n            var action = cc.moveTo(playTime, targetPos);\n            var callback = cc.callFunc(this.callBackForJoin, this);\n\n            var myAction = cc.sequence(action, callback);\n            this.node.runAction(myAction);\n            return playTime;\n        },\n        /*\n            //格子合并\n            toJoin(pos) {\n                var finished = cc.callFunc(this.toRemove, this);\n                var playTime = cc.pDistance(this.node.getPosition(), pos) / Global.combineTime;\n                //合并动作\n                var action = cc.moveTo(playTime, pos);\n                var action1 = cc.delayTime(0.1);\n\n                //var seq = cc.sequence(action1,action);\n                var myAction = cc.sequence(action1, action, finished);\n                this.node.runAction(myAction);\n\n                return playTime + 0.1;\n            },*/\n\n        toRemove: function () {\n            this.node.stopAllActions();\n            if (this.node.parent) {\n                this.node.parent.removeChild(this.node);\n            }\n            this.node.targetOff(this);\n            this.curState = 0;\n            this.hasMark = false;\n        },\n\n        //复活消除多余格子\n        toRevive: function () {\n            this.node.stopAllActions();\n            var finished = cc.callFunc(this.toRemove, this);\n            var action = cc.blink(1, 2);\n            var myAction = cc.sequence(action, finished);\n            this.node.runAction(myAction);\n            return action.getDuration() + 0.01;\n        },\n\n        //消除动画\n        clearItemToRemove: function (time) {\n            this.node.stopAllActions();\n            //动作完成则删除节点\n            var callback = cc.callFunc(this.toRemove, this);\n\n            var flyAction = cc.callFunc(function () {\n                if (this.node.parent && this.targetGrid) {\n                    var gridViewScript = this.targetGrid.getComponent('gridView');\n                    if (gridViewScript) {\n                        gridViewScript.playFlyNumToItem(this.bornNum);\n                    }\n                }\n            }, this);\n            //缩放动作\n            var spawnAction = cc.spawn(cc.rotateBy(0.2, 360, 360), flyAction, cc.sequence(cc.scaleTo(0.2, 0.5), cc.scaleTo(0.2, 0)));\n\n            this.node.runAction(cc.sequence(cc.delayTime(time), spawnAction, callback));\n            return 0.2;\n        },\n\n        /*\n                //ZHA\n                toBomb: function () {\n                    //查找出需要炸掉的哪一行\n                    var needBombIndex = -1;\n                    for (let hIndex = 0; hIndex < Global.hNum; hIndex++) {\n                        for (let vIndex = 0; vIndex < Global.vNum; vIndex++) {\n                            var grid = this.allGrids[hIndex][vIndex];\n                            var gridView = grid.getComponent(\"gridView\");\n                            if (gridView && gridView.item != null) {\n                                needBombIndex = vIndex;\n                                break;\n                            }\n                        }\n                        if (needBombIndex != 0) {\n                            break;\n                        }\n                    }\n                    //执行连环动作\n                    if (needBombIndex < 0) return;\n\n                    var actions = [];\n                    var time = 0;\n                    for (let hIndex = 0; hIndex < Global.hNum; hIndex++) {\n                        var grid = this.allGrids[hIndex][needBombIndex];\n                        var gridView = grid.getComponent(\"gridView\");\n                        if (gridView && gridView.item != null) {\n                            //\n                            actions.push(cc.delayTime(time));\n\n                            //动作完成则删除节点\n                            var callback = cc.callFunc(this.toRemove, this);\n                            //缩放动作\n                            var spawnAction = cc.spawn(cc.rotateBy(0.5, 360, 360), cc.sequence(cc.scaleTo(0.5, 0.5), cc.scaleTo(0.5, 0)));\n                            time += 0.5;\n\n                            actions.push(spawnAction);\n                        }\n                    }\n\n                    var myAction = cc.sequence(actions);\n                    this.node.runAction(myAction);\n                },*/\n\n        //道具清除\n        propClear: function () {\n            this.node.stopAllActions();\n            var finished = cc.callFunc(this.toRemove, this);\n            var scaleAction1 = cc.scaleTo(1, 2);\n            var scaleAction2 = cc.scaleTo(1, 1);\n            var spawnAction = cc.sequence(cc.scaleTo(0.5, 0.9), cc.scaleTo(0.5, 0.8), cc.scaleTo(0.5, 1));\n            this.node.runAction(cc.sequence(spawnAction, finished));\n        },\n\n        //更新分数图集\n        updateNum: function (usePropStatus) {\n            this.num5.setVisible(false);\n            var LoadAtlas = require(\"LoadAtlas\");\n\n            if (usePropStatus != -1) {\n                console.log('使用道具更新显示分数图集');\n                var LoadAtlas = require(\"LoadAtlas\");\n                this.num1.setVisible(false);\n                this.num2.setVisible(false);\n                this.num3.setVisible(false);\n                this.num4.setVisible(false);\n                this.num5.setVisible(true);\n\n                this.num5.node.scaleX = this.isSoonItem ? 0.5 : 0.7;\n                this.num5.node.scaleY = this.isSoonItem ? 0.5 : 0.7;\n                if (usePropStatus == 0) {\n                    this.num5.spriteFrame = LoadAtlas.getSpriteFrameFromName('textures/gridItem/items', 'clear_spr');\n                    return;\n                } else if (usePropStatus == 1) {\n                    this.num5.spriteFrame = LoadAtlas.getSpriteFrameFromName('textures/gridItem/items', 'super_spr');\n                    return;\n                } else if (usePropStatus == 2) {\n                    this.num5.spriteFrame = LoadAtlas.getSpriteFrameFromName('textures/gridItem/items', 'double_spr');\n                    return;\n                }\n            }\n\n            //星星道具\n            if (this.isStone) {\n                this.num1.setVisible(false);\n                this.num2.setVisible(false);\n                this.num3.setVisible(false);\n                this.num4.setVisible(false);\n                this.num5.setVisible(true);\n                this.num5.spriteFrame = LoadAtlas.getSpriteFrameFromName('textures/gridItem/items', 'zuan');\n                return;\n            }\n\n\n            if (Global.skinIndex == 0) {\n                var tho = parseInt(this.bornNum / 1000);\n                var hun = parseInt((this.bornNum / 100) % 10);\n                var ten = parseInt((this.bornNum % 100) / 10);\n                var uni = parseInt(this.bornNum % 10);\n                //千位\n                if (tho > 0) {\n                    this.getSpriteNum(this.num1, tho);\n                }\n                //百位\n                if (hun > 0 || tho > 0) {\n                    this.getSpriteNum(this.num2, hun);\n                }\n                //十位\n                if (ten > 0 || tho > 0 || hun > 0) {\n                    this.getSpriteNum(this.num3, ten);\n                }\n                //个位\n                if (uni > 0 || tho > 0 || hun > 0 || ten > 0) {\n                    this.getSpriteNum(this.num4, uni);\n                }\n\n                //是否可见\n                if (tho == 0) {\n                    this.num1.setVisible(false);\n                }\n                if (tho == 0 && hun == 0) {\n                    this.num2.setVisible(false);\n                }\n                if (tho == 0 && hun == 0 && ten == 0) {\n                    this.num3.setVisible(false);\n                }\n\n                //个位\n                if (this.bornNum > 0 && this.bornNum < 9) {\n                    this.num4.node.x = 0;\n                } else if (this.bornNum >= 10 && this.bornNum < 99) {\n                    var allWidth = this.num3.node.width + this.num4.node.width;\n                    this.num3.node.x = -allWidth / 2 + this.num3.node.width / 2;\n                    this.num4.node.x = this.num3.node.x + this.num3.node.width / 2 + this.num4.node.width / 2;\n                } else if (this.bornNum >= 100 && this.bornNum < 999) {\n                    //百十个位 \n                    var allWidth = this.num2.node.width + this.num3.node.width + this.num4.node.width;\n                    this.num2.node.x = -allWidth / 2 + this.num2.node.width / 2;\n                    this.num3.node.x = this.num2.node.x + this.num2.node.width / 2 + this.num3.node.width / 2;\n                    this.num4.node.x = this.num3.node.x + this.num3.node.width / 2 + this.num4.node.width / 2;\n\n                } else if (this.bornNum >= 1000 && this.bornNum < 9999) {\n                    var allWidth = this.num1.node.width + this.num2.node.width + this.num3.node.width + this.num4.node.width;\n                    this.num1.node.x = -allWidth / 2 + this.num1.node.width / 2 + 6;\n                    this.num2.node.x = this.num1.node.x + this.num1.node.width / 2 + this.num2.node.width / 2 - 3;\n                    this.num3.node.x = this.num2.node.x + this.num2.node.width / 2 + this.num3.node.width / 2 - 3;\n                    this.num4.node.x = this.num3.node.x + this.num3.node.width / 2 + this.num4.node.width / 2 - 3;\n                }\n            } else {\n                console.log('皮肤', Global.skinIndex, this.bornNum, 'skin' + (Global.skinIndex + 1) + '_' + this.bornNum);\n                var LoadAtlas = require(\"LoadAtlas\");\n                this.num4.spriteFrame = LoadAtlas.getSpriteFrameFromName('textures/gridItem/skins', 'skin' + (Global.skinIndex + 1) + '_' + this.bornNum);\n                this.num4.node.width = this.num4.spriteFrame.getRect().width;\n                this.num4.node.height = this.num4.spriteFrame.getRect().height;\n                this.num4.node.scaleX = this.isSoonItem ? 0.8 : 1.1;\n                this.num4.node.scaleY = this.isSoonItem ? 0.8 : 1.1;\n            }\n        },\n\n        getSpriteNum: function (spr, num) {\n            var string = \"skin1_\" + num;\n            var LoadAtlas = require(\"LoadAtlas\");\n            var spriteFrame = LoadAtlas.getSpriteFrameFromName('textures/gridItem/skins', 'skin' + (Global.skinIndex + 1) + '_' + num);\n            spr.spriteFrame = spriteFrame;\n            spr.node.width = spriteFrame.getRect().width; // Global.gridNumSize;\n            spr.node.height = spriteFrame.getRect().height; // Global.gridNumSize;\n            spr.node.scaleX = (this.bornNum > 999 || this.isSoonItem) ? 0.8 : 1;\n            spr.node.scaleY = (this.bornNum > 999 || this.isSoonItem) ? 0.8 : 1;\n            spr.setVisible(true);\n        },\n\n        //更新color\n        updateColor: function () {\n            var self = this;\n            var LoadAtlas = require(\"LoadAtlas\");\n            LoadAtlas.loadAtlasRes(\"textures/gridItem/items\", function () {\n                var LoadAtlas = require(\"LoadAtlas\");\n                self.itemSprite.spriteFrame = LoadAtlas.getSpriteFrameFromName(\"textures/gridItem/items\", \"color1_\" + self.bornNum);\n                var soonItemSize = Global.soonItemSize;\n                if (self.bornNum > 99) {\n                    soonItemSize = 90;\n                } else if (self.bornNum > 999) {\n                    soonItemSize = Global.itemSize;\n                }\n                self.itemSprite.node.width = self.isSoonItem ? soonItemSize : Global.itemSize;\n                self.itemSprite.node.height = self.isSoonItem ? soonItemSize : Global.itemSize;\n            });\n            this.mark.node.active = false;\n        },\n\n        //缩放动画\n        markScale: function (toPos) {\n            console.log('toPos:', toPos, this.bornNum);\n            if (Global.cdnGameConfig && Global.cdnGameConfig.markScoreEquals.indexOf(this.bornNum) <= -1) {\n                this.hasMark = false;\n                console.log('动作延迟：', this.bornNum);\n                return;\n            }\n\n            if (this.mark) {\n                this.mark.node.active = true;\n                this.mark.node.stopAllActions();\n                this.mark.node.scale = 3.5;\n                this.mark.node.setCascadeOpacityEnabled(true);\n                this.mark.node.setOpacity(255 * 0.3);\n\n                //this.mark.node.setPosition(cc.p(0, 0));\n                //var toPos = this.mark.node.getPosition();\n                //缩放\n                //var finished = cc.callFunc(this.finished, this);\n                //var action = cc.spawn(cc.moveTo(0.5, cc.p(0, 0)), cc.scaleTo(0.3, 0.5, 0.5));\n                //var action =  cc.scaleTo(0.3, 5, 5);\n                var action2 = cc.spawn(cc.moveTo(0.5, toPos), cc.scaleTo(0.5, 0.1, 0.1), cc.fadeTo(1.0, 255));\n                //var myAction = cc.sequence(action, action2);\n                this.mark.node.runAction(action2);\n                this.mark.node.setLocalZOrder(10);\n            }\n        },\n\n        //回调grid控制器的合并逻辑\n        callBackForJoin: function () {\n            if (this.curState < 3) {\n                this.curState = 3\n            }\n            let self = this;\n            let dtime = Global.forJoin;\n            if (!this.canMove) {\n                dtime = dtime / 3;\n            }\n            this.forjoinaction = cc.sequence(cc.delayTime(dtime), cc.callFunc(function () {\n                self.forJoin();\n            }));\n            this.node.runAction(this.forjoinaction);\n        },\n\n        //格子合并\n        toJoin(pos) {\n            this.curState = 4;\n            var finished = cc.callFunc(this.toRemove, this);\n            var playTime = cc.pDistance(this.node.getPosition(), pos) / Global.combineTime;\n            //合并动作\n            var action = cc.moveTo(playTime, pos);\n            var action1 = cc.delayTime(0.1);\n\n            //var seq = cc.sequence(action1,action);\n            var myAction = cc.sequence(action1, action, finished);\n            this.node.runAction(myAction);\n        },\n\n        forJoin: function () {\n            console.log('forJoin');\n            //是否可以继续下降\n            if (this.canDown()) {\n                this.startDownForBorn(Global.gridDownSpeed);\n                return;\n            }\n            //删除格子\n            this.node.stopAllActions();\n            var gridControllerScript = Global.gridController.getComponent(\"gridController\");\n            let idx = gridControllerScript.downGrids.indexOf(this.getComponent('itemView'));\n            if (idx >= 0) {\n                gridControllerScript.downGrids.splice(idx, 1);\n            }\n\n            var targetScript = this.targetGrid.getComponent('gridView');\n            if (Global.usePropStatus == 1) {\n                console.log('使用万能道具');\n                //查找下方是否有格子\n                var gridControllerScript = Global.gridController.getComponent(\"gridController\");\n                var checkGrid = gridControllerScript.allGrids[targetScript.hIndex][targetScript.vIndex + 1];\n                if (checkGrid) {\n                    var buttonItem = checkGrid.getComponent(\"gridView\").item;\n                    if (buttonItem) {\n                        var buttonItemViewScript = buttonItem.getComponent(\"itemView\");\n                        if (!buttonItemViewScript.useClear) {\n                            console.log('下方有格子，并且不是锤子道具', buttonItemViewScript.bornNum);\n\n                            this.initData(buttonItemViewScript.bornNum, false);\n                            Global.usePropStatus = -1;\n                        } else {\n                            console.log('下方有格子，但是下面的是锤子道具');\n                        }\n                    }\n                }\n            } else if (Global.usePropStatus == 0) {\n                console.log('使用锤子道具');\n                //查找下方是否有格子\n                var gridControllerScript = Global.gridController.getComponent(\"gridController\");\n                var checkGrid = gridControllerScript.allGrids[targetScript.hIndex][targetScript.vIndex + 1];\n                if (checkGrid) {\n                    var buttonItem = checkGrid.getComponent(\"gridView\").item;\n                    if (buttonItem) {\n                        var buttonItemViewScript = buttonItem.getComponent(\"itemView\");\n                        console.log('下方有格子', buttonItemViewScript.bornNum);\n                        var deleteGridScript = checkGrid.getComponent(\"gridView\");\n                        //销毁的item\n                        var deleteItem = deleteGridScript.item;\n\n                        ThirdAPI.shakeShort({});\n                        //var explosionPrefab = cc.instantiate(this.explosionPrefab);\n                        //deleteItem.node.addChild(explosionPrefab);\n\n                        deleteItem.toRevive();\n\n                        console.log('删除item：' + deleteGridScript.gridNum, deleteGridScript.hIndex, deleteGridScript.vIndex);\n                        deleteGridScript.item = null;\n                        deleteGridScript.resetData();\n\n                        gridControllerScript.bornGrid = null;\n                        this.toRevive();\n\n                        this.playDownAudio();\n                        this.canMove = false;\n                        this.curState = 0;\n                        return;\n                    }\n                }\n            }\n\n            targetScript.item = this;\n            this.node.setPosition(cc.p(targetScript.node.getPosition()));\n            cc.log('下落停止 item callBackForJoin ：' + targetScript.hIndex + \" :: \" + targetScript.vIndex + \"node pos X\" + this.node.x + \"  node pos Y\" + this.node.y);\n            targetScript.gridNum = this.bornNum;\n\n            //隐藏引导节点\n            if (gridControllerScript.guideNode && gridControllerScript.guideNode.active) {\n                gridControllerScript.guideNode.active = false;\n            }\n\n            //添加事件侦听\n            var gridControllerScript = Global.gridController.getComponent(\"gridController\");\n            this.node.on(\"itemclick\", gridControllerScript.itemClick, gridControllerScript);\n            this.node.on(cc.Node.EventType.TOUCH_START, this.touchStart, this);\n\n            // }, Global.gridDownDelayTime * 1000);\n\n            this.playDownAudio();\n            this.canMove = false;\n            this.curState = 0;\n\n            //开始缩放动画\n            console.log('****************', targetScript.canDrop, targetScript.gridNum, targetScript.item.hasMark);\n            if (targetScript.item.hasMark) {\n                var toPos = this.mark.node.getPosition();\n                this.markScale(toPos);\n            }\n\n            //再生产道具\n            if (Global.candropProp) {\n                var targetGridView = this.targetGrid.getComponent('gridView');\n                targetGridView.dropStone(targetScript.hIndex, targetScript.vIndex - 1);\n            }\n        },\n\n        touchStart: function () {\n            cc.log('itemclick');\n            var evtObj = new cc.Event.EventCustom('itemclick', true);\n            evtObj.setUserData(this.targetGrid);\n            this.node.dispatchEvent(evtObj);\n        },\n\n        //创建道具实例\n        createProp: function () {\n\n\n\n        },\n\n\n        //播放落地声音\n        playDownAudio: function () {\n            cc.log('play down audio');\n            if (Global.isSoundPlaying && this.downAudio != null) {\n                this.combineID = cc.audioEngine.play(this.downAudio, false, 1);\n                //回调\n                var self = this;\n                if (self.combineID > 0) {\n                    cc.audioEngine.setFinishCallback(self.combineID, function () {\n                        self.playAudioEnd();\n                    });\n                }\n            }\n        },\n        //播放声音\n        playAudioStart: function () {\n            if (this.combineID != 0) {\n                cc.audioEngine.resume(this.combineID);\n            }\n        },\n        //暂停声音声音\n        playAudioEnd: function () {\n            cc.audioEngine.uncache(this.combineID);\n        },\n\n\n\n        // update (dt) {},\n    });"]}