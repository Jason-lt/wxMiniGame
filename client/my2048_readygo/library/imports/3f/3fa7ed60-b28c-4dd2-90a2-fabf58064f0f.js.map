{"version":3,"sources":["../../../../../assets/Scripts/common/assets/Scripts/common/httpUtils.js"],"names":["cc","Class","extends","Component","properties","statics","instance","onLoad","httpGets","url","callback","xhr","loader","getXMLHttpRequest","onreadystatechange","readyState","status","respone","responseText","open","sys","isNative","setRequestHeader","timeout","send","httpPost","params","log","sendHttpRequest","failedCallback","console","tywx","LOGE","e","error"],"mappings":"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","file":"httpUtils.js","sourceRoot":"../../../../../assets/Scripts/common","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\n\ncc.Class({  \n    extends: cc.Component,  \n  \n    properties: {  \n        // foo: {  \n        //    default: null,      // The default value will be used only when the component attaching  \n        //                           to a node for the first time  \n        //    url: cc.Texture2D,  // optional, default is typeof default  \n        //    serializable: true, // optional, default is true  \n        //    visible: true,      // optional, default is true  \n        //    displayName: 'Foo', // optional  \n        //    readonly: false,    // optional, default is false  \n        // },  \n        // ...  \n    },  \n  \n    statics: {  \n        instance: null  \n    },  \n  \n    // use this for initialization  \n    onLoad: function () {  \n    },  \n  \n    httpGets: function (url, callback) {  \n        var xhr = cc.loader.getXMLHttpRequest();  \n        xhr.onreadystatechange = function () {  \n            if (xhr.readyState === 4 && (xhr.status >= 200 && xhr.status < 300)) {  \n                var respone = xhr.responseText;  \n                callback(respone);  \n            }  \n        };  \n        xhr.open(\"GET\", url, true);  \n        if (cc.sys.isNative) {  \n            xhr.setRequestHeader(\"Accept-Encoding\", \"gzip,deflate\");  \n        }  \n  \n        // note: In Internet Explorer, the timeout property may be set only after calling the open()  \n        // method and before calling the send() method.  \n        xhr.timeout = 5000;// 5 seconds for timeout  \n  \n        xhr.send();  \n    },  \n  \n    httpPost: function (url, params, callback) {  \n        var xhr = cc.loader.getXMLHttpRequest();  \n        xhr.onreadystatechange = function () {  \n            cc.log('xhr.readyState='+xhr.readyState+'  xhr.status='+xhr.status);  \n            if (xhr.readyState === 4 && (xhr.status >= 200 && xhr.status < 300)) {  \n                var respone = xhr.responseText;  \n                callback(respone);  \n            }else{  \n                  callback(-1);  \n            }  \n        };  \n        xhr.open(\"POST\", url, true);  \n        if (cc.sys.isNative) {  \n            xhr.setRequestHeader(\"Accept-Encoding\", \"gzip,deflate\");  \n        }  \n  \n        // note: In Internet Explorer, the timeout property may be set only after calling the open()  \n        // method and before calling the send() method.  \n        xhr.timeout = 5000;// 5 seconds for timeout  \n  \n        xhr.send(params);  \n    },\n\n    sendHttpRequest: function (url, callback, failedCallback) {\n        console.log('sendHttpRequest', url);\n        try {\n            var xhr = cc.loader.getXMLHttpRequest();\n            xhr.open(\"GET\", url, true);\n            xhr.onreadystatechange = function () {\n                if (xhr.readyState === 4) {\n                    if ((xhr.status >= 200 && xhr.status < 300)) {\n                        // console.log(\"http res(\" + xhr.responseText.length + \"):\" + xhr.responseText);\n                        tywx.LOGE(\"\",\"file = [httpUtils] fun = [sendHttpRequest] xhr.responseText = \" + xhr.responseText);\n                        try {\n                            if (callback) {\n                                callback(xhr);\n                            }\n                        } catch (e) {\n                            console.log(\"sendHttpRequest exception:\" + e);\n                            if (failedCallback) {\n                                failedCallback();\n                            }\n                        }\n                    } else {\n                        console.log('sendHttpRequest error', xhr);\n                        if (failedCallback) {\n                            failedCallback();\n                        }\n                    }\n                }\n            };\n            xhr.send();\n        } catch (error) {\n            console.log(' sendHttpRequest exception', error);\n            if (failedCallback) {\n                failedCallback();\n            }\n        }\n    },\n});  \n"]}