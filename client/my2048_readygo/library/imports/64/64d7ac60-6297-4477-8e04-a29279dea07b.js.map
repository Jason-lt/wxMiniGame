{"version":3,"sources":["../../../../../../assets/Scripts/sdk_readygo/lib/assets/Scripts/sdk_readygo/lib/coinsdk.js"],"names":["_interopRequireDefault","e","__esModule","default","_classCallCheck","n","TypeError","_wxHttp","t","Promise","a","o","i","wx","getStorageSync","console","log","request","url","data","method","header","success","code","fail","defineProperty","exports","value","_createClass","length","enumerable","configurable","writable","Object","key","prototype","_config","require","_config2","_dataStatistics","_dataStatistics2","sdkVersion","coinsdk","appId","gold","goldSource","from","api","then","goldCount","query","openid","referrerInfo","extraData","checkSynchronized","isSynchronized","getGameGoldBalance","msg","c","openId","arguments"],"mappings":"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","file":"coinsdk.js","sourceRoot":"../../../../../../assets/Scripts/sdk_readygo/lib","sourcesContent":["\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError(\"Cannot call a class as a function\")}function _wxHttp(e,n,t){return new Promise(function(a,o){var i=wx.getStorageSync(\"sessionId\");console.log(i),wx.request({url:e,data:n,method:t,header:{\"content-type\":\"application/json\",\"session-id\":i},success:function(e){0==e.data.code?a(e.data):o(e)},fail:function(e){o(e)}})})}Object.defineProperty(exports,\"__esModule\",{value:!0});var _createClass=function(){function e(e,n){for(var t=0;t<n.length;t++){var a=n[t];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(n,t,a){return t&&e(n.prototype,t),a&&e(n,a),n}}(),_config=require(\"./config\"),_config2=_interopRequireDefault(_config),_dataStatistics=require(\"./dataStatistics\"),_dataStatistics2=_interopRequireDefault(_dataStatistics),sdkVersion=\"1.1.0\",coinsdk=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:\"updateGold\",value:function(e,n,t,a,o){try{var i={appId:_config2.default.appId,gold:e,goldSource:n,from:t};_wxHttp(_config2.default.api+\"user/updateGold\",i,\"POST\").then(function(n){a(n),_dataStatistics2.default.goldCount(e,n.data.gold)},function(e){o(e)})}catch(e){o(e)}}},{key:\"getGameGoldBalance\",value:function(e,n){try{_wxHttp(_config2.default.api+\"user/getGameGoldBalance?appId=\"+_config2.default.appId,\"\",\"GET\").then(function(n){e(n)},function(e){n(e)})}catch(e){n(e)}}},{key:\"addUserOpenidMapping\",value:function(e,n,t,a){var o=this,i=\"\";if(e.query.openid?i=e.query.openid:e.referrerInfo&&e.referrerInfo.extraData&&e.referrerInfo.extraData.openid&&(i=e.referrerInfo.extraData.openid),\"\"==i||null==i||void 0==i)o.checkSynchronized(function(e){e.data.isSynchronized?o.getGameGoldBalance(function(e){t(e)},function(e){a(e)}):a({code:10410,data:\"\",msg:\"没有进行金币关联\"})},function(e){a(e)},\"gold\");else{var c={openId:i,appId:_config2.default.appId,gold:n};_wxHttp(_config2.default.api+\"user/addUserOpenidMapping\",c,\"POST\").then(function(e){o.checkSynchronized(function(e){e.data.isSynchronized?o.getGameGoldBalance(function(e){t(e)},function(e){a(e)}):a({code:10410,data:\"\",msg:\"没有进行金币关联\"})},function(e){a(e)},\"gold\")},function(e){console.log(\"服务器返回错误:\"),a(e)})}}},{key:\"checkSynchronized\",value:function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:\"\";try{_wxHttp(_config2.default.api+\"user/checkSynchronized?checkTarget=\"+t,\"\",\"GET\").then(function(n){e(n)},function(e){n(e)})}catch(e){n(e)}}},{key:\"getGoldExplain\",value:function(e,n){try{_wxHttp(_config2.default.api+\"user/getGoldExplain\",\"\",\"GET\").then(function(n){e(n)},function(e){n(e)})}catch(e){n(e)}}}]),e}();exports.default=coinsdk;"]}