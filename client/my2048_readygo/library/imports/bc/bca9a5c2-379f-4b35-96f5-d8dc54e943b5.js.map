{"version":3,"sources":["../../../../../assets/Scripts/ui/assets/Scripts/ui/startUI.js"],"names":["ThirdAPI","require","wxRewardVideoAd","cc","Class","extends","Component","properties","score","default","type","Label","icon","Sprite","bg","soundOnBtn","Node","soundOffBtn","gemStone","Prefab","adBtn","dailyLabel","goldNode","spriteMoreGame","backgroundAudio","url","AudioClip","rewardVideoAdBtn","keepDataNode","layoutNode","version","currentBGM","reddot","singinBtn","serviceUINode","onLoad","console","log","listenUtil","eventCtrl","addListen","cdnchange","bind","start","init","initAudio","active","params","showGameClub","checkLogin","setShowRewardVideoAd","updateBestScore","spriteFrame","getTexture","setAliasTexParameters","Global","isBGMPlaying","cdnGameConfig","string","time","Date","getTime","gameinfo","shareTime","shareTotalTimes","dailyTotalTimes","updateGold","moreGameRunAction","updateSinginBtnState","loginday","loadLoginDay","date","accumulateSingin","accumulateDay","toDateString","saveLoginDay","_getRewardList","loadGetRewardList","length","onceOpenSinginNode","node","open","loadTurnTableData","saveOpenTurnTable","self","LoadAtlas","loadPrefab","singinNodePrefab","singinUI","onClose","profebNode","instantiate","addChild","getComponent","showServiceUI","hideServiceUI","d","now","showRewardVideoAdDate","showRewardVideoAdTimes","saveFriendGenStoneInfo","showTotalTimes","loginDateStr","rotation","stopAllActions","runAction","repeatForever","sequence","rotateBy","delayTime","audioEngine","play","setLoop","setVolume","volume","getVolume","isSoundPlaying","showChest","game","showPropDialogWindow","showRedDot","ret","updateRedDot","addNum","wxGold","gold","parseInt","num","goldLabel","getChildByName","startUI","wx","data","loadLocalScore","maxscore","loadScore","saveScore","wxScore","dailyBattleTimes","battleTimes","historyMaxScore","FBInstant","fbScore","onShareGame","playSound","pauseInterval","myUtil","shareGame","getImgBase64","onShareSuccess","onShareFail","shareToWx","shareToWXSuccess","biManager","bilog","shareToWX","showGroupRank","showGroupRankWindow","onShowRewardUI","testAd","initCreateReward","onAdSuccess","onSignIn","onclose","startContinueConutDown","times","clearInterval","countDownInterval","setInterval","createGemstone","openGId","shareDate","resetInitData","shareTimes","shareTimesAndRewardVideoAd","getForTotalTimes","msg","undefined","showDialogText","addShareGame","onAddShareSuccess","addShare","shareData1","arrOpenGId","indexOf","push","startConfig","addStone","showDialogPropText","randomNum","addInterval","instance","setPosition","p","pos","getPosition","toPosition","x","y","dialogForPropInfo","weightConfig","loader","loadRes","err","onPlay","isDailyLimit","parma","loadGameProgress","list","enterScene","startGame","keepDataEnterGame","restartGame","clearGameProgressInfo","closekeepData","dailyPlay","dailyConfig","onPlayDaily","totalSwith","onDailyShareSuccess","onDailyShareFail","onDailyAdSuccess","onDailyAdFail","dailyShare","showRankUI","showRankWindow","onShowStore","showStoreWindow","onChallenge","shareUI","switchBGM","pauseBGM","playBGM","resume","pause","onMoreGame","gamesdk","dataStatistics","createPFCode","res","tywx","LOGE","JSON","stringify"],"mappings":"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","file":"startUI.js","sourceRoot":"../../../../../assets/Scripts/ui","sourcesContent":["var ThirdAPI = require('../common/ThirdAPI')\nvar wxRewardVideoAd = require('../common/wxRewardVideoAd')\nimport gamesdk from '../sdk_readygo/gamesdk';\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        score: {\n            default: null,\n            type: cc.Label,\n        },\n        icon: {\n            default: null,\n            type: cc.Sprite,\n        },\n        bg: {\n            default: null,\n            type: cc.Sprite,\n        },\n        soundOnBtn: {\n            default: null,\n            type: cc.Node\n        },\n        soundOffBtn: {\n            default: null,\n            type: cc.Node\n        },\n        //随机钻石预设\n        gemStone: {\n            default: null,\n            type: cc.Prefab\n        },\n        \n        adBtn: {\n            default: null,\n            type: cc.Node\n        },\n        dailyLabel: {\n            default: null,\n            type: cc.Label,\n        },\n        //金币节点\n        goldNode: {\n            default: null,\n            type: cc.Node\n        },\n        spriteMoreGame: {\n            default: null,\n            type: cc.Sprite,\n        },\n        //背景音乐\n        backgroundAudio: {\n            url: cc.AudioClip,\n            default: null\n        },\n        //广告按钮\n        rewardVideoAdBtn: {\n            default: null,\n            type: cc.Node\n        },\n        /*\n        addBtn: {\n            default: null,\n            type: cc.Node\n        },*/\n        //存档界面\n        keepDataNode: {\n            default: null,\n            type: cc.Node\n        },\n        layoutNode: {\n            default: null,\n            type: cc.Node,\n        },\n        version: {\n            default: null,\n            type: cc.Label,\n        },\n        currentBGM: -1,\n\n        // 红点\n        reddot: {\n            default: null,\n            type: cc.Node\n        },\n\n        singinBtn:{\n            default: null,\n            type: cc.Node,\n        },\n\n        serviceUINode:cc.Node,\n    },\n\n    onLoad: function () {\n        console.log(\"开始游戏界面的onLoad方法\");\n        listenUtil.eventCtrl.addListen('cdnchange', this.cdnchange.bind(this));\n        // listenUtil.eventCtrl.addListen('updateSinginBtnState', this.updateSinginBtnState.bind(this));\n    },\n\n    start: function () {\n        console.log('开始界面调用 start方法');\n        this.init();\n        this.initAudio();\n        this.reddot.active = false;\n    },\n\n    cdnchange: function (params) {\n        console.log('cdn数据变化');\n        //this.addBtn.active = Global.cdnGameConfig.totalSwith;\n        //this.dailyBtn.active = Global.cdnGameConfig.totalSwith;\n    },\n\n    init: function () {\n        ThirdAPI.showGameClub(true);\n        this.checkLogin();\n        this.setShowRewardVideoAd();\n        this.updateBestScore();\n        this.icon.spriteFrame.getTexture().setAliasTexParameters();\n        this.bg.spriteFrame.getTexture().setAliasTexParameters();\n        this.soundOnBtn.active = Global.isBGMPlaying;\n        this.soundOffBtn.active = !Global.isBGMPlaying;\n        //this.addBtn.active = Global.cdnGameConfig.totalSwith;\n        this.keepDataNode.active = false;\n        //this.dailyBtn.active = Global.cdnGameConfig.totalSwith;\n\n        if (Global.cdnGameConfig && Global.cdnGameConfig.version) {\n            this.version.string = Global.cdnGameConfig.version;\n        }\n\n        //显示星星\n        var time = (new Date()).getTime() - Global.gameinfo.shareTime;\n        console.log(\"索取次数判断：\", Global.gameinfo.shareTotalTimes, Global.dailyTotalTimes, time);\n\n        this.updateGold(0);\n        this.moreGameRunAction();\n        this.updateSinginBtnState();\n    },\n\n    updateSinginBtnState:function(){\n\n        var loginday = ThirdAPI.loadLoginDay();\n        if (loginday && loginday.date) {\n            Global.accumulateSingin = loginday.accumulateDay;\n            if (loginday.date != (new Date()).toDateString()) {\n                Global.accumulateSingin = ++loginday.accumulateDay;\n                ThirdAPI.saveLoginDay(Global.accumulateSingin);\n            }\n        }else {\n            Global.accumulateSingin = 1;\n            ThirdAPI.saveLoginDay(Global.accumulateSingin);\n        }\n\n        var _getRewardList = ThirdAPI.loadGetRewardList();\n        if (Global.accumulateSingin && _getRewardList.length < 7){\n            cc.log(\"显示累积登录按钮\");\n            this.singinBtn.active = true;\n            this.onceOpenSinginNode();\n        }else {\n            this.singinBtn.active = false;\n        }\n    },\n\n    onceOpenSinginNode:function(){\n        if (this.node.active) {\n            var open = ThirdAPI.loadTurnTableData();\n            if (!open) {\n                ThirdAPI.saveOpenTurnTable();\n                var self = this;\n                Global.LoadAtlas.loadPrefab('singinNode', function(singinNodePrefab) {\n                    if (Global.singinUI) {\n                        Global.singinUI.onClose();\n                    }\n                    var profebNode = cc.instantiate(singinNodePrefab);\n                    self.node.addChild(profebNode);\n                    Global.singinUI = profebNode.getComponent(\"singinNode\");\n\n                });\n            }\n        }\n    },\n\n    //显示客服界面\n    showServiceUI:function(){\n        this.serviceUINode.active = true;\n    },\n\n    //关闭客服界面\n    hideServiceUI:function(){\n        this.serviceUINode.active = false;\n    },\n\n    //显示广告\n    setShowRewardVideoAd: function () {\n        //判断看广告是否在当天\n        var d = new Date(Date.now());\n        if (Global.gameinfo.showRewardVideoAdDate != d.toDateString()) {\n            Global.gameinfo.showRewardVideoAdTimes = 0;\n            Global.gameinfo.showRewardVideoAdDate = d.toDateString();\n            ThirdAPI.saveFriendGenStoneInfo(Global.gameinfo);\n        }\n        console.log('setShowRewardVideoAd:', Global.gameinfo.showRewardVideoAdTimes, Global.showTotalTimes);\n        //判断次数限制\n        this.rewardVideoAdBtn.active = Global.gameinfo.showRewardVideoAdTimes < Global.showTotalTimes ? true : false;\n    },\n\n    //每次到开始界面都判断是否需要重新登录，拉去最新数据\n    checkLogin: function () {\n        console.log('开始界面判断日期', Global.loginDateStr != (new Date()).toDateString())\n        if (Global.loginDateStr != (new Date()).toDateString()) {\n            console.log('登录');\n            //tcpManager.sendCmd.sendLoginData();\n        }\n    },\n\n    moreGameRunAction: function () {\n        this.spriteMoreGame.node.rotation = 0;\n        this.spriteMoreGame.node.stopAllActions();\n        this.spriteMoreGame.node.runAction(\n            cc.repeatForever(\n                cc.sequence(cc.rotateBy(0.1, 10), cc.rotateBy(0.2, -20), cc.rotateBy(0.2, 20), cc.rotateBy(0.2, -20), cc.rotateBy(0.1, 10), cc.delayTime(2)))\n        );\n    },\n\n    //初始化音乐\n    initAudio: function () {\n        this.currentBGM = cc.audioEngine.play(this.backgroundAudio, false, 0.2);\n        cc.audioEngine.setLoop(this.currentBGM, true);\n        cc.audioEngine.setVolume(this.currentBGM, 0.2);\n        var volume = cc.audioEngine.getVolume(this.currentBGM);\n        console.log('currentBGM volume is ' + volume);\n        Global.isBGMPlaying = true;\n        Global.isSoundPlaying = true;\n    },\n\n    //宝箱赠送\n    showChest: function () {\n        ThirdAPI.showGameClub(false);\n        Global.game.showPropDialogWindow(true);\n    },\n\n    // 显示提示红点\n    showRedDot: function (ret) {\n        console.log(\"-------------->>>>>>>>>>>>>>>>显示红点\");\n        this.reddot.active = ret;\n    },\n\n    // 更新提示红点\n    updateRedDot: function (addNum) {\n        console.log(\"-------------->>>>>>>>>>>>>>>>检测星星个数:\", Global.wxGold, addNum);\n        var gold = Global.wxGold;\n        if (gold < 50) {\n            console.log(\"星星个数小于50\");\n            gold += parseInt(addNum);\n            if (gold >= 50) {\n                console.log(\"星星个数大于50\");\n                this.showRedDot(true);\n            }\n        }\n        Global.wxGold += parseInt(addNum);\n    },\n\n    //更新星星的数量\n    updateGold: function (num) {\n        var goldLabel = this.goldNode.getChildByName('label');\n        goldLabel.getComponent(cc.Label).string = Global.wxGold;\n\n        //Global.wxGold += parseInt(num);\n        if (Global.startUI) {\n            Global.startUI.updateRedDot(parseInt(num));\n        }\n        console.log('1 :' + num, Global.wxGold);\n        //更新并存储\n        if (typeof wx !== 'undefined') {\n            var data = ThirdAPI.loadLocalScore();\n            var score = parseInt(data.maxscore);\n            var gold = parseInt(data.gold);\n            ThirdAPI.loadScore((maxscore, gold) => {\n                score = parseInt(maxscore);\n                gold = parseInt(gold);\n                console.log('gridController on ThirdAPI loadScore', score, parseInt(gold), Global.wxGold);\n            });\n            ThirdAPI.saveScore(score, Global.wxGold);\n        }\n\n        var goldLabel = this.goldNode.getChildByName('label');\n        goldLabel.getComponent(cc.Label).string = Global.wxGold;\n    },\n\n    //更新分数\n    updateBestScore: function () {\n        if (typeof wx !== 'undefined') {\n            var data = ThirdAPI.loadLocalScore();\n            Global.wxScore = parseInt(data.maxscore);\n            Global.wxGold = parseInt(data.gold);\n            ThirdAPI.loadScore((maxscore, gold) => {\n                Global.wxScore = parseInt(maxscore);\n                Global.wxGold = parseInt(gold);\n                console.log('on ThirdAPI loadScore', Global.wxScore + \" :: \" + Global.wxGold);\n            });\n            this.dailyLabel.string = \"每日挑战 \" + (Global.dailyBattleTimes - Global.gameinfo.battleTimes) + \"/\" + Global.dailyBattleTimes;\n            this.score.string = \"最高分:\" + Global.wxScore;\n            Global.historyMaxScore = Global.wxScore;\n        } else if (typeof FBInstant !== 'undefined') {\n            this.score.string = \"High score:\" + Global.fbScore;\n        }\n    },\n\n    // 分享功能  intent(\"INVITE\" | \"REQUEST\" | \"CHALLENGE\" | \"SHARE\") 表示分享的意图\n    onShareGame: function () {\n        Global.game.playSound('btn', 0.1);\n\n        this.pauseInterval = true;\n        if (typeof FBInstant !== 'undefined') {\n            var myUtil = require('myUtil');\n            ThirdAPI.shareGame(myUtil.getImgBase64(), this.onShareSuccess.bind(this));\n        } else if (typeof wx !== 'undefined') {\n            ThirdAPI.shareGame('randomImg', this.onShareSuccess.bind(this), this.onShareFail.bind(this), '245');\n        }\n    },\n\n    shareToWx: function () {\n        Global.game.playSound('btn', 0.1);\n        if (typeof FBInstant !== 'undefined') {\n            var myUtil = require('myUtil');\n            ThirdAPI.shareGame(myUtil.getImgBase64(), this.onShareSuccess.bind(this));\n        } else if (typeof wx !== 'undefined') {\n            ThirdAPI.shareGame('randomImg', this.shareToWXSuccess.bind(this), null, '245');\n        }\n    },\n\n    shareToWXSuccess: function () {\n        //游戏首页点击分享到微信群并分享成功\n        var biManager = require('biManager');\n        biManager.bilog(biManager.shareToWX, null);\n    },\n\n    showGroupRank: function () {\n        ThirdAPI.showGameClub(false);\n        Global.game.playSound('btn', 0.1);\n        Global.game.showGroupRankWindow(true);\n    },\n\n    //好友互助奖励\n    onShowRewardUI: function () {\n        // ThirdAPI.showGameClub(false);\n        // Global.game.playSound('btn', 0.1);\n        // Global.game.showRewardWindow();\n    },\n\n    //测试广告\n    testAd: function () {\n        var wxRewardVideoAd = require('wxRewardVideoAd');\n        wxRewardVideoAd.initCreateReward(this.onAdSuccess.bind(this));\n    },\n\n    //签到\n    onSignIn:function(){\n\n        var self = this;\n        Global.LoadAtlas.loadPrefab('singinNode', function(singinNodePrefab) {\n\n            if (Global.singinUI) {\n                Global.singinUI.onClose();\n            }\n            var profebNode = cc.instantiate(singinNodePrefab);\n            self.node.addChild(profebNode);\n            Global.singinUI = profebNode.getComponent(\"singinNode\");\n\n        });\n    },\n\n    onclose: function () {\n        console.log('关闭广告');\n\n    },\n\n    //设置倒计时\n    startContinueConutDown: function () {\n        var times = 300;\n        var myUtil = require(\"myUtil\");\n        this.pauseInterval = false;\n\n\n        clearInterval(this.countDownInterval);\n        this.countDownInterval = setInterval(() => {\n            if (!this.pauseInterval) {\n                times--;\n                if (times >= 0) {\n                    // this.friendBtnLabel.string = '邀请好友' + myUtil.getSecondString(times);\n                } else {\n                    // this.friendBtn.active = false;\n                    this.adBtn.active = true;\n                    clearInterval(this.countDownInterval);\n                }\n            }\n        }, 1000);\n    },\n\n    onAdSuccess: function () {\n        Global.gameinfo.showRewardVideoAdTimes++;\n        console.log('保存看广告的次数', Global.gameinfo.showRewardVideoAdTimes);\n        ThirdAPI.saveFriendGenStoneInfo(Global.gameinfo);\n        if (Global.gameinfo.showRewardVideoAdTimes >= Global.showTotalTimes) {\n            this.rewardVideoAdBtn.active = false;\n        } else {\n            this.rewardVideoAdBtn.active = true;\n        }\n\n        /*\n                if (Global.gameinfo.shareTimes >= Global.getForTotalTimes) {\n                    this.friendBtn.active = false;\n                    this.adBtn.active = false;\n                    console.log('每日的分享次数已经满了');\n                } else {\n                    this.friendBtn.active = true;\n                    this.adBtn.active = false;\n                }\n                console.log('adBtn' + this.adBtn.active + 'friendBtn' + this.friendBtn.active);*/\n        //星星\n        this.createGemstone();\n    },\n\n    onShareSuccess: function (openGId) {\n        //判断是否是当日(向朋友索取),防止凌晨状态\n        console.log('startUI onshareSuccess:', Global.gameinfo.shareDate, (new Date()).toDateString())\n        if (Global.gameinfo.shareDate != (new Date()).toDateString()) {\n            var myUtil = require('myUtil');\n            myUtil.resetInitData();\n        }\n        Global.gameinfo.shareTimes++;\n        Global.gameinfo.shareTimesAndRewardVideoAd++;\n\n        //先判断5次机会，再判断每日总次数3次\n        if (Global.gameinfo.shareTimes >= Global.getForTotalTimes) {\n            console.log('次数已满', Global.gameinfo.shareTimes);\n            //5次已满\n            // Global.gameinfo.shareTimes = 0;\n            // Global.gameinfo.shareTotalTimes++;\n            // Global.gameinfo.shareTime = (new Date()).getTime();\n        }\n        ThirdAPI.saveFriendGenStoneInfo(Global.gameinfo);\n        var time = (new Date()).getTime() - Global.gameinfo.shareTime;\n        console.log('分享成功的时间：', new Date().getTime(), Global.gameinfo.shareTime, time);\n\n        this.pauseInterval = false;\n        clearInterval(this.countDownInterval);\n\n        if (Global.gameinfo.shareTimes >= Global.getForTotalTimes) {\n            // this.friendBtn.active = false;\n            this.adBtn.active = false;\n            console.log('每日的分享次数已经满了');\n        } else {\n            // this.friendBtn.active = false;\n            this.adBtn.active = true;\n        }\n        // console.log('adBtn' + this.adBtn.active + 'friendBtn' + this.friendBtn.active);\n        //星星\n        //this.createGemstone();\n    },\n\n    //分享到群失败\n    onShareFail: function (msg) {\n        console.log('分享失败！');\n        if (msg === undefined) {\n            Global.game.showDialogText('分享失败！');\n        } else if (msg == 'fail') {\n            Global.game.showDialogText('分享失败，分享到群才有效');\n        } else if (msg == 'cancel') {\n            Global.game.showDialogText('分享失败！');\n        } else {\n            Global.game.showDialogText('分享失败！');\n        }\n        this.pauseInterval = false;\n    },\n\n    //加号分享得钻石\n    addShareGame: function () {\n        Global.game.playSound('btn', 0.1);\n        this.pauseInterval = true;\n\n        if (typeof FBInstant !== 'undefined') {\n            var myUtil = require('myUtil');\n            ThirdAPI.shareGame(myUtil.getImgBase64(), this.onShareSuccess.bind(this));\n        } else if (typeof wx !== 'undefined') {\n            ThirdAPI.shareGame('randomImg', this.onAddShareSuccess.bind(this), this.onShareFail.bind(this), '244');\n        }\n    },\n\n    //加号分享成功\n    onAddShareSuccess: function (openGId) {\n        //游戏首页点击+号并分享成功\n        var biManager = require('biManager');\n        biManager.bilog(biManager.addShare, null);\n\n        if (typeof wx !== 'undefined') {\n            if (!openGId) {\n                Global.game.showDialogText('分享失败，分享到群才有效');\n                console.log('分享失败，分享到群才有效');\n                return;\n            }\n        }\n        if (Global.gameinfo.shareData1.arrOpenGId.indexOf(openGId) != -1) {\n            console.log('该群今日已经分享过', openGId);\n            Global.game.showDialogText('分享失败，请分享到不同群');\n            return;\n        } else {\n            console.log('该群未分享过', openGId);\n            Global.gameinfo.shareData1.arrOpenGId.push(openGId);\n            ThirdAPI.saveFriendGenStoneInfo(Global.gameinfo);\n        }\n\n        //判断是否是当日(向朋友索取)\n        var d = new Date(Date.now());\n        if (Global.gameinfo.shareDate != d.toDateString()) {\n            Global.gameinfo.shareTimesAndRewardVideoAd = 0;\n            Global.gameinfo.shareTimes = 0;\n            Global.gameinfo.shareTotalTimes = 0;\n            Global.gameinfo.shareTime = 0;\n            Global.gameinfo.shareDate = d.toDateString();\n            ThirdAPI.saveFriendGenStoneInfo(Global.gameinfo);\n        }\n\n        //判断次数\n        Global.gameinfo.shareTimes++;\n        Global.gameinfo.shareDate = d.toDateString();\n\n        //先判断5次机会，再判断每日总次数3次\n        if (Global.gameinfo.shareTimes >= Global.getForTotalTimes) {\n            console.log('次数已满', Global.gameinfo.shareTimes);\n            return;\n        }\n        ThirdAPI.saveFriendGenStoneInfo(Global.gameinfo);\n        this.pauseInterval = false;\n        clearInterval(this.countDownInterval);\n\n        //兼容\n        if (!Global.startConfig) {\n            Global.startConfig = {\n                'addStone': 5\n            };\n        }\n        //加钻石\n        var msg = '恭喜获得' + Global.startConfig.addStone + '星星';\n        Global.game.showDialogPropText(msg);\n        this.updateGold(Global.startConfig.addStone);\n    },\n\n    //创建随机掉落的钻石\n    createGemstone: function () {\n        var myUtil = require('myUtil');\n        var randomNum = 5; //myUtil.randomForArray(Global.randomGemStone);\n        /*  for (var i = 0; i < randomNum; i++) {\n              var instance = cc.instantiate(this.gemStone);\n              var posX = myUtil.randomForMinAndMax(-Global.screenHeight / 2 + 100, Global.screenHeight / 2 - 100);\n              var posY = myUtil.randomForMinAndMax(-Global.screenWidth / 2 + 100, Global.screenWidth / 2 - 100);\n              console.log('gemStone pos:', posX, posY);\n              instance.setPosition(cc.p(0, 0));\n              //instance.setPosition(cc.p(0, Global.screenHeight / 2 + 50));\n              //var action = cc.moveTo(2, cc.p(posX, posY)).easing(cc.easeElasticOut(1));\n              this.node.addChild(instance);\n              var pos = Global.startUI.goldNode.getPosition();\n              //var addNum = (i == randomNum - 1) ? 30 - randomNum : 1;\n              instance.getComponent('getGemStone').toRepeat([pos.x, pos.y], 1);\n              //instance.runAction(action);\n          }*/\n\n        var times = 30;\n        clearInterval(this.addInterval);\n        this.addInterval = setInterval(() => {\n            times -= 5;\n            if (times >= 0) {\n                var instance = cc.instantiate(this.gemStone);\n                instance.setPosition(cc.p(0, 0));\n                this.node.addChild(instance);\n                var pos = Global.startUI.goldNode.getPosition();\n                instance.getComponent('getGemStone').toPosition([pos.x, pos.y], 5);\n            } else {\n                clearInterval(this.addInterval);\n            }\n        }, 150);\n\n    },\n\n    //弹出道具详情\n    dialogForPropInfo: function () {\n        Global.game.showPropDialogWindow(true);\n    },\n\n    //进入游戏\n    play: function () {\n        if (!Global.weightConfig) {\n            var self = this;\n            cc.loader.loadRes('weightConfig', function (err, data) {\n                Global.weightConfig = data.weightConfig;\n                self.onPlay();\n            });\n        } else {\n            this.onPlay();\n        }\n    },\n\n    onPlay: function () {\n        ThirdAPI.showGameClub(false);\n        Global.game.playSound('btn', 0.1);\n        Global.isDailyLimit = false;\n\n        //判断是否有存储\n        this.keepDataNode.active = false;\n        var parma = ThirdAPI.loadGameProgress();\n        if (!parma || (parma && parma.list.length <= 0)) {\n            Global.game.enterScene();\n            //记载点击开始游戏打点\n            var biManager = require('biManager');\n            biManager.bilog(biManager.startGame, null);\n        } else {\n            this.keepDataNode.active = true;\n        }\n    },\n\n    //存档进入游戏\n    keepDataEnterGame: function () {\n        var list = ThirdAPI.loadGameProgress();\n        console.log('keepDataEnterGame:', list);\n        Global.game.enterScene(list);\n        //记载点击开始游戏打点\n        var biManager = require('biManager');\n        biManager.bilog(biManager.startGame, null);\n    },\n\n    //重新开始\n    restartGame: function () {\n        ThirdAPI.clearGameProgressInfo();\n        Global.game.enterScene();\n        //记载点击开始游戏打点\n        var biManager = require('biManager');\n        biManager.bilog(biManager.startGame, null);\n    },\n\n    //存档关闭\n    closekeepData: function () {\n        this.keepDataNode.active = false;\n    },\n\n    //进入每日挑战\n    dailyPlay: function () {\n        ThirdAPI.showGameClub(false);\n        Global.game.playSound('btn', 0.1);\n        if (!Global.dailyConfig) {\n            var self = this;\n            cc.loader.loadRes('grids', function (err, data) {\n                Global.dailyConfig = data;\n                self.onPlayDaily();\n                console.log(\"start ui 读取本地掉率json文件\", data);\n            });\n        } else {\n            this.onPlayDaily();\n        }\n    },\n\n    onPlayDaily: function () {\n        //判断挑战次数\n        if (Global.gameinfo.battleTimes <= 0) {\n            // Global.game.showDialogPropText(\"每日挑战次数到达上限\");\n            // console.log('开始界面，挑战次数不足');\n            if (typeof FBInstant !== 'undefined') {\n                var myUtil = require('myUtil');\n                ThirdAPI.shareGame(myUtil.getImgBase64(), this.onShareSuccess.bind(this));\n            } else if (typeof wx !== 'undefined') {\n                if (Global.cdnGameConfig && Global.cdnGameConfig.totalSwith) {\n                    ThirdAPI.shareGame('randomImg', this.onDailyShareSuccess.bind(this), this.onDailyShareFail.bind(this), '247');\n                } else {\n                    var wxRewardVideoAd = require('wxRewardVideoAd');\n                    wxRewardVideoAd.initCreateReward(this.onDailyAdSuccess.bind(this), this.onDailyAdFail.bind(this));\n                }\n            }\n            return;\n        }\n        Global.gameinfo.battleTimes--;\n        ThirdAPI.saveFriendGenStoneInfo(Global.gameinfo);\n        Global.isDailyLimit = true;\n        Global.game.enterScene();\n    },\n\n    onDailyShareSuccess: function (openGId) {\n        //游戏首页点击每日挑战并分享成功\n        var biManager = require('biManager');\n        biManager.bilog(biManager.dailyShare, null);\n\n        if (typeof wx !== 'undefined') {\n            if (!openGId) {\n                Global.game.showDialogText('分享失败，分享到群才有效');\n                console.log('分享失败，分享到群才有效');\n                return;\n            }\n        }\n        if (Global.gameinfo.shareData1.arrOpenGId.indexOf(openGId) != -1) {\n            console.log('该群今日已经分享过', openGId);\n            Global.game.showDialogText('分享失败，请分享到不同群');\n            return;\n        } else {\n            console.log('该群未分享过', openGId);\n            Global.gameinfo.shareData1.arrOpenGId.push(openGId);\n            ThirdAPI.saveFriendGenStoneInfo(Global.gameinfo);\n        }\n\n        Global.gameinfo.battleTimes = Global.dailyBattleTimes;\n        Global.gameinfo.battleTimes--;\n        ThirdAPI.saveFriendGenStoneInfo(Global.gameinfo);\n        Global.isDailyLimit = true;\n        Global.game.enterScene();\n    },\n\n    onDailyShareFail: function (msg) {\n        if (msg === undefined) {\n            Global.game.showDialogText('分享失败！');\n        } else if (msg == 'fail') {\n            Global.game.showDialogText('分享失败，分享到群才有效');\n        } else if (msg == 'cancel') {\n            Global.game.showDialogText('分享失败！');\n        } else {\n            Global.game.showDialogText('分享失败！');\n        }\n    },\n\n    //每日挑战没有次数观看激励视频成功回调\n    onDailyAdSuccess: function () {\n        Global.gameinfo.battleTimes = Global.dailyBattleTimes;\n        Global.gameinfo.battleTimes--;\n        ThirdAPI.saveFriendGenStoneInfo(Global.gameinfo);\n        Global.isDailyLimit = true;\n        Global.game.enterScene();\n    },\n\n    //每日挑战观看激励视频失败\n    onDailyAdFail: function () {\n        Global.game.showDialogPropText('观看完整视频获得额外挑战次数');\n    },\n\n    //进入排行榜\n    showRankUI: function () {\n        ThirdAPI.showGameClub(false);\n        Global.game.playSound('btn', 0.1);\n        Global.game.showRankWindow(true);\n    },\n\n    //皮肤商城\n    onShowStore: function () {\n        ThirdAPI.showGameClub(false);\n        Global.game.playSound('btn', 0.1);\n        Global.game.showStoreWindow();\n        this.showRedDot(false);\n    },\n\n    //pk竞技\n    onChallenge: function () {\n        ThirdAPI.showGameClub(false);\n        Global.game.playSound('btn', 0.1);\n        Global.shareUI.onChallenge();\n    },\n\n    switchBGM: function () {\n        Global.game.playSound('btn', 0.1);\n        if (Global.isBGMPlaying) {\n            this.pauseBGM();\n            this.soundOnBtn.active = false;\n            this.soundOffBtn.active = true;\n        } else {\n            this.playBGM();\n            this.soundOnBtn.active = true;\n            this.soundOffBtn.active = false;\n        }\n        Global.isBGMPlaying = !Global.isBGMPlaying;\n    },\n\n    playBGM: function () {\n        if (this.currentBGM > -1) {\n            cc.audioEngine.resume(this.currentBGM);\n        }\n    },\n\n    pauseBGM: function () {\n        if (this.currentBGM > -1) {\n            cc.audioEngine.pause(this.currentBGM);\n        }\n    },\n\n    // 按钮回调：更多游戏\n    onMoreGame: function () {\n        // Global.game.playSound('btn', 0.1);\n        // var LinkImages = require('LinkImages');\n        //\n        // if (Global.linkImages && Global.linkImages.length > 0) {\n        //     console.log('link image : ', Global.linkImages, Global.linkImages.length);\n        //\n        //     var index = Math.floor(cc.random0To1() * Global.linkImages.length);\n        //     var httpStr = Global.linkImages[index];\n        //     console.log('httpStr:', httpStr);\n        //     LinkImages.previewImage(httpStr);\n        // }\n\n        gamesdk.dataStatistics.createPFCode(function(res){\n            tywx.LOGE(\"\",\"跳转小游戏数据res:  \" + JSON.stringify(res));\n        },function(err){\n            tywx.LOGE(\"\",\"跳转小游戏数据err:  \" + JSON.stringify(err));\n        })\n    },\n});"]}