{"version":3,"sources":["../../../../../../assets/Scripts/sdk_readygo/lib/assets/Scripts/sdk_readygo/lib/game.js"],"names":["_interopRequireDefault","e","__esModule","default","_classCallCheck","a","TypeError","_getBannerJson","t","Date","getTime","wx","setStorageSync","gameSdk","gameHttp","_config2","api","appId","then","bannerInfo","data","catch","myLog","logStatus","console","log","http","Promise","n","o","r","getStorageSync","request","url","method","header","success","code","fail","Checkparam","getErrparamData","msg","gameLogin","login","sdkVersion","openId","isNeedUpdateUserInfo","sessionId","JSON","stringify","userInfo","i","getPlatForm","getSystemInfoSync","name","info","system","indexOf","length","substring","getCodeImg","coin","gameCoin","gameCoinName","param","codeBody","previewImage","current","urls","d","c","midasPay","midasPayCheckIng","showToast","title","icon","duration","getOrderStatus","_code2","payUnEnd","res","orderCode","buyQuantity","waitOrderTime","midasPaying","checkOrder","now","requestMidasPayment","mode","env","offerId","currencyType","platform","zoneId","errCode","cancelPay","payError","unknowError","timer","setInterval","midasPayErrorNum","clearInterval","paySuccessDelay","midasPayRequestIng","pay_status","paySuccess","order_status","orderCancel","illegalOrderError","nativeCode","errMsg","midasErrorCode","wxGetUserInfo","getUserInfo","withCredentials","lang","encryptedData","iv","authorize","getSetting","authSetting","showModal","content","showCancel","confirm","openSetting","createOpenSettingButton","type","text","style","left","windowWidth","top","windowHeight","width","height","lineHeight","backgroundColor","color","textAlign","fontSize","borderRadius","onTap","hide","defineProperty","exports","value","_createClass","enumerable","configurable","writable","Object","key","prototype","_config","require","_code","window","innerWidth","innerHeight","toLocaleLowerCase","includes","SDKVersion","version","createUserInfoButton","image","s","u","payType","purpose","g","f","time"],"mappings":"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","file":"game.js","sourceRoot":"../../../../../../assets/Scripts/sdk_readygo/lib","sourcesContent":["\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,a){if(!(e instanceof a))throw new TypeError(\"Cannot call a class as a function\")}function _getBannerJson(e,a){try{var t=(new Date).getTime();wx.setStorageSync(\"lastGetBannerTime\",t),gameSdk.gameHttp(_config2.default.api+\"game/getSwitchConfig?appId=\"+_config2.default.appId,\"\",\"GET\").then(function(a){bannerInfo=a.data,e&&e(bannerInfo)}).catch(function(e){a&&a(e)})}catch(e){a&&a(e)}}function myLog(e){logStatus&&console.log(e)}function http(e,a,t){try{return new Promise(function(n,o){var r=wx.getStorageSync(\"sessionId\")||\"\";wx.request({url:_config2.default.api+t,data:e,method:a,header:{\"content-type\":\"application/json\",\"session-id\":r},success:function(e){0==e.data.code?n(e.data):o(e.data)},fail:function(e){o(e)}})})}catch(e){myLog(e)}}function Checkparam(e){myLog(e);for(var a in e)if(null==e[a]||\"\"==e[a]||\"undefined\"==e[a])return-1;return 1}function getErrparamData(e){return myLog(e),{code:-10111,data:\"\",msg:e}}function gameLogin(e,a){try{wx.login({success:function(t){var n=t.code,o={code:n,appId:_config2.default.appId,sdkVersion:sdkVersion};if(1==Checkparam(o))http(o,\"POST\",\"user/login\").then(function(t){if(0==t.code){if(wx.setStorageSync(\"uid\",t.data.openId),!t.data.isNeedUpdateUserInfo){myLog(\"保存了sessionId\"+t.data.sessionId),wx.setStorageSync(\"sessionId\",t.data.sessionId);var n=JSON.stringify(t.data.userInfo);wx.setStorageSync(\"gameUserInfo\",n),_getBannerJson()}e(t)}else a(t)},function(e){a(e)});else{var r=\"前端检查参数不正确\"+JSON.stringify(o),i=getErrparamData(r);a(i)}},fail:function(e){a(e)}})}catch(e){a(e)}}function getPlatForm(){try{var e=wx.getSystemInfoSync();return myLog({name:\"当前设备\",info:e}),0==e.system.indexOf(\"iOS\")?\"ios\":0==e.system.indexOf(\"Android\")?\"android\":e.system.length>10?e.system.substring(0,10):e.system}catch(e){return myLog(e),\"error\"}}function getCodeImg(e,a,t,n,o,r){try{var i={openId:wx.getStorageSync(\"uid\"),appId:_config2.default.appId,coin:e,gameCoin:a,gameCoinName:t,param:n};if(1==Checkparam(i)){http({codeBody:JSON.stringify(i)},\"POST\",\"gamepay/createWXACode\").then(function(e){var a=e.data;wx.previewImage({current:a,urls:[a],success:function(e){myLog(e),o(e)},fail:function(e){r(e)}})},function(e){r(e)})}else{var d=\"前端检查参数不正确\"+JSON.stringify(i),c=getErrparamData(d);r(c)}}catch(e){myLog(e)}}function midasPay(e,a,t){try{var n=Checkparam(e);if(1==gameSdk.midasPayCheckIng){console.log(\"限制在支付成功后轮询成功前不允许重复下单支付 midasPay\"),wx.showToast({title:\"您有订单正在处理中，请稍后再试\",icon:\"none\",duration:2e3});var o=getOrderStatus(_code2.default.payUnEnd);return void t(o)}if(1==n)http(e,\"POST\",\"gamepay/addCoinOrder\").then(function(e){myLog({name:\"成功获取订单\",res:e});var n=e.data;orderCode=e.data.orderCode;var o=e.data.buyQuantity;waitOrderTime=1,0==o?(gameSdk.midasPaying=!1,gameSdk.midasPayCheckIng=!0,checkOrder(a,t)):(console.log(\"midasPaytime====真正的米大师支付时间\",Date.now(),\"midasPayStatus==\"+gameSdk.midasPaying),wx.requestMidasPayment({mode:n.mode,env:n.env,offerId:n.offerId,currencyType:n.currencyType,platform:n.platform,buyQuantity:o,zoneId:n.zoneId,success:function(e){myLog({name:\"成功回调\",res:e}),checkOrder(a,t),gameSdk.midasPaying=!1,gameSdk.midasPayCheckIng=!0},fail:function(e){console.log(\"米大师错误返回:\",e);var a={};e.errCode?(cancelPay(e.errCode),a=getOrderStatus(_code2.default.payError,e)):a=getOrderStatus(_code2.default.unknowError),t(a)}}))}).catch(function(e){myLog({name:\"获取订单失败\",res:e}),40121==e.code&&wx.showToast({title:e.msg,icon:\"none\",duration:2e3}),t(e)});else{var r=\"前端检查参数不正确\"+JSON.stringify(e),i=getErrparamData(r);t(i)}}catch(e){t(e)}}function checkOrder(e,a){try{timer=setInterval(function(){var t=wx.getStorageSync(\"sessionId\");if(myLog(\"订单号:\"+orderCode+\"--appId:\"+_config2.default.appId+\"--sessionId:\"+t+\"---waitOrderTime:\"+waitOrderTime+\"---midasPayErrorNum:\"+gameSdk.midasPayErrorNum),waitOrderTime>120){myLog(\"state=5\"),clearInterval(timer),gameSdk.midasPayCheckIng=!1,waitOrderTime=1;var n=getOrderStatus(_code2.default.paySuccessDelay);return void e(n)}if(1==gameSdk.midasPayRequestIng)return void(waitOrderTime+=1);gameSdk.midasPayRequestIng=!0,http(\"\",\"GET\",\"gamepay/getCoinOrderStatus?orderCode=\"+orderCode+\"&appId=\"+_config2.default.appId).then(function(t){myLog({name:\"成功回调\",\"回调参数\":t}),gameSdk.midasPayRequestIng=!1;var n=t.data;if(1==n.pay_status){myLog(\"pay_status=1\"),clearInterval(timer),gameSdk.midasPayCheckIng=!1,waitOrderTime=1;var o=getOrderStatus(_code2.default.paySuccess);return void e(o)}if(0==n.pay_status&&(myLog(\"pay_status=0\"),waitOrderTime+=1),0!=n.order_status){myLog(\"order_status=2\"),clearInterval(timer),gameSdk.midasPayCheckIng=!1,waitOrderTime=1;var r=getOrderStatus(_code2.default.orderCancel);a(r)}}).catch(function(e){gameSdk.midasPayErrorNum++,gameSdk.midasPayErrorNum>119&&(gameSdk.midasPayErrorNum=0,clearInterval(timer),gameSdk.midasPayCheckIng=!1),e.code&&e.code==_code2.default.illegalOrderError.code&&(clearInterval(timer),gameSdk.midasPayCheckIng=!1,a(e)),myLog({name:\"错误回调\",\"回调参数\":e}),gameSdk.midasPayRequestIng=!1,waitOrderTime=1})},1e3)}catch(e){a(e)}}function getOrderStatus(e,a){try{var t=e;return a&&(t.nativeCode=a.errCode,t.msg=a.errMsg),console.log(\"米大师支付状态:,\",t),t}catch(e){console.log(e)}}function cancelPay(e){http({orderCode:orderCode,midasErrorCode:e},\"POST\",\"gamepay/cancelCoinOrder\").then(function(e){console.log(\"用户支付失败已告知服务器\")},function(e){})}function wxGetUserInfo(e,a){try{wx.getUserInfo({withCredentials:!0,lang:\"zh_CN\",success:function(t){var n={encryptedData:t.encryptedData,iv:t.iv};gameSdk.authorize(n,e,a)},fail:function(t){wx.getSetting({success:function(t){t.authSetting[\"scope.userInfo\"]||wx.showModal({title:\"警告\",content:\"您点击了拒绝授权，将无法正常使用小游戏的功能体验，请授权重新进入。\",showCancel:!1,success:function(t){t.confirm&&wx.openSetting({success:function(t){myLog(t),wxGetUserInfo(e,a)},fail:function(t){var n=wx.createOpenSettingButton({type:\"text\",text:\"打开设置页面\",style:{left:windowWidth/2-100,top:windowHeight/2-20,width:200,height:40,lineHeight:40,backgroundColor:\"#ff0000\",color:\"#ffffff\",textAlign:\"center\",fontSize:16,borderRadius:4}});n.onTap(function(){n.hide(),wxGetUserInfo(e,a)})}})}})}})}})}catch(e){a(e)}}Object.defineProperty(exports,\"__esModule\",{value:!0});var _createClass=function(){function e(e,a){for(var t=0;t<a.length;t++){var n=a[t];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(a,t,n){return t&&e(a.prototype,t),n&&e(a,n),a}}(),_config=require(\"./config.js\"),_config2=_interopRequireDefault(_config),_code=require(\"./code.js\"),_code2=_interopRequireDefault(_code),sdkVersion=\"1.0.6\",logStatus=!0,timer=null,orderCode=\"\",waitOrderTime=1,windowWidth=window.innerWidth,windowHeight=window.innerHeight,bannerInfo={},gameSdk=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:\"createUserInfoBtn\",value:function(e,a,t,n,o,r){try{var i=wx.getSystemInfoSync();if(console.log(i),console.log(\"是否为iphone:\"+i.system.toLocaleLowerCase().includes(\"ios\")),myLog(\"SDK版本号:\"+i.SDKVersion),i.SDKVersion<\"2.0.6\")return void wxGetUserInfo(o,r);if(i.system.toLocaleLowerCase().includes(\"ios\")&&i.version<\"6.6.7\"&&i.SDKVersion<\"2.1.0\")return void wxGetUserInfo(o,r);var d=wx.createUserInfoButton({type:e,text:a,image:t,style:n,withCredentials:!0,lang:\"zh_CN\"});o({code:1,data:d,msg:\"success\"})}catch(e){wxGetUserInfo(o,r)}}},{key:\"pay\",value:function(a,t,n,o,r,i){try{var d=this;if(e.midasPaying)return void console.log(\"并发调用拦截 midasPay\");e.midasPaying=!0,wx.login({success:function(c){console.log(c);var s=c.code,u={code:s,appId:_config2.default.appId};d.gameHttp(_config2.default.api+\"login/checkOrRefreshSessionkey\",u,\"POST\").then(function(d){http(\"\",\"GET\",\"gamepay/getGamePayType?os=\"+getPlatForm()+\"&appId=\"+_config2.default.appId).then(function(d){myLog(d);var c=d.data;if(\"midas\"!=c&&(e.midasPaying=!1),\"wxpay\"==c)getCodeImg(a,t,n,o,r,i);else if(\"midas\"==c){myLog(\"midasPay\");var s={coin:a,gameCoinName:n,gameCoin:t,param:o,payType:\"midas\",purpose:2,appId:_config2.default.appId},u=function(a){e.midasPaying=!1,r&&r(a)},g=function(a){e.midasPaying=!1,i&&i(a)};midasPay(s,u,g)}else if(\"none\"==c){myLog(\"pay none\");var f={code:10406,data:\"none\",msg:\"当前暂不支持充值\"};i(f)}else i(d)},function(a){e.midasPaying=!1,i(a)})}).catch(function(a){i(a),e.midasPaying=!1})},fail:function(a){e.midasPaying=!1,i(a)}})}catch(a){e.midasPaying=!1,i(a)}}},{key:\"login\",value:function(e,a){myLog({name:\"logName\",time:\"00:00\"}),gameLogin(e,a)}},{key:\"authorize\",value:function(e,a,t){try{var n=wx.getStorageSync(\"uid\"),o={encryptedData:e.encryptedData,iv:e.iv,openId:n,appId:_config2.default.appId};if(1==Checkparam(o))http(o,\"POST\",\"user/update\").then(function(e){gameLogin(a,t)},function(e){t(e)});else{var r=\"前端检查参数不正确\"+JSON.stringify(o),i=getErrparamData(r);t(i)}}catch(e){t(e)}}},{key:\"gameHttp\",value:function(e,a,t){try{return\"GET\"==t&&(e=this.stringify(e,a)),new Promise(function(n,o){var r=wx.getStorageSync(\"sessionId\")||\"\";wx.request({url:e,data:a,method:t,header:{\"content-type\":\"application/json\",\"session-id\":r},success:function(e){var a=e.data.code;e.data.data.code&&(a=e.data.data.code),0==a?n(e.data):o(e.data)},fail:function(e){o(e)}})})}catch(e){myLog(e)}}},{key:\"getMysteryGift\",value:function(e,a,t){this.gameHttp(_config2.default.api+\"share/readSelfNotice?noticeId=\"+e,\"\",\"GET\").then(function(e){a(e)}).catch(function(e){t(e)})}},{key:\"stringify\",value:function(e,a){var t=0;for(var n in a)0==t?(e=e+\"?\"+n+\"=\"+a[n],t++):e=e+\"&\"+n+\"=\"+a[n];return e}},{key:\"getOpenId\",value:function(){return wx.getStorageSync(\"uid\")}},{key:\"checkBannerSwitch\",value:function(e,a){try{((new Date).getTime()-wx.getStorageSync(\"lastGetBannerTime\"))/1e3/60>10?\"{}\"==JSON.stringify(bannerInfo)?_getBannerJson(e,a):(e(bannerInfo),_getBannerJson()):\"{}\"==JSON.stringify(bannerInfo)?_getBannerJson(e,a):e(bannerInfo)}catch(e){a(e)}}},{key:\"decryptShareTicket\",value:function(e,a,t,n){try{var o={iv:e,encryptedData:a,appId:_config2.default.appId};this.gameHttp(_config2.default.api+\"user/decryptWXData\",o,\"POST\").then(function(e){t(e)}).catch(function(e){n(e)})}catch(e){n(e)}}}]),e}();gameSdk.midasPaying=!1,gameSdk.midasPayCheckIng=!1,gameSdk.midasPayRequestIng=!1,gameSdk.midasPayErrorNum=0,exports.default=gameSdk;"]}