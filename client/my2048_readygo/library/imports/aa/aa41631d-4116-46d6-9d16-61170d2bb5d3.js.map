{"version":3,"sources":["../../../../../../assets/Scripts/sdk_readygo/lib/assets/Scripts/sdk_readygo/lib/track.js"],"names":["_interopRequireDefault","e","__esModule","default","_classCallCheck","t","TypeError","savelog","isOpenUserLog","a","wx","request","url","data","method","header","success","console","log","fail","n","retryTimes","_filterObj","JSON","stringify","defineProperty","exports","value","_createClass","length","enumerable","configurable","writable","Object","key","prototype","_config","require","_config2","_trackTable","_trackTable2","sdkVersion","getUserLocation","locationInfo","getLocation","trackTable","forEach","o","keys","type","userLog","getObject","Promise","r","getStorageSync","code","getSystemInfoSync","v","ext","ak","appKey","ccode","sid","uid","scene","device","location","getExtraParamKey"],"mappings":"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","file":"track.js","sourceRoot":"../../../../../../assets/Scripts/sdk_readygo/lib","sourcesContent":["\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function savelog(e){if(isOpenUserLog){var t=0;!function a(){wx.request({url:\"https://h5game-log.kuaiyugo.com/dataAnalysis/saveUserBehaviorLogV2\",data:e,method:\"POST\",header:{\"content-type\":\"application/json\"},success:function(t){console.log(e)},fail:function(n){if(t<2)return t++,e.retryTimes=t,void a();console.log(n,\"数据上报日志失败\")}})}()}}function _filterObj(e){for(var t in e)\"number\"!=typeof e[t]&&(\"\"!=e[t]&&null!=e[t]&&void 0!=e[t]&&\"{}\"!=JSON.stringify(e[t])||delete e[t]);return e}Object.defineProperty(exports,\"__esModule\",{value:!0});var _createClass=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),_config=require(\"./config\"),_config2=_interopRequireDefault(_config),_trackTable=require(\"./trackTable\"),_trackTable2=_interopRequireDefault(_trackTable),sdkVersion=\"1.1.0\",getUserLocation=!1,isOpenUserLog=!0,locationInfo={};getUserLocation&&wx.getLocation({success:function(e){locationInfo=e}}),exports.default=new(function(){function e(){_classCallCheck(this,e),this.trackTable=_trackTable2.default}return _createClass(e,[{key:\"getExtraParamKey\",value:function(e){try{var t=\"\";return this.trackTable.forEach(function(a,n){var o=Object.keys(a);e==a.type&&(t=o[1])}),t}catch(e){console.log(e)}}},{key:\"trackLog\",value:function(e,t){try{savelog({userLog:this.getObject(e,t)})}catch(e){console.log(e)}}},{key:\"gameHttp\",value:function(e,t,a){try{return\"GET\"==a&&(e=this.stringify(e,t)),new Promise(function(n,o){var r=wx.getStorageSync(\"sessionId\")||\"\";wx.request({url:e,data:t,method:a,header:{\"content-type\":\"application/json\",\"session-id\":r},success:function(e){var t=e.data.code;e.data.data.code&&(t=e.data.data.code),0==t?n(e.data):o(e.data)},fail:function(e){o(e)}})})}catch(e){console.log(e)}}},{key:\"getObject\",value:function(e,t){try{var a=wx.getSystemInfoSync(),n={};if(n.v=sdkVersion,n.ext={ak:_config2.default.appKey,ccode:wx.getStorageSync(\"channelCode\")||\"\",sid:wx.getStorageSync(\"sid\")||\"\",type:e,uid:wx.getStorageSync(\"uid\"),scene:wx.getStorageSync(\"scene\")||\"\"},n.device=a,getUserLocation&&(n.location=locationInfo),void 0!==t){var o=this.getExtraParamKey(e);\"extraParam\"!=o&&\"\"!=o&&(n.ext[o]=t)}return n.ext=_filterObj(n.ext),n}catch(e){console.log(e)}}}]),e}());"]}