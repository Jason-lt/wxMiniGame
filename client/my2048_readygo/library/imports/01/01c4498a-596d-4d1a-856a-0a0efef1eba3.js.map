{"version":3,"sources":["../../../../../assets/Scripts/view/assets/Scripts/view/itemView.js"],"names":["ThirdAPI","require","cc","Class","extends","Component","properties","itemSprite","default","type","Sprite","itemNum","Prefab","downAudio","url","AudioClip","num1","num2","num3","num4","num5","numPrefab","goldPrefab","explosionPrefab","mark","isSoonItem","bornNum","targetGrid","numInstance","goldInstance","curState","canMove","useDouble","useClear","isStone","isClearItem","isSuperItem","hasMark","boxNode","Node","initData","randomIndex","active","setSpriteFrame","updateColor","updateNum","setGridBox","updateNumForProp","Global","usePropStatus","changeStateToWaitDown","speed","log","startDownForBorn","gridController","getComponent","bornGrid","node","stopAllActions","forMergeaction","self","runAction","sequence","delayTime","waitToDown","callFunc","canDown","nodePos","getPosition","targetPos","cury","y","dist","pDistance","canDownNum","Math","floor","itemSize","hdx","hIndex","vdx","vIndex","firstCurH","allGrids","curH","element1","callback","callBackforMerge","actions","t","length","actiond","gridDownDelayTime","push","playTime","abs","action","moveTo","console","stopAction","myAction","quickDownAction","toRemove","parent","removeChild","targetOff","toRevive","finished","blink","getDuration","clearItem","time","flyAction","gridViewScript","playFlyNumToItem","spawnAction","spawn","rotateBy","scaleTo","propClear","scaleAction1","scaleAction2","setVisible","LoadAtlas","scaleX","scaleY","spriteFrame","getSpriteFrameFromName","skinIndex","tho","parseInt","hun","ten","uni","getSpriteNum","x","allWidth","width","getRect","height","spr","num","string","loadAtlasRes","soonItemSize","markScaleAni","toPos","cdnGameConfig","markScoreEquals","indexOf","dtime","forMerge","itemMerge","pos","combineTime","action1","gridDownSpeed","gridControllerScript","idx","downGrids","splice","targetScript","checkGrid","buttonItem","item","buttonItemViewScript","deleteGridScript","deleteItem","shakeShort","gridNum","resetData","playDownAudio","game","showPropDialogWindow","setPosition","p","guideNode","on","itemClick","EventType","TOUCH_START","touchStart","canDrop","candropProp","targetGridView","dropStone","evtObj","Event","EventCustom","setUserData","dispatchEvent","createProp","isSoundPlaying","combineID","audioEngine","play","setFinishCallback","playAudioEnd","playAudioStart","resume","uncache"],"mappings":"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","file":"itemView.js","sourceRoot":"../../../../../assets/Scripts/view","sourcesContent":["    /*\n        1. 从itemcontroller中产生\n        2. 出生点，出生数字\n        3. 受鼠标影响\n        4. 运动停止，回调\n\n    */\n    var ThirdAPI = require('../common/ThirdAPI');\n    cc.Class({\n        extends: cc.Component,\n\n        properties: {\n            //出生item的精灵贴图\n            itemSprite: {\n                default: null,\n                type: cc.Sprite,\n            },\n            //出生的数字\n            itemNum: {\n                default: null,\n                type: cc.Prefab,\n            },\n            //下落声音\n            downAudio: {\n                url: cc.AudioClip,\n                default: null\n            },\n            num1: {\n                default: null,\n                type: cc.Sprite,\n            },\n            num2: {\n                default: null,\n                type: cc.Sprite,\n            },\n            num3: {\n                default: null,\n                type: cc.Sprite,\n            },\n            num4: {\n                default: null,\n                type: cc.Sprite,\n            },\n            num5: {\n                default: null,\n                type: cc.Sprite,\n            },\n            numPrefab: {\n                default: null,\n                type: cc.Prefab,\n            },\n            goldPrefab: {\n                default: null,\n                type: cc.Prefab,\n            },\n            explosionPrefab: {\n                default: null,\n                type: cc.Prefab,\n            },\n            //宝箱角标\n            mark: {\n                default: null,\n                type: cc.Sprite,\n            },\n\n            isSoonItem: false, //是即将出现的item？\n            bornNum: 0, //出生的随机数\n            targetGrid: null, //目标格子\n            numInstance: null, //飞入分数的实例\n            goldInstance: null, //飞入分数的实例\n            curState: 0, //  1 等待下落   2 下落  3  下落完毕等待合并   4 合并\n            canMove: true,\n\n            useDouble: false, //是否使用双倍道具\n            useClear: false, //是否使用锤子道具\n\n            isStone: false, //是否是星星\n            isClearItem: false, //是否是锤子道具\n            isSuperItem: false, //是否是万能道具\n\n            hasMark: false, //是否有缩放角标\n\n            boxNode:cc.Node, //格子宝箱\n        },\n\n        initData: function (randomIndex, isSoonItem) {\n            this.boxNode.active = false;\n            this.isSoonItem = isSoonItem;\n            this.bornNum = randomIndex;\n            this.setSpriteFrame();\n\n        },\n\n        //根据生产的索引值来设置出生的精灵贴图\n        setSpriteFrame: function () {\n            this.updateColor();\n            this.updateNum(-1);\n        },\n\n        //设置格子宝箱\n        setGridBox:function(){\n            this.boxNode.active = true;\n            // this.bornNum = 0;\n        },\n        \n\n        updateNumForProp: function () {\n            this.updateNum(Global.usePropStatus);\n        },\n\n        //等待下落\n        changeStateToWaitDown: function (speed) {\n            cc.log(this.curState);\n            if (this.curState == 1) {\n                return;\n            }\n            if (this.curState == 3) {\n                this.startDownForBorn(speed);\n                return;\n            }\n            if (this.curState > 3) {\n                return;\n            }\n            if (Global.gridController.getComponent('gridController').bornGrid == this.node) {\n                if (this.curState > 0) {\n                    this.curState = 1; //等待下落\n                    this.node.stopAllActions();\n                    this.forMergeaction = null;\n                    var self = this;\n                    this.node.runAction(cc.sequence(cc.delayTime(Global.waitToDown), cc.callFunc(function () {\n                        self.startDownForBorn(speed);\n                    })));\n                }\n            }\n        },\n\n        canDown: function () {\n            var nodePos = this.node.getPosition();\n            var targetPos = this.targetGrid.getPosition();\n\n            var cury = nodePos.y;\n            var dist = cc.pDistance(nodePos, targetPos);\n            var canDownNum = Math.floor(dist / Global.itemSize);\n            var hdx = this.targetGrid.getComponent('gridView').hIndex;\n            var vdx = this.targetGrid.getComponent('gridView').vIndex;\n            var firstCurH = canDownNum <= 1 ? 0 : canDownNum;\n            var gridController = Global.gridController.getComponent(\"gridController\");\n            var allGrids = gridController.allGrids;\n            for (var curH = vdx - firstCurH; curH <= vdx; curH++) {\n                var element1 = allGrids[hdx][curH];\n                if (cury > element1.getPosition().y) {\n                    return true;\n                }\n            }\n            return false;\n        },\n\n        //开始进行从出生点到最终位置的动作\n        startDownForBorn: function (speed) {\n            this.curState = 2; //下落\n\n            //this.node.stopAllActions();\n            var nodePos = this.node.getPosition();\n            var targetPos = this.targetGrid.getPosition();\n\n            var dist = cc.pDistance(nodePos, targetPos);\n            var canDownNum = Math.floor(dist / Global.itemSize);\n\n            var callback = cc.callFunc(this.callBackforMerge, this);\n\n            var hdx = this.targetGrid.getComponent('gridView').hIndex;\n            var vdx = this.targetGrid.getComponent('gridView').vIndex;\n\n            var cury = nodePos.y;\n            var actions = [];\n            var t = 0;\n            var firstCurH = canDownNum <= 1 ? 0 : canDownNum;\n            var gridController = Global.gridController.getComponent(\"gridController\");\n            var allGrids = gridController.allGrids;\n\n            for (var curH = vdx - firstCurH; curH <= vdx; curH++) {\n                if (curH == -1) {\n                    continue;\n                }\n                if (actions.length > 0) {\n                    var actiond = cc.delayTime(Global.gridDownDelayTime);\n                    actions.push(actiond);\n                    t += Global.gridDownDelayTime;\n                }\n\n                var element1 = allGrids[hdx][curH];\n                var playTime = Math.abs(cury - element1.getPosition().y) / speed;\n                if (playTime == 0) {\n                    continue;\n                }\n\n                cury += element1.getPosition().y - cury;\n                t += playTime;\n                var action = cc.moveTo(playTime, element1.getPosition());\n                actions.push(action);\n            }\n\n            actions.push(callback);\n\n            //异常处理，当前节点和目标节点相等\n            cc.log(this.curState);\n            if (actions.length <= 1) {\n                console.log('处理异常');\n                if (this.forMergeaction == null) {\n                    this.curState = 4;\n                    this.node.runAction(callback);\n                }\n                return 0;\n            } else {\n                console.log('actions.length = 0');\n                if (this.forMergeaction != null) {\n                    console.log('this.forMergeaction != null' + actions.length);\n                    this.node.stopAction(this.forMergeaction);\n                    this.forMergeaction = null;\n                }\n            }\n            var myAction = cc.sequence(actions);\n            this.node.runAction(myAction);\n            return t;\n        },\n\n        //快速下落动作\n        quickDownAction: function (speed) {\n            this.curState = 5;\n            this.node.stopAllActions();\n            var nodePos = this.node.getPosition();\n            var targetPos = this.targetGrid.getPosition();\n            var playTime = cc.pDistance(nodePos, targetPos) / speed;\n            var action = cc.moveTo(playTime, targetPos);\n            var callback = cc.callFunc(this.callBackforMerge, this);\n\n            var myAction = cc.sequence(action, callback);\n            this.node.runAction(myAction);\n            return playTime;\n        },\n\n        toRemove: function () {\n            this.node.stopAllActions();\n            if (this.node.parent) {\n                this.node.parent.removeChild(this.node);\n            }\n            this.node.targetOff(this);\n            this.curState = 0;\n            this.hasMark = false;\n        },\n\n        //复活消除多余格子\n        toRevive: function () {\n            this.node.stopAllActions();\n            var finished = cc.callFunc(this.toRemove, this);\n            var action = cc.blink(1, 2);\n            var myAction = cc.sequence(action, finished);\n            this.node.runAction(myAction);\n            return action.getDuration() + 0.01;\n        },\n\n        //消除动画\n        clearItem: function (time) {\n            this.node.stopAllActions();\n            //动作完成则删除节点\n            var callback = cc.callFunc(this.toRemove, this);\n\n            var flyAction = cc.callFunc(function () {\n                if (this.node.parent && this.targetGrid) {\n                    var gridViewScript = this.targetGrid.getComponent('gridView');\n                    if (gridViewScript) {\n                        gridViewScript.playFlyNumToItem(this.bornNum);\n                    }\n                }\n            }, this);\n            //缩放动作\n            var spawnAction = cc.spawn(cc.rotateBy(0.2, 360, 360), flyAction, cc.sequence(cc.scaleTo(0.2, 0.5), cc.scaleTo(0.2, 0)));\n\n            this.node.runAction(cc.sequence(cc.delayTime(time), spawnAction, callback));\n            return 0.2;\n        },\n\n        //道具清除\n        propClear: function () {\n            this.node.stopAllActions();\n            var finished = cc.callFunc(this.toRemove, this);\n            var scaleAction1 = cc.scaleTo(1, 2);\n            var scaleAction2 = cc.scaleTo(1, 1);\n            var spawnAction = cc.sequence(cc.scaleTo(0.5, 0.9), cc.scaleTo(0.5, 0.8), cc.scaleTo(0.5, 1));\n            this.node.runAction(cc.sequence(spawnAction, finished));\n        },\n\n        //更新分数图集\n        updateNum: function (usePropStatus) {\n            this.num5.setVisible(false);\n            var LoadAtlas = require(\"LoadAtlas\");\n\n            if (usePropStatus != -1) {\n                console.log('使用道具更新显示分数图集');\n                var LoadAtlas = require(\"LoadAtlas\");\n                this.num1.setVisible(false);\n                this.num2.setVisible(false);\n                this.num3.setVisible(false);\n                this.num4.setVisible(false);\n                this.num5.setVisible(true);\n\n                this.num5.node.scaleX = this.isSoonItem ? 0.5 : 0.7;\n                this.num5.node.scaleY = this.isSoonItem ? 0.5 : 0.7;\n                if (usePropStatus == 0) {\n                    this.num5.spriteFrame = LoadAtlas.getSpriteFrameFromName('textures/gridItem/items', 'clear_spr');\n                    return;\n                } else if (usePropStatus == 1) {\n                    this.num5.spriteFrame = LoadAtlas.getSpriteFrameFromName('textures/gridItem/items', 'super_spr');\n                    return;\n                } else if (usePropStatus == 2) {\n                    this.num5.spriteFrame = LoadAtlas.getSpriteFrameFromName('textures/gridItem/items', 'double_spr');\n                    return;\n                }else if (usePropStatus == 6) {\n                    this.setGridBox();\n                }\n            }\n\n            //星星道具\n            if (this.isStone) {\n                this.num1.setVisible(false);\n                this.num2.setVisible(false);\n                this.num3.setVisible(false);\n                this.num4.setVisible(false);\n                this.num5.setVisible(true);\n                this.num5.spriteFrame = LoadAtlas.getSpriteFrameFromName('textures/gridItem/items', 'zuan');\n                return;\n            }\n\n\n            if (Global.skinIndex == 0) {\n                var tho = parseInt(this.bornNum / 1000);\n                var hun = parseInt((this.bornNum / 100) % 10);\n                var ten = parseInt((this.bornNum % 100) / 10);\n                var uni = parseInt(this.bornNum % 10);\n                //千位\n                if (tho > 0) {\n                    this.getSpriteNum(this.num1, tho);\n                }\n                //百位\n                if (hun > 0 || tho > 0) {\n                    this.getSpriteNum(this.num2, hun);\n                }\n                //十位\n                if (ten > 0 || tho > 0 || hun > 0) {\n                    this.getSpriteNum(this.num3, ten);\n                }\n                //个位\n                if (uni > 0 || tho > 0 || hun > 0 || ten > 0) {\n                    this.getSpriteNum(this.num4, uni);\n                }\n\n                //是否可见\n                if (tho == 0) {\n                    this.num1.setVisible(false);\n                }\n                if (tho == 0 && hun == 0) {\n                    this.num2.setVisible(false);\n                }\n                if (tho == 0 && hun == 0 && ten == 0) {\n                    this.num3.setVisible(false);\n                }\n\n                //个位\n                if (this.bornNum > 0 && this.bornNum < 9) {\n                    this.num4.node.x = 0;\n                } else if (this.bornNum >= 10 && this.bornNum < 99) {\n                    var allWidth = this.num3.node.width + this.num4.node.width;\n                    this.num3.node.x = -allWidth / 2 + this.num3.node.width / 2;\n                    this.num4.node.x = this.num3.node.x + this.num3.node.width / 2 + this.num4.node.width / 2;\n                } else if (this.bornNum >= 100 && this.bornNum < 999) {\n                    //百十个位 \n                    var allWidth = this.num2.node.width + this.num3.node.width + this.num4.node.width;\n                    this.num2.node.x = -allWidth / 2 + this.num2.node.width / 2;\n                    this.num3.node.x = this.num2.node.x + this.num2.node.width / 2 + this.num3.node.width / 2;\n                    this.num4.node.x = this.num3.node.x + this.num3.node.width / 2 + this.num4.node.width / 2;\n\n                } else if (this.bornNum >= 1000 && this.bornNum < 9999) {\n                    var allWidth = this.num1.node.width + this.num2.node.width + this.num3.node.width + this.num4.node.width;\n                    this.num1.node.x = -allWidth / 2 + this.num1.node.width / 2 + 6;\n                    this.num2.node.x = this.num1.node.x + this.num1.node.width / 2 + this.num2.node.width / 2 - 3;\n                    this.num3.node.x = this.num2.node.x + this.num2.node.width / 2 + this.num3.node.width / 2 - 3;\n                    this.num4.node.x = this.num3.node.x + this.num3.node.width / 2 + this.num4.node.width / 2 - 3;\n                }\n            } else {\n                console.log('皮肤', Global.skinIndex, this.bornNum, 'skin' + (Global.skinIndex + 1) + '_' + this.bornNum);\n                var LoadAtlas = require(\"LoadAtlas\");\n                this.num4.spriteFrame = LoadAtlas.getSpriteFrameFromName('textures/gridItem/skins', 'skin' + (Global.skinIndex + 1) + '_' + this.bornNum);\n                this.num4.node.width = this.num4.spriteFrame.getRect().width;\n                this.num4.node.height = this.num4.spriteFrame.getRect().height;\n                this.num4.node.scaleX = this.isSoonItem ? 0.8 : 1.1;\n                this.num4.node.scaleY = this.isSoonItem ? 0.8 : 1.1;\n            }\n        },\n\n        getSpriteNum: function (spr, num) {\n            var string = \"skin1_\" + num;\n            var LoadAtlas = require(\"LoadAtlas\");\n            var spriteFrame = LoadAtlas.getSpriteFrameFromName('textures/gridItem/skins', 'skin' + (Global.skinIndex + 1) + '_' + num);\n            spr.spriteFrame = spriteFrame;\n            spr.node.width = spriteFrame.getRect().width; // Global.gridNumSize;\n            spr.node.height = spriteFrame.getRect().height; // Global.gridNumSize;\n            spr.node.scaleX = (this.bornNum > 999 || this.isSoonItem) ? 0.8 : 1;\n            spr.node.scaleY = (this.bornNum > 999 || this.isSoonItem) ? 0.8 : 1;\n            spr.setVisible(true);\n        },\n\n        //更新color\n        updateColor: function () {\n            var self = this;\n            var LoadAtlas = require(\"LoadAtlas\");\n            LoadAtlas.loadAtlasRes(\"textures/gridItem/items\", function () {\n                var LoadAtlas = require(\"LoadAtlas\");\n                self.itemSprite.spriteFrame = LoadAtlas.getSpriteFrameFromName(\"textures/gridItem/items\", \"color1_\" + self.bornNum);\n                var soonItemSize = Global.soonItemSize;\n                if (self.bornNum > 99) {\n                    soonItemSize = 90;\n                } else if (self.bornNum > 999) {\n                    soonItemSize = Global.itemSize;\n                }\n                self.itemSprite.node.width = self.isSoonItem ? soonItemSize : Global.itemSize;\n                self.itemSprite.node.height = self.isSoonItem ? soonItemSize : Global.itemSize;\n            });\n            this.mark.node.active = false;\n        },\n\n        //缩放动画\n        markScaleAni: function (toPos) {\n            console.log('toPos:', toPos, this.bornNum);\n            if (Global.cdnGameConfig && Global.cdnGameConfig.markScoreEquals.indexOf(this.bornNum) <= -1) {\n                this.hasMark = false;\n                console.log('动作延迟：', this.bornNum);\n                return;\n            }\n\n            // if (this.mark) {\n            //     this.mark.node.active = true;\n            //     this.mark.node.stopAllActions();\n            //     this.mark.node.scale = 3.5;\n            //     this.mark.node.setCascadeOpacityEnabled(true);\n            //     this.mark.node.setOpacity(255 * 0.3);\n            //\n            //     //this.mark.node.setPosition(cc.p(0, 0));\n            //     //var toPos = this.mark.node.getPosition();\n            //     //缩放\n            //     //var finished = cc.callFunc(this.finished, this);\n            //     //var action = cc.spawn(cc.moveTo(0.5, cc.p(0, 0)), cc.scaleTo(0.3, 0.5, 0.5));\n            //     //var action =  cc.scaleTo(0.3, 5, 5);\n            //     var action2 = cc.spawn(cc.moveTo(0.5, toPos), cc.scaleTo(0.5, 0.1, 0.1), cc.fadeTo(1.0, 255));\n            //     //var myAction = cc.sequence(action, action2);\n            //     this.mark.node.runAction(action2);\n            //     this.mark.node.setLocalZOrder(10);\n            // }\n        },\n\n        //回调grid控制器的合并逻辑\n        callBackforMerge: function () {\n            if (this.curState < 3) {\n                this.curState = 3\n            }\n            var self = this;\n            var dtime = Global.forMerge;\n            if (!this.canMove) {\n                dtime = dtime / 3;\n            }\n            this.forMergeaction = cc.sequence(cc.delayTime(dtime), cc.callFunc(function () {\n                self.forMerge();\n            }));\n            this.node.runAction(this.forMergeaction);\n        },\n\n        //格子合并\n        itemMerge: function(pos) {\n            this.curState = 4;\n            var finished = cc.callFunc(this.toRemove, this);\n            var playTime = cc.pDistance(this.node.getPosition(), pos) / Global.combineTime;\n            //合并动作\n            var action = cc.moveTo(playTime, pos);\n            var action1 = cc.delayTime(0.1);\n\n            //var seq = cc.sequence(action1,action);\n            var myAction = cc.sequence(action1, action, finished);\n            this.node.runAction(myAction);\n        },\n\n        forMerge: function () {\n            console.log('forMerge');\n            //是否可以继续下降\n            if (this.canDown()) {\n                this.startDownForBorn(Global.gridDownSpeed);\n                return;\n            }\n            //删除格子\n            this.node.stopAllActions();\n            var gridControllerScript = Global.gridController.getComponent(\"gridController\");\n            var idx = gridControllerScript.downGrids.indexOf(this.getComponent('itemView'));\n            if (idx >= 0) {\n                gridControllerScript.downGrids.splice(idx, 1);\n            }\n\n            var targetScript = this.targetGrid.getComponent('gridView');\n            if (Global.usePropStatus == 1) {\n                console.log('使用万能道具');\n                //查找下方是否有格子\n                var gridControllerScript = Global.gridController.getComponent(\"gridController\");\n                var checkGrid = gridControllerScript.allGrids[targetScript.hIndex][targetScript.vIndex + 1];\n                if (checkGrid) {\n                    var buttonItem = checkGrid.getComponent(\"gridView\").item;\n                    if (buttonItem) {\n                        var buttonItemViewScript = buttonItem.getComponent(\"itemView\");\n                        if (!buttonItemViewScript.useClear) {\n                            console.log('下方有格子，并且不是锤子道具', buttonItemViewScript.bornNum);\n\n                            this.initData(buttonItemViewScript.bornNum, false);\n                            Global.usePropStatus = -1;\n                        } else {\n                            console.log('下方有格子，但是下面的是锤子道具');\n                        }\n                    }\n                }\n            } else if (Global.usePropStatus == 0) {\n                console.log('使用锤子道具');\n                //查找下方是否有格子\n                var gridControllerScript = Global.gridController.getComponent(\"gridController\");\n                var checkGrid = gridControllerScript.allGrids[targetScript.hIndex][targetScript.vIndex + 1];\n                if (checkGrid) {\n                    var buttonItem = checkGrid.getComponent(\"gridView\").item;\n                    if (buttonItem) {\n                        var buttonItemViewScript = buttonItem.getComponent(\"itemView\");\n                        console.log('下方有格子', buttonItemViewScript.bornNum);\n                        var deleteGridScript = checkGrid.getComponent(\"gridView\");\n                        //销毁的item\n                        var deleteItem = deleteGridScript.item;\n\n                        ThirdAPI.shakeShort({});\n                        //var explosionPrefab = cc.instantiate(this.explosionPrefab);\n                        //deleteItem.node.addChild(explosionPrefab);\n\n                        deleteItem.toRevive();\n\n                        console.log('删除item：' + deleteGridScript.gridNum, deleteGridScript.hIndex, deleteGridScript.vIndex);\n                        deleteGridScript.item = null;\n                        deleteGridScript.resetData();\n\n                        gridControllerScript.bornGrid = null;\n                        this.toRevive();\n\n                        this.playDownAudio();\n                        this.canMove = false;\n                        this.curState = 0;\n                        return;\n                    }\n                }\n            }else if (Global.usePropStatus == 6){\n                Global.game.showPropDialogWindow(true);\n                this.toRemove();\n                return\n            }\n\n            targetScript.item = this;\n            this.node.setPosition(cc.p(targetScript.node.getPosition()));\n            cc.log('下落停止 item callBackforMerge ：' + targetScript.hIndex + \" :: \" + targetScript.vIndex + \"node pos X\" + this.node.x + \"  node pos Y\" + this.node.y);\n            targetScript.gridNum = this.bornNum;\n\n            //隐藏引导节点\n            if (gridControllerScript.guideNode && gridControllerScript.guideNode.active) {\n                gridControllerScript.guideNode.active = false;\n            }\n\n            //添加事件侦听\n            var gridControllerScript = Global.gridController.getComponent(\"gridController\");\n            this.node.on(\"itemclick\", gridControllerScript.itemClick, gridControllerScript);\n            this.node.on(cc.Node.EventType.TOUCH_START, this.touchStart, this);\n\n            // }, Global.gridDownDelayTime * 1000);\n\n            this.playDownAudio();\n            this.canMove = false;\n            this.curState = 0;\n\n            //开始缩放动画\n            console.log('****************', targetScript.canDrop, targetScript.gridNum, targetScript.item.hasMark);\n            if (targetScript.item.hasMark) {\n                var toPos = this.mark.node.getPosition();\n                this.markScaleAni(toPos);\n            }\n\n            //再生产道具\n            if (Global.candropProp) {\n                var targetGridView = this.targetGrid.getComponent('gridView');\n                targetGridView.dropStone(targetScript.hIndex, targetScript.vIndex - 1);\n            }\n        },\n\n        touchStart: function () {\n            cc.log('itemclick');\n            var evtObj = new cc.Event.EventCustom('itemclick', true);\n            evtObj.setUserData(this.targetGrid);\n            this.node.dispatchEvent(evtObj);\n        },\n\n        //创建道具实例\n        createProp: function () {\n            \n        },\n        \n        //播放落地声音\n        playDownAudio: function () {\n            cc.log('play down audio');\n            if (Global.isSoundPlaying && this.downAudio != null) {\n                this.combineID = cc.audioEngine.play(this.downAudio, false, 1);\n                //回调\n                var self = this;\n                if (self.combineID > 0) {\n                    cc.audioEngine.setFinishCallback(self.combineID, function () {\n                        self.playAudioEnd();\n                    });\n                }\n            }\n        },\n        //播放声音\n        playAudioStart: function () {\n            if (this.combineID != 0) {\n                cc.audioEngine.resume(this.combineID);\n            }\n        },\n        //暂停声音声音\n        playAudioEnd: function () {\n            cc.audioEngine.uncache(this.combineID);\n        },\n\n\n\n        // update (dt) {},\n    });"]}