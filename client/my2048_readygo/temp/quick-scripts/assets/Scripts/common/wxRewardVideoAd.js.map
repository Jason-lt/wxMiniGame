{"version":3,"sources":["wxRewardVideoAd.js"],"names":["wxRewardVideoAd","videoAd","initCreateReward","onCLoseCallback","onFailedCallBack","wx","console","log","createRewardedVideoAd","adUnitId","load","then","show","catch","err","errMsg","offClose","onClose","res","undefined","isEnded","onError","Global","game","showDialogText","error","onEnabled","module","exports"],"mappings":";;;;;;AAAA;;;;;AAKA,IAAIA,kBAAkB;AAClBC,aAAS,IADS;;AAGlBC,sBAAkB,0BAAUC,eAAV,EAA2BC,gBAA3B,EAA6C;AAC3D,YAAI,OAAOC,EAAP,KAAc,WAAlB,EAA+B;AAC3BC,oBAAQC,GAAR,CAAY,uBAAZ;;AAEA,gBAAI;AACA,oBAAIN,UAAUI,GAAGG,qBAAH,CAAyB;AACnCC,8BAAU;AADyB,iBAAzB,CAAd;;AAIA;AACA;AACA;;;AAGAR,wBAAQS,IAAR,GACKC,IADL,CACU;AAAA,2BAAMV,QAAQW,IAAR,EAAN;AAAA,iBADV,EAEKC,KAFL,CAEW,eAAO;AACVP,4BAAQC,GAAR,CAAY,gBAAZ,EAA8BO,IAAIC,MAAlC;AACA;AACA;AACH,iBANL;;AAQAd,wBAAQe,QAAR;AACAf,wBAAQgB,OAAR,CAAgB,UAACC,GAAD,EAAS;AACrB,wBAAIA,OAAOC,SAAX,EAAsB;AAClB;AACA,4BAAIhB,eAAJ,EAAqB;AACjBA;AACH;AACJ,qBALD,MAKO;AACH;AACAG,gCAAQC,GAAR,CAAY,6BAAZ,EAA2CW,GAA3C;AACA,4BAAIA,IAAIE,OAAR,EAAiB;AACb;AACA,gCAAIjB,eAAJ,EAAqB;AACjBA;AACH;AACJ,yBALD,MAKO;AACH;AACAG,oCAAQC,GAAR,CAAY,OAAZ;AACA,gCAAIH,gBAAJ,EAAsB;AAClBE,wCAAQC,GAAR,CAAY,MAAZ;AACAH;AACH;AACJ;AACJ;AACJ,iBAvBD;;AAyBAH,wBAAQoB,OAAR,CAAgB,eAAO;AACnBf,4BAAQC,GAAR,CAAY,UAAZ,EAAwBO,IAAIC,MAA5B;AACAO,2BAAOC,IAAP,CAAYC,cAAZ,CAA2B,QAA3B;AACA;AACA;AACH,iBALD;AAMH,aAlDD,CAkDE,OAAOC,KAAP,EAAc;AACZnB,wBAAQC,GAAR,CAAY,uBAAZ,EAAqCkB,KAArC;AACH;AACJ;AACJ,KA7DiB;;AA+DlBC,eAAW,qBAAY,CAEtB;AAjEiB,CAAtB;;AAoEAC,OAAOC,OAAP,GAAiB5B,eAAjB","file":"wxRewardVideoAd.js","sourceRoot":"../../../../../assets/Scripts/common","sourcesContent":["/*\n * file : LinkImages.js\n * brief: This file can link images on different platforms.\n */\n\nvar wxRewardVideoAd = {\n    videoAd: null,\n\n    initCreateReward: function (onCLoseCallback, onFailedCallBack) {\n        if (typeof wx !== 'undefined') {\n            console.log('call initCreateReward');\n\n            try {\n                var videoAd = wx.createRewardedVideoAd({\n                    adUnitId: 'adunit-cadfea7f9bcdbcd8'\n                })\n\n                //videoAd.load()\n                // .then(() => videoAd.show())\n                // .catch(err => console.log(err.errMsg))\n\n\n                videoAd.load()\n                    .then(() => videoAd.show())\n                    .catch(err => {\n                        console.log('ad load faild:', err.errMsg)\n                        // videoAd.load()\n                        //     .then(() => videoAd.show())\n                    })\n\n                videoAd.offClose();\n                videoAd.onClose((res) => {\n                    if (res == undefined) {\n                        //看完广告,给奖励\n                        if (onCLoseCallback) {\n                            onCLoseCallback();\n                        }\n                    } else {\n                        // 用户点击了【关闭广告】按钮\n                        console.log('==> wxRewardVideoAd onClose', res);\n                        if (res.isEnded) {\n                            //看完广告,给奖励\n                            if (onCLoseCallback) {\n                                onCLoseCallback();\n                            }\n                        } else {\n                            // 没看完,不给奖励\n                            console.log('广告没看完');\n                            if (onFailedCallBack) {\n                                console.log('回调失败');\n                                onFailedCallBack();\n                            }\n                        }\n                    }\n                })\n\n                videoAd.onError(err => {\n                    console.log('onError:', err.errMsg)\n                    Global.game.showDialogText('拉取数据失败');\n                    // videoAd.load()\n                    //     .then(() => videoAd.show())\n                })\n            } catch (error) {\n                console.log('wxRewardVideoAd error', error);\n            }\n        }\n    },\n\n    onEnabled: function () {\n\n    },\n}\n\nmodule.exports = wxRewardVideoAd;"]}