{"version":3,"sources":["wxAPI.js"],"names":["WXGlobal","initOnEnter","console","log","options","getLaunchOptionsSync","shareTicket","scene","query","isSticky","queryString","setShareTicketEnabled","showShareMenu","registShare","registOnShow","registOnError","userInfo","nickName","maxscore","gold","iv","signature","gender","avatarUrl","sysInfo","wx","getSystemInfoSync","SDKVersion","replace","slice","GameClubButton","createGameClubButton","icon","style","left","top","width","height","showGameClub","error","value","show","hide","onError","res","message","stack","getAuth","callback","getUserInfo","success","setUserCloudStorage","KVDataList","key","fail","errMsg","indexOf","complete","self","shareObj","gamesdk","dataStatistics","getShareInfo","imgUrl","data","image","title","imageUrl","onShareAppMsg","err","code","msg","onShareAppMessage","isFromGroup","ThirdAPI","require","helpInfo","Global","gameinfo","inviteUserList","inviteDate","Date","now","toDateString","userList","saveFriendGenStoneInfo","inviteCode","parseInt","extraParam","getTime","sendTime","cdnGameConfig","validTime","sourceCode","push","getHelpInfo","myBtn","onShow","showInfo","game","login","isNeedUpdateUserInfo","createUserInfoBtn","lineHeight","backgroundColor","color","textAlign","fontSize","borderRadius","onTap","info","authorize","onShowInfo","openId","coin","addUserOpenidMapping","registOnHide","onHide","onHideInfo","shareGame","imageTag","successcallback","failcallback","sourcecode","channelPrefix","setQueryInfo","that","obj","tywx","LOGE","JSON","stringify","shareTickets","length","result","encryptedData","resultString","decrypt","UserInfo","wxgame_session_key","parse","openid","openGId","shareAppMessage","crypted","crypto","Buffer","decipher","createDecipheriv","decoded","update","final","setMaxScore","isEnabled","updateShareMenu","withShareTicket","shareTicketEnabled","getShareUserInfo","hideShareMenu","params","getShareScreenShot","canvas","toTempFilePathSync","x","y","destWidth","destHeight","getShareScreenShotForDown","getScreenShot","initFriendRank","openDataContext","getOpenDataContext","type","postMessage","getNextFriendRank","score","rect","getFriendRank","getGroupRank","myUtil","randomForArray","shareImages","undefined","getDailyRank","getMyInfo","userId","SystemInfo","gameId","saveScore","resetInitData","dailyScore","dailyTime","loadScore","shakeShort","vibrateShort","shakeLong","vibrateLong","exit","exitMiniProgram","getSystemInfo","module","exports"],"mappings":";;;;;;AACA;;;;;;AAEA,IAAIA,WAAW;;AAGXC,iBAAa,uBAAY;AACrBC,gBAAQC,GAAR,CAAY,oBAAZ;AACA,YAAIC,UAAU,KAAKC,oBAAL,EAAd;AACAH,gBAAQC,GAAR,CAAY,gBAAZ,EAA8BC,OAA9B;AACA,aAAKE,WAAL,GAAmBF,QAAQE,WAA3B;AACA,aAAKC,KAAL,GAAaH,QAAQG,KAArB;AACA,aAAKC,KAAL,GAAaJ,QAAQI,KAArB;AACA,aAAKC,QAAL,GAAgBL,QAAQK,QAAxB;AACA,aAAKC,WAAL,GAAmB,EAAnB;;AAEA,aAAKC,qBAAL,CAA2B,IAA3B;AACA,aAAKC,aAAL;AACA;AACA,aAAKC,WAAL;AACA,aAAKC,YAAL;AACA,aAAKC,aAAL;;AAEA,aAAKC,QAAL,GAAgB;AACZC,sBAAU,WADE;AAEZC,sBAAU,CAFE;AAGZC,kBAAM,CAHM;AAIZC,gBAAI,EAJQ;AAKZC,uBAAW,EALC;AAMZC,oBAAQ,CANI;AAOZC,uBAAW;AAPC,SAAhB;;AAUA,YAAI;AACA,gBAAIC,UAAUC,GAAGC,iBAAH,EAAd;AACAxB,oBAAQC,GAAR,CAAY,WAAZ,EAAyBqB,OAAzB,EAAkCA,QAAQG,UAAR,CAAmBC,OAAnB,CAA2B,KAA3B,EAAkC,EAAlC,CAAlC;AACA,gBAAIJ,QAAQG,UAAR,CAAmBE,KAAnB,CAAyB,CAAzB,EAA4B,CAA5B,EAA+BD,OAA/B,CAAuC,KAAvC,EAA8C,EAA9C,KAAqD,GAAzD,EAA8D;AAC1D,qBAAKE,cAAL,GAAsBL,GAAGM,oBAAH,CAAwB;AAC1CC,0BAAM,OADoC;AAE1CC,2BAAO;AACHC,8BAAM,CADH;AAEHC,6BAAK,EAFF;AAGHC,+BAAO,EAHJ;AAIHC,gCAAQ;AAJL;AAFmC,iBAAxB,CAAtB;;AAUA,qBAAKC,YAAL,CAAkB,KAAlB;AACH;AACJ,SAhBD,CAgBE,OAAOC,KAAP,EAAc,CAEf;;AAED;;;;;;;;;;;;;;;AAeA;AACH,KAlEU;;AAoEXD,kBAAc,sBAAUE,KAAV,EAAiB;AAC3B,YAAI,CAAC,KAAKV,cAAV,EAA0B;;AAE1B,YAAIU,KAAJ,EAAW;AACPtC,oBAAQC,GAAR,CAAY,SAAZ;AACA,iBAAK2B,cAAL,CAAoBW,IAApB;AACH,SAHD,MAGO;AACHvC,oBAAQC,GAAR,CAAY,SAAZ;AACA,iBAAK2B,cAAL,CAAoBY,IAApB;AACH;AACJ,KA9EU;;AAgFX3B,mBAAe,yBAAY;AACvBU,WAAGkB,OAAH,CAAW,UAACC,GAAD,EAAS;AAChB1C,oBAAQC,GAAR,CAAY,cAAcyC,IAAIC,OAAlB,GAA4B,YAA5B,GAA2CD,IAAIE,KAA3D;AACH,SAFD;AAGH,KApFU;;AAsFXC,aAAS,iBAAUC,QAAV,EAAoB;AACzBvB,WAAGwB,WAAH,CAAe;AACXC,qBAAS,iBAAUN,GAAV,EAAe;AACpB;AACA1C,wBAAQC,GAAR,CAAYyC,GAAZ;AACA5C,yBAASgB,QAAT,GAAoB4B,IAAI5B,QAAxB;AACAhB,yBAASmD,mBAAT,CAA6B;AACzBC,gCAAY,CAAC;AACLC,6BAAK,MADA;AAELb,+BAAOI,IAAI5B,QAAJ,CAAaC;AAFf,qBAAD,EAIR;AACIoC,6BAAK,QADT;AAEIb,+BAAOI,IAAI5B,QAAJ,CAAaM,MAAb,GAAsB;AAFjC,qBAJQ,EAQR;AACI+B,6BAAK,WADT;AAEIb,+BAAOI,IAAI5B,QAAJ,CAAaO;AAFxB,qBARQ,EAYR;AACI8B,6BAAK,IADT;AAEIb,+BAAOI,IAAIxB;AAFf,qBAZQ,EAgBR;AACIiC,6BAAK,WADT;AAEIb,+BAAOI,IAAIvB;AAFf,qBAhBQ,CADa;AAsBzB6B,6BAAS,mBAAY;AACjBhD,gCAAQC,GAAR,CAAY,gCAAZ;AACH;AAxBwB,iBAA7B;AA0BH,aA/BU;AAgCXmD,kBAAM,cAAUV,GAAV,EAAe;AACjB;AACA,oBAAIA,IAAIW,MAAJ,CAAWC,OAAX,CAAmB,WAAnB,IAAkC,CAAC,CAAnC,IAAwCZ,IAAIW,MAAJ,CAAWC,OAAX,CAAmB,aAAnB,IAAoC,CAAC,CAAjF,EAAoF;AAChF;AACAtD,4BAAQC,GAAR,CAAYyC,GAAZ;AACA5C,6BAASgB,QAAT,GAAoB;AAChBC,kCAAU,WADM;AAEhBC,kCAAU,CAFM;AAGhBC,8BAAM,CAHU;AAIhBC,4BAAI,EAJY;AAKhBC,mCAAW,EALK;AAMhBC,gCAAQ,CANQ;AAOhBC,mCAAW;AAPK,qBAApB;AASArB,4BAAQC,GAAR,CAAY,sBAAZ;AACH;AACJ,aAhDU;AAiDXsD,sBAAU,oBAAY;AAClB,oBAAIT,QAAJ,EAAc;AACVA;AACH;AACJ;AArDU,SAAf;AAuDH,KA9IU;;AAgJXnC,iBAAa,uBAAY;AACrB,YAAI6C,OAAO,IAAX;AACA,YAAIC,QAAJ;AACAC,0BAAQC,cAAR,CAAuBC,YAAvB,CAAoC,SAApC,EAA+C,UAASlB,GAAT,EAAc;AACzD1C,oBAAQC,GAAR,CAAYyC,GAAZ;AACA,gBAAImB,SAASnB,IAAIoB,IAAJ,CAASA,IAAT,CAAcC,KAA3B,CAFyD,CAEvB;AAClC,gBAAIC,QAAQtB,IAAIoB,IAAJ,CAASA,IAAT,CAAcE,KAA1B,CAHyD,CAGxB;;AAEjCP,uBAAW;AACPO,uBAAOA,KADA;AAEPC,0BAAUJ,MAFH;AAGPvD,uBAAO;AAHA,aAAX;AAKAmD,uBAAWC,kBAAQC,cAAR,CAAuBO,aAAvB,CAAqCT,QAArC,CAAX;;AAEA;AACA,mBAAOA,QAAP;AACH,SAdD,EAcG,UAASU,GAAT,EAAc;AACbnE,oBAAQC,GAAR,CAAY,2BAAZ;AACA;AACAD,oBAAQC,GAAR,CAAYkE,GAAZ;AACA,gBAAIC,OAAOD,IAAIC,IAAf,CAJa,CAIQ;AACrB,gBAAIN,OAAOK,IAAIL,IAAf,CALa,CAKQ;AACrB,gBAAIO,MAAMF,IAAIE,GAAd,CANa,CAMM;AACtB,SArBD,EAqBG,EArBH,EAqBO,EArBP,EAqBW,EArBX,EAqBe,EArBf,EAqBmB,EArBnB;;AAuBAb,aAAKc,iBAAL,CAAuB,YAAU;AAC7BtE,oBAAQC,GAAR,CAAY,OAAZ;;AAEAyD,8BAAQC,cAAR,CAAuBC,YAAvB,CAAoC,SAApC,EAA+C,UAASlB,GAAT,EAAc;AACzD1C,wBAAQC,GAAR,CAAYyC,GAAZ;AACA,oBAAImB,SAASnB,IAAIoB,IAAJ,CAASA,IAAT,CAAcC,KAA3B,CAFyD,CAEvB;AAClC,oBAAIC,QAAQtB,IAAIoB,IAAJ,CAASA,IAAT,CAAcE,KAA1B,CAHyD,CAGxB;;AAEjCP,2BAAW;AACPO,2BAAOA,KADA;AAEPC,8BAAUJ,MAFH;AAGPvD,2BAAO;AAHA,iBAAX;AAKAmD,2BAAWC,kBAAQC,cAAR,CAAuBO,aAAvB,CAAqCT,QAArC,CAAX;;AAEA;AACA,uBAAOA,QAAP;AACH,aAdD,EAcG,UAASU,GAAT,EAAc;AACbnE,wBAAQC,GAAR,CAAY,2BAAZ;AACA;AACAD,wBAAQC,GAAR,CAAYkE,GAAZ;AACA,oBAAIC,OAAOD,IAAIC,IAAf,CAJa,CAIQ;AACrB,oBAAIN,OAAOK,IAAIL,IAAf,CALa,CAKQ;AACrB,oBAAIO,MAAMF,IAAIE,GAAd,CANa,CAMM;AACtB,aArBD,EAqBG,EArBH,EAqBO,EArBP,EAqBW,EArBX,EAqBe,EArBf,EAqBmB,EArBnB;;AAuBA,mBAAOZ,QAAP;AACH,SA3BD;AA4BH,KAtMU;;AAwMXc,iBAAa,uBAAY;AACrB,YAAIC,WAAWC,QAAQ,UAAR,CAAf;AACAzE,gBAAQC,GAAR,CAAY,oBAAZ,EAAkCH,SAASM,WAA3C;AACAJ,gBAAQC,GAAR,CAAY,mBAAZ,EAAiCH,SAAS4E,QAA1C;AACA;;AAEA,YAAI,CAAC5E,SAASM,WAAd,EAA2B;AACvB,mBAAO,CAAC,CAAR;AACH;AACD,YAAI,CAACN,SAAS4E,QAAd,EAAwB;AACpB,mBAAO,CAAC,CAAR;AACH;;AAED;AACA,YAAI,CAACC,OAAOC,QAAP,CAAgBC,cAAjB,IAAmCF,OAAOC,QAAP,CAAgBC,cAAhB,CAA+BC,UAA/B,IAA8C,IAAIC,IAAJ,CAASA,KAAKC,GAAL,EAAT,CAAD,CAAuBC,YAAvB,EAApF,EAA2H;AACvHN,mBAAOC,QAAP,CAAgBC,cAAhB,GAAiC;AAC7BC,4BAAa,IAAIC,IAAJ,CAASA,KAAKC,GAAL,EAAT,CAAD,CAAuBC,YAAvB,EADiB;AAE7BC,0BAAU;AAFmB,aAAjC;AAIAV,qBAASW,sBAAT,CAAgCR,OAAOC,QAAvC;AACH;AACD;AACA,YAAIQ,aAAaC,SAASvF,SAAS4E,QAAT,CAAkBU,UAA3B,CAAjB;AACA,YAAIT,OAAOC,QAAP,IAAmBD,OAAOC,QAAP,CAAgBC,cAAvC,EAAuD;AACnD7E,oBAAQC,GAAR,CAAY,iBAAZ;AACA,gBAAI0E,OAAOC,QAAP,CAAgBC,cAAhB,CAA+BK,QAA/B,CAAwC5B,OAAxC,CAAgD8B,UAAhD,KAA+D,CAAC,CAApE,EAAuE;AACnEpF,wBAAQC,GAAR,CAAY,WAAZ,EAAyBmF,UAAzB;AACA,uBAAO,CAAC,CAAR;AACH;AACJ;AACD;AACA,YAAIT,OAAOD,QAAP,CAAgBY,UAApB,EAAgC;AAC5BtF,oBAAQC,GAAR,CAAY,OAAZ,EAAqB0E,OAAOD,QAAP,CAAgBY,UAArC;AACA,gBAAK,IAAIP,IAAJ,EAAD,CAAaQ,OAAb,KAAyBF,SAASV,OAAOD,QAAP,CAAgBY,UAAhB,CAA2BE,QAApC,CAAzB,GAAyEb,OAAOc,aAAP,CAAqBC,SAAlG,EAA6G;AACzG1F,wBAAQC,GAAR,CAAY,mBAAZ;AACA,uBAAO,CAAC,CAAR;AACH;AACJ;;AAED,YAAIoF,SAASvF,SAAS4E,QAAT,CAAkBiB,UAA3B,MAA2CN,SAAS,KAAT,CAA/C,EAAgE;AAC5DrF,oBAAQC,GAAR,CAAY,QAAZ;AACAD,oBAAQC,GAAR,CAAY,UAAZ,EAAwBmF,UAAxB;AACAT,mBAAOC,QAAP,CAAgBC,cAAhB,CAA+BK,QAA/B,CAAwCU,IAAxC,CAA6CR,UAA7C;AACAZ,qBAASW,sBAAT,CAAgCR,OAAOC,QAAvC;AACA,mBAAO,CAAP;AACH;AACD,YAAIS,SAASvF,SAAS4E,QAAT,CAAkBiB,UAA3B,MAA2CN,SAAS,KAAT,CAA/C,EAAgE;AAC5DrF,oBAAQC,GAAR,CAAY,QAAZ;AACAD,oBAAQC,GAAR,CAAY,UAAZ,EAAwBmF,UAAxB;AACAT,mBAAOC,QAAP,CAAgBC,cAAhB,CAA+BK,QAA/B,CAAwCU,IAAxC,CAA6CR,UAA7C;AACAZ,qBAASW,sBAAT,CAAgCR,OAAOC,QAAvC;AACA,mBAAO,CAAP;AACH;AACD,YAAIS,SAASvF,SAAS4E,QAAT,CAAkBiB,UAA3B,MAA2CN,SAAS,YAAT,CAA/C,EAAuE;AACnErF,oBAAQC,GAAR,CAAY,QAAZ;AACAD,oBAAQC,GAAR,CAAY,UAAZ,EAAwBmF,UAAxB;AACAT,mBAAOC,QAAP,CAAgBC,cAAhB,CAA+BK,QAA/B,CAAwCU,IAAxC,CAA6CR,UAA7C;AACAZ,qBAASW,sBAAT,CAAgCR,OAAOC,QAAvC;AACA,mBAAO,CAAP;AACH;AACD,YAAIS,SAASvF,SAAS4E,QAAT,CAAkBiB,UAA3B,MAA2CN,SAAS,KAAT,CAA/C,EAAgE;AAC5DrF,oBAAQC,GAAR,CAAY,MAAZ;AACAD,oBAAQC,GAAR,CAAY,UAAZ,EAAwBmF,UAAxB;AACAT,mBAAOC,QAAP,CAAgBC,cAAhB,CAA+BK,QAA/B,CAAwCU,IAAxC,CAA6CR,UAA7C;AACAZ,qBAASW,sBAAT,CAAgCR,OAAOC,QAAvC;AACA,mBAAO,CAAP;AACH;AACD,eAAO,CAAC,CAAR;AACH,KA5QU;;AA8QXiB,iBAAa,uBAAY;AACrB,eAAO/F,SAAS4E,QAAhB;AACH,KAhRU;;AAkRX9D,kBAAc,wBAAY;AACtB,YAAIkF,QAAQ,EAAZ;AACAvE,WAAGwE,MAAH,CAAU,UAACC,QAAD,EAAc;AACpBhG,oBAAQC,GAAR,CAAY,wEAAZ,EAAsF+F,QAAtF;AACA,gBAAIA,SAAS5F,WAAb,EAA0B;AACtBN,yBAASM,WAAT,GAAuB4F,SAAS5F,WAAhC;AACH;;AAEDuE,mBAAOD,QAAP,GAAkB,IAAlB;AACA,gBAAIsB,SAAS1F,KAAb,EAAoB;AAChBR,yBAAS4E,QAAT,GAAoBsB,SAAS1F,KAA7B;AACAqE,uBAAOD,QAAP,GAAkB5E,SAAS4E,QAA3B;AACA1E,wBAAQC,GAAR,CAAY,kBAAZ,EAAgC0E,OAAOD,QAAvC;AACH;;AAED;;;;;;;;;;;;;;;;;;AAkBAhB,8BAAQuC,IAAR,CAAaC,KAAb,CAAmB,eAAO;AACtBlG,wBAAQC,GAAR,CAAYyC,GAAZ;AACA,oBAAIoB,OAAOpB,IAAIoB,IAAf;AACA,oBAAIA,KAAKqC,oBAAT,EAA+B;AAC3B;AACA;AACA;AACAzC,sCAAQuC,IAAR,CAAaG,iBAAb,CAA+B,MAA/B,EAAuC,QAAvC,EAAiD,EAAjD,EAAqD;AACjDpE,8BAAM,CAD2C;AAEjDC,6BAAK,CAF4C;AAGjDC,+BAAO,GAH0C;AAIjDC,gCAAQ,IAJyC;AAKjDkE,oCAAY,EALqC;AAMjDC,yCAAiB,WANgC;AAOjDC,+BAAO,WAP0C;AAQjDC,mCAAW,QARsC;AASjDC,kCAAU,EATuC;AAUjDC,sCAAc;AAVmC,qBAArD,EAWG,eAAO;AACN1G,gCAAQC,GAAR,CAAYyC,GAAZ;AACA,4BAAIA,IAAI0B,IAAJ,IAAY,CAAhB,EAAmB;AACf0B,oCAAQpD,IAAIoB,IAAZ;AACA;AACAgC,kCAAMa,KAAN,CAAY,UAACC,IAAD,EAAU;AAClBlD,kDAAQuC,IAAR,CAAaY,SAAb,CAAuBD,IAAvB,EAA6B,eAAO;AAChC;AACA;AACA;AACA;AACA;AACA5G,4CAAQC,GAAR,CAAY,MAAZ;AACAyD,sDAAQC,cAAR,CAAuBmD,UAAvB,CAAkCd,QAAlC,EAA4C,eAAO;AAC/C,4CAAIe,SAASrE,IAAIoB,IAAJ,CAASiD,MAAtB,CAD+C,CACjB;AAC9BrD,0DAAQsD,IAAR,CAAaC,oBAAb,CAAkCjB,QAAlC,EAA4C,CAA5C,EAA+C,eAAO;AAClDhG,oDAAQC,GAAR,CAAYyC,GAAZ;AACA,gDAAIzB,OAAOyB,IAAIoB,IAAJ,CAAS7C,IAApB,CAFkD,CAExB;AAC7B,yCAHD,EAGG,eAAO;AACN,gDAAIkD,IAAIL,IAAJ,CAASM,IAAT,IAAiB,KAArB,EAA4B;AACxBpE,wDAAQC,GAAR,CAAY,wBAAZ;AACH;AACJ,yCAPD;AAQH,qCAVD,EAUG,eAAO;AACND,gDAAQC,GAAR,CAAYkE,GAAZ;AACH,qCAZD;AAaA;AACA2B,0CAAMtD,IAAN;AACH,iCAtBD,EAsBG,eAAO;AACNxC,4CAAQC,GAAR,CAAYkE,GAAZ,EADM,CACW;AACpB,iCAxBD;AAyBH,6BA1BD;AA2BH,yBA9BD,MA8BO,IAAIzB,IAAI0B,IAAJ,IAAY,CAAhB,EAAmB;AACtB;AACA;AACA;AACA;AACAV,8CAAQC,cAAR,CAAuBmD,UAAvB,CAAkCd,QAAlC,EAA4C,eAAO;AAC/C,oCAAIe,SAASrE,IAAIoB,IAAJ,CAASiD,MAAtB,CAD+C,CACjB;AAC9BrD,kDAAQsD,IAAR,CAAaC,oBAAb,CAAkCjB,QAAlC,EAA4C,CAA5C,EAA+C,eAAO;AAClDhG,4CAAQC,GAAR,CAAYyC,GAAZ;AACA,wCAAIzB,OAAOyB,IAAIoB,IAAJ,CAAS7C,IAApB,CAFkD,CAExB;AAC7B,iCAHD,EAGG,eAAO;AACN,wCAAIkD,IAAIL,IAAJ,CAASM,IAAT,IAAiB,KAArB,EAA4B;AACxBpE,gDAAQC,GAAR,CAAY,wBAAZ;AACH;AACJ,iCAPD;AAQH,6BAVD,EAUG,eAAO;AACND,wCAAQC,GAAR,CAAYkE,GAAZ;AACH,6BAZD;AAaH;AAEJ,qBA/DD,EA+DG,eAAO,CAET,CAjED;AAkEH,iBAtED,MAsEO;AACH;AACA;AACA;AACA;AACA;AACA;AACAT,sCAAQC,cAAR,CAAuBmD,UAAvB,CAAkCd,QAAlC,EAA4C,eAAO;AAC/C,4BAAIe,SAASrE,IAAIoB,IAAJ,CAASiD,MAAtB,CAD+C,CACjB;AAC9BrD,0CAAQsD,IAAR,CAAaC,oBAAb,CAAkCjB,QAAlC,EAA4C,CAA5C,EAA+C,eAAO;AAClDhG,oCAAQC,GAAR,CAAYyC,GAAZ;AACA,gCAAIzB,OAAOyB,IAAIoB,IAAJ,CAAS7C,IAApB,CAFkD,CAExB;AAC7B,yBAHD,EAGG,eAAO;AACN,gCAAIkD,IAAIL,IAAJ,CAASM,IAAT,IAAiB,KAArB,EAA4B;AACxBpE,wCAAQC,GAAR,CAAY,wBAAZ;AACH;AACJ,yBAPD;AAQH,qBAVD,EAUG,eAAO;AACND,gCAAQC,GAAR,CAAYkE,GAAZ;AACH,qBAZD;AAaH;AACJ,aA9FD,EA8FG,eAAO;AACNnE,wBAAQC,GAAR,CAAYkE,GAAZ,EADM,CACW;AACpB,aAhGD;AAkGH,SAjID;AAkIH,KAtZU;;AAwZX+C,kBAAc,wBAAY;AACtB3F,WAAG4F,MAAH,CAAU,UAACzE,GAAD,EAAS;AACf1C,oBAAQC,GAAR,CAAY,sEAAZ,EAAoFyC,GAApF;AACAgB,8BAAQC,cAAR,CAAuByD,UAAvB;AACH,SAHD;AAIH,KA7ZU;;AA+ZX;AACAC,eAAW,mBAAUC,QAAV,EAAoBC,eAApB,EAAqCC,YAArC,EAAmDC,UAAnD,EAA+DC,aAA/D,EAA8E;AACrF,aAAKC,YAAL,CAAkBF,UAAlB,EAA8B,OAA9B;;AAEA,YAAIG,OAAO,IAAX;AACAlE,0BAAQC,cAAR,CAAuBC,YAAvB,CAAoC,SAApC,EAA+C,UAASlB,GAAT,EAAc;AACzD1C,oBAAQC,GAAR,CAAY,8BAAZ,EAA4CyC,GAA5C;AACA,gBAAImB,SAASnB,IAAIoB,IAAJ,CAASA,IAAT,CAAcC,KAA3B,CAFyD,CAEvB;AAClC,gBAAIC,QAAQtB,IAAIoB,IAAJ,CAASA,IAAT,CAAcE,KAA1B,CAHyD,CAGxB;;AAEjC,gBAAIP,WAAW;AACXO,uBAAOA,KADI;AAEXC,0BAAUJ,MAFC;AAGXvD,uBAAO,EAHI;AAIX0C,yBAAS,iBAAS6E,GAAT,EAAc;AACnB7H,4BAAQC,GAAR,CAAY,WAAZ,EAAyB4H,GAAzB;AACA7H,4BAAQC,GAAR,CAAY,gBAAZ;AACA6H,yBAAKC,IAAL,CAAU,EAAV,EAAa,4CAA4CC,KAAKC,SAAL,CAAeJ,GAAf,CAAzD;AACA,wBAAI,EAAEA,IAAIK,YAAJ,IAAoBL,IAAIK,YAAJ,CAAiBC,MAAjB,GAA0B,CAAhD,CAAJ,EAAwD;AACpD,4BAAIX,YAAJ,EAAkB;AACdA,yCAAa,MAAb;AACH;AACD;AACH;AACDjG,uBAAGqC,YAAH,CAAgB;AACZxD,qCAAayH,IAAIK,YAAJ,CAAiB,CAAjB,CADD;AAEZlF,iCAAS,iBAAUoF,MAAV,EAAkB;AACvB,gCAAIA,MAAJ,EAAY;AACR;AACA,oCAAIlH,KAAKkH,OAAOlH,EAAhB;AACA,oCAAImH,gBAAgBD,OAAOC,aAA3B;AACA,oCAAI;AACA,wCAAIC,eAAeV,KAAKW,OAAL,CAAaT,KAAKU,QAAL,CAAcC,kBAA3B,EAA+CvH,EAA/C,EAAmDmH,aAAnD,CAAnB;AACArI,4CAAQC,GAAR,CAAYqI,YAAZ;AACA,wCAAIA,YAAJ,EAAkB;AACdA,uDAAeN,KAAKU,KAAL,CAAWJ,YAAX,CAAf;AACAR,6CAAKC,IAAL,CAAU,EAAV,EAAa,qDAAqDC,KAAKC,SAAL,CAAeK,YAAf,CAAlE;AACA,4CAAIK,SAAS,EAAb;AACA;AACA,4CAAIL,aAAaM,OAAjB,EAA0B;AACtBD,qDAASL,aAAaM,OAAtB;AACH;AACD5I,gDAAQC,GAAR,CAAY,QAAZ,EAAsBsH,eAAtB,EAAuCoB,MAAvC;AACA,4CAAIpB,mBAAmB,IAAvB,EAA6B;AACzBA,4DAAgBoB,MAAhB,EAAwBd,IAAIK,YAAJ,CAAiB,CAAjB,CAAxB;AACH;AACJ,qCAZD,MAYO;AACH,4CAAIV,YAAJ,EAAkB;AACdA;AACH;AACJ;AACJ,iCApBD,CAoBE,OAAOnF,KAAP,EAAc;AACZrC,4CAAQC,GAAR,CAAY,aAAZ,EAA2B4H,IAAIK,YAAJ,CAAiB,CAAjB,CAA3B;AACA,wCAAIX,mBAAmB,IAAvB,EAA6B;AACzBA,wDAAgBM,IAAIK,YAAJ,CAAiB,CAAjB,CAAhB,EAAqCL,IAAIK,YAAJ,CAAiB,CAAjB,CAArC;AACH;AACJ;AACJ;AACJ,yBAlCW;AAmCZ9E,8BAAM,gBAAW;AACb,gCAAIoE,YAAJ,EAAkB;AACdA,6CAAa,QAAb;AACH;AACJ,yBAvCW;AAwCZjE,kCAAU,oBAAW;AACjB;AACA;AACA;AACH;AA5CW,qBAAhB;AA8CH,iBA5DU;AA6DXH,sBAAM,cAASwD,IAAT,EAAe;AACjB5G,4BAAQC,GAAR,CAAY,QAAZ,EAAsBuH,YAAtB;AACA,wBAAIA,YAAJ,EAAkB;AACdA,qCAAa,QAAb;AACH;AACJ;AAlEU,aAAf;AAoEA;AACAM,iBAAKC,IAAL,CAAU,EAAV,EAAa,iDAAiDC,KAAKC,SAAL,CAAexE,QAAf,CAA9D;AACAmE,iBAAKiB,eAAL,CAAqBpF,QAArB;AACH,SA5ED,EA4EG,UAASU,GAAT,EAAc;AACb;AACAnE,oBAAQC,GAAR,CAAYkE,GAAZ;AACA,gBAAIC,OAAOD,IAAIC,IAAf,CAHa,CAGQ;AACrB,gBAAIN,OAAOK,IAAIL,IAAf,CAJa,CAIQ;AACrB,gBAAIO,MAAMF,IAAIE,GAAd,CALa,CAKM;AACtB,SAlFD,EAkFG,EAlFH,EAkFO,EAlFP,EAkFW,EAlFX,EAkFe,EAlFf,EAkFmB,EAlFnB;AAqFH,KAzfU;;AA2fXkE,aAAS,iBAAUpF,GAAV,EAAejC,EAAf,EAAmB4H,OAAnB,EAA4B;AACjC,YAAIC,SAAStE,QAAQ,QAAR,CAAb;;AAEAqE,kBAAU,IAAIE,MAAJ,CAAWF,OAAX,EAAoB,QAApB,CAAV;AACA5H,aAAK,IAAI8H,MAAJ,CAAW9H,EAAX,EAAe,QAAf,CAAL;AACAiC,cAAM,IAAI6F,MAAJ,CAAW7F,GAAX,EAAgB,QAAhB,CAAN;AACA,YAAI8F,WAAWF,OAAOG,gBAAP,CAAwB,aAAxB,EAAuC/F,GAAvC,EAA4CjC,EAA5C,CAAf;AACA,YAAIiI,UAAUF,SAASG,MAAT,CAAgBN,OAAhB,EAAyB,QAAzB,EAAmC,MAAnC,CAAd;AACAK,mBAAWF,SAASI,KAAT,CAAe,MAAf,CAAX;AACA,eAAOF,OAAP;AACH,KArgBU;;AAugBXjD,WAAO,eAAUpD,QAAV,EAAoB;AACvBvB,WAAG2E,KAAH,CAASpD,QAAT;AACH,KAzgBU;;AA2gBXwG,iBAAa,qBAAUtI,QAAV,EAAoBC,IAApB,EAA0B;;AAEnCnB,iBAASU,WAAT,GACI,cAAcV,SAASgB,QAAT,CAAkBC,QAAhC,GAA2C,GAA3C,GACA,WADA,GACcC,QADd,GACyB,GADzB,GAEA,OAFA,GAEUC,IAFV,GAEiB,GAFjB,GAGA,SAHA,GAGYnB,SAASgB,QAAT,CAAkBM,MAH9B,GAGuC,GAHvC,GAIA,YAJA,GAIetB,SAASgB,QAAT,CAAkBO,SALrC;;AAOArB,gBAAQC,GAAR,CAAY,wBAAZ,EAAsCH,SAASU,WAA/C;AACH,KArhBU;;AAuhBX;AACAL,0BAAsB,gCAAY;AAC9B,eAAOoB,GAAGpB,oBAAH,EAAP;AACH,KA1hBU;;AA4hBXM,2BAAuB,+BAAU8I,SAAV,EAAqB;AACxChI,WAAGiI,eAAH,CAAmB;AACfC,6BAAiBF,SADF;AAEfvG,qBAAS,mBAAM;AACXlD,yBAAS4J,kBAAT,GAA8BH,SAA9B;AACH;AAJc,SAAnB;AAMH,KAniBU;;AAqiBX3F,kBAAc,sBAAUiE,GAAV,EAAe;AACzB,eAAOtG,GAAGqC,YAAH,CAAgBiE,GAAhB,CAAP;AACH,KAviBU;;AAyiBX8B,sBAAkB,4BAAY;AAC1B,eAAO,KAAKrJ,KAAZ;AACH,KA3iBU;;AA6iBXI,mBAAe,yBAAY;AACvBV,gBAAQC,GAAR,CAAY,aAAZ;AACAsB,WAAGb,aAAH;AACH,KAhjBU;AAijBXkJ,mBAAe,yBAAY;AACvB5J,gBAAQC,GAAR,CAAY,aAAZ;AACAsB,WAAGqI,aAAH;AACH,KApjBU;AAqjBXtF,uBAAmB,2BAAUxB,QAAV,EAAoB;AACnC9C,gBAAQC,GAAR,CAAY,YAAZ;AACAsB,WAAG+C,iBAAH,CAAqBxB,QAArB;AACH,KAxjBU;AAyjBX+F,qBAAiB,yBAAUgB,MAAV,EAAkB;AAC/B7J,gBAAQC,GAAR,CAAY,KAAZ,EAAmB4J,MAAnB;AACAtI,WAAGsH,eAAH,CAAmBgB,MAAnB;AACH,KA5jBU;;AA8jBXC,wBAAoB,8BAAY;AAC5B,eAAOC,OAAOC,kBAAP,CAA0B;AAC7BC,eAAG,CAD0B;AAE7BC,eAAG,MAAMH,OAAO5H,MAAb,GAAsB,MAAM,GAAN,GAAY4H,OAAO7H,KAFf;AAG7BA,mBAAO6H,OAAO7H,KAHe;AAI7BC,oBAAQ,MAAM4H,OAAO7H,KAJQ;AAK7BiI,uBAAW,GALkB;AAM7BC,wBAAY;AANiB,SAA1B,CAAP;AAQH,KAvkBU;;AAykBXC,+BAA2B,qCAAY;AACnC,eAAON,OAAOC,kBAAP,CAA0B;AAC7BC,eAAG,CAD0B;AAE7BC,eAAG,MAAMH,OAAO5H,MAAb,GAAsB,IAAI4H,OAAO7H,KAFP;AAG7BA,mBAAO6H,OAAO7H,KAHe;AAI7BC,oBAAQ,MAAM4H,OAAO7H,KAJQ;AAK7BiI,uBAAW,GALkB;AAM7BC,wBAAY;AANiB,SAA1B,CAAP;AAQH,KAllBU;;AAolBXE,mBAAe,yBAAY;AACvB,eAAOP,OAAOC,kBAAP,CAA0B,EAA1B,CAAP;AACH,KAtlBU;;AAylBXO,oBAAgB,0BAAY;AACxB,YAAI;AACA,gBAAIC,kBAAkBjJ,GAAGkJ,kBAAH,EAAtB;AACA,gBAAIpG,MAAM;AACNqG,sBAAM;AADA,aAAV;AAGA,gBAAI5K,SAAS4J,kBAAb,EAAiC;AAC7BrF,oBAAIjE,WAAJ,GAAkBN,SAASM,WAA3B;AACH;AACDJ,oBAAQC,GAAR,CAAYoE,GAAZ;;AAEAmG,4BAAgBG,WAAhB,CAA4BtG,GAA5B;AACH,SAXD,CAWE,OAAOhC,KAAP,EAAc,CAEf;AACJ,KAxmBU;;AA0mBXuI,uBAAmB,2BAAUf,MAAV,EAAkB;AACjC,YAAI;AACA;AACA,gBAAIW,kBAAkBjJ,GAAGkJ,kBAAH,EAAtB;AACA,gBAAIpG,MAAM;AACNqG,sBAAM,eADA;AAENG,uBAAOhB,OAAOgB,KAFR;AAGN3I,uBAAO2H,OAAOiB,IAAP,CAAY5I,KAHb;AAINC,wBAAQ0H,OAAOiB,IAAP,CAAY3I;AAJd,aAAV;AAMA,gBAAIrC,SAAS4J,kBAAb,EAAiC;AAC7BrF,oBAAIjE,WAAJ,GAAkBN,SAASM,WAA3B;AACH;AACD;;AAEAoK,4BAAgBG,WAAhB,CAA4BtG,GAA5B;AACA,gBAAIwF,OAAO/G,QAAX,EAAqB;AACjB+G,uBAAO/G,QAAP,CAAgB,IAAhB;AACH;AACJ,SAlBD,CAkBE,OAAOT,KAAP,EAAc;AACZ;AACH;AACJ,KAhoBU;;AAkoBX0I,mBAAe,uBAAUlB,MAAV,EAAkB;AAC7B,YAAI;AACA,gBAAIW,kBAAkBjJ,GAAGkJ,kBAAH,EAAtB;AACA,gBAAIpG,MAAM;AACNqG,sBAAM,eADA;AAENxI,uBAAO2H,OAAOiB,IAAP,CAAY5I,KAFb;AAGNC,wBAAQ0H,OAAOiB,IAAP,CAAY3I;AAHd,aAAV;AAKA,gBAAIrC,SAAS4J,kBAAb,EAAiC;AAC7BrF,oBAAIjE,WAAJ,GAAkBN,SAASM,WAA3B;AACH;AACDJ,oBAAQC,GAAR,CAAYoE,GAAZ;;AAEAmG,4BAAgBG,WAAhB,CAA4BtG,GAA5B;AACA,gBAAIwF,OAAO/G,QAAX,EAAqB;AACjB+G,uBAAO/G,QAAP,CAAgB,IAAhB;AACH;AACJ,SAhBD,CAgBE,OAAOT,KAAP,EAAc,CAEf;AACJ,KAtpBU;;AAwpBX2I,kBAAc,sBAAUnB,MAAV,EAAkB;AAAA;;AAE5B,YAAIoB,SAASxG,QAAQ,QAAR,CAAb;AACA;AACA,YAAIV,QAAQkH,OAAOC,cAAP,CAAsBvG,OAAOwG,WAA7B,CAAZ;AACA,aAAK9D,SAAL,CAAe,gDAAgDtD,KAA/D,EAAsE,UAAC6E,OAAD,EAAUxI,WAAV,EAA0B;AACxFJ,oBAAQC,GAAR,CAAY,6BAAZ,EAA2CG,WAA3C;AACA;AACA,gBAAI,CAACA,WAAL,EAAkB;AACd,oBAAIyJ,OAAO/G,QAAX,EAAqB;AACjB+G,2BAAO/G,QAAP,CAAgB,QAAhB;AACH;AACJ,aAJD,MAIO;AACH;AACA,oBAAI;AACA,wBAAI0H,kBAAkBjJ,GAAGkJ,kBAAH,EAAtB;AACA,wBAAIpG,MAAM;AACNqG,8BAAM,cADA;AAENxI,+BAAO2H,OAAOiB,IAAP,CAAY5I,KAFb;AAGNC,gCAAQ0H,OAAOiB,IAAP,CAAY3I,MAHd;AAIN/B,qCAAaA;AAJP,qBAAV;AAMAJ,4BAAQC,GAAR,CAAYoE,GAAZ;AACAmG,oCAAgBG,WAAhB,CAA4BtG,GAA5B;AACA,wBAAIwF,OAAO/G,QAAX,EAAqB;AACjB+G,+BAAO/G,QAAP,CAAgB1C,WAAhB;AACA,8BAAKA,WAAL,GAAmBgL,SAAnB;AACH;AACJ,iBAdD,CAcE,OAAO/I,KAAP,EAAc,CAEf;AACJ;AACJ,SA3BL,EA4BI,YAAM;AACF;AACA,gBAAIwH,OAAO/G,QAAX,EAAqB;AACjB+G,uBAAO/G,QAAP,CAAgB,QAAhB;AACH;AACJ,SAjCL,EAiCO,KAjCP;AAkCA;AACA;AACA;;;;;;;;;;;;;;AAcH,KA/sBU;;AAitBX;AACAuI,kBAAc,sBAAUxB,MAAV,EAAkB;AAC5B,YAAI;AACA,gBAAIW,kBAAkBjJ,GAAGkJ,kBAAH,EAAtB;AACA,gBAAIpG,MAAM;AACNqG,sBAAM,cADA;AAENxI,uBAAO2H,OAAOiB,IAAP,CAAY5I,KAFb;AAGNC,wBAAQ0H,OAAOiB,IAAP,CAAY3I;AAHd,aAAV;AAKA,gBAAIrC,SAAS4J,kBAAb,EAAiC;AAC7BrF,oBAAIjE,WAAJ,GAAkBN,SAASM,WAA3B;AACH;AACDJ,oBAAQC,GAAR,CAAYoE,GAAZ;;AAEAmG,4BAAgBG,WAAhB,CAA4BtG,GAA5B;AACA,gBAAIwF,OAAO/G,QAAX,EAAqB;AACjB+G,uBAAO/G,QAAP,CAAgB,IAAhB;AACH;AACJ,SAhBD,CAgBE,OAAOT,KAAP,EAAc,CAAE;AACrB,KApuBU;;AAuuBX;AACAiJ,eAAW,mBAAUzB,MAAV,EAAkB;AACzB,YAAI;AACA,gBAAIW,kBAAkBjJ,GAAGkJ,kBAAH,EAAtB;AACA,gBAAIpG,MAAM;AACNqG,sBAAM,WADA;AAENxI,uBAAO2H,OAAOiB,IAAP,CAAY5I,KAFb;AAGNC,wBAAQ0H,OAAOiB,IAAP,CAAY3I;AAHd,aAAV;AAKA,gBAAIrC,SAAS4J,kBAAb,EAAiC;AAC7BrF,oBAAIjE,WAAJ,GAAkBN,SAASM,WAA3B;AACH;AACDJ,oBAAQC,GAAR,CAAY,YAAZ,EAA0BoE,GAA1B;;AAEAmG,4BAAgBG,WAAhB,CAA4BtG,GAA5B;AACA,gBAAIwF,OAAO/G,QAAX,EAAqB;AACjB+G,uBAAO/G,QAAP,CAAgB,IAAhB;AACH;AACJ,SAhBD,CAgBE,OAAOT,KAAP,EAAc,CAAE;AACrB,KA1vBU;;AA4vBXsF,kBAAc,sBAAUF,UAAV,EAAsBxD,QAAtB,EAAgC;AAC1CnE,iBAASU,WAAT,GACI,cAAcV,SAASgB,QAAT,CAAkBC,QAAhC,GAA2C,GAA3C,GACA,aADA,GACgB+G,KAAKU,QAAL,CAAc+C,MAD9B,GACuC,GADvC,GAEA,aAFA,GAEgBzD,KAAK0D,UAAL,CAAgBC,MAAhB,GAAyB,KAFzC,GAEiDhE,UAFjD,GAE8D,GAF9D,GAGA,YAHA,GAGexD,QAJnB;AAKAjE,gBAAQC,GAAR,CAAYH,SAASU,WAArB;AACH,KAnwBU;;AAqwBX;;;;;;;;;;;;;AAaAyC,yBAAqB,6BAAU4G,MAAV,EAAkB;AACnC7J,gBAAQC,GAAR,CAAY,sBAAZ,EAAoC4J,MAApC;AACA,YAAI;AACAtI,eAAG0B,mBAAH,CAAuB4G,MAAvB;AACH,SAFD,CAEE,OAAOxH,KAAP,EAAc,CAEf;AACJ,KAzxBU;;AA6xBX;;;;;;;;AAQAqJ,eAAW,mBAAU1K,QAAV,EAAoBC,IAApB,EAA0B6B,QAA1B,EAAoC;AAC3C,YAAI,OAAOvB,EAAP,KAAc,WAAlB,EAA+B;AAC/B;AACA,YAAI,CAACoD,OAAOC,QAAZ,EAAsB;AAClB,gBAAIqG,SAASxG,QAAQ,QAAR,CAAb;AACAwG,mBAAOU,aAAP;AACH;AACD,YAAIhH,OAAOC,QAAP,IAAmB,CAACD,OAAOC,QAAP,CAAgBgH,UAAxC,EAAoD;AAChDjH,mBAAOC,QAAP,CAAgBgH,UAAhB,GAA6B,CAA7B;AACH;;AAED,YAAI/D,MAAM;AACN3E,wBAAY,CAAC;AACLC,qBAAK,UADA;AAELb,uBAAOtB,WAAW;AAFb,aAAD,EAIR;AACImC,qBAAK,MADT;AAEIb,uBAAOrB,OAAO;AAFlB,aAJQ,EAQR;AACIkC,qBAAK,WADT;AAEIb,uBAAOqC,OAAOC,QAAP,CAAgBiH,SAAhB,GAA4B;AAFvC,aARQ,EAYR;AACI1I,qBAAK,YADT;AAEIb,uBAAOqC,OAAOC,QAAP,CAAgBgH,UAAhB,GAA6B;AAFxC,aAZQ,CADN;AAkBN5I,qBAASF;AAlBH,SAAV;AAoBA9C,gBAAQC,GAAR,CAAY,eAAZ,EAA6B4H,GAA7B;AACA,aAAK5E,mBAAL,CAAyB4E,GAAzB;AACA,aAAKyB,WAAL,CAAiBtI,QAAjB,EAA2BC,IAA3B;AACH,KAv0BU;AAw0BX6K,eAAW,mBAAUjC,MAAV,EAAkB;AACzB;AACA;AACA;AACA;AACA;AACH,KA90BU;AA+0BX;;;;;;;;AAQAkC,gBAAY,oBAAUlC,MAAV,EAAkB;AAC1BtI,WAAGyK,YAAH,CAAgBnC,MAAhB;AACH,KAz1BU;;AA21BX;;;;;;;;AAQAoC,eAAW,mBAAUpC,MAAV,EAAkB;AACzBtI,WAAG2K,WAAH,CAAerC,MAAf;AACH,KAr2BU;AAs2BXsC,UAAM,gBAAY;AACd5K,WAAG6K,eAAH,CAAmB;AACfpJ,qBAAS,iBAACN,GAAD,EAAS;AACd1C,wBAAQC,GAAR,CAAY,YAAZ,EAA0ByC,GAA1B;AACH;AAHc,SAAnB;AAKH,KA52BU;;AA82BX2J,mBAAe,yBAAY;AACvB,eAAO9K,GAAGC,iBAAH,EAAP;AACH;;AAh3BU,CAAf,EAHA;;;AAu3BA8K,OAAOC,OAAP,GAAiBzM,QAAjB","file":"wxAPI.js","sourceRoot":"../../../../../assets/Scripts/common","sourcesContent":["//import dataStatistics from '../lib_dataStatistics/dataStatistics.js';\nimport gamesdk from '../sdk_readygo/gamesdk';\n\nvar WXGlobal = {\n\n\n    initOnEnter: function () {\n        console.log('get launch options')\n        var options = this.getLaunchOptionsSync();\n        console.log('launch options', options);\n        this.shareTicket = options.shareTicket;\n        this.scene = options.scene;\n        this.query = options.query;\n        this.isSticky = options.isSticky;\n        this.queryString = '';\n\n        this.setShareTicketEnabled(true);\n        this.showShareMenu();\n        // this.getAuth();\n        this.registShare();\n        this.registOnShow();\n        this.registOnError();\n\n        this.userInfo = {\n            nickName: '不愿透露姓名的老王',\n            maxscore: 0,\n            gold: 0,\n            iv: '',\n            signature: '',\n            gender: 1,\n            avatarUrl: 'res/raw-assets/resources/textures/gridItem/rank_1.png'\n        }\n\n        try {\n            var sysInfo = wx.getSystemInfoSync();\n            console.log('sysinfo: ', sysInfo, sysInfo.SDKVersion.replace(/\\./g, \"\"));\n            if (sysInfo.SDKVersion.slice(0, 5).replace(/\\./g, \"\") >= 203) {\n                this.GameClubButton = wx.createGameClubButton({\n                    icon: 'green',\n                    style: {\n                        left: 8,\n                        top: 60,\n                        width: 40,\n                        height: 40\n                    }\n                })\n\n                this.showGameClub(false);\n            }\n        } catch (error) {\n\n        }\n\n        /*\n        var sysInfo = wx.getSystemInfoSync();\n        console.log('sysinfo: ', sysInfo, sysInfo.SDKVersion.replace(/\\./g, \"\"));\n        if (sysInfo.SDKVersion.slice(0, 5).replace(/\\./g, \"\") >= 203) {\n            this.GameClubButton = wx.createGameClubButton({\n                icon: 'green',\n                style: {\n                    left: 20,\n                    top: 20,\n                    width: 40,\n                    height: 40\n                }\n            })\n        }*/\n\n        //this.showGameClub();\n    },\n\n    showGameClub: function (value) {\n        if (!this.GameClubButton) return;\n\n        if (value) {\n            console.log('显示游戏圈按钮');\n            this.GameClubButton.show()\n        } else {\n            console.log('隐藏游戏圈按钮');\n            this.GameClubButton.hide()\n        }\n    },\n\n    registOnError: function () {\n        wx.onError((res) => {\n            console.log('wx error:' + res.message + '\\nstack:\\n' + res.stack);\n        })\n    },\n\n    getAuth: function (callback) {\n        wx.getUserInfo({\n            success: function (res) {\n                // iOS 和 Android 对于拒绝授权的回调 errMsg 没有统一，需要做一下兼容处理\n                console.log(res);\n                WXGlobal.userInfo = res.userInfo\n                WXGlobal.setUserCloudStorage({\n                    KVDataList: [{\n                            key: 'name',\n                            value: res.userInfo.nickName\n                        },\n                        {\n                            key: 'gender',\n                            value: res.userInfo.gender + ''\n                        },\n                        {\n                            key: 'avatarUrl',\n                            value: res.userInfo.avatarUrl\n                        },\n                        {\n                            key: 'iv',\n                            value: res.iv\n                        },\n                        {\n                            key: 'signature',\n                            value: res.signature\n                        },\n                    ],\n                    success: function () {\n                        console.log('set User Cloud Storage success');\n                    }\n                })\n            },\n            fail: function (res) {\n                // iOS 和 Android 对于拒绝授权的回调 errMsg 没有统一，需要做一下兼容处理\n                if (res.errMsg.indexOf('auth deny') > -1 || res.errMsg.indexOf('auth denied') > -1) {\n                    // 处理用户拒绝授权的情况\n                    console.log(res);\n                    WXGlobal.userInfo = {\n                        nickName: '不愿透露姓名的老王',\n                        maxscore: 0,\n                        gold: 0,\n                        iv: '',\n                        signature: '',\n                        gender: 1,\n                        avatarUrl: 'res/raw-assets/resources/textures/gridItem/rank_1.png'\n                    }\n                    console.log('set UserInfo default');\n                }\n            },\n            complete: function () {\n                if (callback) {\n                    callback();\n                }\n            }\n        })\n    },\n\n    registShare: function () {\n        var self = this;\n        var shareObj;\n        gamesdk.dataStatistics.getShareInfo('regular', function(res) {\n            console.log(res);\n            let imgUrl = res.data.data.image; // 分享图片路径\n            let title = res.data.data.title; // 分享文字信息\n\n            shareObj = {\n                title: title,\n                imageUrl: imgUrl,\n                query: '?param1=abc&param2=efg',\n            };\n            shareObj = gamesdk.dataStatistics.onShareAppMsg(shareObj);\n\n            // self.onShareAppMessage(shareObj);\n            return shareObj;\n        }, function(err) {\n            console.log(\"onShareAppMessage :   err\");\n            //注意:当小游戏处于断网时,或者其他错误时\n            console.log(err)\n            let code = err.code; // 错误码10110\n            let data = err.data; // {errMsg: \"request:fail \"}\n            let msg = err.msg; // \"request fail\"\n        }, '', '', '', '', '');\n\n        self.onShareAppMessage(function(){\n            console.log(\"右上角转发\");\n\n            gamesdk.dataStatistics.getShareInfo('regular', function(res) {\n                console.log(res);\n                let imgUrl = res.data.data.image; // 分享图片路径\n                let title = res.data.data.title; // 分享文字信息\n\n                shareObj = {\n                    title: title,\n                    imageUrl: imgUrl,\n                    query: '?param1=abc&param2=efg',\n                };\n                shareObj = gamesdk.dataStatistics.onShareAppMsg(shareObj);\n\n                // self.onShareAppMessage(shareObj);\n                return shareObj;\n            }, function(err) {\n                console.log(\"onShareAppMessage :   err\");\n                //注意:当小游戏处于断网时,或者其他错误时\n                console.log(err)\n                let code = err.code; // 错误码10110\n                let data = err.data; // {errMsg: \"request:fail \"}\n                let msg = err.msg; // \"request fail\"\n            }, '', '', '', '', '');\n\n            return shareObj\n        });\n    },\n\n    isFromGroup: function () {\n        var ThirdAPI = require('ThirdAPI');\n        console.log('global shareticket', WXGlobal.shareTicket);\n        console.log('WXGlobal helpInfo', WXGlobal.helpInfo);\n        //console.log('比较分享点是否为送宝箱点：', parseInt(WXGlobal.helpInfo.sourceCode), parseInt(WXGlobal.helpInfo.sourceCode) == parseInt(\"3010000400\"));\n\n        if (!WXGlobal.shareTicket) {\n            return -1;\n        }\n        if (!WXGlobal.helpInfo) {\n            return -1;\n        }\n\n        //凌晨兼容判断\n        if (!Global.gameinfo.inviteUserList || Global.gameinfo.inviteUserList.inviteDate != (new Date(Date.now())).toDateString()) {\n            Global.gameinfo.inviteUserList = {\n                inviteDate: (new Date(Date.now())).toDateString(),\n                userList: [],\n            };\n            ThirdAPI.saveFriendGenStoneInfo(Global.gameinfo);\n        }\n        //分享到同一群只能获得一次\n        var inviteCode = parseInt(WXGlobal.helpInfo.inviteCode);\n        if (Global.gameinfo && Global.gameinfo.inviteUserList) {\n            console.log('领取群小卡片判断是否今日领取过');\n            if (Global.gameinfo.inviteUserList.userList.indexOf(inviteCode) != -1) {\n                console.log('该群已经领取过奖励', inviteCode);\n                return -1;\n            }\n        }\n        //额外参数\n        if (Global.helpInfo.extraParam) {\n            console.log('额外参数：', Global.helpInfo.extraParam);\n            if ((new Date()).getTime() - parseInt(Global.helpInfo.extraParam.sendTime) > Global.cdnGameConfig.validTime) {\n                console.log('奖励失效,超过了一小时不能领取奖励');\n                return -1;\n            }\n        }\n\n        if (parseInt(WXGlobal.helpInfo.sourceCode) === parseInt(\"248\")) {\n            console.log('获得清除道具');\n            console.log('该群未领取过奖励', inviteCode);\n            Global.gameinfo.inviteUserList.userList.push(inviteCode);\n            ThirdAPI.saveFriendGenStoneInfo(Global.gameinfo);\n            return 1;\n        }\n        if (parseInt(WXGlobal.helpInfo.sourceCode) === parseInt(\"249\")) {\n            console.log('获得万能道具');\n            console.log('该群未领取过奖励', inviteCode);\n            Global.gameinfo.inviteUserList.userList.push(inviteCode);\n            ThirdAPI.saveFriendGenStoneInfo(Global.gameinfo);\n            return 2;\n        }\n        if (parseInt(WXGlobal.helpInfo.sourceCode) === parseInt(\"3010000300\")) {\n            console.log('获得双倍道具');\n            console.log('该群未领取过奖励', inviteCode);\n            Global.gameinfo.inviteUserList.userList.push(inviteCode);\n            ThirdAPI.saveFriendGenStoneInfo(Global.gameinfo);\n            return 3;\n        }\n        if (parseInt(WXGlobal.helpInfo.sourceCode) === parseInt(\"137\")) {\n            console.log('获得钻石');\n            console.log('该群未领取过奖励', inviteCode);\n            Global.gameinfo.inviteUserList.userList.push(inviteCode);\n            ThirdAPI.saveFriendGenStoneInfo(Global.gameinfo);\n            return 4;\n        }\n        return -1;\n    },\n\n    getHelpInfo: function () {\n        return WXGlobal.helpInfo;\n    },\n\n    registOnShow: function () {\n        var myBtn = {};\n        wx.onShow((showInfo) => {\n            console.log('wx onShow+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++', showInfo);\n            if (showInfo.shareTicket) {\n                WXGlobal.shareTicket = showInfo.shareTicket;\n            }\n\n            Global.helpInfo = null;\n            if (showInfo.query) {\n                WXGlobal.helpInfo = showInfo.query;\n                Global.helpInfo = WXGlobal.helpInfo;\n                console.log('registOnShow----', Global.helpInfo);\n            }\n\n            /*\n            gamesdk.dataStatistics.onShowInfo(res, res1 => {\n                console.log('dataStatistics onShowInfo success: ', res1)\n                var openId = res1.data.openId; // 成功回调返回openId;\n                \n                gamesdk.coin.addUserOpenidMapping(showInfo, 0, res => {\n                    console.log(res);\n                    var gold = res.data.gold; //如果映射成功或者之前已经映射则返回金币\n                }, err => {\n                    if (err.data.code == 40111) {\n                        console.log('没有找到平台openid,之前也没有做过映射');\n                    }\n                })\n                \n            }, err => {\n                console.log(\"%%%%%%%%%%%%%\", err)\n            });*/\n\n            gamesdk.game.login(res => {\n                console.log(res)\n                var data = res.data;\n                if (data.isNeedUpdateUserInfo) {\n                    //需要登录授权 \n                    // dosomething...\n                    //代码示例：\n                    gamesdk.game.createUserInfoBtn('text', '获取用户信息', '', {\n                        left: 0,\n                        top: 0,\n                        width: 640,\n                        height: 1136,\n                        lineHeight: 40,\n                        backgroundColor: '#ffffff00',\n                        color: '#ff000000',\n                        textAlign: 'center',\n                        fontSize: 16,\n                        borderRadius: 4\n                    }, res => {\n                        console.log(res)\n                        if (res.code == 1) {\n                            myBtn = res.data;\n                            //点击刚刚创建的用户按钮,传点击信息\n                            myBtn.onTap((info) => {\n                                gamesdk.game.authorize(info, res => {\n                                    //授权成功,返回登录信息\n                                    // dosomething...\n                                    // var userInfo = data.userInfo;\n                                    // var sessionId = data.sessionId;\n                                    // var openId = data.openId;\n                                    console.log('授权成功')\n                                    gamesdk.dataStatistics.onShowInfo(showInfo, res => {\n                                        var openId = res.data.openId; // 成功回调返回openId;\n                                        gamesdk.coin.addUserOpenidMapping(showInfo, 0, res => {\n                                            console.log(res);\n                                            var gold = res.data.gold; //如果映射成功或者之前已经映射则返回金币\n                                        }, err => {\n                                            if (err.data.code == 40111) {\n                                                console.log('没有找到平台openid,之前也没有做过映射');\n                                            }\n                                        })\n                                    }, err => {\n                                        console.log(err)\n                                    })\n                                    //隐藏按钮\n                                    myBtn.hide()\n                                }, err => {\n                                    console.log(err) //打印错误回调\n                                })\n                            })\n                        } else if (res.code == 0) {\n                            //授权成功,返回登录信息\n                            // var userInfo = data.userInfo;\n                            // var sessionId = data.sessionId;\n                            // var openId = data.openId;\n                            gamesdk.dataStatistics.onShowInfo(showInfo, res => {\n                                var openId = res.data.openId; // 成功回调返回openId;\n                                gamesdk.coin.addUserOpenidMapping(showInfo, 0, res => {\n                                    console.log(res);\n                                    var gold = res.data.gold; //如果映射成功或者之前已经映射则返回金币\n                                }, err => {\n                                    if (err.data.code == 40111) {\n                                        console.log('没有找到平台openid,之前也没有做过映射');\n                                    }\n                                })\n                            }, err => {\n                                console.log(err)\n                            })\n                        }\n\n                    }, err => {\n\n                    });\n                } else {\n                    //不需要授权\n                    // dosomething\n                    //返回登录信息\n                    // var userInfo = data.userInfo;\n                    // var sessionId = data.sessionId;\n                    // var openId = data.openId;\n                    gamesdk.dataStatistics.onShowInfo(showInfo, res => {\n                        var openId = res.data.openId; // 成功回调返回openId;\n                        gamesdk.coin.addUserOpenidMapping(showInfo, 0, res => {\n                            console.log(res);\n                            var gold = res.data.gold; //如果映射成功或者之前已经映射则返回金币\n                        }, err => {\n                            if (err.data.code == 40111) {\n                                console.log('没有找到平台openid,之前也没有做过映射');\n                            }\n                        })\n                    }, err => {\n                        console.log(err)\n                    })\n                }\n            }, err => {\n                console.log(err) //打印错误回调\n            })\n\n        });\n    },\n\n    registOnHide: function () {\n        wx.onHide((res) => {\n            console.log('wx onHide<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<', res);\n            gamesdk.dataStatistics.onHideInfo();\n        });\n    },\n\n    //分享  001点击转发   002点击群排行    003分享界面点击分享  004 复活界面\n    shareGame: function (imageTag, successcallback, failcallback, sourcecode, channelPrefix) {\n        this.setQueryInfo(sourcecode, 'image');\n\n        var that = this;\n        gamesdk.dataStatistics.getShareInfo('regular', function(res) {\n            console.log(\"------------------>获取分享管理信息：\", res);\n            var imgUrl = res.data.data.image; // 分享图片路径\n            var title = res.data.data.title; // 分享文字信息\n\n            var shareObj = {\n                title: title,\n                imageUrl: imgUrl,\n                query: '',\n                success: function(obj) {\n                    console.log(\"主动转发  成功：\", obj);\n                    console.log('sharecomplete:');\n                    tywx.LOGE(\"\",\"file = [wxAPI] fun = [shareGame] obj = \" + JSON.stringify(obj));\n                    if (!(obj.shareTickets && obj.shareTickets.length > 0)) {\n                        if (failcallback) {\n                            failcallback('fail');\n                        }\n                        return;\n                    }\n                    wx.getShareInfo({\n                        shareTicket: obj.shareTickets[0],\n                        success: function (result) {\n                            if (result) {\n                                //判断秘钥是否有用\n                                var iv = result.iv;\n                                var encryptedData = result.encryptedData;\n                                try {\n                                    var resultString = that.decrypt(tywx.UserInfo.wxgame_session_key, iv, encryptedData);\n                                    console.log(resultString);\n                                    if (resultString) {\n                                        resultString = JSON.parse(resultString);\n                                        tywx.LOGE(\"\",\"file = [wxAPI] fun = [shareGame] resultString = \" + JSON.stringify(resultString));\n                                        var openid = '';\n                                        // 分享\n                                        if (resultString.openGId) {\n                                            openid = resultString.openGId;\n                                        }\n                                        console.log('分享群ID:', successcallback, openid);\n                                        if (successcallback != null) {\n                                            successcallback(openid, obj.shareTickets[0]);\n                                        }\n                                    } else {\n                                        if (failcallback) {\n                                            failcallback();\n                                        }\n                                    }\n                                } catch (error) {\n                                    console.log('分享出异常了*****', obj.shareTickets[0]);\n                                    if (successcallback != null) {\n                                        successcallback(obj.shareTickets[0], obj.shareTickets[0]);\n                                    }\n                                }\n                            }\n                        },\n                        fail: function() {\n                            if (failcallback) {\n                                failcallback('cancel');\n                            }\n                        },\n                        complete: function() {\n                            // if (failcallback) {\n                            //     failcallback();\n                            // }\n                        },\n                    })\n                },\n                fail: function(info) {\n                    console.log('wx分享失败', failcallback);\n                    if (failcallback) {\n                        failcallback(\"cancel\");\n                    }\n                }\n            };\n            //gamesdk.dataStatistics.shareAppMsg(shareObj);\n            tywx.LOGE(\"\",\"file = [wxAPI] fun = [shareGame] shareObj = \" + JSON.stringify(shareObj));\n            that.shareAppMessage(shareObj);\n        }, function(err) {\n            //注意:当小游戏处于断网时,或者其他错误时\n            console.log(err)\n            var code = err.code; // 错误码10110\n            var data = err.data; // {errMsg: \"request:fail \"}\n            var msg = err.msg; // \"request fail\"\n        }, '', '', '', '', '');\n\n\n    },\n\n    decrypt: function (key, iv, crypted) {\n        var crypto = require('crypto');\n\n        crypted = new Buffer(crypted, 'base64');\n        iv = new Buffer(iv, 'base64');\n        key = new Buffer(key, 'base64');\n        var decipher = crypto.createDecipheriv('aes-128-cbc', key, iv);\n        var decoded = decipher.update(crypted, 'binary', 'utf8');\n        decoded += decipher.final('utf8');\n        return decoded;\n    },\n\n    login: function (callback) {\n        wx.login(callback);\n    },\n\n    setMaxScore: function (maxscore, gold) {\n\n        WXGlobal.queryString =\n            'nickName=' + WXGlobal.userInfo.nickName + '&' +\n            'maxscore=' + maxscore + '&' +\n            'gold=' + gold + '&' +\n            'gender=' + WXGlobal.userInfo.gender + '&' +\n            'avatarUrl=' + WXGlobal.userInfo.avatarUrl;\n\n        console.log('wx setMaxScore, query:', WXGlobal.queryString);\n    },\n\n    // 返回小程序启动参数\n    getLaunchOptionsSync: function () {\n        return wx.getLaunchOptionsSync()\n    },\n\n    setShareTicketEnabled: function (isEnabled) {\n        wx.updateShareMenu({\n            withShareTicket: isEnabled,\n            success: () => {\n                WXGlobal.shareTicketEnabled = isEnabled;\n            }\n        })\n    },\n\n    getShareInfo: function (obj) {\n        return wx.getShareInfo(obj)\n    },\n\n    getShareUserInfo: function () {\n        return this.query\n    },\n\n    showShareMenu: function () {\n        console.log('显示右上菜单的转发按钮');\n        wx.showShareMenu();\n    },\n    hideShareMenu: function () {\n        console.log('隐藏右上菜单的转发按钮');\n        wx.hideShareMenu();\n    },\n    onShareAppMessage: function (callback) {\n        console.log('注册点击转发按钮事件');\n        wx.onShareAppMessage(callback);\n    },\n    shareAppMessage: function (params) {\n        console.log('转发:', params);\n        wx.shareAppMessage(params);\n    },\n\n    getShareScreenShot: function () {\n        return canvas.toTempFilePathSync({\n            x: 0,\n            y: 0.5 * canvas.height - 0.8 * 0.8 * canvas.width,\n            width: canvas.width,\n            height: 0.8 * canvas.width,\n            destWidth: 500,\n            destHeight: 400,\n        })\n    },\n\n    getShareScreenShotForDown: function () {\n        return canvas.toTempFilePathSync({\n            x: 0,\n            y: 0.5 * canvas.height + 0 * canvas.width,\n            width: canvas.width,\n            height: 0.8 * canvas.width,\n            destWidth: 500,\n            destHeight: 400,\n        })\n    },\n\n    getScreenShot: function () {\n        return canvas.toTempFilePathSync({})\n    },\n\n\n    initFriendRank: function () {\n        try {\n            var openDataContext = wx.getOpenDataContext()\n            var msg = {\n                type: 'initFriendRank',\n            }\n            if (WXGlobal.shareTicketEnabled) {\n                msg.shareTicket = WXGlobal.shareTicket;\n            }\n            console.log(msg);\n\n            openDataContext.postMessage(msg);\n        } catch (error) {\n\n        }\n    },\n\n    getNextFriendRank: function (params) {\n        try {\n            // tywx.LOGE(\"\",\"file = [wxAPI] fun = [getNextFriendRank] \");\n            var openDataContext = wx.getOpenDataContext()\n            var msg = {\n                type: 'getNextFriend',\n                score: params.score,\n                width: params.rect.width,\n                height: params.rect.height,\n            }\n            if (WXGlobal.shareTicketEnabled) {\n                msg.shareTicket = WXGlobal.shareTicket;\n            }\n            //console.log(msg);\n\n            openDataContext.postMessage(msg);\n            if (params.callback) {\n                params.callback('wx');\n            }\n        } catch (error) {\n            // console.log(\"file = [wxAPI] fun = [getNextFriendRank]  error = \",error)\n        }\n    },\n\n    getFriendRank: function (params) {\n        try {\n            var openDataContext = wx.getOpenDataContext()\n            var msg = {\n                type: 'getFriendRank',\n                width: params.rect.width,\n                height: params.rect.height,\n            }\n            if (WXGlobal.shareTicketEnabled) {\n                msg.shareTicket = WXGlobal.shareTicket;\n            }\n            console.log(msg);\n\n            openDataContext.postMessage(msg);\n            if (params.callback) {\n                params.callback('wx');\n            }\n        } catch (error) {\n\n        }\n    },\n\n    getGroupRank: function (params) {\n\n        var myUtil = require(\"myUtil\");\n        //if (!WXGlobal.shareTicketEnabled || typeof this.shareTicket === 'undefined') {\n        var image = myUtil.randomForArray(Global.shareImages);\n        this.shareGame('res/raw-assets/resources/textures/gridItem/' + image, (openGId, shareTicket) => {\n                console.log('on get group rank pre share', shareTicket);\n                //分享给个人\n                if (!shareTicket) {\n                    if (params.callback) {\n                        params.callback('failed');\n                    }\n                } else {\n                    //分享给群\n                    try {\n                        var openDataContext = wx.getOpenDataContext()\n                        var msg = {\n                            type: 'getGroupRank',\n                            width: params.rect.width,\n                            height: params.rect.height,\n                            shareTicket: shareTicket\n                        }\n                        console.log(msg);\n                        openDataContext.postMessage(msg);\n                        if (params.callback) {\n                            params.callback(shareTicket);\n                            this.shareTicket = undefined;\n                        }\n                    } catch (error) {\n\n                    }\n                }\n            },\n            () => {\n                //分享失败\n                if (params.callback) {\n                    params.callback('failed');\n                }\n            }, '002');\n        return;\n        //} \n        /*else {\n            var openDataContext = wx.getOpenDataContext()\n            var msg = {\n                type: 'getGroupRank',\n                width: params.rect.width,\n                height: params.rect.height,\n                shareTicket: this.shareTicket\n            }\n            console.log(msg);\n            openDataContext.postMessage(msg);\n            if (params.callback) {\n                params.callback('success');\n            }\n        }*/\n    },\n\n    //每日挑战排行榜\n    getDailyRank: function (params) {\n        try {\n            var openDataContext = wx.getOpenDataContext();\n            var msg = {\n                type: 'getDailyRank',\n                width: params.rect.width,\n                height: params.rect.height,\n            }\n            if (WXGlobal.shareTicketEnabled) {\n                msg.shareTicket = WXGlobal.shareTicket;\n            }\n            console.log(msg);\n\n            openDataContext.postMessage(msg);\n            if (params.callback) {\n                params.callback('wx');\n            }\n        } catch (error) {}\n    },\n\n\n    //好友互助奖励信息\n    getMyInfo: function (params) {\n        try {\n            var openDataContext = wx.getOpenDataContext()\n            var msg = {\n                type: 'getMyInfo',\n                width: params.rect.width,\n                height: params.rect.height,\n            }\n            if (WXGlobal.shareTicketEnabled) {\n                msg.shareTicket = WXGlobal.shareTicket;\n            }\n            console.log('getMyInfo:', msg);\n\n            openDataContext.postMessage(msg);\n            if (params.callback) {\n                params.callback('wx');\n            }\n        } catch (error) {}\n    },\n\n    setQueryInfo: function (sourcecode, imageUrl) {\n        WXGlobal.queryString =\n            'nickName=' + WXGlobal.userInfo.nickName + '&' +\n            'inviteCode=' + tywx.UserInfo.userId + '&' +\n            'sourceCode=' + tywx.SystemInfo.gameId * 10000 + sourcecode + '&' +\n            'imageType=' + imageUrl;\n        console.log(WXGlobal.queryString);\n    },\n\n    /*\n    params:\n    {\n        KVDataList: [\n            { key: 'maxscore', value: score + '' },\n            { key: 'name', value: res.userInfo.nickName },\n        ],\n        success: function () {},\n        failed: function () {},\n        comlete: function () {},\n    }\n    kvdata的key和value必须为string\n    */\n    setUserCloudStorage: function (params) {\n        console.log('setUserCloudStorage:', params);\n        try {\n            wx.setUserCloudStorage(params);\n        } catch (error) {\n\n        }\n    },\n\n   \n\n    /*\n    params:\n    {\n        maxscore: int,\n        crystal: int,\n        callback: function () {},\n    }\n    */\n    saveScore: function (maxscore, gold, callback) {\n        if (typeof wx === 'undefined') return;\n        //兼容dailyScore\n        if (!Global.gameinfo) {\n            var myUtil = require('myUtil');\n            myUtil.resetInitData();\n        }\n        if (Global.gameinfo && !Global.gameinfo.dailyScore) {\n            Global.gameinfo.dailyScore = 0;\n        }\n\n        var obj = {\n            KVDataList: [{\n                    key: 'maxscore',\n                    value: maxscore + ''\n                },\n                {\n                    key: 'gold',\n                    value: gold + ''\n                },\n                {\n                    key: 'dailyTime',\n                    value: Global.gameinfo.dailyTime + ''\n                },\n                {\n                    key: 'dailyScore',\n                    value: Global.gameinfo.dailyScore + ''\n                },\n            ],\n            success: callback\n        }\n        console.log('wx saveScore:', obj);\n        this.setUserCloudStorage(obj);\n        this.setMaxScore(maxscore, gold);\n    },\n    loadScore: function (params) {\n        // 微信无法在主域获取用户托管数据\n        // if (typeof wx !== 'undefined') {\n        //     console.log('wx loadScore:', params);\n        //     this.getUserCloudStorage(params);\n        // }\n    },\n    /*\n参数格式:\n{\n    success: function () {},\n    failed: function () {},\n    comlete: function () {},\n}\n*/\n    shakeShort: function (params) {\n        wx.vibrateShort(params);\n    },\n\n    /*\n    参数格式:\n    {\n        success: function () {},\n        failed: function () {},\n        comlete: function () {},\n    }\n    */\n    shakeLong: function (params) {\n        wx.vibrateLong(params);\n    },\n    exit: function () {\n        wx.exitMiniProgram({\n            success: (res) => {\n                console.log('exit game:', res)\n            }\n        })\n    },\n\n    getSystemInfo: function () {\n        return wx.getSystemInfoSync()\n    },\n\n}\n\nmodule.exports = WXGlobal;"]}