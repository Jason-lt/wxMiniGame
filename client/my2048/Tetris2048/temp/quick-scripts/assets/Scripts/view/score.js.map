{"version":3,"sources":["score.js"],"names":["ThirdAPI","require","cc","Class","extends","Component","properties","curLabel","default","type","Label","scoreNum","showScore","hasResetWeight2","hasResetWeight3","start","reset","addScore","addNum","Global","wxScore","console","log","wxGold","saveScore","myUtil","randomForWeight","weightScores2","update","dt","string"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAIA,WAAWC,QAAQ,oBAAR,CAAf;AACAC,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,kBAAU;AACNC,qBAAS,IADH;AAENC,kBAAMP,GAAGQ;AAFH,SADF;AAKRC,kBAAU,CALF;AAMRC,mBAAW,CANH;;AAQRC,yBAAiB,KART;AASRC,yBAAiB;AATT,KAHP;;AAeLC,SAfK,mBAeG;AACJ,aAAKC,KAAL;AACH,KAjBI;;;AAmBLC,cAAU,kBAAUC,MAAV,EAAkB;AACxB,aAAKP,QAAL,IAAiBO,MAAjB;AACA;AACA,YAAI,KAAKP,QAAL,GAAgBQ,OAAOC,OAA3B,EAAoC;AAChCC,oBAAQC,GAAR,CAAY,0BAAZ,EAAwCH,OAAOC,OAA/C,EAAwDD,OAAOI,MAA/D;AACAJ,mBAAOC,OAAP,GAAiB,KAAKT,QAAtB;AACAX,qBAASwB,SAAT,CAAmBL,OAAOC,OAA1B,EAAmCD,OAAOI,MAA1C;AACH;AACD,YAAIE,SAASxB,QAAQ,QAAR,CAAb;AACA;AACA,YAAI,KAAKU,QAAL,GAAgB,KAAhB,IAAyB,CAAC,KAAKE,eAAnC,EAAoD;AAChD;;;;;;;AAQAY,mBAAOC,eAAP,CAAuBP,OAAOQ,aAA9B;AACA,iBAAKd,eAAL,GAAuB,IAAvB;AACAQ,oBAAQC,GAAR,CAAY,SAAZ;AACH;AACD;AACA;AACA;AACA;AACA;AACH,KA/CI;;AAiDLM,UAjDK,kBAiDEC,EAjDF,EAiDM;AACP,YAAI,KAAKjB,SAAL,IAAkB,KAAKD,QAA3B,EAAqC;AACjC;AACH;;AAED,YAAI,KAAKA,QAAL,GAAgB,KAAKC,SAAL,GAAiB,GAArC,EAA0C;AACtC,iBAAKA,SAAL,IAAkB,EAAlB;AACH,SAFD,MAEO,IAAI,KAAKD,QAAL,GAAgB,KAAKC,SAAL,GAAiB,EAArC,EAAyC;AAC5C,iBAAKA,SAAL,IAAkB,EAAlB;AACH,SAFM,MAEA;AACH,iBAAKA,SAAL,IAAkB,CAAlB;AACH;AACD,aAAKL,QAAL,CAAcuB,MAAd,GAAuB,KAAKlB,SAA5B;AACH,KA9DI;;;AAgELI,WAAO,iBAAY;AACf,aAAKL,QAAL,GAAgB,CAAhB;AACA,aAAKC,SAAL,GAAiB,CAAC,CAAlB;AACA,aAAKC,eAAL,GAAuB,KAAvB;AACA,aAAKC,eAAL,GAAuB,KAAvB;AACH;AArEI,CAAT","file":"score.js","sourceRoot":"../../../../../assets/Scripts/view","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/class.html\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/class/index.html\n// Learn Attribute:\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/reference/attributes/index.html\n// Learn life-cycle callbacks:\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/life-cycle-callbacks/index.html\n\nlet ThirdAPI = require('../common/ThirdAPI');\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        curLabel: {\n            default: null,\n            type: cc.Label,\n        },\n        scoreNum: 0,\n        showScore: 0,\n\n        hasResetWeight2: false,\n        hasResetWeight3: false,\n    },\n\n    start() {\n        this.reset();\n    },\n\n    addScore: function (addNum) {\n        this.scoreNum += addNum;\n        //保存微信分数\n        if (this.scoreNum > Global.wxScore) {\n            console.log('from socre.js add score:', Global.wxScore, Global.wxGold);\n            Global.wxScore = this.scoreNum;\n            ThirdAPI.saveScore(Global.wxScore, Global.wxGold);\n        }\n        var myUtil = require('myUtil');\n        //添加128的掉落数据\n        if (this.scoreNum > 10000 && !this.hasResetWeight2) {\n            /* var randomScores = Global.gridRandomScores.concat(Global.joinRandomScores);\n             var index = randomScores.indexOf(128);\n             if (index <= -1) {\n                 Global.joinRandomScores.push(128);\n             }\n             console.log('array' + Global.joinRandomScores);*/\n\n\n            myUtil.randomForWeight(Global.weightScores2);\n            this.hasResetWeight2 = true;\n            console.log('重设掉落概率2');\n        }\n        // else if (this.scoreNum > 40000 && !this.hasResetWeight3) {\n        //     myUtil.randomForWeight(Global.weightScores3);\n        //     this.hasResetWeight3 = true;\n        //     console.log('重设掉落概率3');\n        // }\n    },\n\n    update(dt) {\n        if (this.showScore >= this.scoreNum) {\n            return;\n        }\n\n        if (this.scoreNum > this.showScore + 100) {\n            this.showScore += 20;\n        } else if (this.scoreNum > this.showScore + 20) {\n            this.showScore += 10;\n        } else {\n            this.showScore += 1;\n        }\n        this.curLabel.string = this.showScore;\n    },\n\n    reset: function () {\n        this.scoreNum = 0;\n        this.showScore = -1;\n        this.hasResetWeight2 = false;\n        this.hasResetWeight3 = false;\n    }\n});"]}