{"version":3,"sources":["Tmp.js"],"names":["loadAtlas","require","ThirdAPI","cc","Class","extends","Component","properties","propBtns","default","type","Node","propBtnBg1","propBtnBg2","propBtnBg3","ballPrefab","Prefab","brickPrefab","propPrefab","TopEdge","score","Label","scoreIcon","starScore","starScoreIcon","paddlePrefab","warningtipPrefab","starPrefab","warningTip","paddle","doublingScore","balls","layer","prop1","prop2","prop3","prop4","ballPool","brickPool","g","Graphics","isOver","isWait","arrMs","tip","gameTypeSprite","Sprite","reviveTimes","gameType","prop1Chances","prop2Chances","prop3Chances","ballVel","p","audioTick","brickRowCount","onLoad","fitIphoneX","initGameObjectPool","initPropButtonState","generateColorArray","string","Global","numStarScore","setPosition","node","addChild","setLocalZOrder","_sgNode","setVisible","newPaddle","instantiate","skinPaddle","getComponent","spriteFrame","paddleX","paddleY","platformData","paddlePosY","paddleWidth","paddleBeginWidth","width","warningTipPosY","initGameType","newBalls","newBricks","updateCount","updateCount1","isWudi","opacity","_self","on","event","console","log","clearState","becomeWidth","runAction","repeat","sequence","fadeIn","fadeOut","ball","motionNode","MotionStreak","reset","vel_x","random0To1","velocity","director","getScheduler","schedule","updateGame","brickDeltaTime","updateGame1","gameinfo","shareBallCount","i","index","newBall","util","calculateVelocity","generateColorStrip3","isfirst","saveInfo","active","off","isBtn1","isBtn2","isBtn3","repeatForever","height","Widget","top","randnum","getSpriteFrameFromName","initCount","push","setScale","initCountBrick","update","dt","arrBall","length","waitRevive","collision","arrProp","prop","setPositionY","position","y","main","playPropSound","propType","maxProp2Balls","x","brickUnit","unitScore","setTimeout","ballSpeedMax","labelLog","gameOver","unschedule","showUIRevive","onRevive","PickSelf","col","brickCol","brickRow","j","arrBrick","row","mapInfo","mapBricks","blink","callFunc","resetState","Math","abs","BrickTimeB","BrickTimeMin","BrickTimeT","deltaTime","color","isMotionStreak","savePath","isRebound","collisionWhenNoRebound","posX","zoneSize","posY","floor","isCollision","isProp","newProp","isStar","newStar","destination","moveTo","mag","saveStarScore","removeSelf","maxBalls","playEffectSound","continueBricks","isContinue","onPropButton1","playTouchSound","stopAllActions","FBInstant","shareGame","getImgBase64","onBtn1ShareSuccess","bind","onBtn1ShareFailed","wx","openGId","shareOpen","showDialogText","shareData4","arrOpenGId","indexOf","onPropButton2","onBtn2ShareSuccess","onBtn2ShareFailed","onPropButton3","onBtn3ShareSuccess","onBtn3ShareFailed","newMapInfo","unit","n","bricksNoNew","winSize","getWinSize","brickDistance","game","generateProp","generatePropCol","propStep","newBrick","pop","setContentSize","topEdge","randPropNum","setProp","setStar","colorIndex","colorArray","pos","setPropType","skinBall","paddleHeight","initStreak","newMotionStreak","ms","addComponent","enabled","texture","textureBall1","skinStreak","getTexture","stroke","fadeTime","vel","hexToColor","lightenDarkenColor","colorToHex","fastMode","minSeg","removeComponent","addImageToColorArray","imagefile","arr1","getImageColorArray","colorRow","colorCol","imageRow","addStripToColorArray","stripRow","generateColorStrip1","addStripToColorArray1","stripCol","colorBrick","drawPoint","size","fillColor","circle","fill","drawLine","pt1","pt2","strokeColor","lineWidth","lineTo","drawTail","clear","colorTail","colorTailMinValue","getR","getG","getB","colorTailHex","deltaSize","arrPoint","initPropButtonState1","fitIphoneX1","initGameType1","initGameObjectPool1","initGameObjectPool2","waitRevive1","onRevive1","gameOver1","collision1","continueBricks1"],"mappings":"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","file":"Tmp.js","sourceRoot":"../../../../assets/Scripts","sourcesContent":["var loadAtlas = require(\"./common/loadAtlas\");\nlet ThirdAPI = require('./common/ThirdAPI')\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        propBtns: {\n            default: null,\n            type: cc.Node\n        },\n        propBtnBg1: {\n            default: null,\n            type: cc.Node\n        },\n        propBtnBg2: {\n            default: null,\n            type: cc.Node\n        },\n        propBtnBg3: {\n            default: null,\n            type: cc.Node\n        },\n\n        // 这个属性引用了小球预制资源\n        ballPrefab: {\n            default: null,\n            type: cc.Prefab\n        },\n        // 这个属性引用了砖块预制资源\n        brickPrefab: {\n            default: null,\n            type: cc.Prefab\n        },\n        // 这个属性引用了道具预制资源\n        propPrefab: {\n            default: null,\n            type: cc.Prefab\n        },\n        // 上边框\n        TopEdge: {\n            default: null,\n            type: cc.Node\n        },\n        // 分数标签\n        score: {\n            default: null,\n            type: cc.Label\n        },\n        // 分数图标\n        scoreIcon: {\n            default: null,\n            type: cc.Node\n        },\n        // 道具分数\n        starScore: {\n            default: null,\n            type: cc.Label\n        },\n        // 道具分数图标\n        starScoreIcon: {\n            default: null,\n            type: cc.Node\n        },\n        // 这个属性引用了挡板预制资源\n        paddlePrefab: {\n            default: null,\n            type: cc.Prefab\n        },\n        // 这个属性引用了WarningTip预制资源\n        warningtipPrefab: {\n            default: null,\n            type: cc.Prefab\n        },\n        // 这个属性引用了Star预制资源\n        starPrefab: {\n            default: null,\n            type: cc.Prefab\n        },\n        // WarningTip 节点\n        warningTip: {\n            default: null,\n            type: cc.Node\n        },\n        // paddle 节点\n        paddle: {\n            default: null,\n            type: cc.Node\n        },\n        // doublingScore 节点\n        doublingScore: {\n            default: null,\n            type: cc.Label\n        },\n        // balls 节点\n        balls: {\n            default: null,\n            type: cc.Node\n        },\n        // layer 节点\n        layer: {\n            default: null,\n            type: cc.Node\n        },\n\n        //\n        prop1: false,\n        prop2: false,\n        prop3: false,\n        prop4: false,\n\n        ballPool: [],\n        brickPool: [],\n\n        // 画笔\n        g: cc.Graphics,\n\n        // 是否结束\n        isOver: false,\n        // 是待复活状态\n        isWait: false,\n\n        arrMs: [],\n\n        // tip 节点\n        tip: {\n            default: null,\n            type: cc.Node\n        },\n\n        // 对局类型提示精灵\n        gameTypeSprite: {\n            default: null,\n            type: cc.Sprite\n        },\n\n        // 本局复活次数\n        reviveTimes: 0,\n\n        // 本局种类\n        gameType: 0,\n        // 道具1概率\n        prop1Chances: 0,\n        // 道具2概率\n        prop2Chances: 0,\n        // 道具3概率\n        prop3Chances: 0,\n\n        ballVel: cc.p(0, 0),\n\n        audioTick: 0,\n        brickRowCount: 0,\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    // start () {},\n\n    onLoad() {\n        this.fitIphoneX();\n\n        // 初始化对象池\n        this.initGameObjectPool();\n\n        this.initPropButtonState();\n\n        // 生成配色方案\n        this.generateColorArray();\n\n        // 道具分数\n        this.starScore.string = Global.numStarScore;\n        this.score.string = 0;\n\n        this.brickRowCount = 0;\n\n        this.layer = new cc.Node('layer');\n        this.layer.setPosition(0, 0);\n        this.node.addChild(this.layer);\n\n        this.balls.setLocalZOrder(1000);\n\n        //\n        this.doublingScore.node._sgNode.setVisible(false);\n\n        // 生成挡板\n        var newPaddle = cc.instantiate(this.paddlePrefab);\n        if (Global.skinPaddle) {\n            newPaddle.getComponent(cc.Sprite).spriteFrame = Global.skinPaddle;\n        }\n        this.node.addChild(newPaddle, 100);\n        Global.paddleX = 0;\n        Global.paddleY = Global.platformData.paddlePosY;\n        newPaddle.setPosition(Global.paddleX, Global.paddleY);\n        this.paddle = newPaddle.getComponent('Paddle');\n\n        Global.paddleWidth = Global.platformData.paddleBeginWidth;\n        this.paddle.node.width = Global.platformData.paddleBeginWidth;\n        //console.log('the paddle width', this.paddle.node.width);\n\n        // 生成警告信息\n        this.warningTip = cc.instantiate(this.warningtipPrefab);\n        this.node.addChild(this.warningTip);\n        this.warningTip.setPosition(cc.p(0, Global.platformData.warningTipPosY));\n        this.warningTip._sgNode.setVisible(false);\n\n        // 生成此局类型\n        this.initGameType();\n\n        // 创建初始小球\n        this.newBalls();\n        // 创建砖块\n        this.newBricks(5);\n\n        this.arrMs = [];\n\n        this.updateCount = 0;\n        this.updateCount1 = 0;\n        //this.newMapInfo(Global.brickUnit);\n\n        this.isWudi = false;\n        this.tip.opacity = 255;\n        var _self = this;\n        this.node.on('touchstart', function (event) {\n            console.log('touch start');\n\n            _self.paddle.clearState();\n            _self.paddle.becomeWidth(Global.platformData.paddleBeginWidth);\n\n            _self.tip.runAction(cc.repeat(cc.sequence(cc.fadeIn(0.5), cc.fadeOut(0.5)), 5));\n\n            if (Global.ball && Global.ball.motionNode)\n                Global.ball.motionNode.getComponent(cc.MotionStreak).reset();\n\n            var vel_x = (cc.random0To1() > 0.5 ? -1 : 1) * (3 + 3 * cc.random0To1());\n            Global.ball.velocity = cc.p(vel_x, 3 + 1 * cc.random0To1()); //(cc.p(-5, 6));\n\n            _self.ballVel = Global.ball.velocity;\n            //console.log(\"chushi\", _self.ballVel);\n\n            cc.director.getScheduler().schedule(_self.updateGame, _self, Global.brickDeltaTime, false);\n            cc.director.getScheduler().schedule(_self.updateGame1, _self, /*Global.platformData.BrickTimeT*/ 30, false);\n\n            // 产生新的小球\n            //_self.newBall(cc.p(Global.paddleX, Global.paddleY + 30),\n            //    Global.util.calculateVelocity(Global.ball.velocity, -3.1415926 / 18), Global.util.generateColorStrip3(0), true, true);\n            //_self.newBall(cc.p(Global.paddleX, Global.paddleY + 30),\n            //    Global.util.calculateVelocity(Global.ball.velocity, 3.1415926 / 18), Global.util.generateColorStrip3(0), true, true);\n            if (Global.gameinfo.shareBallCount > 1) {\n                for (let i = 0; i < Global.gameinfo.shareBallCount - 1; i++) {\n                    let index = i - (Global.gameinfo.shareBallCount - 1) / 2;\n\n                    if (index == 0) {\n                        index = 1;\n                    }\n                    // 产生新的小球\n                    _self.newBall(cc.p(Global.paddleX, Global.paddleY + 30),\n                        Global.util.calculateVelocity(Global.ball.velocity, 3.1415926 / 36 * index),\n                        Global.util.generateColorStrip3(0), true, true);\n                }\n            }\n\n            Global.platformData.isfirst = false;\n            if (Global.gameinfo.shareBallCount < 10 && !Global.platformData.isfirst) {\n                Global.gameinfo.shareBallCount++;\n                ThirdAPI.saveInfo(Global.gameinfo);\n            }\n            //Global.platformData.isfirst = false;\n\n            _self.propBtns.active = true;\n\n            _self.node.off('touchstart');\n        });\n    },\n\n    initPropButtonState: function () {\n\n        this.propBtns.active = false;\n        this.propBtns.setLocalZOrder(2000);\n\n        this.isBtn1 = true;\n        this.isBtn2 = true;\n        this.isBtn3 = true;\n\n        this.propBtnBg1.active = true;\n        this.propBtnBg2.active = true;\n        this.propBtnBg2.active = true;\n        this.propBtnBg1.runAction(cc.repeatForever(cc.sequence(cc.fadeOut(0.5), cc.fadeIn(0.5))));\n        this.propBtnBg2.runAction(cc.repeatForever(cc.sequence(cc.fadeOut(0.5), cc.fadeIn(0.5))));\n        this.propBtnBg3.runAction(cc.repeatForever(cc.sequence(cc.fadeOut(0.5), cc.fadeIn(0.5))));\n    },\n\n    // 适配iphoneX\n    fitIphoneX: function () {\n        if (Global.fitIphoneX) {\n            console.log('适配iphoneX');\n            this.TopEdge.height = 120;\n            this.score.node.getComponent(cc.Widget).top = 60;\n            this.scoreIcon.getComponent(cc.Widget).top = 60;\n            this.starScore.node.getComponent(cc.Widget).top = 60;\n            this.starScoreIcon.getComponent(cc.Widget).top = 60;\n            this.doublingScore.node.getComponent(cc.Widget).top = 55;\n        }\n    },\n\n    // 初始化对局类型\n    initGameType: function () {\n        var randnum = cc.random0To1() * 100;\n        if (randnum >= 0 && randnum < 10) {\n            this.gameType = 1;\n            this.gameTypeSprite.spriteFrame = loadAtlas.getSpriteFrameFromName('icon-long');\n        } else if (randnum >= 10 && randnum < 20) {\n            this.gameType = 2;\n            this.gameTypeSprite.spriteFrame = loadAtlas.getSpriteFrameFromName('icon-3');\n        } else if (randnum >= 20 && randnum < 30) {\n            this.gameType = 3;\n            this.gameTypeSprite.spriteFrame = loadAtlas.getSpriteFrameFromName('icon-X2');\n        } else {\n            this.gameType = 0;\n        }\n\n        if (this.gameType == 0) { //普通局\n            this.prop1Chances = 3;\n            this.prop2Chances = 3;\n            this.prop3Chances = 3;\n        } else if (this.gameType == 1) { // 道具1局\n            this.prop1Chances = 7;\n            this.prop2Chances = 1;\n            this.prop3Chances = 1;\n        } else if (this.gameType == 2) { // 道具2局\n            this.prop1Chances = 1;\n            this.prop2Chances = 7;\n            this.prop3Chances = 1;\n        } else if (this.gameType == 3) { // 道具3局\n            this.prop1Chances = 1;\n            this.prop2Chances = 1;\n            this.prop3Chances = 7;\n        }\n\n        console.log('道具概率：', this.gameType, this.prop1Chances, this.prop2Chances, this.prop3Chances);\n    },\n\n    // 初始化对象池\n    initGameObjectPool: function () {\n        // 初始化小球对象池\n        this.ballPool = [];\n        let initCount = 100;\n        for (let i = 0; i < initCount; ++i) {\n            let ball = cc.instantiate(this.ballPrefab);\n            this.ballPool.push(ball);\n            this.balls.addChild(ball);\n            //ball.active = false;\n            ball.setScale(0, 0);\n        }\n\n        // 初始化砖块对象池\n        this.brickPool = [];\n        let initCountBrick = 400;\n        for (let i = 0; i < initCountBrick; ++i) {\n            let ball = cc.instantiate(this.brickPrefab);\n            this.brickPool.push(ball);\n            this.node.addChild(ball);\n            //ball.active = false;\n            ball.setScale(0, 0);\n        }\n    },\n\n    update(dt) {\n        if (this.isWait) {\n            //console.log('等待复活');\n            return;\n        }\n\n        // 如果小球消失，游戏结束\n        if (Global.arrBall.length <= 0) {\n            //console.log('游戏结束a', Global.ball);\n            this.waitRevive();\n            return;\n        }\n\n        this.audioTick++;\n\n        //if (this.isOver) return;\n\n        this.collision(dt);\n\n        for (var i = 0; i < Global.arrProp.length; i++) {\n            var prop = Global.arrProp[i];\n            if (!prop) continue;\n\n            prop.node.setPositionY(prop.node.position.y - 6);\n\n            if (!this.isOver && prop.collision() == 2) {\n                Global.main.playPropSound();\n\n                if (prop.propType == 1) {\n                    if (!this.prop1) {\n                        this.prop1 = true;\n                        /*\n                        var vel = Global.ball.velocity;\n                        setTimeout(() => {\n                            this.prop1 = false;\n                            if (Global.ball)\n                            {\n                                Global.ball.setVelocity(vel);\n                                if (Global.ball.velocity.y <0) {\n                                    Global.ball.velocity.y *=-1;\n                                }\n                            }\n                                \n                        }, 5000);\n                        Global.ball.setVelocity(cc.p(24, 14));\n                        */\n                    }\n                } else if (prop.propType == 2 && Global.paddleWidth <= Global.platformData.paddleBeginWidth) {\n                    //if (!this.prop2) {\n                    this.prop2 = true;\n                    this.paddle.clearState();\n                    this.paddle.becomeWidth(Global.platformData.paddleBeginWidth);\n                    //}\n                } else if (prop.propType == 3) {\n                    for (let i = 0; i < Global.platformData.maxProp2Balls; i++) {\n                        // 产生新的小球\n                        this.newBall(cc.p(this.paddle.node.position.x, this.paddle.node.position.y + Global.brickUnit),\n                            cc.p(i - Global.platformData.maxProp2Balls / 2, 10), Global.util.generateColorStrip3(0), true, true);\n                    }\n                } else if (prop.propType == 4) {\n                    if (!this.prop4) {\n                        this.prop4 = true;\n                        //console.log('道具4');\n                        Global.unitScore = 2;\n                        this.doublingScore.node._sgNode.setVisible(true);\n                        this.doublingScore.node.runAction(cc.repeat(cc.sequence(cc.fadeIn(1), cc.fadeOut(1)), 5));\n                        setTimeout(() => {\n                            this.prop4 = false;\n                            Global.unitScore = 2;\n                        }, 10000);\n                    }\n                } else if (prop.propType == 5) {\n                    //console.log('道具5');\n                    // 产生新的小球\n                    //this.newBalls();\n\n                    this.newBall(\n                        Global.ball.node.position,\n                        Global.util.calculateVelocity(Global.ball.velocity, -3.1415926 / 6),\n                        Global.util.generateColorStrip3(0),\n                        true, true);\n                    this.newBall(\n                        Global.ball.node.position,\n                        Global.util.calculateVelocity(Global.ball.velocity, 3.1415926 / 6),\n                        Global.util.generateColorStrip3(0),\n                        true, true);\n                }\n            }\n        }\n\n        /*\n        if (this.prop1) {\n            this.paddle.node.setPositionX(Global.ball.node.position.x);\n        }\n        */\n\n        if (Global.ball != null) {\n            if (Global.ball.velocity.x < Global.ballSpeedMax.x && Global.ball.velocity.y < Global.ballSpeedMax.y) {\n                Global.ball.velocity.x += Global.ball.velocity.x * 0.0001;\n                Global.ball.velocity.y += Global.ball.velocity.y * 0.0001;\n                if (Global.ball.velocity.x > 0 || Global.ball.velocity.y > 0) {\n                    this.ballVel = Global.ball.velocity;\n                    //console.log(\"加速中\", this.ballVel);\n\n                }\n            } else {\n                //console.log(\"停止加速\", Global.ball.velocity);\n            }\n        }\n\n        // 绘制场景中所有小球的拖尾\n        //this.g.clear();\n        //this.drawTail();\n        //console.log(\"the balls count is : %d\", Global.arrBall.length);\n        Global.main.labelLog.getComponent(cc.Label).string = \"the balls count is : \" + Global.arrBall.length;\n    },\n\n    // 进入复活界面\n    waitRevive: function () {\n\n        if (this.paddle) {\n            this.paddle.clearState();\n        }\n\n        if (this.reviveTimes >= 1 || (this.reviveTimes > 1 && Global.numStarScore < 10)) {\n            this.gameOver();\n        } else {\n            // 暂停所有\n            this.isWait = true;\n            cc.director.getScheduler().unschedule(this.updateGame, this);\n            cc.director.getScheduler().unschedule(this.updateGame1, this);\n\n            // 进入复活界面\n            Global.main.showUIRevive();\n        }\n    },\n\n    // 复活\n    onRevive: function () {\n\n        // 创建初始小球\n        if (Global.ball) {\n            Global.ball.PickSelf();\n            Global.ball = null;\n        }\n        this.newBalls();\n\n        var _self = this;\n        // 消除砖块\n        let col = Global.brickCol;\n        if (Global.brickRow > 3) {\n            for (var i = 0; i < Global.brickRow - 3; i++) {\n                for (var j = 0; j < col; j++) {\n                    if (Global.arrBrick[i] && Global.arrBrick[i][j]) {\n                        let row = Global.arrBrick[i][j].i;\n                        let col = Global.arrBrick[i][j].j;\n\n                        if (Global.mapInfo[row])\n                            Global.mapInfo[row][col] = 0;\n                        if (Global.mapBricks[row])\n                            Global.mapBricks[row][col] = null;\n\n                        Global.arrBrick[i][j].runAction(cc.sequence(cc.blink(1, 4), cc.callFunc(function (node) {\n                            //console.log('index', i, j, node);\n                            if (node) {\n                                node.getComponent(\"Brick\").resetState();\n                                node.setScale(0, 0);\n                                _self.brickPool.push(node);\n                            }\n                        }, Global.arrBrick[i][j])));\n                        Global.arrBrick[i][j] = null;\n                    }\n                }\n            }\n        }\n\n        //setTimeout(() => {\n        this.reviveTimes++;\n        this.isWait = false;\n        this.tip.opacity = 255;\n        this.starScore.string = Global.numStarScore;\n        //cc.director.getScheduler().schedule(this.updateGame, this, Global.brickDeltaTime, false);\n\n        this.propBtns.active = false;\n\n        Global.paddleWidth = Global.platformData.paddleBeginWidth;\n        this.paddle.node.width = Global.platformData.paddleBeginWidth;\n        //console.log('the paddle width', this.paddle.node.width);   \n        //}, 1000);\n\n        var _self = this;\n        this.node.on('touchstart', function (event) {\n            console.log('touch start1');\n\n            _self.paddle.becomeWidth(Global.platformData.paddleBeginWidth);\n\n            _self.tip.runAction(cc.repeat(cc.sequence(cc.fadeIn(0.5), cc.fadeOut(0.5)), 5));\n\n            if (Global.ball && Global.ball.motionNode)\n                Global.ball.motionNode.getComponent(cc.MotionStreak).reset();\n\n            var vel_x = (cc.random0To1() > 0.5 ? -1 : 1) * (3 + 3 * cc.random0To1());\n            //Global.ball.velocity = _self.ballVel;//cc.p(vel_x, 3 + 1 * cc.random0To1());//(cc.p(-5, 6));\n            Global.ball.velocity.x = _self.ballVel.x; //cc.p(vel_x, 3 + 1 * cc.random0To1());//(cc.p(-5, 6));\n            Global.ball.velocity.y = Math.abs(_self.ballVel.y);\n            //console.log(\"开始\", _self.ballVel);\n\n            _self.newBricks(1);\n            cc.director.getScheduler().schedule(_self.updateGame, _self, Global.brickDeltaTime, false);\n\n            // 下次连续出现的间隔时间\n            if (Global.platformData.BrickTimeB > Global.platformData.BrickTimeMin) {\n                Global.platformData.BrickTimeT -= 2;\n                Global.platformData.BrickTimeB -= 1;\n            }\n            var deltaTime = cc.random0To1() * (Global.platformData.BrickTimeT - Global.platformData.BrickTimeB) + Global.platformData.BrickTimeB;\n            cc.director.getScheduler().schedule(_self.updateGame1, _self, /*deltaTime*/ 30, false);\n\n            _self.propBtns.active = true;\n\n            _self.node.off('touchstart');\n        });\n    },\n\n    // 游戏结束\n    gameOver: function () {\n        let col = Global.brickCol;\n\n        this.propBtns.active = false;\n\n        this.isWait = false;\n        this.isOver = true;\n        cc.director.getScheduler().unschedule(this.updateGame, this);\n        cc.director.getScheduler().unschedule(this.updateGame1, this);\n\n        for (var i = 0; i < Global.brickRow; i++) {\n            for (var j = 0; j < col; j++) {\n                if (Global.arrBrick[i] && Global.arrBrick[i][j]) {\n                    // 产生新的小球\n                    this.newBall(\n                        Global.arrBrick[i][j].position,\n                        cc.p(0, -2),\n                        Global.arrBrick[i][j].color, false, false);\n\n                    if (Global.mapInfo[i])\n                        Global.mapInfo[i][j] = 0;\n\n                    //Global.arrBrick[i][j].active = false;\n                    Global.arrBrick[i][j].setScale(0, 0);\n                    this.brickPool.push(Global.arrBrick[i][j]);\n                    Global.arrBrick[i][j] = null;\n                }\n            }\n        }\n\n        setTimeout(() => {\n            Global.main.gameOver();\n        }, 3000);\n    },\n\n    // 碰撞检测\n    collision: function (dt) {\n        if (!Global.arrBall || !Global.arrBall.length) return;\n        this.updateCount++;\n        //if (this.updateCount % 2 == 0)  return;\n        for (var i = 0; i < Global.arrBall.length; i++) {\n            var ball = Global.arrBall[i];\n            if (!ball) continue;\n            //if (this.updateCount % 2 == 0) {\n            //if (i%2 == 0) continue;\n            //}\n            //else {\n            //if (i%2 == 1) continue;\n            //}\n\n            //console.log('tick');\n            ball.x += ball.velocity.x;\n            ball.y += ball.velocity.y;\n            ball.node.setPosition(ball.x, ball.y);\n            //if (this.arrMs[i])    \n            //this.arrMs[i].setPosition(ball.x, ball.y);\n            if (ball.motionNode)\n                ball.motionNode.setPosition(ball.x, ball.y);\n            //if (this.updateCount % 5 == 0)\n            if (!Global.platformData.isMotionStreak) {\n                ball.savePath();\n                //console.log(ball.node.position);\n            }\n            if (!ball.isRebound) {\n                ball.collisionWhenNoRebound();\n                ball.velocity.y -= 0.05;\n            } else {\n                ball.collision();\n\n                if (this.isOver) continue;\n                //continue;\n\n                var posX = Global.zoneSize.width / 2 + ball.x;\n                var posY = Global.zoneSize.height / 2 + ball.y;\n\n                if (posY % Global.brickUnit > Global.brickUnit * 0.8 ||\n                    posX % Global.brickUnit > Global.brickUnit * 0.7) {\n                    //console.log(\"continue\");\n                    continue;\n                }\n\n                var row = Math.floor(posY / Global.brickUnit);\n                var col = Math.floor(posX / Global.brickUnit);\n\n                if (!Global.mapInfo[row] || !Global.mapInfo[row][col]) continue;\n                if (Global.mapInfo[row][col] == 1) {\n                    //ball.collisionWithBrick();\n                    if (Global.ball == ball && this.isWudi) {\n\n                    } else {\n                        ball.velocity.y *= -1;\n                        ball.isCollision = true;\n                    }\n\n                    if (Global.mapBricks[row][col].getComponent(\"Brick\").isProp) {\n                        this.newProp(Global.mapBricks[row][col].getComponent('Brick').propType, Global.mapBricks[row][col].position);\n                    } else if (Global.mapBricks[row][col].getComponent(\"Brick\").isStar) {\n\n                        let newStar = cc.instantiate(this.starPrefab);\n                        this.node.addChild(newStar);\n                        newStar.setPosition(Global.mapBricks[row][col].position);\n                        var _self = this;\n                        var destination = cc.p(-280, 528);\n                        newStar.runAction(\n                            cc.sequence(cc.moveTo(destination.mag() / 400 * 1, destination),\n                                cc.callFunc(function () {\n                                    _self.starScore.string = ++Global.numStarScore;\n                                    Global.main.saveStarScore();\n                                }, this),\n                                cc.removeSelf()));\n                    } else {\n                        if (Global.arrBall.length < Global.platformData.maxBalls) {\n                            // 产生新的小球\n                            this.newBall(\n                                ball.node.position,\n                                cc.p(ball.velocity.x > 0 ? 0.5 + 2 * cc.random0To1() : -0.5 - 2 * cc.random0To1(), 0),\n                                Global.mapBricks[row][col].color, true, false);\n                        }\n                    }\n\n                    Global.mapInfo[row][col] = 0;\n\n                    let i = Global.mapBricks[row][col].i;\n                    let j = Global.mapBricks[row][col].j;\n                    Global.arrBrick[i][j] = null;\n\n                    Global.mapBricks[row][col].getComponent(\"Brick\").resetState();\n                    //Global.mapBricks[row][col].active = false;\n                    Global.mapBricks[row][col].setScale(0, 0);\n                    this.brickPool.push(Global.mapBricks[row][col]);\n                    Global.mapBricks[row][col] = null;\n\n                    if (this.audioTick > 10) {\n                        //console.log('play audio');\n                        Global.main.playEffectSound(2);\n                        this.audioTick = 0;\n                    }\n\n                    //this.continueBricks();\n                }\n            }\n        }\n    },\n\n    continueBricks: function () {\n        let isContinue = true;\n        let col = Global.brickCol;\n        for (var i = 0; i < Global.brickRow; i++) {\n            for (var j = 0; j < col; j++) {\n                if (Global.arrBrick[i] && Global.arrBrick[i][j]) {\n                    isContinue = false;\n                    break;\n                }\n            }\n        }\n\n        if (isContinue) {\n\n            console.log('砖块继续下降');\n            this.newBricks(1);\n            cc.director.getScheduler().schedule(this.updateGame, this, Global.brickDeltaTime, false);\n\n            // 下次连续出现的间隔时间\n            if (Global.platformData.BrickTimeB > Global.platformData.BrickTimeMin) {\n                Global.platformData.BrickTimeT -= 2;\n                Global.platformData.BrickTimeB -= 1;\n            }\n            var deltaTime = cc.random0To1() * (Global.platformData.BrickTimeT - Global.platformData.BrickTimeB) + Global.platformData.BrickTimeB;\n            cc.director.getScheduler().schedule(this.updateGame1, this, 30, false);\n\n        }\n    },\n\n    // 游戏定时产生砖块\n    updateGame: function (dt) {\n        //console.log('tick per 5 seconds!');\n        this.newBricks(1);\n\n        /*\n        if (this.brickRowCount % 10 == 0) {\n            console.log('砖块暂停下降');\n            cc.director.getScheduler().unschedule(this.updateGame, this);\n            cc.director.getScheduler().unschedule(this.updateGame1, this);\n        }*/\n\n        //if (Global.brickDeltaTime > Global.brickDeltaTimeMin) {\n        //cc.director.getScheduler().schedule(this.updateGame, this, Global.brickDeltaTime -= 0.05, false);\n        //}\n    },\n\n    // 游戏定时产生砖块\n    updateGame1: function (dt) {\n        //console.log('tick per 5 seconds!');\n        this.newBricks(1);\n        if (!this.isWait && !this.isOver) {\n            this.newBricks(1);\n        }\n\n        if (!this.isWait && !this.isOver) {\n            console.log('isWait 1', this.isWait);\n            setTimeout(() => {\n                this.newBricks(1);\n                if (!this.isWait && !this.isOver) {\n                    this.newBricks(1);\n                }\n                if (!this.isWait && !this.isOver) {\n                    console.log('isWait 2', this.isWait);\n                    setTimeout(() => {\n                        this.newBricks(1);\n                        if (!this.isWait && !this.isOver) {\n                            this.newBricks(1);\n                        }\n                    }, 500);\n\n                    // 下次连续出现的间隔时间\n                    //if (Global.platformData.BrickTimeB > Global.platformData.BrickTimeMin) {\n                    //    Global.platformData.BrickTimeT -= 2;\n                    //    Global.platformData.BrickTimeB -= 1;\n                    //}\n                    //var deltaTime = cc.random0To1() * (Global.platformData.BrickTimeT - Global.platformData.BrickTimeB) + Global.platformData.BrickTimeB;\n                    //cc.director.getScheduler().schedule(this.updateGame1, this, deltaTime, false);\n                }\n            }, 500);\n        }\n    },\n\n\n    onPropButton1: function () {\n        console.log('点击道具1');\n        Global.main.playTouchSound();\n\n        if (this.isBtn1) {\n            for (let i = 0; i < Global.platformData.maxProp2Balls; i++) {\n                // 产生新的小球\n                this.newBall(cc.p(this.paddle.node.position.x, this.paddle.node.position.y + Global.brickUnit),\n                    cc.p(i - Global.platformData.maxProp2Balls / 2, 10), Global.util.generateColorStrip3(0), true, true);\n            }\n\n            this.isBtn1 = false;\n            this.propBtnBg1.stopAllActions();\n            this.propBtnBg1.active = false;\n        } else {\n            // 分享复活\n            if (typeof FBInstant !== 'undefined') {\n                ThirdAPI.shareGame(this.getImgBase64(), this.onBtn1ShareSuccess.bind(this), this.onBtn1ShareFailed.bind(this));\n            } else if (typeof wx !== 'undefined') {\n                ThirdAPI.shareGame(null, this.onBtn1ShareSuccess.bind(this), this.onBtn1ShareFailed.bind(this), '003');\n            } else {\n                this.onBtn1ShareSuccess();\n            }\n        }\n    },\n\n    onBtn1ShareSuccess: function (openGId) {\n        console.log('求助成功');\n\n        if (!Global.shareOpen) {\n            console.log('游戏版本无分享获得道具');\n            return;\n        }\n\n        if (!openGId) {\n            console.log('分享的不是群');\n            Global.main.showDialogText('分享到群才能获得获得道具');\n            return;\n        }\n\n        if (Global.gameinfo.shareData4.arrOpenGId.indexOf(openGId) != -1) {\n            console.log('该群已经分享过', openGId);\n            Global.main.showDialogText('该群本日已经分享过无法获得道具');\n            return;\n        } else {\n            console.log('该群未分享过', openGId);\n            Global.gameinfo.shareData4.arrOpenGId.push(openGId);\n            ThirdAPI.saveInfo(Global.gameinfo);\n        }\n\n        this.isBtn1 = true;\n        this.propBtnBg1.active = true;\n        this.propBtnBg1.runAction(cc.repeatForever(cc.sequence(cc.fadeOut(0.5), cc.fadeIn(0.5))));\n    },\n\n    onBtn1ShareFailed: function () {\n        console.log('求助失败');\n        console.log('1.分享取消，2.分享的不是群');\n\n        if (!Global.shareOpen) {\n            console.log('游戏版本无分享获得道具');\n            return;\n        }\n\n        Global.main.showDialogText('分享到群才能获得获得道具');\n    },\n\n    onPropButton2: function () {\n        console.log('点击道具2');\n        Global.main.playTouchSound();\n\n        if (this.isBtn2) {\n            this.paddle.clearState();\n            this.paddle.becomeWidth(Global.zoneSize.width);\n\n            this.isBtn2 = false;\n            this.propBtnBg2.stopAllActions();\n            this.propBtnBg2.active = false;\n        } else {\n            // 分享复活\n            if (typeof FBInstant !== 'undefined') {\n                ThirdAPI.shareGame(this.getImgBase64(), this.onBtn2ShareSuccess.bind(this), this.onBtn2ShareFailed.bind(this));\n            } else if (typeof wx !== 'undefined') {\n                ThirdAPI.shareGame(null, this.onBtn2ShareSuccess.bind(this), this.onBtn2ShareFailed.bind(this), '003');\n            } else {\n                this.onBtn1ShareSuccess();\n            }\n        }\n    },\n\n    onBtn2ShareSuccess: function (openGId) {\n        console.log('求助成功');\n\n        if (!Global.shareOpen) {\n            console.log('游戏版本无分享获得道具');\n            return;\n        }\n\n        if (!openGId) {\n            console.log('分享的不是群');\n            Global.main.showDialogText('分享到群才能获得获得道具');\n            return;\n        }\n\n        if (Global.gameinfo.shareData4.arrOpenGId.indexOf(openGId) != -1) {\n            console.log('该群已经分享过', openGId);\n            Global.main.showDialogText('该群本日已经分享过无法获得道具');\n            return;\n        } else {\n            console.log('该群未分享过', openGId);\n            Global.gameinfo.shareData4.arrOpenGId.push(openGId);\n            ThirdAPI.saveInfo(Global.gameinfo);\n        }\n\n        this.isBtn2 = true;\n        this.propBtnBg2.active = true;\n        this.propBtnBg2.runAction(cc.repeatForever(cc.sequence(cc.fadeOut(0.5), cc.fadeIn(0.5))));\n    },\n\n    onBtn2ShareFailed: function () {\n        console.log('求助失败');\n        console.log('1.分享取消，2.分享的不是群');\n\n        if (!Global.shareOpen) {\n            console.log('游戏版本无分享获得道具');\n            return;\n        }\n\n        Global.main.showDialogText('分享到群才能获得获得道具');\n    },\n\n    onPropButton3: function () {\n        console.log('点击道具3');\n        Global.main.playTouchSound();\n\n        if (this.isBtn3) {\n            this.isWudi = true;\n            setTimeout(() => {\n                this.isWudi = false;\n            }, 10000);\n\n            this.isBtn3 = false;\n            this.propBtnBg3.stopAllActions();\n            this.propBtnBg3.active = false;\n        } else {\n            // 分享复活\n            if (typeof FBInstant !== 'undefined') {\n                ThirdAPI.shareGame(this.getImgBase64(), this.onBtn3ShareSuccess.bind(this), this.onBtn3ShareFailed.bind(this));\n            } else if (typeof wx !== 'undefined') {\n                ThirdAPI.shareGame(null, this.onBtn3ShareSuccess.bind(this), this.onBtn3ShareFailed.bind(this), '003');\n            } else {\n                this.onBtn1ShareSuccess();\n            }\n        }\n    },\n\n    onBtn3ShareSuccess: function (openGId) {\n        console.log('求助成功');\n\n        if (!Global.shareOpen) {\n            console.log('游戏版本无分享获得道具');\n            return;\n        }\n\n        if (!openGId) {\n            console.log('分享的不是群');\n            Global.main.showDialogText('分享到群才能获得获得道具');\n            return;\n        }\n\n        if (Global.gameinfo.shareData4.arrOpenGId.indexOf(openGId) != -1) {\n            console.log('该群已经分享过', openGId);\n            Global.main.showDialogText('该群本日已经分享过无法获得道具');\n            return;\n        } else {\n            console.log('该群未分享过', openGId);\n            Global.gameinfo.shareData4.arrOpenGId.push(openGId);\n            ThirdAPI.saveInfo(Global.gameinfo);\n        }\n\n        this.isBtn3 = true;\n        this.propBtnBg3.active = true;\n        this.propBtnBg3.runAction(cc.repeatForever(cc.sequence(cc.fadeOut(0.5), cc.fadeIn(0.5))));\n    },\n\n    onBtn3ShareFailed: function () {\n        console.log('求助失败');\n        console.log('1.分享取消，2.分享的不是群');\n\n        if (!Global.shareOpen) {\n            console.log('游戏版本无分享获得道具');\n            return;\n        }\n\n        Global.main.showDialogText('分享到群才能获得获得道具');\n    },\n\n    // 生成地图信息\n    newMapInfo: function (unit) {\n        Global.mapInfo = [];\n        Global.mapBricks = [];\n\n        var row = Math.floor(Global.zoneSize.height / unit);\n        var col = Math.floor(Global.zoneSize.width / unit);\n        //console.log(row, col);\n        for (var i = 0; i < row; i++) {\n            if (!Global.mapInfo[i]) Global.mapInfo[i] = [];\n            if (!Global.mapBricks[i]) Global.mapBricks[i] = [];\n\n            for (var j = 0; j < col; j++) {\n                Global.mapInfo[i][j] = 0; // 0 1\n                Global.mapBricks[i][j] = null;\n            }\n        }\n    },\n\n    // 生成砖块\n    newBricks: function (n, bricksNoNew) {\n\n        this.brickRowCount += n;\n        console.log('砖块行数：', this.brickRowCount);\n\n        bricksNoNew = ((this.brickRowCount % 15) > 9);\n        console.log('不产生砖块：', bricksNoNew);\n\n        var winSize = cc.director.getWinSize();\n        this.newMapInfo(Global.brickUnit);\n\n        let col = Global.brickCol;\n        let row = n;\n\n        let unit = Global.brickUnit;\n\n        if (!Global.arrBrick) {\n            Global.arrBrick = [];\n        } else {\n            for (var i = 0; i < Global.brickRow; i++) {\n                for (var j = 0; j < col; j++) {\n                    if (Global.arrBrick[i] && Global.arrBrick[i][j]) {\n                        Global.arrBrick[i][j].setScale(1, 1);\n\n                        Global.arrBrick[i][j].setPosition(Global.arrBrick[i][j].position.x, Global.arrBrick[i][j].position.y - Global.brickDistance * n);\n\n                        if (Global.mapInfo[Math.floor((Global.zoneSize.height / 2 + Global.arrBrick[i][j].position.y) / unit)]) {\n                            Global.mapInfo[Math.floor((Global.zoneSize.height / 2 + Global.arrBrick[i][j].position.y) / unit)][Math.floor((Global.zoneSize.width / 2 + Global.arrBrick[i][j].position.x) / unit)] = 1;\n                        }\n                        Global.mapBricks[Math.floor((Global.zoneSize.height / 2 + Global.arrBrick[i][j].position.y) / unit)][Math.floor((Global.zoneSize.width / 2 + Global.arrBrick[i][j].position.x) / unit)] = Global.arrBrick[i][j];\n\n                        if (Global.arrBrick[i][j].position.y < 150 + this.warningTip.y) {\n                            //console.log(Global.arrBrick[i][j].position.y);\n                            if (Global.arrBrick[i][j].position.y < this.warningTip.y - 70) {\n                                //Global.ball = null;\n                                //console.log('游戏结束b', Global.ball);\n                                Global.main.game.waitRevive();\n                                return;\n                            } else {\n                                //console.log(\"warning\");\n                                // 显示\n                                this.warningTip._sgNode.setVisible(true);\n                                this.warningTip.runAction(cc.repeat(cc.sequence(cc.fadeIn(1), cc.fadeOut(1)), 3));\n                            }\n                        }\n                    }\n                }\n            }\n        }\n\n        if (bricksNoNew) return;\n\n        // 生成砖块\n        let generateProp = false;\n        let generatePropCol = 0;\n\n        let propStep = 2;\n        if (this.brickRowCount <= 50) {\n            propStep = 2;\n        } else if (this.brickRowCount > 50 && this.brickRowCount <= 100) {\n            propStep = 3;\n        } else if (this.brickRowCount > 100 && this.brickRowCount <= 150) {\n            propStep = 4;\n        } else if (this.brickRowCount > 150 && this.brickRowCount <= 200) {\n            propStep = 5;\n        } else if (this.brickRowCount > 200 && this.brickRowCount <= 250) {\n            propStep = 6;\n        } else if (this.brickRowCount > 250 && this.brickRowCount <= 300) {\n            propStep = 7;\n        }\n\n        for (var i = 0; i < row; i++) {\n            if (!Global.arrBrick[Global.brickRow + i]) {\n                Global.arrBrick[Global.brickRow + i] = [];\n            }\n\n            if ((Global.brickRow + i) % propStep == 1) {\n                generateProp = true;\n                generatePropCol = Math.floor(cc.random0To1() * col);\n            }\n\n            for (var j = 0; j < col; j++) {\n                // 使用给定的模板在场景中生成一个新节点\n                var newBrick = null;\n                if (this.brickPool.length > 0) {\n                    newBrick = this.brickPool.pop();\n                    //console.log(\"从对象池创建砖块\");\n                } else {\n                    newBrick = cc.instantiate(this.brickPrefab);\n                    this.node.addChild(newBrick);\n                    //console.log(\"从Prefab创建砖块\");\n                }\n\n                //this.node.addChild(newBrick);\n                //newBrick.active = true;\n                newBrick.setScale(1, 1);\n                //newBrick.setContentSize(8,8);\n                newBrick.setContentSize(Global.brickUnit * 0.8, Global.brickUnit * 0.8);\n                newBrick.setPosition(cc.p(j * Global.brickDistance - Global.zoneSize.width / 2 + newBrick.width / 2, Global.zoneSize.height / 2 - (row - i - 1) * Global.brickDistance - Global.topEdge - newBrick.height / 2));\n                Global.mapInfo[Math.floor((Global.zoneSize.height / 2 + newBrick.position.y) / unit)][Math.floor((Global.zoneSize.width / 2 + newBrick.position.x) / unit)] = 1;\n                Global.mapBricks[Math.floor((Global.zoneSize.height / 2 + newBrick.position.y) / unit)][Math.floor((Global.zoneSize.width / 2 + newBrick.position.x) / unit)] = newBrick;\n                //newBrick.color = Global.util.generateColorStrip(j/col);\n                //newBrick.color = Global.util.generateColorStrip2(j/Global.brickCol, 1);\n                newBrick.color = Global.util.generateColorStrip3(0);\n                /*\n                if (Global.colorArray && Global.colorArray[Global.colorIndex] && Global.colorArray[Global.colorIndex][j])\n                {\n                    newBrick.color = Global.colorArray[Global.colorIndex][j];\n                }*/\n                newBrick.i = i + Global.brickRow;\n                newBrick.j = j;\n                Global.arrBrick[newBrick.i][newBrick.j] = newBrick;\n\n                // 道具\n                if (generateProp && generatePropCol == j) {\n                    var randPropNum = cc.random0To1() * 9;\n                    //console.log('道具种类', randPropNum);\n                    if (randPropNum >= 0 && randPropNum < this.prop1Chances) {\n                        newBrick.getComponent(\"Brick\").setProp(2);\n                    } else if (randPropNum >= this.prop1Chances && randPropNum < this.prop1Chances + this.prop2Chances) {\n                        newBrick.getComponent(\"Brick\").setProp(3);\n                    } else if (randPropNum >= this.prop1Chances + this.prop2Chances && randPropNum < this.prop1Chances + this.prop2Chances + this.prop3Chances) {\n                        newBrick.getComponent(\"Brick\").setProp(4);\n                    }\n                    //newBrick.getComponent(\"Brick\").setProp(Math.floor(cc.rand() % 3 + 2));\n                    newBrick.color = cc.color(255, 255, 255);\n                    generateProp = false;\n                }\n\n                if (cc.random0To1() < 0.06) {\n                    newBrick.getComponent(\"Brick\").setStar();\n                }\n\n                //console.log(Global.arrBrick[Global.brickRow + i]);\n            }\n\n            Global.colorIndex++;\n            if (Global.colorIndex >= Global.colorArray.length) {\n                Global.colorIndex = 0;\n            }\n\n            //console.log(Global.arrBrick[Global.brickRow + i]);\n        }\n\n        Global.brickRow += n;\n    },\n\n    // 生成道具\n    newProp: function (n, pos) {\n        let newProp = cc.instantiate(this.propPrefab);\n        this.node.addChild(newProp);\n        newProp.setContentSize(Global.brickUnit, Global.brickUnit);\n        newProp.setPosition(pos);\n        newProp.getComponent('Prop').setPropType(n);\n        Global.arrProp.push(newProp.getComponent('Prop'));\n    },\n\n    // 生成小球\n    newBalls: function () {\n        for (var i = 0; i < 1; i++) {\n            let newBall = cc.instantiate(this.ballPrefab);\n            this.balls.addChild(newBall);\n            if (Global.skinBall) {\n                newBall.getComponent(cc.Sprite).spriteFrame = Global.skinBall;\n            }\n            // 为星星设置一个随机位置\n            newBall.setContentSize(Global.brickUnit * 0.8, Global.brickUnit * 0.8);\n            newBall.setPosition(cc.p(Global.paddleX, Global.paddleY + Global.paddleHeight / 2 + newBall.height / 2 + 5));\n            var vel_x = (cc.random0To1() > 0.5 ? -1 : 1) * (3 + 3 * cc.random0To1());\n\n            var ball = newBall.getComponent('Ball');\n            //ball.velocity = cc.p(vel_x, 3 + 1 * cc.random0To1());//(cc.p(-5, 6));\n            //console.log(ball.velocity);\n            //newBall.color = cc.color(255, 0, 0);\n            // 将 Game 组件的实例传入小球组件\n            ball.isRebound = true;\n            ball.index = Global.arrBall.length;\n            ball.x = newBall.position.x;\n            ball.y = newBall.position.y;\n            ball.width = newBall.width;\n            ball.height = newBall.height;\n            ball.initStreak(true, newBall.color);\n            Global.arrBall.push(ball);\n            Global.ball = ball;\n\n            if (Global.platformData.isMotionStreak) {\n                if (ball.motionNode == null) {\n                    var newMotionStreak = new cc.Node('layer');\n                    this.layer.addChild(newMotionStreak);\n                    var ms = newMotionStreak.addComponent(cc.MotionStreak);\n                    ball.motionNode = newMotionStreak;\n                }\n\n                ball.motionNode.getComponent(cc.MotionStreak).enabled = true;\n                ball.motionNode.getComponent(cc.MotionStreak).reset();\n                ball.motionNode.getComponent(cc.MotionStreak).texture = Global.main.textureBall1;\n                if (Global.skinStreak) {\n                    ball.motionNode.getComponent(cc.MotionStreak).texture = Global.skinStreak.getTexture();\n                }\n\n                ball.motionNode.getComponent(cc.MotionStreak).stroke = newBall.width; //8;\n                ball.motionNode.getComponent(cc.MotionStreak).color = newBall.color;\n                ball.motionNode.getComponent(cc.MotionStreak).fadeTime = 0.5;\n            }\n        }\n        //Global.ball = newBall.getComponent('Ball');\n    },\n\n    // 根据位置、速度、颜色生成小球，第三种方法，对象池\n    newBall: function (pos, vel, color, isMotionStreak, isRebound) {\n        let newBall = null;\n        if (this.ballPool.length > 0) {\n            newBall = this.ballPool.pop();\n            //console.log(\"从对象池创建\");\n        } else {\n            newBall = cc.instantiate(this.ballPrefab);\n            this.balls.addChild(newBall);\n            //console.log(\"从Prefab创建\");\n        }\n\n        //this.balls.addChild(newBall);\n        newBall.setContentSize(Global.brickUnit * 0.4, Global.brickUnit * 0.4);\n        newBall.setPosition(pos);\n        var ball = newBall.getComponent('Ball');\n        ball.velocity = vel;\n        newBall.color = cc.hexToColor(Global.util.lightenDarkenColor(cc.colorToHex(color), -50)); //color;\n        ball.isRebound = isRebound;\n        ball.index = Global.arrBall.length;\n        ball.width = newBall.width;\n        ball.height = newBall.height;\n        ball.x = pos.x;\n        ball.y = pos.y;\n        //ball.isStreak = isMotionStreak;\n        ball.initStreak(isMotionStreak, newBall.color);\n        Global.arrBall.push(ball);\n\n        /*\n        if (isMotionStreak) {\n            var ms = newBall.addComponent(cc.MotionStreak);\n            ms.fadeTime = 0.5;\n        }        \n\n        \n        if (newBall.getComponent(cc.MotionStreak)) {\n            if (isMotionStreak) {\n                newBall.getComponent(cc.MotionStreak).enabled = true;\n            }\n            else {\n                newBall.getComponent(cc.MotionStreak).enabled = false;\n            }\n\n            if (!Global.motionStreakEnabled) {\n                newBall.getComponent(cc.MotionStreak).enabled = false;\n            }\n            newBall.getComponent(cc.MotionStreak).reset();\n            newBall.getComponent(cc.MotionStreak).texture = Global.main.textureBall1;\n            newBall.getComponent(cc.MotionStreak).stroke = newBall.width;//8;\n            newBall.getComponent(cc.MotionStreak).color = newBall.color;\n        }\n        */\n\n\n\n\n        if (Global.platformData.isMotionStreak && isMotionStreak) {\n            if (ball.motionNode == null) {\n                var newMotionStreak = new cc.Node('layer');\n                this.layer.addChild(newMotionStreak);\n                var ms = newMotionStreak.addComponent(cc.MotionStreak);\n                ball.motionNode = newMotionStreak;\n            }\n\n            ball.motionNode.getComponent(cc.MotionStreak).enabled = true;\n            ball.motionNode.getComponent(cc.MotionStreak).reset();\n            ball.motionNode.getComponent(cc.MotionStreak).texture = Global.main.textureBall1;\n            ball.motionNode.getComponent(cc.MotionStreak).stroke = newBall.width; //8;\n            ball.motionNode.getComponent(cc.MotionStreak).color = newBall.color;\n            ball.motionNode.getComponent(cc.MotionStreak).fadeTime = Global.platformData.fadeTime;\n            ball.motionNode.getComponent(cc.MotionStreak).fastMode = true;\n            ball.motionNode.getComponent(cc.MotionStreak).minSeg = 3;\n        } else {\n            if (ball.motionNode != null) {\n                ball.motionNode.removeComponent(cc.MotionStreak);\n                ball.motionNode = null;\n            }\n        }\n\n\n        //newBall.active = true;\n        newBall.setScale(1, 1);\n    },\n\n    // 加入图片像素到颜色方案\n    addImageToColorArray: function (imagefile) {\n        //console.log(\"addImageToColorArray\");\n        // 获取图片像素数据\n        var arr1 = Global.main.getImageColorArray(imagefile);\n        var colorRow = 0;\n        var colorCol = 0;\n        if (arr1.length) {\n            colorRow = arr1.length;\n            if (arr1[0].length) {\n                colorCol = arr1[0].length;\n            }\n        }\n\n        var imageRow = Math.floor(colorRow * Global.brickCol / colorCol);\n        //console.log(colorRow, imageRow);\n        if (colorCol) {\n            for (var i = 0; i < imageRow; i++) {\n                if (!Global.colorArray[i + Global.colorIndex]) {\n                    Global.colorArray[i + Global.colorIndex] = [];\n                }\n\n                for (var j = 0; j < Global.brickCol; j++) {\n                    //console.log((imageRow-i-1)*Math.floor(colorRow/imageRow),arr1.length, imageRow, colorRow, colorCol);\n                    Global.colorArray[i + Global.colorIndex][j] = arr1[(imageRow - i - 1) * Math.floor(colorRow / imageRow)][j * Math.floor(colorCol / Global.brickCol)];\n                }\n            }\n            Global.colorIndex += imageRow;\n            //console.log(Global.colorIndex);\n        }\n    },\n\n    // 加入颜色条带到颜色方案\n    addStripToColorArray: function (stripRow) {\n        for (var i = 0; i < stripRow; i++) {\n            if (!Global.colorArray[i + Global.colorIndex]) {\n                Global.colorArray[i + Global.colorIndex] = [];\n            }\n\n            for (var j = 0; j < Global.brickCol; j++) {\n                Global.colorArray[i + Global.colorIndex][j] = Global.util.generateColorStrip1(j / Global.brickCol);\n            }\n        }\n        Global.colorIndex += stripRow;\n        //console.log(Global.colorIndex);\n    },\n\n    // 加入颜色条带到颜色方案1\n    addStripToColorArray1: function (stripRow, stripCol, n) {\n        for (var i = 0; i < stripRow; i++) {\n            if (!Global.colorArray[i + Global.colorIndex]) {\n                Global.colorArray[i + Global.colorIndex] = [];\n            }\n        }\n\n        var colorBrick;\n        for (var i = 0; i < Global.brickCol; i++) {\n            if (i % 4 == 0) {\n                colorBrick = Global.util.generateColorStrip1(i / Global.brickCol, n);\n            }\n\n            for (var j = 0; j < stripRow; j++) {\n                Global.colorArray[j + Global.colorIndex][i] = colorBrick;\n            }\n        }\n\n        Global.colorIndex += stripRow;\n        //console.log(Global.colorIndex);\n    },\n\n    // 生成颜色方案数组\n    generateColorArray: function () {\n        Global.colorArray = [];\n        Global.colorIndex = 0;\n\n        //this.addImageToColorArray(\"resources/2.png\");\n        //this.addStripToColorArray(10);\n        //this.addImageToColorArray(\"resources/4.jpg\");\n        //this.addStripToColorArray(10);\n        this.addStripToColorArray1(4, 4, 1);\n        this.addStripToColorArray1(4, 4, 2);\n        this.addStripToColorArray1(4, 4, 3);\n        this.addStripToColorArray1(4, 4, 4);\n        this.addStripToColorArray1(4, 4, 5);\n        this.addStripToColorArray1(4, 4, 6);\n        this.addStripToColorArray1(4, 4, 7);\n        this.addStripToColorArray1(4, 4, 8);\n        //this.addImageToColorArray(\"resources/brickbg1.png\");\n\n        //console.log(Global.colorArray);\n        Global.colorIndex = 0;\n    },\n\n    // 绘制点\n    drawPoint: function (x, y, color, size) {\n        this.g.fillColor = color;\n        this.g.circle(x, y, size);\n        this.g.fill();\n    },\n\n    // 绘制直线\n    drawLine: function (pt1, pt2, color, size) {\n        this.g.strokeColor = color;\n        this.g.lineWidth = size;\n        this.g.moveTo(pt1.x, pt1.y);\n        this.g.lineTo(pt2.x, pt2.y);\n    },\n\n    // 绘制小球拖尾\n    drawTail: function () {\n        this.g.clear();\n        for (var x in Global.arrBall) {\n            // 获取小球颜色\n            var colorTail = Global.arrBall[x].node.color;\n            let colorTailMinValue = colorTail.getR() < colorTail.getG() ? colorTail.getR() : (colorTail.getG() < colorTail.getB() ? colorTail.getG() : colorTail.getB());\n            var colorTailHex = cc.colorToHex(colorTail);\n\n            // 获取小球宽度，根据宽度算出20次减到0需要的步长\n            var deltaSize = 0;\n            if (Global.arrBall[x].arrPoint.length > 0) {\n                deltaSize = Global.arrBall[x].node.width / 2 / Global.arrBall[x].arrPoint.length;\n            }\n\n            for (var i = 0; i < Global.arrBall[x].arrPoint.length; i++) {\n                // 调整颜色亮度\n                colorTailHex = Global.util.lightenDarkenColor(colorTailHex, -0.03 * colorTailMinValue);\n\n                this.drawPoint(Global.arrBall[x].arrPoint[i].x, Global.arrBall[x].arrPoint[i].y,\n                    cc.hexToColor(colorTailHex),\n                    Global.arrBall[x].node.width / 2 - i * deltaSize);\n                if (i + 1 < Global.arrBall[x].arrPoint.length) {\n\n                    this.drawPoint((Global.arrBall[x].arrPoint[i].x + Global.arrBall[x].arrPoint[i + 1].x) / 2, (Global.arrBall[x].arrPoint[i].y + Global.arrBall[x].arrPoint[i + 1].y) / 2,\n                        cc.hexToColor(colorTailHex),\n                        Global.arrBall[x].node.width / 2 - i * deltaSize);\n                }\n            }\n        }\n    },\n\n    initPropButtonState1: function () {\n\n        this.propBtns.active = false;\n        this.propBtns.setLocalZOrder(2000);\n\n        this.isBtn1 = true;\n        this.isBtn2 = true;\n        this.isBtn3 = true;\n\n        this.propBtnBg1.active = true;\n        this.propBtnBg2.active = true;\n        this.propBtnBg2.active = true;\n        this.propBtnBg1.runAction(cc.repeatForever(cc.sequence(cc.fadeOut(0.5), cc.fadeIn(0.5))));\n        this.propBtnBg2.runAction(cc.repeatForever(cc.sequence(cc.fadeOut(0.5), cc.fadeIn(0.5))));\n        this.propBtnBg3.runAction(cc.repeatForever(cc.sequence(cc.fadeOut(0.5), cc.fadeIn(0.5))));\n    },\n\n    // 适配iphoneX\n    fitIphoneX1: function () {\n        if (Global.fitIphoneX) {\n            console.log('适配iphoneX');\n            this.TopEdge.height = 120;\n            this.score.node.getComponent(cc.Widget).top = 60;\n            this.scoreIcon.getComponent(cc.Widget).top = 60;\n            this.starScore.node.getComponent(cc.Widget).top = 60;\n            this.starScoreIcon.getComponent(cc.Widget).top = 60;\n            this.doublingScore.node.getComponent(cc.Widget).top = 55;\n        }\n    },\n\n    // 初始化对局类型\n    initGameType1: function () {\n        var randnum = cc.random0To1() * 100;\n        if (randnum >= 0 && randnum < 10) {\n            this.gameType = 1;\n            this.gameTypeSprite.spriteFrame = loadAtlas.getSpriteFrameFromName('icon-long');\n        } else if (randnum >= 10 && randnum < 20) {\n            this.gameType = 2;\n            this.gameTypeSprite.spriteFrame = loadAtlas.getSpriteFrameFromName('icon-3');\n        } else if (randnum >= 20 && randnum < 30) {\n            this.gameType = 3;\n            this.gameTypeSprite.spriteFrame = loadAtlas.getSpriteFrameFromName('icon-X2');\n        } else {\n            this.gameType = 0;\n        }\n\n        if (this.gameType == 0) { //普通局\n            this.prop1Chances = 3;\n            this.prop2Chances = 3;\n            this.prop3Chances = 3;\n        } else if (this.gameType == 1) { // 道具1局\n            this.prop1Chances = 7;\n            this.prop2Chances = 1;\n            this.prop3Chances = 1;\n        } else if (this.gameType == 2) { // 道具2局\n            this.prop1Chances = 1;\n            this.prop2Chances = 7;\n            this.prop3Chances = 1;\n        } else if (this.gameType == 3) { // 道具3局\n            this.prop1Chances = 1;\n            this.prop2Chances = 1;\n            this.prop3Chances = 7;\n        }\n\n        console.log('道具概率：', this.gameType, this.prop1Chances, this.prop2Chances, this.prop3Chances);\n    },\n\n    // 初始化对象池\n    initGameObjectPool1: function () {\n        // 初始化小球对象池\n        this.ballPool = [];\n        let initCount = 100;\n        for (let i = 0; i < initCount; ++i) {\n            let ball = cc.instantiate(this.ballPrefab);\n            this.ballPool.push(ball);\n            this.balls.addChild(ball);\n            //ball.active = false;\n            ball.setScale(0, 0);\n        }\n\n        // 初始化砖块对象池\n        this.brickPool = [];\n        let initCountBrick = 400;\n        for (let i = 0; i < initCountBrick; ++i) {\n            let ball = cc.instantiate(this.brickPrefab);\n            this.brickPool.push(ball);\n            this.node.addChild(ball);\n            //ball.active = false;\n            ball.setScale(0, 0);\n        }\n    },\n\n    initGameObjectPool2: function () {\n        if (this.isWait) {\n            //console.log('等待复活');\n            return;\n        }\n\n        // 如果小球消失，游戏结束\n        if (Global.arrBall.length <= 0) {\n            //console.log('游戏结束a', Global.ball);\n            this.waitRevive();\n            return;\n        }\n\n        this.audioTick++;\n\n        //if (this.isOver) return;\n\n        this.collision(dt);\n\n        for (var i = 0; i < Global.arrProp.length; i++) {\n            var prop = Global.arrProp[i];\n            if (!prop) continue;\n\n            prop.node.setPositionY(prop.node.position.y - 6);\n\n            if (!this.isOver && prop.collision() == 2) {\n                Global.main.playPropSound();\n\n                if (prop.propType == 1) {\n                    if (!this.prop1) {\n                        this.prop1 = true;\n                        /*\n                        var vel = Global.ball.velocity;\n                        setTimeout(() => {\n                            this.prop1 = false;\n                            if (Global.ball)\n                            {\n                                Global.ball.setVelocity(vel);\n                                if (Global.ball.velocity.y <0) {\n                                    Global.ball.velocity.y *=-1;\n                                }\n                            }\n                                \n                        }, 5000);\n                        Global.ball.setVelocity(cc.p(24, 14));\n                        */\n                    }\n                } else if (prop.propType == 2 && Global.paddleWidth <= Global.platformData.paddleBeginWidth) {\n                    //if (!this.prop2) {\n                    this.prop2 = true;\n                    this.paddle.clearState();\n                    this.paddle.becomeWidth(Global.platformData.paddleBeginWidth);\n                    //}\n                } else if (prop.propType == 3) {\n                    for (let i = 0; i < Global.platformData.maxProp2Balls; i++) {\n                        // 产生新的小球\n                        this.newBall(cc.p(this.paddle.node.position.x, this.paddle.node.position.y + Global.brickUnit),\n                            cc.p(i - Global.platformData.maxProp2Balls / 2, 10), Global.util.generateColorStrip3(0), true, true);\n                    }\n                } else if (prop.propType == 4) {\n                    if (!this.prop4) {\n                        this.prop4 = true;\n                        //console.log('道具4');\n                        Global.unitScore = 2;\n                        this.doublingScore.node._sgNode.setVisible(true);\n                        this.doublingScore.node.runAction(cc.repeat(cc.sequence(cc.fadeIn(1), cc.fadeOut(1)), 5));\n                        setTimeout(() => {\n                            this.prop4 = false;\n                            Global.unitScore = 2;\n                        }, 10000);\n                    }\n                } else if (prop.propType == 5) {\n                    //console.log('道具5');\n                    // 产生新的小球\n                    //this.newBalls();\n\n                    this.newBall(\n                        Global.ball.node.position,\n                        Global.util.calculateVelocity(Global.ball.velocity, -3.1415926 / 6),\n                        Global.util.generateColorStrip3(0),\n                        true, true);\n                    this.newBall(\n                        Global.ball.node.position,\n                        Global.util.calculateVelocity(Global.ball.velocity, 3.1415926 / 6),\n                        Global.util.generateColorStrip3(0),\n                        true, true);\n                }\n            }\n        }\n\n        /*\n        if (this.prop1) {\n            this.paddle.node.setPositionX(Global.ball.node.position.x);\n        }\n        */\n\n        if (Global.ball != null) {\n            if (Global.ball.velocity.x < Global.ballSpeedMax.x && Global.ball.velocity.y < Global.ballSpeedMax.y) {\n                Global.ball.velocity.x += Global.ball.velocity.x * 0.0001;\n                Global.ball.velocity.y += Global.ball.velocity.y * 0.0001;\n                if (Global.ball.velocity.x > 0 || Global.ball.velocity.y > 0) {\n                    this.ballVel = Global.ball.velocity;\n                    //console.log(\"加速中\", this.ballVel);\n\n                }\n            } else {\n                //console.log(\"停止加速\", Global.ball.velocity);\n            }\n        }\n\n        // 绘制场景中所有小球的拖尾\n        //this.g.clear();\n        //this.drawTail();\n        //console.log(\"the balls count is : %d\", Global.arrBall.length);\n        Global.main.labelLog.getComponent(cc.Label).string = \"the balls count is : \" + Global.arrBall.length;\n    },\n\n    // 进入复活界面\n    waitRevive1: function () {\n\n        if (this.paddle) {\n            this.paddle.clearState();\n        }\n\n        if (this.reviveTimes >= 1 || (this.reviveTimes > 1 && Global.numStarScore < 10)) {\n            this.gameOver();\n        } else {\n            // 暂停所有\n            this.isWait = true;\n            cc.director.getScheduler().unschedule(this.updateGame, this);\n            cc.director.getScheduler().unschedule(this.updateGame1, this);\n\n            // 进入复活界面\n            Global.main.showUIRevive();\n        }\n    },\n\n    // 复活\n    onRevive1: function () {\n\n        // 创建初始小球\n        if (Global.ball) {\n            Global.ball.PickSelf();\n            Global.ball = null;\n        }\n        this.newBalls();\n\n        var _self = this;\n        // 消除砖块\n        let col = Global.brickCol;\n        if (Global.brickRow > 3) {\n            for (var i = 0; i < Global.brickRow - 3; i++) {\n                for (var j = 0; j < col; j++) {\n                    if (Global.arrBrick[i] && Global.arrBrick[i][j]) {\n                        let row = Global.arrBrick[i][j].i;\n                        let col = Global.arrBrick[i][j].j;\n\n                        if (Global.mapInfo[row])\n                            Global.mapInfo[row][col] = 0;\n                        if (Global.mapBricks[row])\n                            Global.mapBricks[row][col] = null;\n\n                        Global.arrBrick[i][j].runAction(cc.sequence(cc.blink(1, 4), cc.callFunc(function (node) {\n                            //console.log('index', i, j, node);\n                            if (node) {\n                                node.getComponent(\"Brick\").resetState();\n                                node.setScale(0, 0);\n                                _self.brickPool.push(node);\n                            }\n                        }, Global.arrBrick[i][j])));\n                        Global.arrBrick[i][j] = null;\n                    }\n                }\n            }\n        }\n\n        //setTimeout(() => {\n        this.reviveTimes++;\n        this.isWait = false;\n        this.tip.opacity = 255;\n        this.starScore.string = Global.numStarScore;\n        //cc.director.getScheduler().schedule(this.updateGame, this, Global.brickDeltaTime, false);\n\n        this.propBtns.active = false;\n\n        Global.paddleWidth = Global.platformData.paddleBeginWidth;\n        this.paddle.node.width = Global.platformData.paddleBeginWidth;\n        //console.log('the paddle width', this.paddle.node.width);   \n        //}, 1000);\n\n        var _self = this;\n        this.node.on('touchstart', function (event) {\n            console.log('touch start1');\n\n            _self.paddle.becomeWidth(Global.platformData.paddleBeginWidth);\n\n            _self.tip.runAction(cc.repeat(cc.sequence(cc.fadeIn(0.5), cc.fadeOut(0.5)), 5));\n\n            if (Global.ball && Global.ball.motionNode)\n                Global.ball.motionNode.getComponent(cc.MotionStreak).reset();\n\n            var vel_x = (cc.random0To1() > 0.5 ? -1 : 1) * (3 + 3 * cc.random0To1());\n            //Global.ball.velocity = _self.ballVel;//cc.p(vel_x, 3 + 1 * cc.random0To1());//(cc.p(-5, 6));\n            Global.ball.velocity.x = _self.ballVel.x; //cc.p(vel_x, 3 + 1 * cc.random0To1());//(cc.p(-5, 6));\n            Global.ball.velocity.y = Math.abs(_self.ballVel.y);\n            //console.log(\"开始\", _self.ballVel);\n\n            _self.newBricks(1);\n            cc.director.getScheduler().schedule(_self.updateGame, _self, Global.brickDeltaTime, false);\n\n            // 下次连续出现的间隔时间\n            if (Global.platformData.BrickTimeB > Global.platformData.BrickTimeMin) {\n                Global.platformData.BrickTimeT -= 2;\n                Global.platformData.BrickTimeB -= 1;\n            }\n            var deltaTime = cc.random0To1() * (Global.platformData.BrickTimeT - Global.platformData.BrickTimeB) + Global.platformData.BrickTimeB;\n            cc.director.getScheduler().schedule(_self.updateGame1, _self, /*deltaTime*/ 30, false);\n\n            _self.propBtns.active = true;\n\n            _self.node.off('touchstart');\n        });\n    },\n\n    // 游戏结束\n    gameOver1: function () {\n        let col = Global.brickCol;\n\n        this.propBtns.active = false;\n\n        this.isWait = false;\n        this.isOver = true;\n        cc.director.getScheduler().unschedule(this.updateGame, this);\n        cc.director.getScheduler().unschedule(this.updateGame1, this);\n\n        for (var i = 0; i < Global.brickRow; i++) {\n            for (var j = 0; j < col; j++) {\n                if (Global.arrBrick[i] && Global.arrBrick[i][j]) {\n                    // 产生新的小球\n                    this.newBall(\n                        Global.arrBrick[i][j].position,\n                        cc.p(0, -2),\n                        Global.arrBrick[i][j].color, false, false);\n\n                    if (Global.mapInfo[i])\n                        Global.mapInfo[i][j] = 0;\n\n                    //Global.arrBrick[i][j].active = false;\n                    Global.arrBrick[i][j].setScale(0, 0);\n                    this.brickPool.push(Global.arrBrick[i][j]);\n                    Global.arrBrick[i][j] = null;\n                }\n            }\n        }\n\n        setTimeout(() => {\n            Global.main.gameOver();\n        }, 3000);\n    },\n\n    // 碰撞检测\n    collision1: function (dt) {\n        if (!Global.arrBall || !Global.arrBall.length) return;\n        this.updateCount++;\n        //if (this.updateCount % 2 == 0)  return;\n        for (var i = 0; i < Global.arrBall.length; i++) {\n            var ball = Global.arrBall[i];\n            if (!ball) continue;\n            //if (this.updateCount % 2 == 0) {\n            //if (i%2 == 0) continue;\n            //}\n            //else {\n            //if (i%2 == 1) continue;\n            //}\n\n            //console.log('tick');\n            ball.x += ball.velocity.x;\n            ball.y += ball.velocity.y;\n            ball.node.setPosition(ball.x, ball.y);\n            //if (this.arrMs[i])    \n            //this.arrMs[i].setPosition(ball.x, ball.y);\n            if (ball.motionNode)\n                ball.motionNode.setPosition(ball.x, ball.y);\n            //if (this.updateCount % 5 == 0)\n            if (!Global.platformData.isMotionStreak) {\n                ball.savePath();\n                //console.log(ball.node.position);\n            }\n            if (!ball.isRebound) {\n                ball.collisionWhenNoRebound();\n                ball.velocity.y -= 0.05;\n            } else {\n                ball.collision();\n\n                if (this.isOver) continue;\n                //continue;\n\n                var posX = Global.zoneSize.width / 2 + ball.x;\n                var posY = Global.zoneSize.height / 2 + ball.y;\n\n                if (posY % Global.brickUnit > Global.brickUnit * 0.8 ||\n                    posX % Global.brickUnit > Global.brickUnit * 0.7) {\n                    //console.log(\"continue\");\n                    continue;\n                }\n\n                var row = Math.floor(posY / Global.brickUnit);\n                var col = Math.floor(posX / Global.brickUnit);\n\n                if (!Global.mapInfo[row] || !Global.mapInfo[row][col]) continue;\n                if (Global.mapInfo[row][col] == 1) {\n                    //ball.collisionWithBrick();\n                    if (Global.ball == ball && this.isWudi) {\n\n                    } else {\n                        ball.velocity.y *= -1;\n                        ball.isCollision = true;\n                    }\n\n                    if (Global.mapBricks[row][col].getComponent(\"Brick\").isProp) {\n                        this.newProp(Global.mapBricks[row][col].getComponent('Brick').propType, Global.mapBricks[row][col].position);\n                    } else if (Global.mapBricks[row][col].getComponent(\"Brick\").isStar) {\n\n                        let newStar = cc.instantiate(this.starPrefab);\n                        this.node.addChild(newStar);\n                        newStar.setPosition(Global.mapBricks[row][col].position);\n                        var _self = this;\n                        var destination = cc.p(-280, 528);\n                        newStar.runAction(\n                            cc.sequence(cc.moveTo(destination.mag() / 400 * 1, destination),\n                                cc.callFunc(function () {\n                                    _self.starScore.string = ++Global.numStarScore;\n                                    Global.main.saveStarScore();\n                                }, this),\n                                cc.removeSelf()));\n                    } else {\n                        if (Global.arrBall.length < Global.platformData.maxBalls) {\n                            // 产生新的小球\n                            this.newBall(\n                                ball.node.position,\n                                cc.p(ball.velocity.x > 0 ? 0.5 + 2 * cc.random0To1() : -0.5 - 2 * cc.random0To1(), 0),\n                                Global.mapBricks[row][col].color, true, false);\n                        }\n                    }\n\n                    Global.mapInfo[row][col] = 0;\n\n                    let i = Global.mapBricks[row][col].i;\n                    let j = Global.mapBricks[row][col].j;\n                    Global.arrBrick[i][j] = null;\n\n                    Global.mapBricks[row][col].getComponent(\"Brick\").resetState();\n                    //Global.mapBricks[row][col].active = false;\n                    Global.mapBricks[row][col].setScale(0, 0);\n                    this.brickPool.push(Global.mapBricks[row][col]);\n                    Global.mapBricks[row][col] = null;\n\n                    if (this.audioTick > 10) {\n                        //console.log('play audio');\n                        Global.main.playEffectSound(2);\n                        this.audioTick = 0;\n                    }\n\n                    //this.continueBricks();\n                }\n            }\n        }\n    },\n\n    continueBricks1: function () {\n        let isContinue = true;\n        let col = Global.brickCol;\n        for (var i = 0; i < Global.brickRow; i++) {\n            for (var j = 0; j < col; j++) {\n                if (Global.arrBrick[i] && Global.arrBrick[i][j]) {\n                    isContinue = false;\n                    break;\n                }\n            }\n        }\n\n        if (isContinue) {\n\n            console.log('砖块继续下降');\n            this.newBricks(1);\n            cc.director.getScheduler().schedule(this.updateGame, this, Global.brickDeltaTime, false);\n\n            // 下次连续出现的间隔时间\n            if (Global.platformData.BrickTimeB > Global.platformData.BrickTimeMin) {\n                Global.platformData.BrickTimeT -= 2;\n                Global.platformData.BrickTimeB -= 1;\n            }\n            var deltaTime = cc.random0To1() * (Global.platformData.BrickTimeT - Global.platformData.BrickTimeB) + Global.platformData.BrickTimeB;\n            cc.director.getScheduler().schedule(this.updateGame1, this, 30, false);\n\n        }\n    },\n\n    // 游戏定时产生砖块\n    updateGame1: function (dt) {\n        //console.log('tick per 5 seconds!');\n        this.newBricks(1);\n\n        /*\n        if (this.brickRowCount % 10 == 0) {\n            console.log('砖块暂停下降');\n            cc.director.getScheduler().unschedule(this.updateGame, this);\n            cc.director.getScheduler().unschedule(this.updateGame1, this);\n        }*/\n\n        //if (Global.brickDeltaTime > Global.brickDeltaTimeMin) {\n        //cc.director.getScheduler().schedule(this.updateGame, this, Global.brickDeltaTime -= 0.05, false);\n        //}\n    },\n\n    // 游戏定时产生砖块\n    updateGame12: function (dt) {\n        //console.log('tick per 5 seconds!');\n        this.newBricks(1);\n        if (!this.isWait && !this.isOver) {\n            this.newBricks(1);\n        }\n\n        if (!this.isWait && !this.isOver) {\n            console.log('isWait 1', this.isWait);\n            setTimeout(() => {\n                this.newBricks(1);\n                if (!this.isWait && !this.isOver) {\n                    this.newBricks(1);\n                }\n                if (!this.isWait && !this.isOver) {\n                    console.log('isWait 2', this.isWait);\n                    setTimeout(() => {\n                        this.newBricks(1);\n                        if (!this.isWait && !this.isOver) {\n                            this.newBricks(1);\n                        }\n                    }, 500);\n\n                    // 下次连续出现的间隔时间\n                    //if (Global.platformData.BrickTimeB > Global.platformData.BrickTimeMin) {\n                    //    Global.platformData.BrickTimeT -= 2;\n                    //    Global.platformData.BrickTimeB -= 1;\n                    //}\n                    //var deltaTime = cc.random0To1() * (Global.platformData.BrickTimeT - Global.platformData.BrickTimeB) + Global.platformData.BrickTimeB;\n                    //cc.director.getScheduler().schedule(this.updateGame1, this, deltaTime, false);\n                }\n            }, 500);\n        }\n    },\n\n\n    onPropButton11: function () {\n        console.log('点击道具1');\n        Global.main.playTouchSound();\n\n        if (this.isBtn1) {\n            for (let i = 0; i < Global.platformData.maxProp2Balls; i++) {\n                // 产生新的小球\n                this.newBall(cc.p(this.paddle.node.position.x, this.paddle.node.position.y + Global.brickUnit),\n                    cc.p(i - Global.platformData.maxProp2Balls / 2, 10), Global.util.generateColorStrip3(0), true, true);\n            }\n\n            this.isBtn1 = false;\n            this.propBtnBg1.stopAllActions();\n            this.propBtnBg1.active = false;\n        } else {\n            // 分享复活\n            if (typeof FBInstant !== 'undefined') {\n                ThirdAPI.shareGame(this.getImgBase64(), this.onBtn1ShareSuccess.bind(this), this.onBtn1ShareFailed.bind(this));\n            } else if (typeof wx !== 'undefined') {\n                ThirdAPI.shareGame(null, this.onBtn1ShareSuccess.bind(this), this.onBtn1ShareFailed.bind(this), '003');\n            } else {\n                this.onBtn1ShareSuccess();\n            }\n        }\n    },\n\n    onBtn1ShareSuccess1: function (openGId) {\n        console.log('求助成功');\n\n        if (!Global.shareOpen) {\n            console.log('游戏版本无分享获得道具');\n            return;\n        }\n\n        if (!openGId) {\n            console.log('分享的不是群');\n            Global.main.showDialogText('分享到群才能获得获得道具');\n            return;\n        }\n\n        if (Global.gameinfo.shareData4.arrOpenGId.indexOf(openGId) != -1) {\n            console.log('该群已经分享过', openGId);\n            Global.main.showDialogText('该群本日已经分享过无法获得道具');\n            return;\n        } else {\n            console.log('该群未分享过', openGId);\n            Global.gameinfo.shareData4.arrOpenGId.push(openGId);\n            ThirdAPI.saveInfo(Global.gameinfo);\n        }\n\n        this.isBtn1 = true;\n        this.propBtnBg1.active = true;\n        this.propBtnBg1.runAction(cc.repeatForever(cc.sequence(cc.fadeOut(0.5), cc.fadeIn(0.5))));\n    },\n\n    onBtn1ShareFailed1: function () {\n        console.log('求助失败');\n        console.log('1.分享取消，2.分享的不是群');\n\n        if (!Global.shareOpen) {\n            console.log('游戏版本无分享获得道具');\n            return;\n        }\n\n        Global.main.showDialogText('分享到群才能获得获得道具');\n    },\n\n    onPropButton21: function () {\n        console.log('点击道具2');\n        Global.main.playTouchSound();\n\n        if (this.isBtn2) {\n            this.paddle.clearState();\n            this.paddle.becomeWidth(Global.zoneSize.width);\n\n            this.isBtn2 = false;\n            this.propBtnBg2.stopAllActions();\n            this.propBtnBg2.active = false;\n        } else {\n            // 分享复活\n            if (typeof FBInstant !== 'undefined') {\n                ThirdAPI.shareGame(this.getImgBase64(), this.onBtn2ShareSuccess.bind(this), this.onBtn2ShareFailed.bind(this));\n            } else if (typeof wx !== 'undefined') {\n                ThirdAPI.shareGame(null, this.onBtn2ShareSuccess.bind(this), this.onBtn2ShareFailed.bind(this), '003');\n            } else {\n                this.onBtn1ShareSuccess();\n            }\n        }\n    },\n\n    onBtn2ShareSuccess1: function (openGId) {\n        console.log('求助成功');\n\n        if (!Global.shareOpen) {\n            console.log('游戏版本无分享获得道具');\n            return;\n        }\n\n        if (!openGId) {\n            console.log('分享的不是群');\n            Global.main.showDialogText('分享到群才能获得获得道具');\n            return;\n        }\n\n        if (Global.gameinfo.shareData4.arrOpenGId.indexOf(openGId) != -1) {\n            console.log('该群已经分享过', openGId);\n            Global.main.showDialogText('该群本日已经分享过无法获得道具');\n            return;\n        } else {\n            console.log('该群未分享过', openGId);\n            Global.gameinfo.shareData4.arrOpenGId.push(openGId);\n            ThirdAPI.saveInfo(Global.gameinfo);\n        }\n\n        this.isBtn2 = true;\n        this.propBtnBg2.active = true;\n        this.propBtnBg2.runAction(cc.repeatForever(cc.sequence(cc.fadeOut(0.5), cc.fadeIn(0.5))));\n    },\n\n    onBtn2ShareFailed1: function () {\n        console.log('求助失败');\n        console.log('1.分享取消，2.分享的不是群');\n\n        if (!Global.shareOpen) {\n            console.log('游戏版本无分享获得道具');\n            return;\n        }\n\n        Global.main.showDialogText('分享到群才能获得获得道具');\n    },\n\n    onPropButton31: function () {\n        console.log('点击道具3');\n        Global.main.playTouchSound();\n\n        if (this.isBtn3) {\n            this.isWudi = true;\n            setTimeout(() => {\n                this.isWudi = false;\n            }, 10000);\n\n            this.isBtn3 = false;\n            this.propBtnBg3.stopAllActions();\n            this.propBtnBg3.active = false;\n        } else {\n            // 分享复活\n            if (typeof FBInstant !== 'undefined') {\n                ThirdAPI.shareGame(this.getImgBase64(), this.onBtn3ShareSuccess.bind(this), this.onBtn3ShareFailed.bind(this));\n            } else if (typeof wx !== 'undefined') {\n                ThirdAPI.shareGame(null, this.onBtn3ShareSuccess.bind(this), this.onBtn3ShareFailed.bind(this), '003');\n            } else {\n                this.onBtn1ShareSuccess();\n            }\n        }\n    },\n\n    onBtn3ShareSuccess1: function (openGId) {\n        console.log('求助成功');\n\n        if (!Global.shareOpen) {\n            console.log('游戏版本无分享获得道具');\n            return;\n        }\n\n        if (!openGId) {\n            console.log('分享的不是群');\n            Global.main.showDialogText('分享到群才能获得获得道具');\n            return;\n        }\n\n        if (Global.gameinfo.shareData4.arrOpenGId.indexOf(openGId) != -1) {\n            console.log('该群已经分享过', openGId);\n            Global.main.showDialogText('该群本日已经分享过无法获得道具');\n            return;\n        } else {\n            console.log('该群未分享过', openGId);\n            Global.gameinfo.shareData4.arrOpenGId.push(openGId);\n            ThirdAPI.saveInfo(Global.gameinfo);\n        }\n\n        this.isBtn3 = true;\n        this.propBtnBg3.active = true;\n        this.propBtnBg3.runAction(cc.repeatForever(cc.sequence(cc.fadeOut(0.5), cc.fadeIn(0.5))));\n    },\n\n    onBtn3ShareFailed1: function () {\n        console.log('求助失败');\n        console.log('1.分享取消，2.分享的不是群');\n\n        if (!Global.shareOpen) {\n            console.log('游戏版本无分享获得道具');\n            return;\n        }\n\n        Global.main.showDialogText('分享到群才能获得获得道具');\n    },\n\n    // 生成地图信息\n    newMapInfo1: function (unit) {\n        Global.mapInfo = [];\n        Global.mapBricks = [];\n\n        var row = Math.floor(Global.zoneSize.height / unit);\n        var col = Math.floor(Global.zoneSize.width / unit);\n        //console.log(row, col);\n        for (var i = 0; i < row; i++) {\n            if (!Global.mapInfo[i]) Global.mapInfo[i] = [];\n            if (!Global.mapBricks[i]) Global.mapBricks[i] = [];\n\n            for (var j = 0; j < col; j++) {\n                Global.mapInfo[i][j] = 0; // 0 1\n                Global.mapBricks[i][j] = null;\n            }\n        }\n    },\n\n    // 生成砖块\n    newBricks1: function (n, bricksNoNew) {\n\n        this.brickRowCount += n;\n        console.log('砖块行数：', this.brickRowCount);\n\n        bricksNoNew = ((this.brickRowCount % 15) > 9);\n        console.log('不产生砖块：', bricksNoNew);\n\n        var winSize = cc.director.getWinSize();\n        this.newMapInfo(Global.brickUnit);\n\n        let col = Global.brickCol;\n        let row = n;\n\n        let unit = Global.brickUnit;\n\n        if (!Global.arrBrick) {\n            Global.arrBrick = [];\n        } else {\n            for (var i = 0; i < Global.brickRow; i++) {\n                for (var j = 0; j < col; j++) {\n                    if (Global.arrBrick[i] && Global.arrBrick[i][j]) {\n                        Global.arrBrick[i][j].setScale(1, 1);\n\n                        Global.arrBrick[i][j].setPosition(Global.arrBrick[i][j].position.x, Global.arrBrick[i][j].position.y - Global.brickDistance * n);\n\n                        if (Global.mapInfo[Math.floor((Global.zoneSize.height / 2 + Global.arrBrick[i][j].position.y) / unit)]) {\n                            Global.mapInfo[Math.floor((Global.zoneSize.height / 2 + Global.arrBrick[i][j].position.y) / unit)][Math.floor((Global.zoneSize.width / 2 + Global.arrBrick[i][j].position.x) / unit)] = 1;\n                        }\n                        Global.mapBricks[Math.floor((Global.zoneSize.height / 2 + Global.arrBrick[i][j].position.y) / unit)][Math.floor((Global.zoneSize.width / 2 + Global.arrBrick[i][j].position.x) / unit)] = Global.arrBrick[i][j];\n\n                        if (Global.arrBrick[i][j].position.y < 150 + this.warningTip.y) {\n                            //console.log(Global.arrBrick[i][j].position.y);\n                            if (Global.arrBrick[i][j].position.y < this.warningTip.y - 70) {\n                                //Global.ball = null;\n                                //console.log('游戏结束b', Global.ball);\n                                Global.main.game.waitRevive();\n                                return;\n                            } else {\n                                //console.log(\"warning\");\n                                // 显示\n                                this.warningTip._sgNode.setVisible(true);\n                                this.warningTip.runAction(cc.repeat(cc.sequence(cc.fadeIn(1), cc.fadeOut(1)), 3));\n                            }\n                        }\n                    }\n                }\n            }\n        }\n\n        if (bricksNoNew) return;\n\n        // 生成砖块\n        let generateProp = false;\n        let generatePropCol = 0;\n\n        let propStep = 2;\n        if (this.brickRowCount <= 50) {\n            propStep = 2;\n        } else if (this.brickRowCount > 50 && this.brickRowCount <= 100) {\n            propStep = 3;\n        } else if (this.brickRowCount > 100 && this.brickRowCount <= 150) {\n            propStep = 4;\n        } else if (this.brickRowCount > 150 && this.brickRowCount <= 200) {\n            propStep = 5;\n        } else if (this.brickRowCount > 200 && this.brickRowCount <= 250) {\n            propStep = 6;\n        } else if (this.brickRowCount > 250 && this.brickRowCount <= 300) {\n            propStep = 7;\n        }\n\n        for (var i = 0; i < row; i++) {\n            if (!Global.arrBrick[Global.brickRow + i]) {\n                Global.arrBrick[Global.brickRow + i] = [];\n            }\n\n            if ((Global.brickRow + i) % propStep == 1) {\n                generateProp = true;\n                generatePropCol = Math.floor(cc.random0To1() * col);\n            }\n\n            for (var j = 0; j < col; j++) {\n                // 使用给定的模板在场景中生成一个新节点\n                var newBrick = null;\n                if (this.brickPool.length > 0) {\n                    newBrick = this.brickPool.pop();\n                    //console.log(\"从对象池创建砖块\");\n                } else {\n                    newBrick = cc.instantiate(this.brickPrefab);\n                    this.node.addChild(newBrick);\n                    //console.log(\"从Prefab创建砖块\");\n                }\n\n                //this.node.addChild(newBrick);\n                //newBrick.active = true;\n                newBrick.setScale(1, 1);\n                //newBrick.setContentSize(8,8);\n                newBrick.setContentSize(Global.brickUnit * 0.8, Global.brickUnit * 0.8);\n                newBrick.setPosition(cc.p(j * Global.brickDistance - Global.zoneSize.width / 2 + newBrick.width / 2, Global.zoneSize.height / 2 - (row - i - 1) * Global.brickDistance - Global.topEdge - newBrick.height / 2));\n                Global.mapInfo[Math.floor((Global.zoneSize.height / 2 + newBrick.position.y) / unit)][Math.floor((Global.zoneSize.width / 2 + newBrick.position.x) / unit)] = 1;\n                Global.mapBricks[Math.floor((Global.zoneSize.height / 2 + newBrick.position.y) / unit)][Math.floor((Global.zoneSize.width / 2 + newBrick.position.x) / unit)] = newBrick;\n                //newBrick.color = Global.util.generateColorStrip(j/col);\n                //newBrick.color = Global.util.generateColorStrip2(j/Global.brickCol, 1);\n                newBrick.color = Global.util.generateColorStrip3(0);\n                /*\n                if (Global.colorArray && Global.colorArray[Global.colorIndex] && Global.colorArray[Global.colorIndex][j])\n                {\n                    newBrick.color = Global.colorArray[Global.colorIndex][j];\n                }*/\n                newBrick.i = i + Global.brickRow;\n                newBrick.j = j;\n                Global.arrBrick[newBrick.i][newBrick.j] = newBrick;\n\n                // 道具\n                if (generateProp && generatePropCol == j) {\n                    var randPropNum = cc.random0To1() * 9;\n                    //console.log('道具种类', randPropNum);\n                    if (randPropNum >= 0 && randPropNum < this.prop1Chances) {\n                        newBrick.getComponent(\"Brick\").setProp(2);\n                    } else if (randPropNum >= this.prop1Chances && randPropNum < this.prop1Chances + this.prop2Chances) {\n                        newBrick.getComponent(\"Brick\").setProp(3);\n                    } else if (randPropNum >= this.prop1Chances + this.prop2Chances && randPropNum < this.prop1Chances + this.prop2Chances + this.prop3Chances) {\n                        newBrick.getComponent(\"Brick\").setProp(4);\n                    }\n                    //newBrick.getComponent(\"Brick\").setProp(Math.floor(cc.rand() % 3 + 2));\n                    newBrick.color = cc.color(255, 255, 255);\n                    generateProp = false;\n                }\n\n                if (cc.random0To1() < 0.06) {\n                    newBrick.getComponent(\"Brick\").setStar();\n                }\n\n                //console.log(Global.arrBrick[Global.brickRow + i]);\n            }\n\n            Global.colorIndex++;\n            if (Global.colorIndex >= Global.colorArray.length) {\n                Global.colorIndex = 0;\n            }\n\n            //console.log(Global.arrBrick[Global.brickRow + i]);\n        }\n\n        Global.brickRow += n;\n    },\n\n    // 生成道具\n    newProp1: function (n, pos) {\n        let newProp = cc.instantiate(this.propPrefab);\n        this.node.addChild(newProp);\n        newProp.setContentSize(Global.brickUnit, Global.brickUnit);\n        newProp.setPosition(pos);\n        newProp.getComponent('Prop').setPropType(n);\n        Global.arrProp.push(newProp.getComponent('Prop'));\n    },\n\n    // 生成小球\n    newBalls1: function () {\n        for (var i = 0; i < 1; i++) {\n            let newBall = cc.instantiate(this.ballPrefab);\n            this.balls.addChild(newBall);\n            if (Global.skinBall) {\n                newBall.getComponent(cc.Sprite).spriteFrame = Global.skinBall;\n            }\n            // 为星星设置一个随机位置\n            newBall.setContentSize(Global.brickUnit * 0.8, Global.brickUnit * 0.8);\n            newBall.setPosition(cc.p(Global.paddleX, Global.paddleY + Global.paddleHeight / 2 + newBall.height / 2 + 5));\n            var vel_x = (cc.random0To1() > 0.5 ? -1 : 1) * (3 + 3 * cc.random0To1());\n\n            var ball = newBall.getComponent('Ball');\n            //ball.velocity = cc.p(vel_x, 3 + 1 * cc.random0To1());//(cc.p(-5, 6));\n            //console.log(ball.velocity);\n            //newBall.color = cc.color(255, 0, 0);\n            // 将 Game 组件的实例传入小球组件\n            ball.isRebound = true;\n            ball.index = Global.arrBall.length;\n            ball.x = newBall.position.x;\n            ball.y = newBall.position.y;\n            ball.width = newBall.width;\n            ball.height = newBall.height;\n            ball.initStreak(true, newBall.color);\n            Global.arrBall.push(ball);\n            Global.ball = ball;\n\n            if (Global.platformData.isMotionStreak) {\n                if (ball.motionNode == null) {\n                    var newMotionStreak = new cc.Node('layer');\n                    this.layer.addChild(newMotionStreak);\n                    var ms = newMotionStreak.addComponent(cc.MotionStreak);\n                    ball.motionNode = newMotionStreak;\n                }\n\n                ball.motionNode.getComponent(cc.MotionStreak).enabled = true;\n                ball.motionNode.getComponent(cc.MotionStreak).reset();\n                ball.motionNode.getComponent(cc.MotionStreak).texture = Global.main.textureBall1;\n                if (Global.skinStreak) {\n                    ball.motionNode.getComponent(cc.MotionStreak).texture = Global.skinStreak.getTexture();\n                }\n\n                ball.motionNode.getComponent(cc.MotionStreak).stroke = newBall.width; //8;\n                ball.motionNode.getComponent(cc.MotionStreak).color = newBall.color;\n                ball.motionNode.getComponent(cc.MotionStreak).fadeTime = 0.5;\n            }\n        }\n        //Global.ball = newBall.getComponent('Ball');\n    },\n\n    // 根据位置、速度、颜色生成小球，第三种方法，对象池\n    newBall1: function (pos, vel, color, isMotionStreak, isRebound) {\n        let newBall = null;\n        if (this.ballPool.length > 0) {\n            newBall = this.ballPool.pop();\n            //console.log(\"从对象池创建\");\n        } else {\n            newBall = cc.instantiate(this.ballPrefab);\n            this.balls.addChild(newBall);\n            //console.log(\"从Prefab创建\");\n        }\n\n        //this.balls.addChild(newBall);\n        newBall.setContentSize(Global.brickUnit * 0.4, Global.brickUnit * 0.4);\n        newBall.setPosition(pos);\n        var ball = newBall.getComponent('Ball');\n        ball.velocity = vel;\n        newBall.color = cc.hexToColor(Global.util.lightenDarkenColor(cc.colorToHex(color), -50)); //color;\n        ball.isRebound = isRebound;\n        ball.index = Global.arrBall.length;\n        ball.width = newBall.width;\n        ball.height = newBall.height;\n        ball.x = pos.x;\n        ball.y = pos.y;\n        //ball.isStreak = isMotionStreak;\n        ball.initStreak(isMotionStreak, newBall.color);\n        Global.arrBall.push(ball);\n\n        /*\n        if (isMotionStreak) {\n            var ms = newBall.addComponent(cc.MotionStreak);\n            ms.fadeTime = 0.5;\n        }        \n\n        \n        if (newBall.getComponent(cc.MotionStreak)) {\n            if (isMotionStreak) {\n                newBall.getComponent(cc.MotionStreak).enabled = true;\n            }\n            else {\n                newBall.getComponent(cc.MotionStreak).enabled = false;\n            }\n\n            if (!Global.motionStreakEnabled) {\n                newBall.getComponent(cc.MotionStreak).enabled = false;\n            }\n            newBall.getComponent(cc.MotionStreak).reset();\n            newBall.getComponent(cc.MotionStreak).texture = Global.main.textureBall1;\n            newBall.getComponent(cc.MotionStreak).stroke = newBall.width;//8;\n            newBall.getComponent(cc.MotionStreak).color = newBall.color;\n        }\n        */\n\n\n\n\n        if (Global.platformData.isMotionStreak && isMotionStreak) {\n            if (ball.motionNode == null) {\n                var newMotionStreak = new cc.Node('layer');\n                this.layer.addChild(newMotionStreak);\n                var ms = newMotionStreak.addComponent(cc.MotionStreak);\n                ball.motionNode = newMotionStreak;\n            }\n\n            ball.motionNode.getComponent(cc.MotionStreak).enabled = true;\n            ball.motionNode.getComponent(cc.MotionStreak).reset();\n            ball.motionNode.getComponent(cc.MotionStreak).texture = Global.main.textureBall1;\n            ball.motionNode.getComponent(cc.MotionStreak).stroke = newBall.width; //8;\n            ball.motionNode.getComponent(cc.MotionStreak).color = newBall.color;\n            ball.motionNode.getComponent(cc.MotionStreak).fadeTime = Global.platformData.fadeTime;\n            ball.motionNode.getComponent(cc.MotionStreak).fastMode = true;\n            ball.motionNode.getComponent(cc.MotionStreak).minSeg = 3;\n        } else {\n            if (ball.motionNode != null) {\n                ball.motionNode.removeComponent(cc.MotionStreak);\n                ball.motionNode = null;\n            }\n        }\n\n\n        //newBall.active = true;\n        newBall.setScale(1, 1);\n    },\n\n    // 加入图片像素到颜色方案\n    addImageToColorArray1: function (imagefile) {\n        //console.log(\"addImageToColorArray\");\n        // 获取图片像素数据\n        var arr1 = Global.main.getImageColorArray(imagefile);\n        var colorRow = 0;\n        var colorCol = 0;\n        if (arr1.length) {\n            colorRow = arr1.length;\n            if (arr1[0].length) {\n                colorCol = arr1[0].length;\n            }\n        }\n\n        var imageRow = Math.floor(colorRow * Global.brickCol / colorCol);\n        //console.log(colorRow, imageRow);\n        if (colorCol) {\n            for (var i = 0; i < imageRow; i++) {\n                if (!Global.colorArray[i + Global.colorIndex]) {\n                    Global.colorArray[i + Global.colorIndex] = [];\n                }\n\n                for (var j = 0; j < Global.brickCol; j++) {\n                    //console.log((imageRow-i-1)*Math.floor(colorRow/imageRow),arr1.length, imageRow, colorRow, colorCol);\n                    Global.colorArray[i + Global.colorIndex][j] = arr1[(imageRow - i - 1) * Math.floor(colorRow / imageRow)][j * Math.floor(colorCol / Global.brickCol)];\n                }\n            }\n            Global.colorIndex += imageRow;\n            //console.log(Global.colorIndex);\n        }\n    },\n\n    // 加入颜色条带到颜色方案\n    addStripToColorArray11: function (stripRow) {\n        for (var i = 0; i < stripRow; i++) {\n            if (!Global.colorArray[i + Global.colorIndex]) {\n                Global.colorArray[i + Global.colorIndex] = [];\n            }\n\n            for (var j = 0; j < Global.brickCol; j++) {\n                Global.colorArray[i + Global.colorIndex][j] = Global.util.generateColorStrip1(j / Global.brickCol);\n            }\n        }\n        Global.colorIndex += stripRow;\n        //console.log(Global.colorIndex);\n    },\n\n    // 加入颜色条带到颜色方案1\n    addStripToColorArray11: function (stripRow, stripCol, n) {\n        for (var i = 0; i < stripRow; i++) {\n            if (!Global.colorArray[i + Global.colorIndex]) {\n                Global.colorArray[i + Global.colorIndex] = [];\n            }\n        }\n\n        var colorBrick;\n        for (var i = 0; i < Global.brickCol; i++) {\n            if (i % 4 == 0) {\n                colorBrick = Global.util.generateColorStrip1(i / Global.brickCol, n);\n            }\n\n            for (var j = 0; j < stripRow; j++) {\n                Global.colorArray[j + Global.colorIndex][i] = colorBrick;\n            }\n        }\n\n        Global.colorIndex += stripRow;\n        //console.log(Global.colorIndex);\n    },\n\n    // 生成颜色方案数组\n    generateColorArray111: function () {\n        Global.colorArray = [];\n        Global.colorIndex = 0;\n\n        //this.addImageToColorArray(\"resources/2.png\");\n        //this.addStripToColorArray(10);\n        //this.addImageToColorArray(\"resources/4.jpg\");\n        //this.addStripToColorArray(10);\n        this.addStripToColorArray1(4, 4, 1);\n        this.addStripToColorArray1(4, 4, 2);\n        this.addStripToColorArray1(4, 4, 3);\n        this.addStripToColorArray1(4, 4, 4);\n        this.addStripToColorArray1(4, 4, 5);\n        this.addStripToColorArray1(4, 4, 6);\n        this.addStripToColorArray1(4, 4, 7);\n        this.addStripToColorArray1(4, 4, 8);\n        //this.addImageToColorArray(\"resources/brickbg1.png\");\n\n        //console.log(Global.colorArray);\n        Global.colorIndex = 0;\n    },\n\n    // 绘制点\n    drawPoint1: function (x, y, color, size) {\n        this.g.fillColor = color;\n        this.g.circle(x, y, size);\n        this.g.fill();\n    },\n\n    // 绘制直线\n    drawLine1: function (pt1, pt2, color, size) {\n        this.g.strokeColor = color;\n        this.g.lineWidth = size;\n        this.g.moveTo(pt1.x, pt1.y);\n        this.g.lineTo(pt2.x, pt2.y);\n    },\n\n    // 绘制小球拖尾\n    drawTail1: function () {\n        this.g.clear();\n        for (var x in Global.arrBall) {\n            // 获取小球颜色\n            var colorTail = Global.arrBall[x].node.color;\n            let colorTailMinValue = colorTail.getR() < colorTail.getG() ? colorTail.getR() : (colorTail.getG() < colorTail.getB() ? colorTail.getG() : colorTail.getB());\n            var colorTailHex = cc.colorToHex(colorTail);\n\n            // 获取小球宽度，根据宽度算出20次减到0需要的步长\n            var deltaSize = 0;\n            if (Global.arrBall[x].arrPoint.length > 0) {\n                deltaSize = Global.arrBall[x].node.width / 2 / Global.arrBall[x].arrPoint.length;\n            }\n\n            for (var i = 0; i < Global.arrBall[x].arrPoint.length; i++) {\n                // 调整颜色亮度\n                colorTailHex = Global.util.lightenDarkenColor(colorTailHex, -0.03 * colorTailMinValue);\n\n                this.drawPoint(Global.arrBall[x].arrPoint[i].x, Global.arrBall[x].arrPoint[i].y,\n                    cc.hexToColor(colorTailHex),\n                    Global.arrBall[x].node.width / 2 - i * deltaSize);\n                if (i + 1 < Global.arrBall[x].arrPoint.length) {\n\n                    this.drawPoint((Global.arrBall[x].arrPoint[i].x + Global.arrBall[x].arrPoint[i + 1].x) / 2, (Global.arrBall[x].arrPoint[i].y + Global.arrBall[x].arrPoint[i + 1].y) / 2,\n                        cc.hexToColor(colorTailHex),\n                        Global.arrBall[x].node.width / 2 - i * deltaSize);\n                }\n            }\n        }\n    },\n\n});"]}