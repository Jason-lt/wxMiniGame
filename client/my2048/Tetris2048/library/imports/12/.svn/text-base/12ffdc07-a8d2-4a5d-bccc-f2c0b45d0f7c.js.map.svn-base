{"version":3,"sources":["../../../../../assets/Scripts/ui/assets/Scripts/ui/UIPropInfo.js"],"names":["ThirdAPI","require","cc","Class","extends","Component","properties","mainNode","default","type","Node","successNode","gainPropIcon","Sprite","gainPropName","Label","light","propSprite","propName","propNum","propInfo","chest","title","labelBtn","isChest","showText","parmaIndex","gridControllerScript","randomIndex","closeTimer","start","initData","active","Global","gridController","getComponent","onPauseGameForOther","callback","callFunc","showChest","string","showChest1","randomProp","scale","spawnAction","sequence","scaleTo","runAction","playScale","spawn","node","setVisible","myUtil","randomForArray","randomPropCode","console","log","name","gameinfo","clearPropNum","superPropNum","doublePropNum","self","LoadAtlas","loadAtlasRes","spriteFrame","getSpriteFrameFromName","prop_parma","randomPropInfo","desc","color","Color","rect","getRect","width","height","onShargeGame","game","playSound","FBInstant","shareGame","getImgBase64","wx","sourceCode","img","onShareSuccess","bind","onShareFailed","openGId","shareTicket","cdnGameConfig","totalSwith","showDialogText","canvas","find","button","getChildByName","playLightAction","parseInt","gainAddPropNum","startUI","updateGold","showGold","addPropSprite","saveFriendGenStoneInfo","setPropSprite","setTimeout","onClose","msg","undefined","repeatForever","rotateBy","clearTimeout","parent","removeChild","propInfoUI"],"mappings":"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","file":"UIPropInfo.js","sourceRoot":"../../../../../assets/Scripts/ui","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\n\nlet ThirdAPI = require('../common/ThirdAPI')\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        mainNode: {\n            default: null,\n            type: cc.Node,\n        },\n        successNode: {\n            default: null,\n            type: cc.Node,\n        },\n        gainPropIcon: {\n            default: null,\n            type: cc.Sprite,\n        },\n        gainPropName: {\n            default: null,\n            type: cc.Label,\n        },\n        light: {\n            default: null,\n            type: cc.Sprite,\n        },\n        propSprite: {\n            default: null,\n            type: cc.Sprite,\n        },\n        propName: {\n            default: null,\n            type: cc.Label,\n        },\n        propNum: {\n            default: null,\n            type: cc.Label,\n        },\n        propInfo: {\n            default: null,\n            type: cc.Label,\n        },\n        chest: {\n            default: null,\n            type: cc.Sprite,\n        },\n        title: {\n            default: null,\n            type: cc.Label,\n        },\n        labelBtn: {\n            default: null,\n            type: cc.Label,\n        },\n        isChest: 1, //是否是宝箱\n        showText: '', //显示分享文字\n        parmaIndex: -1, //传入的索引\n        gridControllerScript: null,\n        randomIndex: 0, //随机道具索引\n        closeTimer: null,\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    // onLoad () {},\n\n    start() {\n\n    },\n\n    initData: function (isChest, showText, parmaIndex) {\n        this.mainNode.active = true;\n        this.successNode.active = false;\n\n        if (Global.gridController) {\n            this.gridControllerScript = Global.gridController.getComponent(\"gridController\");\n            this.gridControllerScript.onPauseGameForOther();\n        }\n\n        var callback = cc.callFunc(function () {\n            this.isChest = isChest;\n            this.showText = showText;\n            this.parmaIndex = parmaIndex;\n            if (this.isChest == 1) {\n                this.showChest();\n                this.title.string = \"获得免费宝箱\";\n                this.labelBtn.string = \"领取\";\n            } \n            else if (this.isChest == 2) {\n                this.showChest1();\n                this.title.string = \"宝箱\";\n                this.labelBtn.string = \"赠送\";\n            } \n            else if (this.isChest == 3) {\n                this.randomProp();\n                this.title.string = \"道具\";\n                this.labelBtn.string = \"赠送\";\n            }\n        }, this);\n\n        this.mainNode.scale = 0.5;\n        var spawnAction = cc.sequence(callback, cc.scaleTo(0.3, 1.08), cc.scaleTo(0.1, 1));\n        this.mainNode.runAction(spawnAction);\n    },\n\n    //动画\n    playScale: function () {\n        var callback = cc.callFunc(function () {\n            if (Global.gridController) {\n                this.gridControllerScript = Global.gridController.getComponent(\"gridController\");\n                this.gridControllerScript.onPauseGameForOther();\n            }\n            this.isChest = isChest;\n            this.showText = showText;\n            this.parmaIndex = parmaIndex;\n            if (this.isChest == 1) {\n                this.showChest();\n                this.title.string = \"获得免费宝箱\";\n                this.labelBtn.string = \"领取\";\n            } \n            else if (this.isChest == 2) {\n                this.showChest1();\n                this.title.string = \"宝箱\";\n                this.labelBtn.string = \"赠送\";\n            } \n            else if (this.isChest == 3) {\n                this.randomProp();\n                this.title.string = \"道具\";\n                this.labelBtn.string = \"赠送\";\n            }\n\n        }, this);\n        var spawnAction = cc.spawn(cc.sequence(cc.scaleTo(0, 0.5), cc.scaleTo(0.5, 1)));\n        this.node.runAction(spawnAction, callback);\n    },\n\n    //随机道具显示\n    randomProp: function () {\n        this.propSprite.setVisible(true);\n        this.chest.setVisible(false);\n        var myUtil = require('myUtil');\n        this.randomIndex = myUtil.randomForArray(Global.randomPropCode);\n        if (this.parmaIndex != -1) {\n            console.log('传入的道具索引：' + this.parmaIndex);\n            this.randomIndex = this.parmaIndex;\n        }\n        console.log('randomIndex:' + this.randomIndex);\n\n        var name = 'clear_spr';\n        var propNum = 0;\n        if (this.randomIndex == 0) {\n            name = 'chest_clesr';\n            propNum = Global.gameinfo.clearPropNum;\n        } else if (this.randomIndex == 1) {\n            name = 'chest_super';\n            propNum = Global.gameinfo.superPropNum;\n        } else if (this.randomIndex == 2) {\n            name = 'chest_double';\n            propNum = Global.gameinfo.doublePropNum;\n        }\n\n        var self = this;\n        var LoadAtlas = require(\"LoadAtlas\");\n        LoadAtlas.loadAtlasRes(\"textures/gridItem/items\", function () {\n            var LoadAtlas = require(\"LoadAtlas\");\n            self.propSprite.spriteFrame = LoadAtlas.getSpriteFrameFromName(\"textures/gridItem/items\", name);\n        });\n\n        //文字显示\n        var prop_parma = Global.randomPropInfo[self.randomIndex];\n        if (prop_parma) {\n            this.propName.string = prop_parma.name;\n            this.propInfo.string = prop_parma.desc;\n\n            this.propNum.string = 'x' + propNum;\n            if (propNum > 0) {\n                this.propNum.node.color = new cc.Color(158, 107, 70);\n            } else {\n                this.propNum.node.color = new cc.Color(204, 33, 33);\n            }\n        }\n    },\n\n    //显示宝箱弹框    \n    showChest: function () {\n        var self = this;\n        self.propSprite.setVisible(false);\n        self.chest.setVisible(true);\n        var myUtil = require('myUtil');\n        self.randomIndex = myUtil.randomForArray(Global.randomPropCode);\n        self.randomIndex = myUtil.randomForArray([0, 1]);\n        console.log('randomIndex:' + self.randomIndex);\n\n        var LoadAtlas = require(\"LoadAtlas\");\n        LoadAtlas.loadAtlasRes(\"textures/gridItem/items\", function () {\n            var LoadAtlas = require(\"LoadAtlas\");\n            self.chest.spriteFrame = LoadAtlas.getSpriteFrameFromName(\"textures/gridItem/items\", 'chest');\n\n            var rect = self.chest.spriteFrame.getRect();\n            self.chest.node.width = rect.width;\n            self.chest.node.height = rect.height;\n            self.chest.node.scale = 1;\n        });\n\n        this.propName.string = \"\";\n        this.propNum.string = \"\";\n\n        //文字显示\n        // var prop_parma = Global.randomPropInfo[self.randomIndex];\n        // if (prop_parma) {\n        //     if (this.showText && this.showText != '') {\n        //         self.propInfo.string = this.showText;\n        //     } else {\n        //         self.propInfo.string = prop_parma.name + '宝箱藏，送给群友尝一尝'; //'恭喜获得' + prop_parma.name + '宝箱！可以免费送给朋友们！';\n        //     }\n        // }\n        self.propInfo.string = '你真棒！合出了顶级数字\\n送你一个大礼包';\n    },\n\n    //显示宝箱弹框    \n    showChest1: function () {\n        var self = this;\n        self.propSprite.setVisible(false);\n        self.chest.setVisible(true);\n        var myUtil = require('myUtil');\n        self.randomIndex = myUtil.randomForArray(Global.randomPropCode);\n        self.randomIndex = myUtil.randomForArray([0, 1]);\n        console.log('randomIndex:' + self.randomIndex);\n\n        var LoadAtlas = require(\"LoadAtlas\");\n        LoadAtlas.loadAtlasRes(\"textures/gridItem/items\", function () {\n            var LoadAtlas = require(\"LoadAtlas\");\n            self.chest.spriteFrame = LoadAtlas.getSpriteFrameFromName(\"textures/gridItem/items\", 'chest');\n\n            var rect = self.chest.spriteFrame.getRect();\n            self.chest.node.width = rect.width;\n            self.chest.node.height = rect.height;\n            self.chest.node.scale = 1;\n        });\n\n        this.propName.string = \"\";\n        this.propNum.string = \"\";\n\n        //文字显示\n        // var prop_parma = Global.randomPropInfo[self.randomIndex];\n        // if (prop_parma) {\n        //     if (this.showText && this.showText != '') {\n        //         self.propInfo.string = this.showText;\n        //     } else {\n        //         self.propInfo.string = prop_parma.name + '宝箱藏，送给群友尝一尝'; //'恭喜获得' + prop_parma.name + '宝箱！可以免费送给朋友们！';\n        //     }\n        // }\n        self.propInfo.string = '恭喜获得一个宝箱！可以免费送给朋友们！';\n    },\n\n    onShargeGame: function () {\n        Global.game.playSound('btn', 0.1);\n        var myUtil = require('myUtil');\n        if (typeof FBInstant !== 'undefined') {\n            ThirdAPI.shareGame(myUtil.getImgBase64(), null);\n        } else if (typeof wx !== 'undefined') {\n            var sourceCode = '028';\n            var img = 'randomImg';\n            if (this.randomIndex == 0) {\n                sourceCode = '028';\n                img = '01';\n            } else if (this.randomIndex == 1) {\n                sourceCode = '029';\n                img = '02';\n            } else if (this.randomIndex == 2) {\n                sourceCode = '030';\n                img = '03';\n            } else if (this.randomIndex == 4) {\n                sourceCode = '137';\n                img = 'randomImg';\n            }\n            ThirdAPI.shareGame(img, this.onShareSuccess.bind(this), this.onShareFailed.bind(this), sourceCode);\n        } else {\n            console.log('测试分享');\n            this.onShareSuccess();\n        }\n    },\n\n    onShareSuccess: function (openGId, shareTicket) {\n\n        if (Global.cdnGameConfig.totalSwith) return;\n\n        //游戏过程中通过宝箱分享成功\n        if (typeof wx !== 'undefined') {\n            if (!shareTicket) {\n                Global.game.showDialogText('请分享到不同群！');\n                console.log('请分享到不同群！');\n                return;\n            }\n        }\n\n        //设置全屏的按钮\n        let canvas = cc.find('Canvas');\n        var button = this.successNode.getChildByName('button');\n        if (button) {\n            button.width = canvas.width;\n            button.width = canvas.width;\n        }\n        this.playLightAction();\n\n        this.mainNode.active = false;\n        this.successNode.active = true;\n        var prop_parma = Global.randomPropInfo[this.randomIndex];\n        console.log('分享成功', prop_parma.name, parseInt(prop_parma.gainAddPropNum));\n        //增加道具\n        if (prop_parma) {\n            if (this.randomIndex == 0) {\n                Global.gameinfo.clearPropNum += parseInt(prop_parma.gainAddPropNum);\n            } else if (this.randomIndex == 1) {\n                Global.gameinfo.superPropNum += parseInt(prop_parma.gainAddPropNum);\n            } else if (this.randomIndex == 2) {\n                Global.gameinfo.doublePropNum += parseInt(prop_parma.gainAddPropNum);\n            } else if (this.randomIndex == 4) {\n                Global.startUI.updateGold(parseInt(prop_parma.gainAddPropNum));\n                var gridController = Global.gridController.getComponent('gridController');\n                gridController.showGold();\n            }\n        }\n\n        if (prop_parma) {\n            var self = this;\n            var LoadAtlas = require(\"LoadAtlas\");\n            LoadAtlas.loadAtlasRes(\"textures/gridItem/items\", function () {\n                var LoadAtlas = require(\"LoadAtlas\");\n                self.gainPropIcon.spriteFrame = LoadAtlas.getSpriteFrameFromName(\"textures/gridItem/items\", prop_parma.addPropSprite);\n            });\n            self.gainPropName.string = prop_parma.name + 'x' + prop_parma.gainAddPropNum;\n        }\n        //存储本地数据\n        ThirdAPI.saveFriendGenStoneInfo(Global.gameinfo);\n        if (this.gridControllerScript) {\n            this.gridControllerScript.setPropSprite();\n        }\n        this.closeTimer = setTimeout(() => {\n            this.onClose();\n        }, 2000);\n    },\n\n    onShareFailed: function (msg) {\n        if (Global.cdnGameConfig.totalSwith) return;\n\n        if (msg === undefined) {\n            Global.game.showDialogText('请分享到不同群！');\n        } else if (msg == 'fail') {\n            Global.game.showDialogText('请分享到不同群！');\n        } else if (msg == 'cancel') {\n            Global.game.showDialogText('请分享到不同群！');\n        } else {\n            Global.game.showDialogText('请分享到不同群！');\n        }\n    },\n\n    playLightAction: function () {\n        this.light.node.runAction(\n            cc.repeatForever(\n                cc.sequence(cc.rotateBy(0.3, -90), cc.rotateBy(0.3, -90), cc.rotateBy(0.3, -90), cc.rotateBy(0.3, -90)))\n        );\n    },\n\n    // 按钮回调：关闭\n    onClose: function () {\n        Global.game.playSound('btn', 0.1);\n        // this.mainNode.stopAllActions();\n        // var callback = cc.callFunc(function () {\n        if (this.closeTimer !== null) {\n            clearTimeout(this.closeTimer);\n            this.closeTimer = null;\n        }\n        if (this.gridControllerScript) {\n            console.log('恢复游戏');\n            this.gridControllerScript.onPauseGameForOther();\n        }\n        if (this.node.parent) {\n            this.node.parent.removeChild(this.node);\n        }\n        if (Global.propInfoUI && Global.propInfoUI.node && Global.propInfoUI.node.parent) {\n            Global.propInfoUI.node.parent.removeChild(Global.propInfoUI.node);\n        }\n        Global.propInfoUI = null;\n        //     }, this);\n\n        //     var spawnAction = cc.sequence(cc.scaleTo(0.2, 0.7), callback);\n        //     this.mainNode.runAction(spawnAction);\n    },\n});"]}