{"version":3,"sources":["../../../../../assets/Scripts/ui/assets/Scripts/ui/startUI.js"],"names":["ThirdAPI","require","wxRewardVideoAd","cc","Class","extends","Component","properties","score","default","type","Label","icon","Sprite","bg","soundOnBtn","Node","soundOffBtn","gemStone","Prefab","friendBtn","friendBtnLabel","shareFriendState0","shareFriendState1","adBtn","goldNode","videoNode","spriteMoreGame","backgroundAudio","url","AudioClip","currentBGM","reddot","start","init","initAudio","updateBestScore","spriteFrame","getTexture","setAliasTexParameters","active","Global","isBGMPlaying","time","Date","getTime","gameinfo","shareTime","console","log","shareTotalTimes","dailyTotalTimes","cdnGameConfig","totalSwith","startScoreSwith","startScoreLimit","wxScore","canShow","shareTimes","canTakeShareReward","updateGold","moreGameRunAction","videoRunAction","videoData","Num","node","rotation","stopAllActions","runAction","repeatForever","sequence","rotateBy","delayTime","audioEngine","play","setLoop","setVolume","volume","getVolume","showChest","game","showPropDialog","showRedDot","ret","num","goldLabel","getChildByName","getComponent","string","wxGold","parseInt","wx","data","loadLocalScore","maxscore","gold","loadScore","saveScore","FBInstant","fbScore","onShareGame","playSound","pauseInterval","pauseInterval1","shareGame","getImgBase64","onShareSuccess","bind","onShareFail","showDialogText","x","y","testAd","initCreateReward","onAdSuccess","onclose","startContinueConutDown","times","myUtil","getSecondString","clearInterval","countDownInterval","setInterval","createGemstone","startContinueConutDown1","countDownInterval1","openGId","shareTicket","saveFriendGenStoneInfo","randomNum","Math","floor","random","addInterval","instance","instantiate","setPosition","p","addChild","pos","startUI","getPosition","toPosition","dialogForPropInfo","enterScene","showRankUI","showRank","onShowStore","showStore","onChallenge","shareUI","switchBGM","pauseBGM","playBGM","switchBGM1","isBGMPlaying1","resume","pause","onMoreGame","LinkImages","linkImages","length","index","random0To1","httpStr","previewImage","onVideo","videoCloseCallback","isEnded","createGemstone1"],"mappings":"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","file":"startUI.js","sourceRoot":"../../../../../assets/Scripts/ui","sourcesContent":["let ThirdAPI = require('../common/ThirdAPI')\nlet wxRewardVideoAd = require('../common/wxRewardVideoAd')\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        score: {\n            default: null,\n            type: cc.Label,\n        },\n        icon: {\n            default: null,\n            type: cc.Sprite,\n        },\n        bg: {\n            default: null,\n            type: cc.Sprite,\n        },\n        soundOnBtn: {\n            default: null,\n            type: cc.Node\n        },\n        soundOffBtn: {\n            default: null,\n            type: cc.Node\n        },\n        //随机钻石预设\n        gemStone: {\n            default: null,\n            type: cc.Prefab\n        },\n        friendBtn: {\n            default: null,\n            type: cc.Node\n        },\n        friendBtnLabel: {\n            default: null,\n            type: cc.Label\n        },\n\n        shareFriendState0: {\n            default: null,\n            type: cc.Node\n        },\n        shareFriendState1: {\n            default: null,\n            type: cc.Node\n        },\n        adBtn: {\n            default: null,\n            type: cc.Node\n        },\n        //金币节点\n        goldNode: {\n            default: null,\n            type: cc.Node\n        },\n        videoNode: {\n            default: null,\n            type: cc.Node,\n        },\n        spriteMoreGame: {\n            default: null,\n            type: cc.Sprite,\n        },\n        //背景音乐\n        backgroundAudio: {\n            url: cc.AudioClip,\n            default: null\n        },\n        currentBGM: -1,\n\n\n        // 红点\n        reddot: {\n            default: null,\n            type: cc.Node\n        },\n    },\n\n    start: function () {\n        this.init();\n        this.initAudio();\n        //this.reddot.active = false;\n    },\n\n    init: function () {\n        //ThirdAPI.showGameClub(true);\n        this.updateBestScore();\n        this.icon.spriteFrame.getTexture().setAliasTexParameters();\n        this.bg.spriteFrame.getTexture().setAliasTexParameters();\n        this.soundOnBtn.active = Global.isBGMPlaying;\n        this.soundOffBtn.active = !Global.isBGMPlaying;\n\n        //显示星星\n        var time = (new Date()).getTime() - Global.gameinfo.shareTime;\n        console.log(\"索取次数判断：\", Global.gameinfo.shareTotalTimes, Global.dailyTotalTimes, time);\n\n        //cdn判断\n        //总开关判断\n        /*\n        if (Global.cdnGameConfig.totalSwith) {\n            this.friendBtn.active = false;\n        } else {\n            //分数开关判断\n            if (Global.cdnGameConfig.startScoreSwith) {\n                //判断分数\n                console.log('判断分数：', Global.cdnGameConfig.startScoreLimit, Global.wxScore);\n                var canShow = Global.wxScore > Global.cdnGameConfig.startScoreLimit ? true : false;\n                console.log('首页索取按钮判断--canShow:', canShow, Global.gameinfo.shareTotalTimes, time);\n                this.friendBtn.active = (canShow && Global.gameinfo.shareTotalTimes < Global.dailyTotalTimes && time > Global.intervalTime) ? true : false;\n            } else {\n                console.log('设置好友索取按钮状态');\n                this.friendBtn.active = (Global.gameinfo.shareTotalTimes < Global.dailyTotalTimes && time > Global.intervalTime) ? true : false;\n            }\n        }\n        */\n        if (Global.cdnGameConfig.totalSwith) {\n            this.friendBtn.active = false;\n        } else {\n            //分数开关判断\n            if (Global.cdnGameConfig.startScoreSwith) {\n                //判断分数\n                console.log('判断分数：', Global.cdnGameConfig.startScoreLimit, Global.wxScore);\n                var canShow = Global.wxScore > Global.cdnGameConfig.startScoreLimit ? true : false;\n                console.log('首页索取按钮判断--canShow:', canShow, Global.gameinfo.shareTotalTimes, time);\n                this.friendBtn.active = (canShow) ? true : false;\n            } else {\n                console.log('设置好友索取按钮状态');\n                this.friendBtn.active = true;\n            }\n        }\n\n        console.log('------------------>分享次数:', Global.gameinfo.shareTimes, Global.dailyTotalTimes);\n        if (Global.gameinfo.shareTimes < Global.dailyTotalTimes) {\n            this.shareFriendState0.active = false;\n            this.shareFriendState1.active = true;\n            this.canTakeShareReward = true;\n        } else {\n            this.shareFriendState0.active = true;\n            this.shareFriendState1.active = false;\n            this.canTakeShareReward = false;\n        }\n\n        //this.friendBtn.active = (!Global.Gameversion && Global.gameinfo.shareTotalTimes < Global.dailyTotalTimes && time > Global.intervalTime) ? true : false;\n        this.updateGold(0);\n        this.moreGameRunAction();\n        this.videoRunAction();\n\n        this.videoNode.active = Global.gameinfo.videoData.Num < 3;\n    },\n\n    moreGameRunAction: function () {\n        this.spriteMoreGame.node.rotation = 0;\n        this.spriteMoreGame.node.stopAllActions();\n        this.spriteMoreGame.node.runAction(\n            cc.repeatForever(\n                cc.sequence(cc.rotateBy(0.1, 10), cc.rotateBy(0.2, -20), cc.rotateBy(0.2, 20), cc.rotateBy(0.2, -20), cc.rotateBy(0.1, 10), cc.delayTime(2)))\n        );\n    },\n    videoRunAction: function () {\n        this.videoNode.rotation = 0;\n        this.videoNode.stopAllActions();\n        this.videoNode.runAction(\n            cc.repeatForever(\n                cc.sequence(cc.rotateBy(0.1, 10), cc.rotateBy(0.2, -20), cc.rotateBy(0.2, 20), cc.rotateBy(0.2, -20), cc.rotateBy(0.1, 10), cc.delayTime(2)))\n        );\n    },\n\n    //初始化音乐\n    initAudio: function () {\n        this.currentBGM = cc.audioEngine.play(this.backgroundAudio, false, 0.2);\n        cc.audioEngine.setLoop(this.currentBGM, true);\n        cc.audioEngine.setVolume(this.currentBGM, 0.2);\n        var volume = cc.audioEngine.getVolume(this.currentBGM);\n        console.log('currentBGM volume is ' + volume);\n        Global.isBGMPlaying = true;\n    },\n\n    //宝箱赠送\n    showChest: function () {\n        Global.game.showPropDialog(2);\n    },\n\n    // 显示提示红点\n    showRedDot: function (ret) {\n        //this.reddot.active = ret;\n    },\n\n    //更新星星的数量\n    updateGold: function (num) {\n        var goldLabel = this.goldNode.getChildByName('label');\n        goldLabel.getComponent(cc.Label).string = Global.wxGold;\n\n        Global.wxGold += parseInt(num);\n        console.log('1 :' + num, Global.wxGold);\n        //更新并存储\n        if (typeof wx !== 'undefined') {\n            let data = ThirdAPI.loadLocalScore();\n            var score = parseInt(data.maxscore);\n            var gold = parseInt(data.gold);\n            ThirdAPI.loadScore((maxscore, gold) => {\n                score = parseInt(maxscore);\n                gold = parseInt(gold);\n                console.log('gridController on ThirdAPI loadScore', score, parseInt(gold), Global.wxGold);\n            });\n            ThirdAPI.saveScore(score, Global.wxGold);\n        }\n\n        var goldLabel = this.goldNode.getChildByName('label');\n        goldLabel.getComponent(cc.Label).string = Global.wxGold;\n    },\n\n    //更新分数\n    updateBestScore: function () {\n        if (typeof wx !== 'undefined') {\n            let data = ThirdAPI.loadLocalScore();\n            Global.wxScore = parseInt(data.maxscore);\n            Global.wxGold = parseInt(data.gold);\n            ThirdAPI.loadScore((maxscore, gold) => {\n                Global.wxScore = parseInt(maxscore);\n                Global.wxGold = parseInt(gold);\n                console.log('on ThirdAPI loadScore', Global.wxScore + \" :: \" + Global.wxGold);\n            });\n            this.score.string = \"最高分:\" + Global.wxScore;\n        } else if (typeof FBInstant !== 'undefined') {\n            this.score.string = \"High score:\" + Global.fbScore;\n        }\n    },\n\n    // 分享功能  intent(\"INVITE\" | \"REQUEST\" | \"CHALLENGE\" | \"SHARE\") 表示分享的意图\n    onShareGame: function () {\n        Global.game.playSound('btn', 0.1);\n\n\n        this.pauseInterval = true;\n        this.pauseInterval1 = true;\n\n        if (typeof FBInstant !== 'undefined') {\n            ThirdAPI.shareGame(this.getImgBase64(), this.onShareSuccess.bind(this));\n        } else if (typeof wx !== 'undefined') {\n            ThirdAPI.shareGame('randomImg', this.onShareSuccess.bind(this), this.onShareFail.bind(this), '003');\n            //wxRewardVideoAd.initCreateReward(this.onShareSuccess.bind(this));\n        } else {\n            Global.game.showDialogText('索取失败，必须分享到不同微信群', {\n                x: 0,\n                y: 20\n            });\n            this.onShareSuccess();\n        }\n    },\n\n    //测试广告\n    testAd: function () {\n        var wxRewardVideoAd = require('wxRewardVideoAd');\n        wxRewardVideoAd.initCreateReward(this.onAdSuccess.bind(this));\n    },\n\n    onclose: function () {\n        console.log('关闭广告');\n\n    },\n\n\n\n    //设置倒计时\n    startContinueConutDown: function () {\n        let times = 300;\n        let myUtil = require(\"myUtil\");\n\n        this.friendBtnLabel.string = '邀请好友' + myUtil.getSecondString(times);\n        this.pauseInterval = false;\n\n        clearInterval(this.countDownInterval);\n        this.countDownInterval = setInterval(() => {\n            if (!this.pauseInterval) {\n                times--;\n                if (times >= 0) {\n                    this.friendBtnLabel.string = '邀请好友' + myUtil.getSecondString(times);\n                } else {\n                    this.friendBtn.active = false;\n                    this.adBtn.active = true;\n                    clearInterval(this.countDownInterval);\n                }\n            }\n        }, 1000);\n    },\n\n    onAdSuccess: function () {\n        this.startContinueConutDown();\n        this.friendBtn.active = true; //(Global.gameinfo.shareTotalTimes < Global.dailyTotalTimes && time > Global.intervalTime) ? true : false;\n        this.adBtn.active = false;\n        console.log('adBtn' + this.adBtn.active + 'friendBtn' + this.friendBtn.active);\n        //钻石\n        this.createGemstone();\n    },\n\n    /*\n        onShareSuccess: function (openGId, shareTicket) {\n            if (typeof wx !== 'undefined') {\n                if (!shareTicket) {\n                    Global.game.showDialogText('索取失败，必须分享到不同微信群', {\n                        x: 0,\n                        y: 20\n                    });\n                    console.log('索取失败，必须分享到不同微信群');\n                    return;\n                }\n            }\n\n            if (Global.gameinfo.shareData1.arrOpenGId.indexOf(openGId) != -1) {\n                console.log('该群今日已经分享过', openGId);\n                Global.game.showDialogText('该群今日已经分享过无法获得奖励');\n                return;\n            } else {\n                console.log('该群未分享过', openGId);\n                Global.gameinfo.shareData1.arrOpenGId.push(openGId);\n                ThirdAPI.saveFriendGenStoneInfo(Global.gameinfo);\n            }\n\n            //判断是否是当日(向朋友索取),防止凌晨状态\n            console.log('startUI onshareSuccess:', Global.gameinfo.shareDate, (new Date()).toDateString())\n            if (Global.gameinfo.shareDate != (new Date()).toDateString()) {\n                var d = new Date(Date.now());\n                Global.gameinfo.shareTimes = 0;\n                Global.gameinfo.shareTotalTimes = 0;\n                Global.gameinfo.shareTime = 0;\n                Global.gameinfo.shareDate = d.toDateString();\n\n                Global.gameinfo.shareData1 = {\n                    shareDate: d.toDateString(),\n                    arrOpenGId: [],\n                };\n                Global.gameinfo.shareData2 = {\n                    shareDate: d.toDateString(),\n                    arrOpenGId: [],\n                };\n                Global.gameinfo.shareData3 = {\n                    shareDate: d.toDateString(),\n                    arrOpenGId: [],\n                };\n                ThirdAPI.loadFriendGenStoneInfo(Global.gameinfo);\n            }\n            Global.gameinfo.shareTimes++;\n\n            //先判断5次机会，再判断每日总次数3次\n            if (Global.gameinfo.shareTimes >= Global.getForTotalTimes) {\n                console.log('次数已满', Global.gameinfo.shareTimes);\n                //5次已满\n                Global.gameinfo.shareTimes = 0;\n                Global.gameinfo.shareTotalTimes++;\n                Global.gameinfo.shareTime = (new Date()).getTime();\n            }\n            ThirdAPI.saveFriendGenStoneInfo(Global.gameinfo);\n            var time = (new Date()).getTime() - Global.gameinfo.shareTime;\n            console.log('分享成功的时间：', new Date().getTime(), Global.gameinfo.shareTime, time);\n\n            this.pauseInterval = false;\n            clearInterval(this.countDownInterval);\n\n            console.log('shareTotalTimes:' + Global.gameinfo.shareTotalTimes);\n\n            this.friendBtn.active = false; //(Global.gameinfo.shareTotalTimes < Global.dailyTotalTimes && time > Global.intervalTime) ? true : false;\n            this.adBtn.active = true;\n            console.log('adBtn' + this.adBtn.active + 'friendBtn' + this.friendBtn.active);\n            //钻石\n            //this.createGemstone();\n        },\n    */\n\n    //设置倒计时\n    startContinueConutDown1: function () {\n        let times = 15 * 60;\n        let myUtil = require(\"myUtil\");\n\n        this.pauseInterval1 = false;\n\n        clearInterval(this.countDownInterval1);\n        this.countDownInterval1 = setInterval(() => {\n            if (!this.pauseInterval1) {\n                times--;\n                if (times >= 0) {\n                    //this.friendBtnLabel.string = '邀请好友' + myUtil.getSecondString(times);\n                } else {\n                    this.shareFriendState0.active = false;\n                    this.shareFriendState1.active = true;\n                    this.canTakeShareReward = true;\n                    clearInterval(this.countDownInterval1);\n                }\n            }\n        }, 1000);\n    },\n\n    onShareSuccess: function (openGId, shareTicket) {\n\n        if (!this.canTakeShareReward) {\n            \n            return;\n        }\n\n        if (typeof wx !== 'undefined') {\n            if (!shareTicket) {\n                Global.game.showDialogText('请分享到不同群！', {\n                    x: 0,\n                    y: 20\n                });\n                console.log('索取失败，必须分享到微信群');\n                return;\n            }\n        }\n\n        if (Global.gameinfo.shareTimes < Global.dailyTotalTimes) {\n            Global.gameinfo.shareTimes++;\n            ThirdAPI.saveFriendGenStoneInfo(Global.gameinfo);\n\n            //钻石\n            this.createGemstone();\n        } else {\n            //Global.game.showDialogText('当日得钻数量已达上限！');\n        }\n\n        this.shareFriendState0.active = true;\n        this.shareFriendState1.active = false;\n        this.canTakeShareReward = false;\n\n        console.log('------------------>分享次数:', Global.gameinfo.shareTimes, Global.dailyTotalTimes);\n        if (Global.gameinfo.shareTimes < Global.dailyTotalTimes) {\n            this.startContinueConutDown1();\n        }\n    },\n\n    //分享到群失败\n    onShareFail: function () {\n        console.log('向好友索取失败');\n        Global.game.showDialogText('请分享到不同群！');\n\n        this.pauseInterval = false;\n        this.pauseInterval1 = false;\n    },\n\n\n    //创建随机掉落的钻石\n    createGemstone: function () {\n        var myUtil = require('myUtil');\n        var randomNum = 5; //myUtil.randomForArray(Global.randomGemStone);\n        /*  for (let i = 0; i < randomNum; i++) {\n              var instance = cc.instantiate(this.gemStone);\n              var posX = myUtil.randomForMinAndMax(-Global.screenHeight / 2 + 100, Global.screenHeight / 2 - 100);\n              var posY = myUtil.randomForMinAndMax(-Global.screenWidth / 2 + 100, Global.screenWidth / 2 - 100);\n              console.log('gemStone pos:', posX, posY);\n              instance.setPosition(cc.p(0, 0));\n              //instance.setPosition(cc.p(0, Global.screenHeight / 2 + 50));\n              //var action = cc.moveTo(2, cc.p(posX, posY)).easing(cc.easeElasticOut(1));\n              this.node.addChild(instance);\n              var pos = Global.startUI.goldNode.getPosition();\n              //var addNum = (i == randomNum - 1) ? 30 - randomNum : 1;\n              instance.getComponent('getGemStone').toRepeat([pos.x, pos.y], 1);\n              //instance.runAction(action);\n          }*/\n\n        //var times = 30;\n        var times = Math.floor(Math.random() * 4 + 1) * 5;\n        clearInterval(this.addInterval);\n        this.addInterval = setInterval(() => {\n            times -= 5;\n            if (times >= 0) {\n                var instance = cc.instantiate(this.gemStone);\n                instance.setPosition(cc.p(0, 0));\n                this.node.addChild(instance);\n                var pos = Global.startUI.goldNode.getPosition();\n                instance.getComponent('getGemStone').toPosition([pos.x, pos.y], 1);\n            } else {\n                clearInterval(this.addInterval);\n            }\n        }, 300);\n\n    },\n\n    //弹出道具详情\n    dialogForPropInfo: function () {\n        Global.game.showDialogText('恭喜获得双倍道具一个！回赠给好友一个吧！');\n        //setTimeout(() => {\n        //    Global.game.showPropDialog(true, \"恭喜获得双倍道具一个！回赠给好友一个吧！\");\n\n        //}, 500);\n\n    },\n\n    //进入游戏\n    play: function () {\n        Global.game.playSound('btn', 0.1);\n        Global.game.enterScene();\n    },\n\n    //进入排行榜\n    showRankUI: function () {\n        Global.game.playSound('btn', 0.1);\n        Global.game.showRank();\n    },\n\n    //皮肤商城\n    onShowStore: function () {\n        Global.game.playSound('btn', 0.1);\n        /*\n        if (typeof FBInstant !== 'undefined') {\n            ThirdAPI.shareGame(this.getImgBase64());\n        } else {\n            ThirdAPI.shareGame();\n        }*/\n        //Global.game.showStore();\n        //Global.game.showTitle();\n        Global.game.showStore();\n    },\n\n    //pk竞技\n    onChallenge: function () {\n        Global.game.playSound('btn', 0.1);\n        Global.shareUI.onChallenge();\n    },\n\n    switchBGM: function () {\n        Global.game.playSound('btn', 0.1);\n        if (Global.isBGMPlaying) {\n            this.pauseBGM();\n            // this.soundOnBtn.active = false;\n            // this.soundOffBtn.active = true;\n        } else {\n            this.playBGM();\n            // this.soundOnBtn.active = true;\n            // this.soundOffBtn.active = false;\n        }\n        Global.isBGMPlaying = !Global.isBGMPlaying;\n    },\n\n    switchBGM1: function () {\n        Global.game.playSound('btn', 0.1);\n        if (Global.isBGMPlaying1) {\n            this.pauseBGM();\n            this.soundOnBtn.active = false;\n            this.soundOffBtn.active = true;\n        } else {\n            this.playBGM();\n            this.soundOnBtn.active = true;\n            this.soundOffBtn.active = false;\n        }\n        Global.isBGMPlaying1 = !Global.isBGMPlaying1;\n    },\n\n    playBGM: function () {\n        if (this.currentBGM > -1) {\n            cc.audioEngine.resume(this.currentBGM);\n        }\n    },\n\n    pauseBGM: function () {\n        if (this.currentBGM > -1) {\n            cc.audioEngine.pause(this.currentBGM);\n        }\n    },\n\n    // 按钮回调：更多游戏\n    onMoreGame: function () {\n        Global.game.playSound('btn', 0.1);\n        var LinkImages = require('LinkImages');\n\n        if (Global.linkImages && Global.linkImages.length > 0) {\n            console.log('link image : ', Global.linkImages, Global.linkImages.length);\n\n            let index = Math.floor(cc.random0To1() * Global.linkImages.length);\n            var httpStr = Global.linkImages[index];\n            console.log('httpStr:', httpStr);\n            LinkImages.previewImage(httpStr);\n        }\n    },\n\n    onVideo: function () {\n        let wxRewardVideoAd = require('wxRewardVideoAd');\n        wxRewardVideoAd.initCreateReward(this.videoCloseCallback.bind(this));\n    },\n\n    videoCloseCallback: function (isEnded) {\n        console.log('===========>广告是否看完：', isEnded);\n        if (isEnded) {\n            if (Global.gameinfo.videoData.Num < 3) {\n                Global.gameinfo.videoData.Num++;\n                ThirdAPI.saveFriendGenStoneInfo(Global.gameinfo);\n\n                this.createGemstone1();\n\n                if (Global.gameinfo.videoData.Num >= 3) {\n                    this.videoNode.active = false;\n                }\n            } else {\n                Global.game.showDialogText('领取钻石次数已达上限!');\n            }\n        }\n    },\n\n    //创建随机掉落的钻石\n    createGemstone1: function () {\n        var myUtil = require('myUtil');\n        var randomNum = 5; //myUtil.randomForArray(Global.randomGemStone);\n        /*  for (let i = 0; i < randomNum; i++) {\n              var instance = cc.instantiate(this.gemStone);\n              var posX = myUtil.randomForMinAndMax(-Global.screenHeight / 2 + 100, Global.screenHeight / 2 - 100);\n              var posY = myUtil.randomForMinAndMax(-Global.screenWidth / 2 + 100, Global.screenWidth / 2 - 100);\n              console.log('gemStone pos:', posX, posY);\n              instance.setPosition(cc.p(0, 0));\n              //instance.setPosition(cc.p(0, Global.screenHeight / 2 + 50));\n              //var action = cc.moveTo(2, cc.p(posX, posY)).easing(cc.easeElasticOut(1));\n              this.node.addChild(instance);\n              var pos = Global.startUI.goldNode.getPosition();\n              //var addNum = (i == randomNum - 1) ? 30 - randomNum : 1;\n              instance.getComponent('getGemStone').toRepeat([pos.x, pos.y], 1);\n              //instance.runAction(action);\n          }*/\n\n        var times = 30;\n        //var times = Math.floor(Math.random()*4+1)*5;\n        clearInterval(this.addInterval);\n        this.addInterval = setInterval(() => {\n            times -= 5;\n            if (times >= 0) {\n                var instance = cc.instantiate(this.gemStone);\n                instance.setPosition(cc.p(0, 0));\n                this.node.addChild(instance);\n                var pos = Global.startUI.goldNode.getPosition();\n                instance.getComponent('getGemStone').toPosition([pos.x, pos.y], 5);\n            } else {\n                clearInterval(this.addInterval);\n            }\n        }, 300);\n\n    },\n});"]}