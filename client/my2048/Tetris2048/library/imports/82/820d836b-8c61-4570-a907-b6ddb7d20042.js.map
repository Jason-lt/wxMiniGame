{"version":3,"sources":["../../../../../../assets/Scripts/common/gamesdk/assets/Scripts/common/gamesdk/gamesdk.min.js"],"names":["_interopRequireDefault","e","__esModule","default","_classCallCheck","a","TypeError","myLog","logStatus","console","log","JSON","stringify","http","t","Promise","n","r","o","wx","getStorageSync","request","url","_gamesdkConfig2","api","data","method","header","success","fail","Checkparam","getErrparamData","code","msg","gameLogin","login","appId","then","setStorageSync","openId","isNeedUpdateUserInfo","sessionId","i","getPlatForm","getSystemInfoSync","name","info","system","indexOf","length","substring","getCodeImg","coin","gameCoin","gameCoinName","param","codeBody","previewImage","current","urls","s","c","midasPay","res","orderCode","buyQuantity","checkOrder","requestMidasPayment","mode","env","offerId","currencyType","platform","zoneId","cancelPay","catch","timer","setInterval","waitOrderTime","clearInterval","getOrderStatus","pay_status","order_status","errObj","obj","defineProperty","exports","value","_createClass","enumerable","configurable","writable","Object","key","prototype","_gamesdkConfig","require","gameSdk","SDKVersion","getUserInfo","encryptedData","iv","authorize","createUserInfoButton","type","text","image","style","payType","purpose","time"],"mappings":"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","file":"gamesdk.min.js","sourceRoot":"../../../../../../assets/Scripts/common/gamesdk","sourcesContent":["\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,a){if(!(e instanceof a))throw new TypeError(\"Cannot call a class as a function\")}function myLog(e){logStatus&&console.log(\"\"+JSON.stringify(e))}function http(e,a,t){try{return new Promise(function(n,r){var o=wx.getStorageSync(\"sessionId\")||\"\";wx.request({url:_gamesdkConfig2.default.api+t,data:e,method:a,header:{\"content-type\":\"application/json\",\"session-id\":o},success:function(e){n(e.data)},fail:function(e){r(e)}})})}catch(e){myLog(e)}}function Checkparam(e){myLog(e);for(var a in e)if(null==e[a]||\"\"==e[a]||\"undefined\"==e[a])return-1;return 1}function getErrparamData(e){return myLog(e),{code:-10111,data:\"\",msg:e}}function gameLogin(e,a){try{wx.login({success:function(t){var n=t.code,r={code:n,appId:_gamesdkConfig2.default.appId};if(1==Checkparam(r))http(r,\"POST\",\"user/login\").then(function(t){0==t.code?(wx.setStorageSync(\"sdkopenid\",t.data.openId),t.data.isNeedUpdateUserInfo||(myLog(\"保存了sessionId\"+t.data.sessionId),wx.setStorageSync(\"sessionId\",t.data.sessionId)),e(t)):a(t)},function(e){a(e)});else{var o=\"前端检查参数不正确\"+JSON.stringify(r),i=getErrparamData(o);a(i)}},fail:function(e){a(e)}})}catch(e){a(e)}}function getPlatForm(){try{var e=wx.getSystemInfoSync();return myLog({name:\"当前设备\",info:e}),0==e.system.indexOf(\"iOS\")?\"ios\":0==e.system.indexOf(\"Android\")?\"android\":e.system.length>10?e.system.substring(0,10):e.system}catch(e){return myLog(e),\"error\"}}function getCodeImg(e,a,t,n,r,o){try{var i={openId:wx.getStorageSync(\"sdkopenid\"),appId:_gamesdkConfig2.default.appId,coin:e,gameCoin:a,gameCoinName:t,param:n};if(1==Checkparam(i)){http({codeBody:JSON.stringify(i)},\"POST\",\"gamepay/createWXACode\").then(function(e){var a=e.data;wx.previewImage({current:a,urls:[a],success:function(e){myLog(e),r(e)},fail:function(e){o(e)}})},function(e){o(e)})}else{var s=\"前端检查参数不正确\"+JSON.stringify(i),c=getErrparamData(s);o(c)}}catch(e){myLog(e)}}function midasPay(e,a,t){try{if(1==Checkparam(e))http(e,\"POST\",\"gamepay/addCoinOrder\").then(function(e){myLog({name:\"midasPay\",res:e}),console.log(e);var n=e.data;orderCode=e.data.orderCode;var r=e.data.buyQuantity;0==r?checkOrder(a,t):wx.requestMidasPayment({mode:n.mode,env:n.env,offerId:n.offerId,currencyType:n.currencyType,platform:n.platform,buyQuantity:r,zoneId:n.zoneId,success:function(e){myLog({name:\"成功回调\",res:e}),checkOrder(a,t)},fail:function(e){myLog(\"用户取消支付\"),cancelPay(a,t)}})}).catch(function(e){myLog(e)});else{var n=\"前端检查参数不正确\"+JSON.stringify(e),r=getErrparamData(n);t(r)}}catch(e){t(e)}}function checkOrder(e,a){try{timer=setInterval(function(){var t=wx.getStorageSync(\"sessionId\");if(myLog(\"订单号:\"+orderCode+\"--appId:\"+_gamesdkConfig2.default.appId+\"--sessionId:\"+t),waitOrderTime>120){myLog(\"state=5\"),clearInterval(timer);var n=getOrderStatus(10400);e(n)}http(\"\",\"GET\",\"gamepay/getCoinOrderStatus?orderCode=\"+orderCode+\"&appId=\"+_gamesdkConfig2.default.appId).then(function(t){myLog({name:\"成功回调\",\"回调参数\":t});var n=t.data;if(0==t.code){if(1==n.pay_status){myLog(\"state=1\"),clearInterval(timer);var r=getOrderStatus(10401);e(r)}else 0==n.pay_status&&(myLog(\"state=0\"),waitOrderTime+=1);if(2==n.order_status){myLog(\"state=2\"),clearInterval(timer);var o=getOrderStatus(10402);a(o)}}else myLog(\"state=3\"),clearInterval(timer),a(t)}).catch(function(e){myLog({name:\"错误回调\",\"回调参数\":e}),myLog(\"state=4\"),clearInterval(timer),a(errObj)})},1e3)}catch(e){a(e)}}function getOrderStatus(e){try{var a={code:\"\",data:\"\",msg:\"\"};return 10400==e?(a.code=e,a.msg=\"支付成功，到账可能延迟\"):10401==e?(a.code=e,a.msg=\"支付成功\"):10402==e&&(a.code=e,a.msg=\"订单被取消\"),myLog({name:\"订单状态\",obj:a}),a}catch(a){var t={code:\"\",data:\"\",msg:\"\"};return 10400==e?(t.code=e,t.msg=\"支付成功，到账可能延迟\"):10401==e?(t.code=e,t.msg=\"支付成功\"):10402==e&&(t.code=e,t.msg=\"订单被取消\"),myLog({name:\"订单状态\",obj:t}),t}}function cancelPay(e,a){var t={orderCode:orderCode},n={data:\"\",code:10405,msg:\"用户点击了取消\"};http(t,\"POST\",\"gamepay/cancelCoinOrder\").then(function(e){a(n)},function(e){a(n)})}Object.defineProperty(exports,\"__esModule\",{value:!0});var _createClass=function(){function e(e,a){for(var t=0;t<a.length;t++){var n=a[t];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(a,t,n){return t&&e(a.prototype,t),n&&e(a,n),a}}(),_gamesdkConfig=require(\"./gamesdk.config.js\"),_gamesdkConfig2=_interopRequireDefault(_gamesdkConfig),logStatus=!0,timer=null,orderCode=\"\",waitOrderTime=1,gameSdk=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:\"createUserInfoBtn\",value:function(e,a,t,n,r,o){try{var i=this;if(wx.getSystemInfoSync().SDKVersion<\"2.0.6\")return void wx.getUserInfo({success:function(e){var a={encryptedData:e.encryptedData,iv:e.iv};i.authorize(a,r,o)},fail:function(e){o(e)}});var s=wx.createUserInfoButton({type:e,text:a,image:t,style:n});r({code:1,data:s,msg:\"success\"})}catch(e){o(e)}}},{key:\"pay\",value:function(e,a,t,n,r,o){try{var i=getPlatForm();http(\"\",\"GET\",\"gamepay/getGamePayType?os=\"+i+\"&appId=\"+_gamesdkConfig2.default.appId).then(function(i){myLog(i);var s=i.data;if(\"wxpay\"==s)getCodeImg(e,a,t,n,r,o);else if(\"midas\"==s){myLog(\"midasPay\");var c={coin:e,gameCoinName:t,gameCoin:a,param:n,payType:\"midas\",purpose:2,appId:_gamesdkConfig2.default.appId};midasPay(c,r,o)}else\"none\"==s?myLog(\"pay none\"):o(i)},function(e){o(e)})}catch(e){o(e)}}},{key:\"login\",value:function(e,a){myLog({name:\"logName\",time:\"00:00\"}),gameLogin(e,a)}},{key:\"authorize\",value:function(e,a,t){try{var n=wx.getStorageSync(\"sdkopenid\"),r={encryptedData:e.encryptedData,iv:e.iv,openId:n,appId:_gamesdkConfig2.default.appId};if(1==Checkparam(r))http(r,\"POST\",\"user/update\").then(function(e){gameLogin(a,t)},function(e){t(e)});else{var o=\"前端检查参数不正确\"+JSON.stringify(r),i=getErrparamData(o);t(i)}}catch(e){t(e)}}}]),e}();exports.default=gameSdk;"]}